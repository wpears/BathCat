//>>built
define("dojox/gfx/Moveable",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","dojo/_base/event","dojo/_base/connect","dojo/dom-class","dojo/_base/window","./Mover"],function(_1,_2,_3,_4,_5,_6,_7,_8){return _2("dojox.gfx.Moveable",null,{constructor:function(_9,_a){this.shape=_9;this.delay=(_a&&_a.delay>0)?_a.delay:0;this.mover=(_a&&_a.mover)?_a.mover:_8;this.leftButtonOnly=_a&&_a.leftButtonOnly;this.events=[this.shape.connect("onmousedown",this,"onMouseDown"),this.shape.connect("ontouchstart",this,"onMouseDown")];},destroy:function(){_3.forEach(this.events,this.shape.disconnect,this.shape);this.events=this.shape=null;},onMouseDown:function(e){var _b=e.touches?e.touches[0]:e;if(this.delay){this.events.push(this.shape.connect("onmousemove",this,"onMouseMove"));this.events.push(this.shape.connect("ontouchmove",this,"onMouseMove"));this.events.push(this.shape.connect("onmouseup",this,"onMouseUp"));this.events.push(this.shape.connect("ontouchend",this,"onMouseUp"));this._lastX=_b.clientX;this._lastY=_b.clientY;}else{if(!this.leftButtonOnly||(_b.button===dojo.mouseButtons.LEFT)){new this.mover(this.shape,_b,this);}}_4.stop(e);},onMouseMove:function(e){var _c=e.touches?e.touches[0]:e;if(Math.abs(_c.clientX-this._lastX)>this.delay||Math.abs(_c.clientY-this._lastY)>this.delay){this.onMouseUp(e);new this.mover(this.shape,_c,this);}_4.stop(e);},onMouseUp:function(e){this.shape.disconnect(this.events.shift());this.shape.disconnect(this.events.shift());},onMoveStart:function(_d){_5.publish("/gfx/move/start",[_d]);_6.add(_7.body(),"dojoMove");},onMoveStop:function(_e){_5.publish("/gfx/move/stop",[_e]);_6.remove(_7.body(),"dojoMove");},onFirstMove:function(_f){},onMove:function(_10,_11){this.onMoving(_10,_11);this.shape.applyLeftTransform(_11);this.onMoved(_10,_11);},onMoving:function(_12,_13){},onMoved:function(_14,_15){}});});