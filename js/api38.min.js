!function(e,t){var i,n,s=function(){},r=function(e){for(var t in e)return 0;return 1},o={}.toString,a=function(e){return"[object Function]"==o.call(e)},l=function(e){return"[object String]"==o.call(e)},c=function(e){return"[object Array]"==o.call(e)},h=function(e,t){if(e)for(var i=0;e[i];)t(e[i++])},d=function(e,t){for(var i in t)e[i]=t[i];return e},u=function(e,t){return d(Error(e),{src:"dojoLoader",info:t})},f=1,p=function(){return"_"+f++},m=function(e,t,i){return lt(e,t,i,0,m)},_=this,g=_.document,y=g&&g.createElement("DiV"),v=m.has=function(e){return a(b[e])?b[e]=b[e](_,g,y):b[e]},b=v.cache=t.hasCache;v.add=function(e,t,i,n){return(void 0===b[e]||n)&&(b[e]=t),i&&v(e)};for(var x in e.has)v.add(x,e.has[x],0,1);var w,S=0,T=[],j=0,E=s,k=s;m.isXdUrl=s,m.initSyncLoader=function(e,t,i){return j||(j=e,E=t,k=i),{sync:"sync",requested:1,arrived:2,nonmodule:3,executing:4,executed:5,syncExecStack:T,modules:W,execQ:ht,getModule:St,injectModule:Vt,setArrived:pt,signal:P,finishExec:Pt,execModule:Ot,dojoRequirePlugin:j,getLegacyMode:function(){return S},guardCheckComplete:Ut}};var C=location.protocol,M=location.host;if(m.isXdUrl=function(e){return/^\./.test(e)?!1:/^\/\//.test(e)?!0:(e=e.match(/^([^\/\:]+\:)\/+([^\/]+)/))&&(e[1]!=C||M&&e[2]!=M)},v.add("dojo-force-activex-xhr",!g.addEventListener&&"file:"==window.location.protocol),v.add("native-xhr","undefined"!=typeof XMLHttpRequest),v("native-xhr")&&!v("dojo-force-activex-xhr"))w=function(){return new XMLHttpRequest};else{var D,L=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"];for(i=0;3>i;)try{if(D=L[i++],new ActiveXObject(D))break}catch(R){}w=function(){return new ActiveXObject(D)}}m.getXhr=w,v.add("dojo-gettext-api",1),m.getText=function(e,t,i){var n=w();if(n.open("GET",zt(e),!1),n.send(null),200!=n.status&&(location.host||n.status))throw u("xhrFailed",n.status);return i&&i(n.responseText,t),n.responseText};var I=new Function("return eval(arguments[0]);");m.eval=function(e,t){return I(e+"\r\n////@ sourceURL="+t)};var A={},P=m.signal=function(e,t){var i=A[e];h(i&&i.slice(0),function(e){e.apply(null,c(t)?t:[t])})},N=m.on=function(e,t){var i=A[e]||(A[e]=[]);return i.push(t),{remove:function(){for(var e=0;e<i.length;e++)if(i[e]===t){i.splice(e,1);break}}}},O=[],H={},U=[],F={},z=m.map={},B=[],W={},q="",J={},G={},V={},Y=0,X=function(e){var t,i,n,s;for(t in G)i=G[t],(n=t.match(/^url\:(.+)/))?J["url:"+jt(n[1],e)]=i:"*now"==t?s=i:"*noref"!=t&&(n=bt(t,e),J[n.mid]=J["url:"+n.url]=i);s&&s(ct(e)),G={}},Z=function(e){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(e){return"\\"+e})},K=function(e,t){t.splice(0,t.length);for(var i in e)t.push([i,e[i],RegExp("^"+Z(i)+"(/|$)"),i.length]);return t.sort(function(e,t){return t[3]-e[3]}),t},$=function(e,t){h(e,function(e){t.push([l(e[0])?RegExp("^"+Z(e[0])+"$"):e[0],e[1]])})},Q=function(e){var t=e.name;t||(t=e,e={name:t}),e=d({main:"main"},e),e.location=e.location?e.location:t,e.packageMap&&(z[t]=e.packageMap),e.main.indexOf("./")||(e.main=e.main.substring(2)),F[t]=e},et=[],tt=function(e,t,i){for(var s in e){if("waitSeconds"==s&&(m.waitms=1e3*(e[s]||0)),"cacheBust"==s&&(q=e[s]?l(e[s])?e[s]:(new Date).getTime()+"":""),("baseUrl"==s||"combo"==s)&&(m[s]=e[s]),"async"==s){var r=e[s];m.legacyMode=S=l(r)&&/sync|legacyAsync/.test(r)?r:r?!1:"sync",m.async=!S}e[s]!==b&&(m.rawConfig[s]=e[s],"has"!=s&&v.add("config-"+s,e[s],0,t))}m.baseUrl||(m.baseUrl="./"),/\/$/.test(m.baseUrl)||(m.baseUrl+="/");for(s in e.has)v.add(s,e.has[s],0,t);h(e.packages,Q);for(n in e.packagePaths)h(e.packagePaths[n],function(e){var t=n+"/"+e;l(e)&&(e={name:e}),e.location=t,Q(e)});if(K(d(z,e.map),B),h(B,function(e){e[1]=K(e[1],[]),"*"==e[0]&&(B.star=e)}),K(d(H,e.paths),U),$(e.aliases,O),t)et.push({config:e.config});else for(s in e.config)t=St(s,i),t.config=d(t.config||{},e.config[s]);e.cache&&(X(),G=e.cache,e.cache["*noref"]&&X()),P("config",[e,m.rawConfig])};v("dojo-cdn");var it=g.getElementsByTagName("script");i=0;for(var nt,st,rt,ot;i<it.length;)nt=it[i++],(rt=nt.getAttribute("src"))&&(ot=rt.match(/(((.*)\/)|^)dojo\.js(\W|$)/i))&&(st=ot[3]||"",t.baseUrl=t.baseUrl||st,Y=nt),(rt=nt.getAttribute("data-dojo-config")||nt.getAttribute("djConfig"))&&(V=m.eval("({ "+rt+" })","data-dojo-config"),Y=nt);m.rawConfig={},tt(t,1),v("dojo-cdn")&&((F.dojo.location=st)&&(st+="/"),F.dijit.location=st+"../dijit/",F.dojox.location=st+"../dojox/"),tt(e,1),tt(V,1);var at=function(e){Ut(function(){h(e.deps,Vt)})},lt=function(e,t,i,n,r){var o;if(l(e)){if((o=St(e,n,!0))&&o.executed)return o.result;throw u("undefinedModule",e)}if(c(e)||(tt(e,0,n),e=t,t=i),c(e))if(e.length){i="require*"+p();for(var a,h=[],f=0;f<e.length;)a=e[f++],h.push(St(a,n));o=d(yt("",i,0,""),{injected:2,deps:h,def:t||s,require:n?n.require:m,gc:1}),W[o.mid]=o,at(o);var _=Ht&&"sync"!=S;Ut(function(){Ot(o,_)}),o.executed||ht.push(o),Ft()}else t&&t();return r},ct=function(e){if(!e)return m;var t=e.require;return t||(t=function(i,n,s){return lt(i,n,s,e,t)},e.require=d(t,m),t.module=e,t.toUrl=function(t){return jt(t,e)},t.toAbsMid=function(t){return Tt(t,e)},v("dojo-undef-api")&&(t.undef=function(t){m.undef(t,e)}),t.syncLoadNls=function(t){t=bt(t,e);var i=W[t.mid];return i&&i.executed||(Wt=J[t.mid]||J["url:"+t.url])&&(Gt(Wt),i=W[t.mid]),i&&i.executed&&i.result}),t},ht=[],dt=[],ut={},ft=function(e){e.injected=1,ut[e.mid]=1,e.url&&(ut[e.url]=e.pack||1),$t()},pt=function(e){e.injected=2,delete ut[e.mid],e.url&&delete ut[e.url],r(ut)&&(Kt(),"xd"==S&&(S="sync"))},mt=m.idle=function(){return!dt.length&&r(ut)&&!ht.length&&!Ht},_t=function(e,t){if(t)for(var i=0;i<t.length;i++)if(t[i][2].test(e))return t[i];return 0},gt=function(e){var t,i,n=[];for(e=e.replace(/\\/g,"/").split("/");e.length;)t=e.shift(),".."==t&&n.length&&".."!=i?(n.pop(),i=n[n.length-1]):"."!=t&&n.push(i=t);return n.join("/")},yt=function(e,t,i,n){var s=m.isXdUrl(n);return{pid:e,mid:t,pack:i,url:n,executed:0,def:0,isXd:s,isAmd:!!(s||F[e]&&F[e].isAmd)}},vt=function(e,t,i,n,s,r,o,l,c){var d,f,p,m;if(m=/^\./.test(e),/(^\/)|(\:)|(\.js$)/.test(e)||m&&!t)return yt(0,e,0,e);if(e=gt(m?t.mid+"/../"+e:e),/^\./.test(e))throw u("irrationalPath",e);t&&(p=_t(t.mid,r)),(p=(p=p||r.star)&&_t(e,p[1]))&&(e=p[1]+e.substring(p[3])),t=(ot=e.match(/^([^\/]+)(\/(.+))?$/))?ot[1]:"",(d=i[t])?e=t+"/"+(f=ot[3]||d.main):t="";var _=0;return h(l,function(t){var i=e.match(t[0]);i&&0<i.length&&(_=a(t[1])?e.replace(t[0],t[1]):t[1])}),_?vt(_,0,i,n,s,r,o,l,c):(i=n[e])?c?yt(i.pid,i.mid,i.pack,i.url):n[e]:(n=(p=_t(e,o))?p[1]+e.substring(p[3]):t?d.location+"/"+f:v("config-tlmSiblingOfDojo")?"../"+e:e,/(^\/)|(\:)/.test(n)||(n=s+n),yt(t,e,d,gt(n+".js")))},bt=function(e,t){return vt(e,t,F,W,m.baseUrl,B,U,O)},xt=function(e,t,i){return e.normalize?e.normalize(t,function(e){return Tt(e,i)}):Tt(t,i)},wt=0,St=function(e,t,i){var n,s;return(n=e.match(/^(.+?)\!(.*)$/))?(s=St(n[1],t,i),"sync"==S&&!s.executed&&(Vt(s),2===s.injected&&!s.executed&&Ut(function(){Ot(s)}),s.executed?It(s):ht.unshift(s)),5===s.executed&&!s.load&&It(s),s.load?(n=xt(s,n[2],t),e=s.mid+"!"+(s.dynamic?++wt+"!":"")+n):(n=n[2],e=s.mid+"!"+ ++wt+"!waitingForPlugin"),e={plugin:s,mid:e,req:ct(t),prid:n}):e=bt(e,t),W[e.mid]||!i&&(W[e.mid]=e)},Tt=m.toAbsMid=function(e,t){return bt(e,t).mid},jt=m.toUrl=function(e,t){var i=bt(e+"/x",t),n=i.url;return zt(0===i.pid?e:n.substring(0,n.length-5))},Et={injected:2,executed:5,def:3,result:3},kt=function(e){return W[e]=d({mid:e},Et)},Ct=kt("require"),Mt=kt("exports"),Dt=kt("module"),Lt={},Rt=0,It=function(e){var t=e.result;return e.dynamic=t.dynamic,e.normalize=t.normalize,e.load=t.load,e},At=function(e){var t={};h(e.loadQ,function(i){var n=xt(e,i.prid,i.req.module),s=e.dynamic?i.mid.replace(/waitingForPlugin$/,n):e.mid+"!"+n,n=d(d({},i),{mid:s,prid:n,injected:0});W[s]||Bt(W[s]=n),t[i.mid]=W[s],pt(i),delete W[i.mid]}),e.loadQ=0;var i,n=function(e){for(var i=e.deps||[],n=0;n<i.length;n++)(e=t[i[n].mid])&&(i[n]=e)};for(i in W)n(W[i]);h(ht,n)},Pt=function(e){for(m.trace("loader-finish-exec",[e.mid]),e.executed=5,e.defOrder=Rt++,h(e.provides,function(e){e()}),e.loadQ&&(It(e),At(e)),i=0;i<ht.length;)ht[i]===e?ht.splice(i,1):i++;/^require\*/.test(e.mid)&&delete W[e.mid]},Nt=[],Ot=function(e,t){if(4===e.executed)return m.trace("loader-circular-dependency",[Nt.concat(e.mid).join("->")]),!e.def||t?Lt:e.cjs&&e.cjs.exports;if(!e.executed){if(!e.def)return Lt;var i,n=e.mid,s=e.deps||[],r=[],o=0;for(e.executed=4;i=s[o++];){if(i=i===Ct?ct(e):i===Mt?e.cjs.exports:i===Dt?e.cjs:Ot(i,t),i===Lt)return e.executed=0,m.trace("loader-exec-module",["abort",n]),Lt;r.push(i)}m.trace("loader-run-factory",[e.mid]);var l,n=e.def;if(T.unshift(e),v("config-dojo-loader-catches"))try{l=a(n)?n.apply(null,r):n}catch(c){P("error",e.result=u("factoryThrew",[e,c]))}else l=a(n)?n.apply(null,r):n;e.result=void 0===l&&e.cjs?e.cjs.exports:l,T.shift(e),Pt(e)}return e.result},Ht=0,Ut=function(e){try{Ht++,e()}finally{Ht--}mt()&&P("idle",[])},Ft=function(){Ht||Ut(function(){E();for(var e,t,i=0;i<ht.length;)e=Rt,t=ht[i],Ot(t),e!=Rt?(E(),i=0):i++})};v("dojo-undef-api")&&(m.undef=function(e,t){var i=St(e,t);pt(i),d(i,{def:0,executed:0,injected:0,node:0})}),void 0===v("dojo-loader-eval-hint-url")&&v.add("dojo-loader-eval-hint-url",1);var zt=function(e){return e+="",e+(q?(/\?/.test(e)?"&":"?")+q:"")},Bt=function(e){var t=e.plugin;5===t.executed&&!t.load&&It(t);var i=function(t){e.result=t,pt(e),Pt(e),Ft()};t.load?t.load(e.prid,e.req,i):t.loadQ?t.loadQ.push(e):(t.loadQ=[e],ht.unshift(t),Vt(t))},Wt=0,qt=0,Jt=0,Gt=function(e,t){if(v("config-stripStrict")&&(e=e.replace(/"use strict"/g,"")),Jt=1,v("config-dojo-loader-catches"))try{e===Wt?Wt.call(null):m.eval(e,v("dojo-loader-eval-hint-url")?t.url:t.mid)}catch(i){P("error",u("evalModuleThrew",t))}else e===Wt?Wt.call(null):m.eval(e,v("dojo-loader-eval-hint-url")?t.url:t.mid);Jt=0},Vt=function(e){var t=e.mid,i=e.url;if(!(e.executed||e.injected||ut[t]||e.url&&(e.pack&&ut[e.url]===e.pack||1==ut[e.url])))if(ft(e),e.plugin)Bt(e);else{var n=function(){if(Xt(e),2!==e.injected){if(v("dojo-enforceDefine"))return P("error",u("noDefine",e)),void 0;pt(e),d(e,Et),m.trace("loader-define-nonmodule",[e.url])}S?!T.length&&Ft():Ft()};if(Wt=J[t]||J["url:"+e.url])m.trace("loader-inject",["cache",e.mid,i]),Gt(Wt,e),n();else{if(S)if(e.isXd)"sync"==S&&(S="xd");else if(!e.isAmd||"sync"==S){var s=function(s){if("sync"==S){if(T.unshift(e),Gt(s,e),T.shift(),Xt(e),e.cjs||(pt(e),Pt(e)),e.finish){s=t+"*finish";var r=e.finish;delete e.finish,ti(s,["dojo",("dojo/require!"+r.join(",")).replace(/\./g,"/")],function(e){h(r,function(t){e.require(t)})}),ht.unshift(St(s))}n()}else(s=k(e,s))?(Gt(s,e),n()):(qt=e,m.injectUrl(zt(i),n,e),qt=0)};if(m.trace("loader-inject",["xhr",e.mid,i,"sync"!=S]),v("config-dojo-loader-catches"))try{m.getText(i,"sync"!=S,s)}catch(r){P("error",u("xhrInjectFailed",[e,r]))}else m.getText(i,"sync"!=S,s);return}m.trace("loader-inject",["script",e.mid,i]),qt=e,m.injectUrl(zt(i),n,e),qt=0}}},Yt=function(e,t,i){m.trace("loader-define-module",[e.mid,t]);var n=e.mid;if(2===e.injected)return P("error",u("multipleDefine",e)),e;d(e,{deps:t,def:i,cjs:{id:e.mid,uri:e.url,exports:e.result={},setExports:function(t){e.cjs.exports=t},config:function(){return e.config}}});for(var s=0;t[s];s++)t[s]=St(t[s],e);return S&&!ut[n]&&(at(e),ht.push(e),Ft()),pt(e),!a(i)&&!t.length&&(e.result=i,Pt(e)),e},Xt=function(e,t){for(var i,n,s=[];dt.length;)n=dt.shift(),t&&(n[0]=t.shift()),i=n[0]&&St(n[0])||e,s.push([i,n[1],n[2]]);X(e),h(s,function(e){at(Yt.apply(null,e))})},Zt=0,Kt=s,$t=s,Kt=function(){Zt&&clearTimeout(Zt),Zt=0},$t=function(){Kt(),m.waitms&&(Zt=window.setTimeout(function(){Kt(),P("error",u("timeout",ut))},m.waitms))};v.add("ie-event-behavior",g.attachEvent&&"undefined"==typeof Windows&&("undefined"==typeof opera||"[object Opera]"!=opera.toString()));var Qt=function(e,t,i,n){return v("ie-event-behavior")?(e.attachEvent(i,n),function(){e.detachEvent(i,n)}):(e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)})},ei=Qt(window,"load","onload",function(){m.pageLoaded=1,"complete"!=g.readyState&&(g.readyState="complete"),ei()}),it=g.getElementsByTagName("script");for(i=0;!Y;)/^dojo/.test((nt=it[i++])&&nt.type)||(Y=nt);m.injectUrl=function(e,t,i){i=i.node=g.createElement("script");var n=Qt(i,"load","onreadystatechange",function(e){e=e||window.event;var i=e.target||e.srcElement;("load"===e.type||/complete|loaded/.test(i.readyState))&&(n(),s(),t&&t())}),s=Qt(i,"error","onerror",function(t){n(),s(),P("error",u("scriptError",[e,t]))});return i.type="text/javascript",i.charset="utf-8",i.src=e,Y.parentNode.insertBefore(i,Y),i},m.log=function(){try{for(var e=0;e<arguments.length;e++)console.log(arguments[e])}catch(t){}},m.trace=s;var ti=function(e,t,i){var n=arguments.length,s=["require","exports","module"],r=[0,e,t];if(1==n?r=[0,a(e)?s:[],e]:2==n&&l(e)?r=[e,a(t)?s:[],t]:3==n&&(r=[e,t,i]),m.trace("loader-define",r.slice(0,2)),(n=r[0]&&St(r[0]))&&!ut[n.mid])at(Yt(n,r[1],r[2]));else if(!v("ie-event-behavior")||Jt)dt.push(r);else{if(n=n||qt,!n)for(e in ut)if((s=W[e])&&s.node&&"interactive"===s.node.readyState){n=s;break}n?(X(n),at(Yt(n,r[1],r[2]))):P("error",u("ieDefineFailed",r[0])),Ft()}};if(ti.amd={vendor:"dojotoolkit.org"},d(d(m,t.loaderPatch),e.loaderPatch),N("error",function(e){try{if(console.error(e),e instanceof Error){for(var t in e)console.log(t+":",e[t]);console.log(".")}}catch(i){}}),d(m,{uid:p,cache:J,packs:F}),_.define)P("error",u("defineAlreadyDefined",0));else{_.define=ti,_.require=m,h(et,function(e){tt(e)});var ii=V.deps||e.deps||t.deps,ni=V.callback||e.callback||t.callback;m.boot=ii||ni?[ii||[],ni]:0}}(this.dojoConfig||this.djConfig||this.require||{},{async:0,baseUrl:("file:"===location.protocol?"http:":location.protocol)+"../api/js/dojo/dojo",hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-loader":1,"dojo-undef-api":0,dom:1,"extend-esri":1,"host-browser":1},packages:[{location:"../dojox",name:"dojox"},{location:"../../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../dijit",name:"dijit"},{location:"../../xstyle",name:"xstyle"},{location:"../../esri",name:"esri"},{location:".",name:"dojo"},{location:"../../put-selector",main:"put",name:"put-selector"}]}),require({cache:{"dojo/request/default":function(){define(["exports","require","../has"],function(e,t,i){var n=i("config-requestProvider");n||(n="./xhr"),e.getPlatformDefaultId=function(){return"./xhr"},e.load=function(e,i,s){t(["platform"==e?"./xhr":n],function(e){s(e)})}})},"dojo/_base/fx":function(){define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),function(e,t,i,n,s,r,o,a,l){var c=i.mixin,h={},d=h._Line=function(e,t){this.start=e,this.end=t};d.prototype.getValue=function(e){return(this.end-this.start)*e+this.start};var u=h.Animation=function(e){c(this,e),i.isArray(this.curve)&&(this.curve=new d(this.curve[0],this.curve[1]))};u.prototype=new n,i.extend(u,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var e=this._percent,t=this.easing;return t?t(e):e},_fire:function(e,i){var n=i||[];if(this[e])if(t.debugAtAllCosts)this[e].apply(this,n);else try{this[e].apply(this,n)}catch(s){console.error("exception in animation handler for:",e),console.error(s)}return this},play:function(e,t){if(this._delayTimer&&this._clearTimer(),t)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);var n=e||this.delay,s=i.hitch(this,"_play",t);return n>0?(this._delayTimer=setTimeout(s,n),this):(s(),this)},_play:function(e){return this._delayTimer&&this._clearTimer(),this._startTime=(new Date).valueOf(),this._paused&&(this._startTime-=this.duration*this._percent),this._active=!0,this._paused=!1,e=this.curve.getValue(this._getStep()),this._percent||(this._startRepeatCount||(this._startRepeatCount=this.repeat),this._fire("onBegin",[e])),this._fire("onPlay",[e]),this._cycle(),this},pause:function(){return this._delayTimer&&this._clearTimer(),this._stopTimer(),this._active?(this._paused=!0,this._fire("onPause",[this.curve.getValue(this._getStep())]),this):this},gotoPercent:function(e,t){return this._stopTimer(),this._active=this._paused=!0,this._percent=e,t&&this.play(),this},stop:function(e){return this._delayTimer&&this._clearTimer(),this._timer?(this._stopTimer(),e&&(this._percent=1),this._fire("onStop",[this.curve.getValue(this._getStep())]),this._active=this._paused=!1,this):this},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var e=(new Date).valueOf(),e=0===this.duration?1:(e-this._startTime)/this.duration;e>=1&&(e=1),this._percent=e,this.easing&&(e=this.easing(e)),this._fire("onAnimate",[this.curve.getValue(e)]),1>this._percent?this._startTimer():(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,this._startRepeatCount=0),this._percent=0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},_clearTimer:function(){clearTimeout(this._delayTimer),delete this._delayTimer}});var f=0,p=null,m={run:function(){}};i.extend(u,{_startTimer:function(){this._timer||(this._timer=r.after(m,"run",i.hitch(this,"_cycle"),!0),f++),p||(p=setInterval(i.hitch(m,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),this._timer=null,f--),0>=f&&(clearInterval(p),p=null,f=0)}});var _=o("ie")?function(e){var t=e.style;!t.width.length&&"auto"==l.get(e,"width")&&(t.width="auto")}:function(){};h._fade=function(e){e.node=a.byId(e.node);var t=c({properties:{}},e);return e=t.properties.opacity={},e.start="start"in t?t.start:function(){return+l.get(t.node,"opacity")||0},e.end=t.end,e=h.animateProperty(t),r.after(e,"beforeBegin",i.partial(_,t.node),!0),e},h.fadeIn=function(e){return h._fade(c({end:1},e))},h.fadeOut=function(e){return h._fade(c({end:0},e))},h._defaultEasing=function(e){return.5+Math.sin((e+1.5)*Math.PI)/2};var g=function(e){this._properties=e;for(var t in e){var i=e[t];i.start instanceof s&&(i.tempColor=new s)}};return g.prototype.getValue=function(e){var t,n={};for(t in this._properties){var r=this._properties[t],o=r.start;o instanceof s?n[t]=s.blendColors(o,r.end,e,r.tempColor).toCss():i.isArray(o)||(n[t]=(r.end-o)*e+o+("opacity"!=t?r.units||"px":0))}return n},h.animateProperty=function(t){var n=t.node=a.byId(t.node);return t.easing||(t.easing=e._defaultEasing),t=new u(t),r.after(t,"beforeBegin",i.hitch(t,function(){var e,t={};for(e in this.properties){("width"==e||"height"==e)&&(this.node.display="block");var r=this.properties[e];i.isFunction(r)&&(r=r(n)),r=t[e]=c({},i.isObject(r)?r:{end:r}),i.isFunction(r.start)&&(r.start=r.start(n)),i.isFunction(r.end)&&(r.end=r.end(n));var o=0<=e.toLowerCase().indexOf("color"),a=function(e,t){var i={height:e.offsetHeight,width:e.offsetWidth}[t];return void 0!==i?i:(i=l.get(e,t),"opacity"==t?+i:o?i:parseFloat(i))};"end"in r?"start"in r||(r.start=a(n,e)):r.end=a(n,e),o?(r.start=new s(r.start),r.end=new s(r.end)):r.start="opacity"==e?+r.start:parseFloat(r.start)}this.curve=new g(t)}),!0),r.after(t,"onAnimate",i.hitch(l,"set",t.node),!0),t},h.anim=function(e,t,i,n,s,r){return h.animateProperty({node:e,duration:i||u.prototype.duration,properties:t,easing:n,onEnd:s}).play(r||0)},c(e,h),e._Animation=u,h})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(e,t,i,n){var s={fieldToObject:function(e){var i=null;if(e=t.byId(e)){var n=e.name,s=(e.type||"").toLowerCase();if(n&&s&&!e.disabled)if("radio"==s||"checkbox"==s)e.checked&&(i=e.value);else if(e.multiple)for(i=[],e=[e.firstChild];e.length;)for(n=e.pop();n;n=n.nextSibling){if(1!=n.nodeType||"option"!=n.tagName.toLowerCase()){n.nextSibling&&e.push(n.nextSibling),n.firstChild&&e.push(n.firstChild);break}n.selected&&i.push(n.value)}else i=e.value}return i},toObject:function(i){var n={};i=t.byId(i).elements;for(var r=0,o=i.length;o>r;++r){var a=i[r],l=a.name,c=(a.type||"").toLowerCase();if(l&&c&&0>"file|submit|image|reset|button".indexOf(c)&&!a.disabled){var h=n,d=l,a=s.fieldToObject(a);if(null!==a){var u=h[d];"string"==typeof u?h[d]=[u,a]:e.isArray(u)?u.push(a):h[d]=a}"image"==c&&(n[l+".x"]=n[l+".y"]=n[l].x=n[l].y=0)}}return n},toQuery:function(e){return i.objectToQuery(s.toObject(e))},toJson:function(e,t){return n.stringify(s.toObject(e),null,t?4:0)}};return s})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./_base/xhr ./json module".split(" "),function(e,t,i,n,s,r,o,a,l){i.add("dojo-preload-i18n-Api",1);var c=e.i18n={},h=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,d=function(e,t,i,n){var s=[i+n];t=t.split("-");for(var r="",o=0;o<t.length;o++)r+=(r?"-":"")+t[o],(!e||e[r])&&(s.push(i+r+"/"+n),s.specificity=r);return s},u={},f=function(t,i,n){return n=n?n.toLowerCase():e.locale,t=t.replace(/\./g,"/"),i=i.replace(/\./g,"/"),/root/i.test(n)?t+"/nls/"+i:t+"/nls/"+n+"/"+i},p=e.getL10nName=function(e,t,i){return l.id+"!"+f(e,t,i)},m=function(e,t,i,n,s,o){e([t],function(a){var l=r.clone(a.root),c=d(!a._v1x&&a,s,i,n);e(c,function(){for(var e=1;e<c.length;e++)l=r.mixin(r.clone(l),arguments[e]);u[t+"/"+s]=l,l.$locale=c.specificity,o()})})},_=function(e){var t=s.extraLocale||[],t=r.isArray(t)?t:[t];return t.push(e),t},g=function(t,s,o){if(i("dojo-preload-i18n-Api")){var l=t.split("*"),c="preload"==l[1];if(c&&(u[t]||(u[t]=1,w(l[2],a.parse(l[3]),1,s)),o(1)),(l=c)||(b&&x.push([t,s,o]),l=b),l)return}t=h.exec(t);var d=t[1]+"/",f=t[5]||t[4],p=d+f,l=(t=t[5]&&t[4])||e.locale||"",g=p+"/"+l;t=t?[l]:_(l);var y=t.length,v=function(){--y||o(r.delegate(u[g]))};n.forEach(t,function(e){var t=p+"/"+e;i("dojo-preload-i18n-Api")&&S(t),u[t]?v():m(s,p,d,f,e,v)})};if(i("dojo-unit-tests"))var y=c.unitTests=[];i("dojo-preload-i18n-Api");var v=c.normalizeLocale=function(t){return t=t?t.toLowerCase():e.locale,"root"==t?"ROOT":t},b=0,x=[],w=c._preloadLocalizations=function(i,s,r,o){function a(e,i){o.isXdUrl(t.toUrl(e+".js"))||r?o([e],i):E([e],i,o)}function l(e,t){for(var i=e.split("-");i.length;){if(t(i.join("-")))return;i.pop()}t("ROOT")}function c(e){e=v(e),l(e,function(e){if(0<=n.indexOf(s,e)){var r=i.replace(/\./g,"/")+"_"+e;return b++,a(r,function(i){for(var n in i)u[t.toAbsMid(n)+"/"+e]=i[n];for(--b;!b&&x.length;)g.apply(null,x.shift())}),!0}return!1})}o=o||t,c(),n.forEach(e.config.extraLocale,c)},S=function(){},T={},j=new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define = function(mid, factory){define.called = 1; __amdValue.result = factory || mid;},	   require = function(){define.called = 1;};try{define.called = 0;eval(__bundle);if(define.called==1)return __amdValue;if((__checkForLegacyModules = __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}"),E=function(e,t,i){var s=[];n.forEach(e,function(e){function t(t){t=j(t,S,e,T),t===T?s.push(u[n]=T.result):(t instanceof Error&&(console.error("failed to evaluate i18n bundle; url="+n,t),t={}),s.push(u[n]=/nls\/[^\/]+\/[^\/]+$/.test(n)?t:{root:t,_v1x:1}))}var n=i.toUrl(e+".js");if(u[n])s.push(u[n]);else{var r=i.syncLoadNls(e);if(r)s.push(r);else if(o)o.get({url:n,sync:!0,load:t,error:function(){s.push(u[n]={})}});else try{i.getText(n,!0,t)}catch(a){s.push(u[n]={})}}}),t&&t.apply(null,s)},S=function(t){for(var i,n=t.split("/"),s=e.global[n[0]],r=1;s&&r<n.length-1;s=s[n[r++]]);return s&&((i=s[n[r]])||(i=s[n[r].replace(/-/g,"_")]),i&&(u[t]=i)),i};return c.getLocalization=function(e,i,n){var s;return e=f(e,i,n),g(e,t.isXdUrl(t.toUrl(e+".js"))?t:function(e,i){E(e,i,t)},function(e){s=e}),s},i("dojo-unit-tests")&&y.push(function(e){e.register("tests.i18n.unit",function(e){var t;t=j("{prop:1}",S,"nonsense",T),e.is({prop:1},t),e.is(void 0,t[1]),t=j("({prop:1})",S,"nonsense",T),e.is({prop:1},t),e.is(void 0,t[1]),t=j("{'prop-x':1}",S,"nonsense",T),e.is({"prop-x":1},t),e.is(void 0,t[1]),t=j("({'prop-x':1})",S,"nonsense",T),e.is({"prop-x":1},t),e.is(void 0,t[1]),t=j("define({'prop-x':1})",S,"nonsense",T),e.is(T,t),e.is({"prop-x":1},T.result),t=j("define('some/module', {'prop-x':1})",S,"nonsense",T),e.is(T,t),e.is({"prop-x":1},T.result),t=j("this is total nonsense and should throw an error",S,"nonsense",T),e.is(t instanceof Error,!0)})}),r.mixin(c,{dynamic:!0,normalize:function(e,t){return/^\./.test(e)?t(e):e},load:g,cache:u,getL10nName:p})})},"dojo/promise/tracer":function(){define(["../_base/lang","./Promise","../Evented"],function(e,t,i){function n(e){setTimeout(function(){r.apply(s,e)},0)}var s=new i,r=s.emit;return s.emit=null,t.prototype.trace=function(){var t=e._toArray(arguments);return this.then(function(e){n(["resolved",e].concat(t))},function(e){n(["rejected",e].concat(t))},function(e){n(["progress",e].concat(t))}),this},t.prototype.traceRejected=function(){var t=e._toArray(arguments);return this.otherwise(function(e){n(["rejected",e].concat(t))}),this},s})},"dojo/errors/RequestError":function(){define(["./create"],function(e){return e("RequestError",function(e,t){this.response=t})})},"dojo/_base/html":function(){define("./kernel ../dom ../dom-style ../dom-attr ../dom-prop ../dom-class ../dom-construct ../dom-geometry".split(" "),function(e,t,i,n,s,r,o,a){return e.byId=t.byId,e.isDescendant=t.isDescendant,e.setSelectable=t.setSelectable,e.getAttr=n.get,e.setAttr=n.set,e.hasAttr=n.has,e.removeAttr=n.remove,e.getNodeProp=n.getNodeProp,e.attr=function(e,t,i){return 2==arguments.length?n["string"==typeof t?"get":"set"](e,t):n.set(e,t,i)},e.hasClass=r.contains,e.addClass=r.add,e.removeClass=r.remove,e.toggleClass=r.toggle,e.replaceClass=r.replace,e._toDom=e.toDom=o.toDom,e.place=o.place,e.create=o.create,e.empty=function(e){o.empty(e)},e._destroyElement=e.destroy=function(e){o.destroy(e)},e._getPadExtents=e.getPadExtents=a.getPadExtents,e._getBorderExtents=e.getBorderExtents=a.getBorderExtents,e._getPadBorderExtents=e.getPadBorderExtents=a.getPadBorderExtents,e._getMarginExtents=e.getMarginExtents=a.getMarginExtents,e._getMarginSize=e.getMarginSize=a.getMarginSize,e._getMarginBox=e.getMarginBox=a.getMarginBox,e.setMarginBox=a.setMarginBox,e._getContentBox=e.getContentBox=a.getContentBox,e.setContentSize=a.setContentSize,e._isBodyLtr=e.isBodyLtr=a.isBodyLtr,e._docScroll=e.docScroll=a.docScroll,e._getIeDocumentElementOffset=e.getIeDocumentElementOffset=a.getIeDocumentElementOffset,e._fixIeBiDiScrollLeft=e.fixIeBiDiScrollLeft=a.fixIeBiDiScrollLeft,e.position=a.position,e.marginBox=function(e,t){return t?a.setMarginBox(e,t):a.getMarginBox(e)},e.contentBox=function(e,t){return t?a.setContentSize(e,t):a.getContentBox(e)},e.coords=function(n,s){e.deprecated("dojo.coords()","Use dojo.position() or dojo.marginBox()."),n=t.byId(n);var r=i.getComputedStyle(n),r=a.getMarginBox(n,r),o=a.position(n,s);return r.x=o.x,r.y=o.y,r},e.getProp=s.get,e.setProp=s.set,e.prop=function(e,t,i){return 2==arguments.length?s["string"==typeof t?"get":"set"](e,t):s.set(e,t,i)},e.getStyle=i.get,e.setStyle=i.set,e.getComputedStyle=i.getComputedStyle,e.__toPixelValue=e.toPixelValue=i.toPixelValue,e.style=function(e,t,n){switch(arguments.length){case 1:return i.get(e);case 2:return i["string"==typeof t?"get":"set"](e,t)}return i.set(e,t,n)},e})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(e,t,i,n){var s,r={},o={},a={config:t,global:this,dijit:r,dojox:o},r={dojo:["dojo",a],dijit:["dijit",r],dojox:["dojox",o]};n=i.map&&i.map[n.id.match(/[^\/]+/)[0]];for(s in n)r[s]?r[s][0]=n[s]:r[s]=[n[s],{}];for(s in r)n=r[s],n[1]._scopeName=n[0],t.noGlobals||(this[n[0]]=n[1]);a.scopeMap=r,a.baseUrl=a.config.baseUrl=i.baseUrl,a.isAsync=i.async,a.locale=t.locale,n="$Rev: 43d05c6 $".match(/\d+/),a.version={major:1,minor:9,patch:1,flag:"",revision:n?+n[0]:0/0,toString:function(){var e=a.version;return e.major+"."+e.minor+"."+e.patch+e.flag+" ("+e.revision+")"}},Function("d","d.eval = function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(a),a.exit=function(){},"undefined"!=typeof console||(console={});var l,r="assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" ");for(n=0;l=r[n++];)console[l]||function(){var e=l+"";console[e]="log"in console?function(){var t=Array.apply({},arguments);t.unshift(e+":"),console.log(t.join(" "))}:function(){},console[e]._fake=!0}();if(e.add("dojo-debug-messages",!!t.isDebug),a.deprecated=a.experimental=function(){},e("dojo-debug-messages")&&(a.deprecated=function(e,t,i){e="DEPRECATED: "+e,t&&(e+=" "+t),i&&(e+=" -- will be removed in version: "+i),console.warn(e)},a.experimental=function(e,t){var i="EXPERIMENTAL: "+e+" -- APIs subject to change without notice.";t&&(i+=" "+t),console.warn(i)}),t.modulePaths){a.deprecated("dojo.modulePaths","use paths configuration"),e={};for(s in t.modulePaths)e[s.replace(/\./g,"/")]=t.modulePaths[s];i({paths:e})}return a.moduleUrl=function(e,t){a.deprecated("dojo.moduleUrl()","use require.toUrl","2.0");var n=null;return e&&(n=i.toUrl(e.replace(/\./g,"/")+(t?"/"+t:"")+"/*.*").replace(/\/\*\.\*/,"")+(t?"":"/")),n},a._hasResource={},a})},"dojo/io-query":function(){define(["./_base/lang"],function(e){var t={};return{objectToQuery:function(i){var n,s=encodeURIComponent,r=[];for(n in i){var o=i[n];if(o!=t[n]){var a=s(n)+"=";if(e.isArray(o))for(var l=0,c=o.length;c>l;++l)r.push(a+s(o[l]));else r.push(a+s(o))}}return r.join("&")},queryToObject:function(t){var i=decodeURIComponent;t=t.split("&");for(var n,s,r={},o=0,a=t.length;a>o;++o)if(s=t[o],s.length){var l=s.indexOf("=");0>l?(n=i(s),s=""):(n=i(s.slice(0,l)),s=i(s.slice(l+1))),"string"==typeof r[n]&&(r[n]=[r[n]]),e.isArray(r[n])?r[n].push(s):r[n]=s}return r}}})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),function(e,t,i,n,s,r,o){var a=function(){},l=Object.freeze||function(){},c=e.Deferred=function(e){function o(e){if(u)throw Error("This deferred has already been resolved");d=e,u=!0,h()}function h(){for(var e;!e&&g;){var i=g;g=g.next,(e=i.progress==a)&&(u=!1);var n=m?i.error:i.resolved;if(s("config-useDeferredInstrumentation")&&m&&t.instrumentRejected&&t.instrumentRejected(d,!!n),n)try{var o=n(d);o&&"function"==typeof o.then?o.then(r.hitch(i.deferred,"resolve"),r.hitch(i.deferred,"reject"),r.hitch(i.deferred,"progress")):(n=e&&void 0===o,e&&!n&&(m=o instanceof Error),i.deferred[n&&m?"reject":"resolve"](n?d:o))}catch(l){i.deferred.reject(l)}else m?i.deferred.reject(d):i.deferred.resolve(d)}}var d,u,f,p,m,_,g,y=this.promise=new i;this.isResolved=y.isResolved=function(){return 0==p},this.isRejected=y.isRejected=function(){return 1==p},this.isFulfilled=y.isFulfilled=function(){return p>=0},this.isCanceled=y.isCanceled=function(){return f},this.resolve=this.callback=function(e){this.fired=p=0,this.results=[e,null],o(e)},this.reject=this.errback=function(e){m=!0,this.fired=p=1,s("config-useDeferredInstrumentation")&&t.instrumentRejected&&t.instrumentRejected(e,!!g),o(e),this.results=[null,e]},this.progress=function(e){for(var t=g;t;){var i=t.progress;i&&i(e),t=t.next}},this.addCallbacks=function(e,t){return this.then(e,t,a),this},y.then=this.then=function(e,t,i){var n=i==a?this:new c(y.cancel);return e={resolved:e,error:t,progress:i,deferred:n},g?_=_.next=e:g=_=e,u&&h(),n.promise};var v=this;y.cancel=this.cancel=function(){if(!u){var t=e&&e(v);u||(t instanceof Error||(t=new n(t)),t.log=!1,v.reject(t))}f=!0},l(y)};return r.extend(c,{addCallback:function(){return this.addCallbacks(r.hitch.apply(e,arguments))},addErrback:function(){return this.addCallbacks(null,r.hitch.apply(e,arguments))},addBoth:function(){var t=r.hitch.apply(e,arguments);return this.addCallbacks(t,t)},fired:-1}),c.when=e.when=o,c})},"dojo/NodeList-dom":function(){define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),function(e,t,i,n,s,r,o,a,l){function c(e){return function(t,i,n){return 2==arguments.length?e["string"==typeof i?"get":"set"](t,i):e.set(t,i,n)
}}var h=function(e){return 1==e.length&&"string"==typeof e[0]},d=function(e){var t=e.parentNode;t&&t.removeChild(e)},u=t.NodeList,f=u._adaptWithCondition,p=u._adaptAsForEach,m=u._adaptAsMap;return n.extend(u,{_normalize:function(t,i){var s=!0===t.parse;if("string"==typeof t.template){var o=t.templateFunc||e.string&&e.string.substitute;t=o?o(t.template,t):t}return o=typeof t,"string"==o||"number"==o?(t=r.toDom(t,i&&i.ownerDocument),t=11==t.nodeType?n._toArray(t.childNodes):[t]):n.isArrayLike(t)?n.isArray(t)||(t=n._toArray(t)):t=[t],s&&(t._runParse=!0),t},_cloneNode:function(e){return e.cloneNode(!0)},_place:function(t,i,n,s){if(1==i.nodeType||"only"!=n)for(var o,a=t.length,l=a-1;l>=0;l--){var c=s?this._cloneNode(t[l]):t[l];if(t._runParse&&e.parser&&e.parser.parse)for(o||(o=i.ownerDocument.createElement("div")),o.appendChild(c),e.parser.parse(o),c=o.firstChild;o.firstChild;)o.removeChild(o.firstChild);l==a-1?r.place(c,i,n):i.parentNode.insertBefore(c,i),i=c}},position:m(o.position),attr:f(c(a),h),style:f(c(l),h),addClass:p(s.add),removeClass:p(s.remove),toggleClass:p(s.toggle),replaceClass:p(s.replace),empty:p(r.empty),removeAttr:p(a.remove),marginBox:m(o.getMarginBox),place:function(e,i){var n=t(e)[0];return this.forEach(function(e){r.place(e,n,i)})},orphan:function(e){return(e?t._filterResult(this,e):this).forEach(d)},adopt:function(e,i){return t(e).place(this[0],i)._stash(this)},query:function(e){if(!e)return this;var i=new u;return this.map(function(n){t(e,n).forEach(function(e){void 0!==e&&i.push(e)})}),i._stash(this)},filter:function(e){var n=arguments,s=this,r=0;if("string"==typeof e){if(s=t._filterResult(this,n[0]),1==n.length)return s._stash(this);r=1}return this._wrap(i.filter(s,n[r],n[r+1]),this)},addContent:function(e,t){e=this._normalize(e,this[0]);for(var i,n=0;i=this[n];n++)e.length?this._place(e,i,t,n>0):r.empty(i);return this}}),u})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),function(e,t,i,n,s,r,o,a){function l(e,t){var n=function(n,s){if("string"==typeof s&&(s=i.byId(s),!s))return new t([]);var r="string"==typeof n?e(n,s):n?n.end&&n.on?n:[n]:[];return r.end&&r.on?r:new t(r)};if(n.matches=e.match||function(e,t,i){return 0<n.filter([e],t,i).length},n.filter=e.filter||function(e,t,i){return n(t,i).filter(function(t){return-1<s.indexOf(e,t)})},"function"!=typeof e){var r=e.search;e=function(e,t){return r(t||document,e)}}return n}t.add("array-extensible",function(){return 1==r.delegate([],{length:1}).length&&!t("bug-for-in-skips-shadowed")});var c=Array.prototype,h=c.slice,d=c.concat,u=s.forEach,f=function(t,i,n){return i=[0].concat(h.call(i,0)),n=n||e.global,function(e){return i[0]=e,t.apply(n,i)}},p=function(e){var i=this instanceof m&&t("array-extensible");"number"==typeof e&&(e=Array(e));var n=e&&"length"in e?e:arguments;if(i||!n.sort){for(var s=i?this:[],o=s.length=n.length,a=0;o>a;a++)s[a]=n[a];if(i)return s;n=s}return r._mixin(n,_),n._NodeListCtor=function(e){return m(e)},n},m=p,_=m.prototype=t("array-extensible")?[]:{};m._wrap=_._wrap=function(e,t,i){return e=new(i||this._NodeListCtor||m)(e),t?e._stash(t):e},m._adaptAsMap=function(e,t){return function(){return this.map(f(e,arguments,t))}},m._adaptAsForEach=function(e,t){return function(){return this.forEach(f(e,arguments,t)),this}},m._adaptAsFilter=function(e,t){return function(){return this.filter(f(e,arguments,t))}},m._adaptWithCondition=function(t,i,n){return function(){var s=arguments,r=f(t,s,n);return i.call(n||e.global,s)?this.map(r):(this.forEach(r),this)}},u(["slice","splice"],function(e){var t=c[e];_[e]=function(){return this._wrap(t.apply(this,arguments),"slice"==e?this:null)}}),u(["indexOf","lastIndexOf","every","some"],function(t){var i=s[t];_[t]=function(){return i.apply(e,[this].concat(h.call(arguments,0)))}}),r.extend(p,{constructor:m,_NodeListCtor:m,toString:function(){return this.join(",")},_stash:function(e){return this._parent=e,this},on:function(e,t){var i=this.map(function(i){return n(i,e,t)});return i.remove=function(){for(var e=0;e<i.length;e++)i[e].remove()},i},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},concat:function(){var e=h.call(this,0),t=s.map(arguments,function(e){return h.call(e,0)});return this._wrap(d.apply(e,t),this)},map:function(e,t){return this._wrap(s.map(this,e,t),this)},forEach:function(e,t){return u(this,e,t),this},filter:function(e){var t=arguments,i=this,n=0;if("string"==typeof e){if(i=g._filterResult(this,t[0]),1==t.length)return i._stash(this);n=1}return this._wrap(s.filter(i,t[n],t[n+1]),this)},instantiate:function(e,t){var i=r.isFunction(e)?e:r.getObject(e);return t=t||{},this.forEach(function(e){new i(t,e)})},at:function(){var e=new this._NodeListCtor(0);return u(arguments,function(t){0>t&&(t=this.length+t),this[t]&&e.push(this[t])},this),e._stash(this)}});var g=l(a,p);return e.query=l(a,function(e){return p(e)}),g.load=function(e,t,i){o.load(e,t,function(e){i(l(e,p))})},e._filterQueryResult=g._filterResult=function(e,t,i){return new p(g.filter(e,t,i))},e.NodeList=g.NodeList=p,g})},"dojo/has":function(){define(["require","module"],function(e){var t=e.has||function(){};t.add("dom-addeventlistener",!!document.addEventListener),t.add("touch","ontouchstart"in document||0<window.navigator.msMaxTouchPoints),t.add("device-width",screen.availWidth||innerWidth);var i=document.createElement("form");return t.add("dom-attributes-explicit",0==i.attributes.length),t.add("dom-attributes-specified-flag",0<i.attributes.length&&40>i.attributes.length),t.clearElement=function(e){return e.innerHTML="",e},t.normalize=function(e,i){var n=e.match(/[\?:]|[^:\?]*/g),s=0,r=function(e){var i=n[s++];return":"==i?0:"?"==n[s++]?!e&&t(i)?r():(r(!0),r(e)):i||0};return(e=r())&&i(e)},t.load=function(e,t,i){e?t([e],i):i()},t})},"dojo/_base/loader":function(){define("./kernel ../has require module ../json ./lang ./array".split(" "),function(b,n,k,m,l,r,q){var f=function(e){return e.replace(/\./g,"/")},g=/\/\/>>built/,a=[],e=[],d=function(t,i,n){a.push(n),q.forEach(t.split(","),function(t){t=M(t,i.module),e.push(t),R(t)}),c()},c=function(){var e,t;for(t in T)if(e=T[t],void 0===e.noReqPluginCheck&&(e.noReqPluginCheck=/loadInit\!/.test(t)||/require\!/.test(t)?1:0),!e.executed&&!e.noReqPluginCheck&&e.injected==x)return;H(function(){var e=a;a=[],q.forEach(e,function(e){e(1)})})},h=function(e,t,i){var n=/\(|\)/g,s=1;for(n.lastIndex=t;(t=n.exec(e))&&(s=")"==t[0]?s-1:s+1,!(0==s)););if(0!=s)throw"unmatched paren around character "+n.lastIndex+" in: "+e;return[b.trim(e.substring(i,n.lastIndex))+";\n",n.lastIndex]},u=/(\/\*([\s\S]*?)\*\/|\/\/(.*)$)/gm,p=/(^|\s)dojo\.(loadInit|require|provide|requireLocalization|requireIf|requireAfterIf|platformRequire)\s*\(/gm,v=/(^|\s)(require|define)\s*\(/m,t=function(e,t){var i,n,s,r=[],o=[];for(i=[],t=t||e.replace(u,function(e){return p.lastIndex=v.lastIndex=0,p.test(e)||v.test(e)?"":e});i=p.exec(t);)n=p.lastIndex,s=n-i[0].length,n=h(t,n,s),"loadInit"==i[2]?r.push(n[0]):o.push(n[0]),p.lastIndex=n[1];return i=r.concat(o),i.length||!v.test(t)?[e.replace(/(^|\s)dojo\.loadInit\s*\(/g,"\n0 && dojo.loadInit("),i.join(""),i]:0},s=k.initSyncLoader(d,c,function(e,i){var n,s,r=[],o=[];if(g.test(i)||!(n=t(i)))return 0;s=e.mid+"-*loadInit";for(var a in M("dojo",e).result.scopeMap)r.push(a),o.push('"'+a+'"');return"// xdomain rewrite of "+e.mid+"\ndefine('"+s+"',{\n	names:"+l.stringify(r)+",\n	def:function("+r.join(",")+"){"+n[1]+"}});\n\ndefine("+l.stringify(r.concat(["dojo/loadInit!"+s]))+", function("+r.join(",")+"){\n"+n[0]+"});"}),w=s.sync,x=s.requested,y=s.arrived,z=s.nonmodule,A=s.executing,E=s.executed,J=s.syncExecStack,T=s.modules,L=s.execQ,M=s.getModule,R=s.injectModule,C=s.setArrived,F=s.signal,O=s.finishExec,I=s.execModule,K=s.getLegacyMode,H=s.guardCheckComplete,d=s.dojoRequirePlugin;return b.provide=function(e){var t=J[0],i=r.mixin(M(f(e),k.module),{executed:A,result:r.getObject(e,!0)});return C(i),t&&(t.provides||(t.provides=[])).push(function(){i.result=r.getObject(e),delete i.provides,i.executed!==E&&O(i)}),i.result},n.add("config-publishRequireResult",1,0,0),b.require=function(e,t){var i=function(e,t){var i=M(f(e),k.module);if(J.length&&J[0].finish)J[0].finish.push(e);else{if(i.executed)return i.result;t&&(i.result=z);var n=K();if(R(i),n=K(),i.executed!==E&&i.injected===y&&s.guardCheckComplete(function(){I(i)}),i.executed)return i.result;n==w?i.cjs?L.unshift(i):J.length&&(J[0].finish=[e]):L.push(i)}}(e,t);return n("config-publishRequireResult")&&!r.exists(e)&&void 0!==i&&r.setObject(e,i),i},b.loadInit=function(e){e()},b.registerModulePath=function(e,t){var i={};i[e.replace(/\./g,"/")]=t,k({paths:i})},b.platformRequire=function(e){e=(e.common||[]).concat(e[b._name]||e["default"]||[]);for(var t;e.length;)r.isArray(t=e.shift())?b.require.apply(b,t):b.require(t)},b.requireIf=b.requireAfterIf=function(e,t,i){e&&b.require(t,i)},b.requireLocalization=function(e,t,i){k(["../i18n"],function(n){n.getLocalization(e,t,i)})},{extractLegacyApiApplications:t,require:d,loadInit:function(a,c,e){c([a],function(a){c(a.names,function(){for(var h="",g=[],p=0;p<arguments.length;p++)h+="var "+a.names[p]+"= arguments["+p+"]; ",g.push(arguments[p]);eval(h);var k=c.module,l=[],r,h={provide:function(e){e=f(e),e=M(e,k),e!==k&&C(e)},require:function(e,t){e=f(e),t&&(M(e,k).result=z),l.push(e)},requireLocalization:function(e,t,i){r||(r=["dojo/i18n"]),i=(i||b.locale).toLowerCase(),e=f(e)+"/nls/"+(/root/i.test(i)?"":i+"/")+f(t),M(e,k).isXd&&r.push("dojo/i18n!"+e)},loadInit:function(e){e()}},p={},u;try{for(u in h)p[u]=b[u],b[u]=h[u];a.def.apply(null,g)}catch(q){F("error",[{src:m.id,id:"failedDojoLoadInit"},q])}finally{for(u in h)b[u]=p[u]}r&&(l=l.concat(r)),l.length?d(l.join(","),c,e):e()})})}}})},"dojo/json":function(){define(["./has"],function(b){var n="undefined"!=typeof JSON;if(b.add("json-parse",n),b.add("json-stringify",n&&'{"a":1}'==JSON.stringify({a:0},function(e,t){return t||1})),b("json-stringify"))return JSON;var k=function(e){return('"'+e.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:b("json-parse")?JSON.parse:function(b,k){if(k&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(b))throw new SyntaxError("Invalid characters in JSON");return eval("("+b+")")},stringify:function(e,t,i){function n(e,r,o){t&&(e=t(o,e));var a;if(a=typeof e,"number"==a)return isFinite(e)?e+"":"null";if("boolean"==a)return e+"";if(null===e)return"null";if("string"==typeof e)return k(e);if("function"==a||"undefined"==a)return s;if("function"==typeof e.toJSON)return n(e.toJSON(o),r,o);if(e instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(t,i,n){return t=e["getUTC"+i]()+(n?1:0),10>t?"0"+t:t});if(e.valueOf()!==e)return n(e.valueOf(),r,o);var l=i?r+i:"",c=i?" ":"",h=i?"\n":"";if(e instanceof Array){var c=e.length,d=[];for(o=0;c>o;o++)a=n(e[o],l,o),"string"!=typeof a&&(a="null"),d.push(h+l+a);return"["+d.join(",")+h+r+"]"}d=[];for(o in e){var u;if(e.hasOwnProperty(o)){if("number"==typeof o)u='"'+o+'"';else{if("string"!=typeof o)continue;u=k(o)}a=n(e[o],l,o),"string"==typeof a&&d.push(h+l+u+":"+c+a)}}return"{"+d.join(",")+h+r+"}"}var s;return"string"==typeof t&&(i=t,t=null),n(e,"","")}}})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(e,t,i){function n(e,t){throw Error("declare"+(t?" "+t:"")+": "+e)}function s(e,t,i){var s,r,o,a,l,c,h,d=this._inherited=this._inherited||{};if("string"==typeof e&&(s=e,e=t,t=i),i=0,a=e.callee,(s=s||a.nom)||n("can't deduce a name to call inherited()",this.declaredClass),l=this.constructor._meta,o=l.bases,h=d.p,s!=S){if(d.c!==a&&(h=0,c=o[0],l=c._meta,l.hidden[s]!==a)){(r=l.chains)&&"string"==typeof r[s]&&n("calling chained method with inherited: "+s,this.declaredClass);do if(l=c._meta,r=c.prototype,l&&(r[s]===a&&r.hasOwnProperty(s)||l.hidden[s]===a))break;while(c=o[++h]);h=c?h:-1}if(c=o[++h])if(r=c.prototype,c._meta&&r.hasOwnProperty(s))i=r[s];else{a=v[s];do if(r=c.prototype,(i=r[s])&&(c._meta?r.hasOwnProperty(s):i!==a))break;while(c=o[++h])}i=c&&i||v[s]}else{if(d.c!==a&&(h=0,(l=o[0]._meta)&&l.ctor!==a)){for(r=l.chains,(!r||"manual"!==r.constructor)&&n("calling chained constructor with inherited",this.declaredClass);(c=o[++h])&&(!(l=c._meta)||l.ctor!==a););h=c?h:-1}for(;(c=o[++h])&&!(i=(l=c._meta)?l.ctor:c););i=c&&i}return d.c=i,d.p=h,i?!0===t?i:i.apply(this,t||e):void 0}function r(e,t){return"string"==typeof e?this.__inherited(e,t,!0):this.__inherited(e,!0)}function o(e,t,i){var n=this.getInherited(e,t);return n?n.apply(this,i||t||e):void 0}function a(e){for(var t=this.constructor._meta.bases,i=0,n=t.length;n>i;++i)if(t[i]===e)return!0;return this instanceof e}function l(e,n){for(var s in n)s!=S&&n.hasOwnProperty(s)&&(e[s]=n[s]);if(t("bug-for-in-skips-shadowed"))for(var r=i._extraNames,o=r.length;o;)s=r[--o],s!=S&&n.hasOwnProperty(s)&&(e[s]=n[s])}function c(e){return g.safeMixin(this.prototype,e),this}function h(e,t){return g([this].concat(e),t||{})}function d(e,t){return function(){var i,n,s=arguments,r=s,o=s[0];n=e.length;var a;if(!(this instanceof s.callee))return _(s);if(t&&(o&&o.preamble||this.preamble))for(a=Array(e.length),a[0]=s,i=0;(o=s[0])&&(o=o.preamble)&&(s=o.apply(this,s)||s),o=e[i].prototype,(o=o.hasOwnProperty("preamble")&&o.preamble)&&(s=o.apply(this,s)||s),++i!=n;)a[i]=s;for(i=n-1;i>=0;--i)o=e[i],(o=(n=o._meta)?n.ctor:o)&&o.apply(this,a?a[i]:s);(o=this.postscript)&&o.apply(this,r)}}function u(e,t){return function(){var i=arguments,n=i,s=i[0];return this instanceof i.callee?(t&&(s&&(s=s.preamble)&&(n=s.apply(this,n)||n),(s=this.preamble)&&s.apply(this,n)),e&&e.apply(this,i),(s=this.postscript)&&s.apply(this,i),void 0):_(i)}}function f(e){return function(){var t,i,n=arguments,s=0;if(!(this instanceof n.callee))return _(n);for(;t=e[s];++s)if(t=(i=t._meta)?i.ctor:t){t.apply(this,n);break}(t=this.postscript)&&t.apply(this,n)}}function p(e,t,i){return function(){var n,s,r=0,o=1;for(i&&(r=t.length-1,o=-1);n=t[r];r+=o)s=n._meta,(n=(s?s.hidden:n.prototype)[e])&&n.apply(this,arguments)}}function m(e){return x.prototype=e.prototype,e=new x,x.prototype=null,e}function _(e){var t=e.callee,i=m(t);return t.apply(i,e),i}function g(e,t,o){"string"!=typeof e&&(o=t,t=e,e=""),o=o||{};var _,x,j,E,k,C,M,D=1,L=t;if("[object Array]"==b.call(t)){D=e,j=[],E=[{cls:0,refs:[]}],C={};for(var R,I,A,P,N=1,O=t.length,H=0;O>H;++H){for((R=t[H])?"[object Function]"!=b.call(R)&&n("mixin #"+H+" is not a callable constructor.",D):n("mixin #"+H+" is unknown. Did you use dojo.require to pull it in?",D),I=R._meta?R._meta.bases:[R],A=0,R=I.length-1;R>=0;--R)P=I[R].prototype,P.hasOwnProperty("declaredClass")||(P.declaredClass="uniqName_"+w++),P=P.declaredClass,C.hasOwnProperty(P)||(C[P]={count:0,refs:[],cls:I[R]},++N),P=C[P],A&&A!==P&&(P.refs.push(A),++A.count),A=P;++A.count,E[0].refs.push(A)}for(;E.length;){for(A=E.pop(),j.push(A.cls),--N;x=A.refs,1==x.length;){if(A=x[0],!A||--A.count){A=0;break}j.push(A.cls),--N}if(A)for(H=0,O=x.length;O>H;++H)A=x[H],--A.count||E.push(A)}N&&n("can't build consistent linearization",D),R=t[0],j[0]=R?R._meta&&R===j[j.length-R._meta.bases.length]?R._meta.bases.length:1:0,C=j,j=C[0],D=C.length-j,t=C[D]}else C=[0],t?"[object Function]"==b.call(t)?(j=t._meta,C=C.concat(j?j.bases:t)):n("base class is not a callable constructor.",e):null!==t&&n("unknown base class. Did you use dojo.require to pull it in?",e);if(t)for(x=D-1;_=m(t),x;--x)j=C[x],(j._meta?l:y)(_,j.prototype),E=new Function,E.superclass=t,E.prototype=_,t=_.constructor=E;else _={};for(g.safeMixin(_,o),j=o.constructor,j!==v.constructor&&(j.nom=S,_.constructor=j),x=D-1;x;--x)(j=C[x]._meta)&&j.chains&&(M=y(M||{},j.chains));if(_["-chains-"]&&(M=y(M||{},_["-chains-"])),j=!M||!M.hasOwnProperty(S),C[0]=E=M&&"manual"===M.constructor?f(C):1==C.length?u(o.constructor,j):d(C,j),E._meta={bases:C,hidden:o,chains:M,parents:L,ctor:o.constructor},E.superclass=t&&t.prototype,E.extend=c,E.createSubclass=h,E.prototype=_,_.constructor=E,_.getInherited=r,_.isInstanceOf=a,_.inherited=T,_.__inherited=s,e&&(_.declaredClass=e,i.setObject(e,E)),M)for(k in M)_[k]&&"string"==typeof M[k]&&k!=S&&(j=_[k]=p(k,C,"after"===M[k]),j.nom=k);return E}var y=i.mixin,v=Object.prototype,b=v.toString,x=new Function,w=0,S="constructor",T=e.config.isDebug?o:s;return e.safeMixin=g.safeMixin=function(e,n){var s,r;for(s in n)r=n[s],r===v[s]&&s in v||s==S||("[object Function]"==b.call(r)&&(r.nom=s),e[s]=r);if(t("bug-for-in-skips-shadowed"))for(var o=i._extraNames,a=o.length;a;)s=o[--a],r=n[s],r===v[s]&&s in v||s==S||("[object Function]"==b.call(r)&&(r.nom=s),e[s]=r);return e},e.declare=g})},"dojo/dom":function(){define(["./sniff","./_base/window"],function(e,t){if(7>=e("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(i){}var n={};n.byId=e("ie")?function(e,i){if("string"!=typeof e)return e;var n=i||t.doc,s=e&&n.getElementById(e);if(s&&(s.attributes.id.value==e||s.id==e))return s;n=n.all[e],(!n||n.nodeName)&&(n=[n]);for(var r=0;s=n[r++];)if(s.attributes&&s.attributes.id&&s.attributes.id.value==e||s.id==e)return s}:function(e,i){return("string"==typeof e?(i||t.doc).getElementById(e):e)||null},n.isDescendant=function(e,t){try{for(e=n.byId(e),t=n.byId(t);e;){if(e==t)return!0;e=e.parentNode}}catch(i){}return!1},e.add("css-user-select",function(e,t,i){if(!i)return!1;e=i.style,t=["Khtml","O","ms","Moz","Webkit"],i=t.length;var n="userSelect";do if("undefined"!=typeof e[n])return n;while(i--&&(n=t[i]+"UserSelect"));return!1});var s=e("css-user-select");return n.setSelectable=s?function(e,t){n.byId(e).style[s]=t?"":"none"}:function(e,t){e=n.byId(e);var i=e.getElementsByTagName("*"),s=i.length;if(t)for(e.removeAttribute("unselectable");s--;)i[s].removeAttribute("unselectable");else for(e.setAttribute("unselectable","on");s--;)i[s].setAttribute("unselectable","on")},n})},"dojo/_base/browser":function(){require.has&&require.has.add("config-selectorEngine","acme"),define("../ready ./kernel ./connect ./unload ./window ./event ./html ./NodeList ../query ./xhr ./fx".split(" "),function(e){return e})},"dojo/selector/acme":function(){define(["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(e,t,i,n,s){var r=n.trim,o=i.forEach,a="BackCompat"==s.doc.compatMode,l=!1,c=function(){return!0},h=function(e){e=0<=">~+".indexOf(e.slice(-1))?e+" * ":e+" ";for(var t,i,n=function(t,i){return r(e.slice(t,i))},s=[],o=-1,a=-1,c=-1,h=-1,d=-1,u=-1,f=-1,p="",m="",_=0,g=e.length,y=null,v=null,b=function(){if(u>=0&&(y.id=n(u,_).replace(/\\/g,""),u=-1),f>=0){var e=f==_?null:n(f,_);y[0>">~+".indexOf(e)?"tag":"oper"]=e,f=-1}d>=0&&(y.classes.push(n(d+1,_).replace(/\\/g,"")),d=-1)};p=m,m=e.charAt(_),g>_;_++)"\\"!=p&&(y||(i=_,y={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return l?this.otag:this.tag}},f=_),t?m==t&&(t=null):"'"==m||'"'==m?t=m:o>=0?"]"==m?(v.attr?v.matchFor=n(c||o+1,_):v.attr=n(o+1,_),!(o=v.matchFor)||'"'!=o.charAt(0)&&"'"!=o.charAt(0)||(v.matchFor=o.slice(1,-1)),v.matchFor&&(v.matchFor=v.matchFor.replace(/\\/g,"")),y.attrs.push(v),v=null,o=c=-1):"="==m&&(c=0<="|~^$*".indexOf(p)?p:"",v.type=c+m,v.attr=n(o+1,_-c.length),c=_+1):a>=0?")"==m&&(h>=0&&(v.value=n(a+1,_)),h=a=-1):"#"==m?(b(),u=_+1):"."==m?(b(),d=_):":"==m?(b(),h=_):"["==m?(b(),o=_,v={}):"("==m?(h>=0&&(v={name:n(h+1,_),value:null},y.pseudos.push(v)),a=_):" "==m&&p!=m&&(b(),h>=0&&y.pseudos.push({name:n(h+1,_)}),y.loops=y.pseudos.length||y.attrs.length||y.classes.length,y.oquery=y.query=n(i,_),y.otag=y.tag=y.oper?null:y.tag||"*",y.tag&&(y.tag=y.tag.toUpperCase()),s.length&&s[s.length-1].oper&&(y.infixOper=s.pop(),y.query=y.infixOper.query+" "+y.query),s.push(y),y=null));return s},d=function(e,t){return e?t?function(){return e.apply(window,arguments)&&t.apply(window,arguments)}:e:t},u=function(e,t){var i=t||[];return e&&i.push(e),i},f=function(e){return 1==e.nodeType},p=function(e,t){return e?"class"==t?e.className||"":"for"==t?e.htmlFor||"":"style"==t?e.style.cssText||"":(l?e.getAttribute(t):e.getAttribute(t,2))||"":""},m={"*=":function(e,t){return function(i){return 0<=p(i,e).indexOf(t)}},"^=":function(e,t){return function(i){return 0==p(i,e).indexOf(t)}},"$=":function(e,t){return function(i){i=" "+p(i,e);var n=i.lastIndexOf(t);return n>-1&&n==i.length-t.length}},"~=":function(e,t){var i=" "+t+" ";return function(t){return 0<=(" "+p(t,e)+" ").indexOf(i)}},"|=":function(e,t){var i=t+"-";return function(n){return n=p(n,e),n==t||0==n.indexOf(i)}},"=":function(e,t){return function(i){return p(i,e)==t}}},_="undefined"==typeof s.doc.firstChild.nextElementSibling,g=_?"nextSibling":"nextElementSibling",y=_?"previousSibling":"previousElementSibling",v=_?f:c,b=function(e){for(;e=e[y];)if(v(e))return!1;return!0},x=function(e){for(;e=e[g];)if(v(e))return!1;return!0},w=function(e){var i=e.parentNode,i=7!=i.nodeType?i:i.nextSibling,n=0,s=i.children||i.childNodes,r=e._i||e.getAttribute("_i")||-1,o=i._l||("undefined"!=typeof i.getAttribute?i.getAttribute("_l"):-1);if(!s)return-1;if(s=s.length,o==s&&r>=0&&o>=0)return r;for(t("ie")&&"undefined"!=typeof i.setAttribute?i.setAttribute("_l",s):i._l=s,r=-1,i=i.firstElementChild||i.firstChild;i;i=i[g])v(i)&&(t("ie")?i.setAttribute("_i",++n):i._i=++n,e===i&&(r=n));return r},S=function(e){return!(w(e)%2)},T=function(e){return w(e)%2},j={checked:function(){return function(e){return!!("checked"in e?e.checked:e.selected)}},disabled:function(){return function(e){return e.disabled}},enabled:function(){return function(e){return!e.disabled}},"first-child":function(){return b},"last-child":function(){return x},"only-child":function(){return function(e){return b(e)&&x(e)}},empty:function(){return function(e){var t=e.childNodes;for(e=e.childNodes.length-1;e>=0;e--){var i=t[e].nodeType;if(1===i||3==i)return!1}return!0}},contains:function(e,t){var i=t.charAt(0);return('"'==i||"'"==i)&&(t=t.slice(1,-1)),function(e){return 0<=e.innerHTML.indexOf(t)}},not:function(e,t){var i=h(t)[0],n={el:1};"*"!=i.tag&&(n.tag=1),i.classes.length||(n.classes=1);var s=k(i,n);return function(e){return!s(e)}},"nth-child":function(e,t){var i=parseInt;if("odd"==t)return T;if("even"==t)return S;if(-1!=t.indexOf("n")){var n=t.split("n",2),s=n[0]?"-"==n[0]?-1:i(n[0]):1,r=n[1]?i(n[1]):0,o=0,a=-1;if(s>0?0>r?r=r%s&&s+r%s:r>0&&(r>=s&&(o=r-r%s),r%=s):0>s&&(s*=-1,r>0&&(a=r,r%=s)),s>0)return function(e){return e=w(e),e>=o&&(0>a||a>=e)&&e%s==r};t=r}var l=i(t);return function(e){return w(e)==l}}},E=9>t("ie")||9==t("ie")&&t("quirks")?function(e){var t=e.toLowerCase();return"class"==t&&(e="className"),function(i){return l?i.getAttribute(e):i[e]||i[t]}}:function(e){return function(t){return t&&t.getAttribute&&t.hasAttribute(e)}},k=function(e,t){if(!e)return c;t=t||{};var i=null;return"el"in t||(i=d(i,f)),"tag"in t||"*"!=e.tag&&(i=d(i,function(t){return t&&(l?t.tagName:t.tagName.toUpperCase())==e.getTag()})),"classes"in t||o(e.classes,function(e,t){var n=RegExp("(?:^|\\s)"+e+"(?:\\s|$)");i=d(i,function(e){return n.test(e.className)}),i.count=t}),"pseudos"in t||o(e.pseudos,function(e){var t=e.name;j[t]&&(i=d(i,j[t](t,e.value)))}),"attrs"in t||o(e.attrs,function(e){var t,n=e.attr;e.type&&m[e.type]?t=m[e.type](n,e.matchFor):n.length&&(t=E(n)),t&&(i=d(i,t))}),"id"in t||e.id&&(i=d(i,function(t){return!!t&&t.id==e.id})),i||"default"in t||(i=c),i},C=function(e){return function(t,i,n){for(;t=t[g];)if(!_||f(t)){(!n||J(t,n))&&e(t)&&i.push(t);break}return i}},M=function(e){return function(t,i,n){for(t=t[g];t;){if(v(t)){if(n&&!J(t,n))break;e(t)&&i.push(t)}t=t[g]}return i}},D=function(e){return e=e||c,function(t,i,n){for(var s=0,r=t.children||t.childNodes;t=r[s++];)v(t)&&(!n||J(t,n))&&e(t,s)&&i.push(t);return i}},L={},R=function(t){var i=L[t.query];if(i)return i;var n=t.infixOper,n=n?n.oper:"",r=k(t,{el:1}),o="*"==t.tag,l=s.doc.getElementsByClassName;if(n)l={el:1},o&&(l.tag=1),r=k(t,l),"+"==n?i=C(r):"~"==n?i=M(r):">"==n&&(i=D(r));else if(t.id)r=!t.loops&&o?c:k(t,{el:1,id:1}),i=function(i,n){var s=e.byId(t.id,i.ownerDocument||i);if(s&&r(s)){if(9==i.nodeType)return u(s,n);for(var o=s.parentNode;o&&o!=i;)o=o.parentNode;if(o)return u(s,n)}};else if(l&&/\{\s*\[native code\]\s*\}/.test(String(l))&&t.classes.length&&!a)var r=k(t,{el:1,classes:1,id:1}),h=t.classes.join(" "),i=function(e,t,i){t=u(0,t);for(var n,s=0,o=e.getElementsByClassName(h);n=o[s++];)r(n,e)&&J(n,i)&&t.push(n);return t};else o||t.loops?(r=k(t,{el:1,tag:1,id:1}),i=function(e,i,n){i=u(0,i);for(var s,o=0,a=(s=t.getTag())?e.getElementsByTagName(s):[];s=a[o++];)r(s,e)&&J(s,n)&&i.push(s);return i}):i=function(e,i,n){i=u(0,i);for(var s=0,r=t.getTag(),r=r?e.getElementsByTagName(r):[];e=r[s++];)J(e,n)&&i.push(e);return i};return L[t.query]=i},I={},A={},P=function(e){var t=h(r(e));if(1==t.length){var i=R(t[0]);return function(e){return(e=i(e,[]))&&(e.nozip=!0),e}}return function(e){e=u(e);for(var i,n,s,r,o=t.length,a=0;o>a;a++){r=[],i=t[a],n=e.length-1,n>0&&(s={},r.nozip=!0),n=R(i);for(var l=0;i=e[l];l++)n(i,r,s);if(!r.length)break;e=r}return r}},N=t("ie")?"commentStrip":"nozip",O=!!s.doc.querySelectorAll,H=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,U=function(e,t,i,n){return i?(t?t+" ":"")+i+(n?" "+n:""):e},F=/([^[]*)([^\]]*])?/g,z=function(e,t,i){return t.replace(H,U)+(i||"")},B=function(e,i){if(e=e.replace(F,z),O){var n=A[e];if(n&&!i)return n}if(n=I[e])return n;var n=e.charAt(0),s=-1==e.indexOf(" ");if(0<=e.indexOf("#")&&s&&(i=!0),!(!O||i||-1!=">~+".indexOf(n)||t("ie")&&-1!=e.indexOf(":")||a&&0<=e.indexOf(".")||-1!=e.indexOf(":contains")||-1!=e.indexOf(":checked")||-1!=e.indexOf("|="))){var r=0<=">~+".indexOf(e.charAt(e.length-1))?e+" *":e;return A[e]=function(t){try{if(9!=t.nodeType&&!s)throw"";var i=t.querySelectorAll(r);return i[N]=!0,i}catch(n){return B(e,!0)(t)}}}var o=e.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return I[e]=2>o.length?P(e):function(e){for(var t,i=0,n=[];t=o[i++];)n=n.concat(P(t)(e));return n}},W=0,q=t("ie")?function(e){return l?e.getAttribute("_uid")||e.setAttribute("_uid",++W)||W:e.uniqueID}:function(e){return e._uid||(e._uid=++W)},J=function(e,t){if(!t)return 1;var i=q(e);return t[i]?0:t[i]=1},G=function(e){if(e&&e.nozip)return e;if(!e||!e.length)return[];if(2>e.length)return[e[0]];var i=[];W++;var n,s;if(t("ie")&&l){var r=W+"";for(n=0;n<e.length;n++)(s=e[n])&&s.getAttribute("_zipIdx")!=r&&(i.push(s),s.setAttribute("_zipIdx",r))}else if(t("ie")&&e.commentStrip)try{for(n=0;n<e.length;n++)(s=e[n])&&f(s)&&i.push(s)}catch(o){}else for(n=0;n<e.length;n++)(s=e[n])&&s._zipIdx!=W&&(i.push(s),s._zipIdx=W);return i},V=function(e,t){t=t||s.doc,l="div"===(t.ownerDocument||t).createElement("div").tagName;var i=B(e)(t);return i&&i.nozip?i:G(i)};return V.filter=function(t,n,s){for(var r,o=[],a=h(n),a=1!=a.length||/[^\w#\.]/.test(n)?function(t){return-1!=i.indexOf(V(n,e.byId(s)),t)}:k(a[0]),l=0;r=t[l];l++)a(r)&&o.push(r);return o},V})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(e,t){return e("RequestTimeoutError",null,t,{dojoType:"timeout"})})},"dojo/dom-style":function(){define(["./sniff","./dom"],function(e,t){function i(t,i,n){if(i=i.toLowerCase(),e("ie")){if("auto"==n){if("height"==i)return t.offsetHeight;if("width"==i)return t.offsetWidth}if("fontweight"==i)switch(n){case 700:return"bold";default:return"normal"}}return i in c||(c[i]=h.test(i)),c[i]?r(t,n):n}var n,s={};n=e("webkit")?function(e){var t;if(1==e.nodeType){var i=e.ownerDocument.defaultView;t=i.getComputedStyle(e,null),!t&&e.style&&(e.style.display="",t=i.getComputedStyle(e,null))}return t||{}}:e("ie")&&(9>e("ie")||e("quirks"))?function(e){return 1==e.nodeType&&e.currentStyle?e.currentStyle:{}}:function(e){return 1==e.nodeType?e.ownerDocument.defaultView.getComputedStyle(e,null):{}},s.getComputedStyle=n;var r;r=e("ie")?function(e,t){if(!t)return 0;if("medium"==t)return 4;if(t.slice&&"px"==t.slice(-2))return parseFloat(t);var i=e.style,n=e.runtimeStyle,s=i.left,r=n.left;n.left=e.currentStyle.left;try{i.left=t,t=i.pixelLeft}catch(o){t=0}return i.left=s,n.left=r,t}:function(e,t){return parseFloat(t)||0},s.toPixelValue=r;var o=function(e,t){try{return e.filters.item("DXImageTransform.Microsoft.Alpha")}catch(i){return t?{}:null}},a=9>e("ie")||10>e("ie")&&e("quirks")?function(e){try{return o(e).Opacity/100}catch(t){return 1}}:function(e){return n(e).opacity},l=9>e("ie")||10>e("ie")&&e("quirks")?function(e,t){""===t&&(t=1);var i=100*t;if(1===t?(e.style.zoom="",o(e)&&(e.style.filter=e.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,""))):(e.style.zoom=1,o(e)?o(e,1).Opacity=i:e.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity="+i+")",o(e,1).Enabled=!0),"tr"==e.tagName.toLowerCase())for(i=e.firstChild;i;i=i.nextSibling)"td"==i.tagName.toLowerCase()&&l(i,t);return t}:function(e,t){return e.style.opacity=t},c={left:!0,top:!0},h=/margin|padding|width|height|max|min|offset/,d={cssFloat:1,styleFloat:1,"float":1};return s.get=function(e,n){var r=t.byId(e),o=arguments.length;if(2==o&&"opacity"==n)return a(r);n=d[n]?"cssFloat"in r.style?"cssFloat":"styleFloat":n;var l=s.getComputedStyle(r);return 1==o?l:i(r,n,l[n]||r.style[n])},s.set=function(e,i,n){var r=t.byId(e),o=arguments.length,a="opacity"==i;if(i=d[i]?"cssFloat"in r.style?"cssFloat":"styleFloat":i,3==o)return a?l(r,n):r.style[i]=n;for(var c in i)s.set(e,c,i[c]);return s.getComputedStyle(r)},s})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(e,t,i,n){function s(e,t,i,n,s,r){r=r||"px",e=e.style,isNaN(t)||(e.left=t+r),isNaN(i)||(e.top=i+r),n>=0&&(e.width=n+r),s>=0&&(e.height=s+r)}function r(e){return"button"==e.tagName.toLowerCase()||"input"==e.tagName.toLowerCase()&&"button"==(e.getAttribute("type")||"").toLowerCase()}function o(e){return"border-box"==a.boxModel||"table"==e.tagName.toLowerCase()||r(e)}var a={boxModel:"content-box"};e("ie")&&(a.boxModel="BackCompat"==document.compatMode?"border-box":"content-box"),a.getPadExtents=function(e,t){e=i.byId(e);var s=t||n.getComputedStyle(e),r=n.toPixelValue,o=r(e,s.paddingLeft),a=r(e,s.paddingTop),l=r(e,s.paddingRight),s=r(e,s.paddingBottom);return{l:o,t:a,r:l,b:s,w:o+l,h:a+s}},a.getBorderExtents=function(e,t){e=i.byId(e);var s=n.toPixelValue,r=t||n.getComputedStyle(e),o="none"!=r.borderLeftStyle?s(e,r.borderLeftWidth):0,a="none"!=r.borderTopStyle?s(e,r.borderTopWidth):0,l="none"!=r.borderRightStyle?s(e,r.borderRightWidth):0,s="none"!=r.borderBottomStyle?s(e,r.borderBottomWidth):0;return{l:o,t:a,r:l,b:s,w:o+l,h:a+s}},a.getPadBorderExtents=function(e,t){e=i.byId(e);var s=t||n.getComputedStyle(e),r=a.getPadExtents(e,s),s=a.getBorderExtents(e,s);return{l:r.l+s.l,t:r.t+s.t,r:r.r+s.r,b:r.b+s.b,w:r.w+s.w,h:r.h+s.h}},a.getMarginExtents=function(e,t){e=i.byId(e);var s=t||n.getComputedStyle(e),r=n.toPixelValue,o=r(e,s.marginLeft),a=r(e,s.marginTop),l=r(e,s.marginRight),s=r(e,s.marginBottom);return{l:o,t:a,r:l,b:s,w:o+l,h:a+s}},a.getMarginBox=function(t,s){t=i.byId(t);var r=s||n.getComputedStyle(t),o=a.getMarginExtents(t,r),l=t.offsetLeft-o.l,c=t.offsetTop-o.t,h=t.parentNode,d=n.toPixelValue;if(e("mozilla")){var u=parseFloat(r.left),r=parseFloat(r.top);isNaN(u)||isNaN(r)?h&&h.style&&(h=n.getComputedStyle(h),"visible"!=h.overflow&&(l+="none"!=h.borderLeftStyle?d(t,h.borderLeftWidth):0,c+="none"!=h.borderTopStyle?d(t,h.borderTopWidth):0)):(l=u,c=r)}else(e("opera")||8==e("ie")&&!e("quirks"))&&h&&(h=n.getComputedStyle(h),l-="none"!=h.borderLeftStyle?d(t,h.borderLeftWidth):0,c-="none"!=h.borderTopStyle?d(t,h.borderTopWidth):0);return{l:l,t:c,w:t.offsetWidth+o.w,h:t.offsetHeight+o.h}},a.getContentBox=function(t,s){t=i.byId(t);var r=s||n.getComputedStyle(t),o=t.clientWidth,l=a.getPadExtents(t,r),c=a.getBorderExtents(t,r);return o?(r=t.clientHeight,c.w=c.h=0):(o=t.offsetWidth,r=t.offsetHeight),e("opera")&&(l.l+=c.l,l.t+=c.t),{l:l.l,t:l.t,w:o-l.w-c.w,h:r-l.h-c.h}
},a.setContentSize=function(e,t,n){e=i.byId(e);var r=t.w;t=t.h,o(e)&&(n=a.getPadBorderExtents(e,n),r>=0&&(r+=n.w),t>=0&&(t+=n.h)),s(e,0/0,0/0,r,t)};var l={l:0,t:0,w:0,h:0};return a.setMarginBox=function(t,c,h){t=i.byId(t);var d=h||n.getComputedStyle(t);h=c.w;var u=c.h,f=o(t)?l:a.getPadBorderExtents(t,d),d=a.getMarginExtents(t,d);if(e("webkit")&&r(t)){var p=t.style;h>=0&&!p.width&&(p.width="4px"),u>=0&&!p.height&&(p.height="4px")}h>=0&&(h=Math.max(h-f.w-d.w,0)),u>=0&&(u=Math.max(u-f.h-d.h,0)),s(t,c.l,c.t,h,u)},a.isBodyLtr=function(e){return e=e||t.doc,"ltr"==(t.body(e).dir||e.documentElement.dir||"ltr").toLowerCase()},a.docScroll=function(i){i=i||t.doc;var n=t.doc.parentWindow||t.doc.defaultView;return"pageXOffset"in n?{x:n.pageXOffset,y:n.pageYOffset}:(n=e("quirks")?t.body(i):i.documentElement)&&{x:a.fixIeBiDiScrollLeft(n.scrollLeft||0,i),y:n.scrollTop||0}},e("ie")&&(a.getIeDocumentElementOffset=function(i){if(i=i||t.doc,i=i.documentElement,8>e("ie")){var n=i.getBoundingClientRect(),s=n.left,n=n.top;return 7>e("ie")&&(s+=i.clientLeft,n+=i.clientTop),{x:0>s?0:s,y:0>n?0:n}}return{x:0,y:0}}),a.fixIeBiDiScrollLeft=function(i,n){n=n||t.doc;var s=e("ie");if(s&&!a.isBodyLtr(n)){var r=e("quirks"),o=r?t.body(n):n.documentElement,l=t.global;return 6==s&&!r&&l.frameElement&&o.scrollHeight>o.clientHeight&&(i+=o.clientLeft),8>s||r?i+o.clientWidth-o.scrollWidth:-i}return i},a.position=function(n,s){n=i.byId(n);var r=t.body(n.ownerDocument),o=n.getBoundingClientRect(),o={x:o.left,y:o.top,w:o.right-o.left,h:o.bottom-o.top};if(9>e("ie")){var l=a.getIeDocumentElementOffset(n.ownerDocument);o.x-=l.x+(e("quirks")?r.clientLeft+r.offsetLeft:0),o.y-=l.y+(e("quirks")?r.clientTop+r.offsetTop:0)}return s&&(r=a.docScroll(n.ownerDocument),o.x+=r.x,o.y+=r.y),o},a.getMarginSize=function(e,t){e=i.byId(e);var s=a.getMarginExtents(e,t||n.getComputedStyle(e)),r=e.getBoundingClientRect();return{w:r.right-r.left+s.w,h:r.bottom-r.top+s.h}},a.normalizeEvent=function(t){if("layerX"in t||(t.layerX=t.offsetX,t.layerY=t.offsetY),!e("dom-addeventlistener")){var i=t.target,i=i&&i.ownerDocument||document,n=e("quirks")?i.body:i.documentElement,s=a.getIeDocumentElementOffset(i);t.pageX=t.clientX+a.fixIeBiDiScrollLeft(n.scrollLeft||0,i)-s.x,t.pageY=t.clientY+(n.scrollTop||0)-s.y}},a})},"dojo/dom-prop":function(){define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),function(e,t,i,n,s,r,o,a){var l={},c=0,h=t._scopeName+"attrid";e.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",valuetype:"valueType"},e.get=function(t,i){t=s.byId(t);var n=i.toLowerCase();return t[e.names[n]||i]},e.set=function(t,d,u){if(t=s.byId(t),2==arguments.length&&"string"!=typeof d){for(var f in d)e.set(t,f,d[f]);return t}if(f=d.toLowerCase(),f=e.names[f]||d,"style"==f&&"string"!=typeof u)return r.set(t,u),t;if("innerHTML"==f)return i("ie")&&t.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(o.empty(t),t.appendChild(o.toDom(u,t.ownerDocument))):t[f]=u,t;if(n.isFunction(u)){var p=t[h];p||(p=c++,t[h]=p),l[p]||(l[p]={});var m=l[p][f];if(m)a.disconnect(m);else try{delete t[f]}catch(_){}return u?l[p][f]=a.connect(t,f,u):t[f]=null,t}return t[f]=u,t}})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(e,t){return function(i,n,s,r){var o=i&&"function"==typeof i.then,a=o&&i instanceof t;return o?(a||(o=new e(i.cancel),i.then(o.resolve,o.reject,o.progress),i=o.promise),n||s||r?i.then(n,s,r):i):1<arguments.length?n?n(i):i:(new e).resolve(i)}})},"dojo/dom-attr":function(){define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),function(e,t,i,n,s,r){function o(e,t){var i=e.getAttributeNode&&e.getAttributeNode(t);return i&&i.specified}var a={innerHTML:1,className:1,htmlFor:t("ie"),value:1},l={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};e.has=function(e,t){var i=t.toLowerCase();return a[r.names[i]||t]||o(n.byId(e),l[i]||t)},e.get=function(e,t){e=n.byId(e);var s=t.toLowerCase(),c=r.names[s]||t,h=e[c];return a[c]&&"undefined"!=typeof h||"href"!=c&&("boolean"==typeof h||i.isFunction(h))?h:(s=l[s]||t,o(e,s)?e.getAttribute(s):null)},e.set=function(t,o,c){if(t=n.byId(t),2==arguments.length){for(var h in o)e.set(t,h,o[h]);return t}h=o.toLowerCase();var d=r.names[h]||o,u=a[d];return"style"==d&&"string"!=typeof c?(s.set(t,c),t):u||"boolean"==typeof c||i.isFunction(c)?r.set(t,o,c):(t.setAttribute(l[h]||o,c),t)},e.remove=function(e,t){n.byId(e).removeAttribute(l[t.toLowerCase()]||t)},e.getNodeProp=function(e,t){e=n.byId(e);var i=t.toLowerCase(),s=r.names[i]||t;return s in e&&"href"!=s?e[s]:(i=l[i]||t,o(e,i)?e.getAttribute(i):null)}})},"dojo/dom-construct":function(){define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),function(e,t,i,n,s,r){function o(e,t){var i=t.parentNode;i&&i.insertBefore(e,t)}function a(e){if(e.canHaveChildren)try{return e.innerHTML="",void 0}catch(t){}for(var i;i=e.lastChild;)l(i,e)}function l(e,t){e.firstChild&&a(e),t&&(i("ie")&&t.canHaveChildren&&"removeNode"in e?e.removeNode(!1):t.removeChild(e))}var c,h={option:["select"],tbody:["table"],thead:["table"],tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},d=/<\s*([\w\:]+)/,u={},f=0,p="__"+t._scopeName+"ToDomId";for(c in h)h.hasOwnProperty(c)&&(t=h[c],t.pre="option"==c?'<select multiple="multiple">':"<"+t.join("><")+">",t.post="</"+t.reverse().join("></")+">");var m;8>=i("ie")&&(m=function(e){e.__dojo_html5_tested="yes";var t=_("div",{innerHTML:"<nav>a</nav>",style:{visibility:"hidden"}},e.body);1!==t.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(t){e.createElement(t)}),g(t)}),e.toDom=function(e,t){t=t||n.doc;var s=t[p];s||(t[p]=s=++f+"",u[s]=t.createElement("div")),8>=i("ie")&&!t.__dojo_html5_tested&&t.body&&m(t),e+="";var r=e.match(d),o=r?r[1].toLowerCase():"",s=u[s];if(r&&h[o])for(r=h[o],s.innerHTML=r.pre+e+r.post,r=r.length;r;--r)s=s.firstChild;else s.innerHTML=e;if(1==s.childNodes.length)return s.removeChild(s.firstChild);for(o=t.createDocumentFragment();r=s.firstChild;)o.appendChild(r);return o},e.place=function(t,i,n){if(i=s.byId(i),"string"==typeof t&&(t=/^\s*</.test(t)?e.toDom(t,i.ownerDocument):s.byId(t)),"number"==typeof n){var r=i.childNodes;!r.length||r.length<=n?i.appendChild(t):o(t,r[0>n?0:n])}else switch(n){case"before":o(t,i);break;case"after":n=t,(r=i.parentNode)&&(r.lastChild==i?r.appendChild(n):r.insertBefore(n,i.nextSibling));break;case"replace":i.parentNode.replaceChild(t,i);break;case"only":e.empty(i),i.appendChild(t);break;case"first":if(i.firstChild){o(t,i.firstChild);break}default:i.appendChild(t)}return t};var _=e.create=function(t,i,o,a){var l=n.doc;return o&&(o=s.byId(o),l=o.ownerDocument),"string"==typeof t&&(t=l.createElement(t)),i&&r.set(t,i),o&&e.place(t,o,a),t};e.empty=function(e){a(s.byId(e))};var g=e.destroy=function(e){(e=s.byId(e))&&l(e,e.parentNode)}})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(e,t,i,n,s){function r(t,r){var o=t.xhr;if(t.status=t.xhr.status,s("native-xhr2")&&u[t.options.handleAs]?(t.data=o.response,"blob"===t.options.handleAs&&!s("native-xhr2-blob")&&(t.data=new Blob([t.data],{type:o.getResponseHeader("Content-Type")}))):(t.text=o.responseText,"xml"===t.options.handleAs&&(t.data=o.responseXML)),!r)try{i(t)}catch(a){r=a}r?this.reject(r):n.checkStatus(o.status)?this.resolve(t):(r=new e("Unable to load "+t.url+" status: "+o.status,t),this.reject(r))}function o(e){return this.xhr.getResponseHeader(e)}function a(i,m,_){var g=n.parseArgs(i,n.deepCreate(p,m),s("native-formdata")&&m&&m.data&&m.data instanceof FormData);i=g.url,m=g.options;var y,v=n.deferred(g,d,l,c,r,function(){y&&y()}),b=g.xhr=a._create();if(!b)return v.cancel(new e("XHR was not created")),_?v:v.promise;g.getHeader=o,h&&(y=h(b,v,g));var x=m.data,w=!m.sync,S=m.method;try{if(b.open(S,i,w,m.user||f,m.password||f),m.withCredentials&&(b.withCredentials=m.withCredentials),s("native-xhr2")){var T=u[m.handleAs]?m.handleAs:m.responseType;"blob"===T&&!s("native-xhr2-blob")&&(T="arraybuffer"),T&&(b.responseType=T)}var j=m.headers;if(i="application/x-www-form-urlencoded",j)for(var E in j)"content-type"===E.toLowerCase()?i=j[E]:j[E]&&b.setRequestHeader(E,j[E]);i&&!1!==i&&b.setRequestHeader("Content-Type",i),!(j&&"X-Requested-With"in j||!b.setRequestHeader("X-Requested-With","XMLHttpRequest")),n.notify&&n.notify.emit("send",g,v.promise.cancel),b.send(x)}catch(k){v.reject(k)}return t(v),b=null,_?v:v.promise}s.add("native-xhr",function(){return"undefined"!=typeof XMLHttpRequest}),s.add("dojo-force-activex-xhr",function(){return s("activex")&&!document.addEventListener&&"file:"===window.location.protocol}),s.add("native-xhr2",function(){if(s("native-xhr")){var e=new XMLHttpRequest;return"undefined"!=typeof e.addEventListener&&("undefined"==typeof opera||"undefined"!=typeof e.upload)}}),s.add("native-xhr2-blob",function(){if(s("native-xhr2")){var e=new XMLHttpRequest;e.open("GET","/",!0),e.responseType="blob";var t=e.responseType;return e.abort(),"blob"===t}}),s.add("native-formdata",function(){return"undefined"!=typeof FormData});var l,c,h,d,u={arraybuffer:1,blob:1,document:1};s("native-xhr2")?(l=function(){return!this.isFulfilled()},d=function(e,t){t.xhr.abort()},h=function(t,i,n){function s(){i.handleResponse(n)}function r(t){t=new e("Unable to load "+n.url+" status: "+t.target.status,n),i.handleResponse(n,t)}function o(e){e.lengthComputable&&(n.loaded=e.loaded,n.total=e.total,i.progress(n))}return t.addEventListener("load",s,!1),t.addEventListener("error",r,!1),t.addEventListener("progress",o,!1),function(){t.removeEventListener("load",s,!1),t.removeEventListener("error",r,!1),t.removeEventListener("progress",o,!1),t=null}}):(l=function(e){return e.xhr.readyState},c=function(e){return 4===e.xhr.readyState},d=function(e,t){var i=t.xhr,n=typeof i.abort;("function"===n||"object"===n||"unknown"===n)&&i.abort()});var f,p={data:null,query:null,sync:!1,method:"GET"};if(a._create=function(){throw Error("XMLHTTP not available")},s("native-xhr")&&!s("dojo-force-activex-xhr"))a._create=function(){return new XMLHttpRequest};else if(s("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),a._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(m){try{new ActiveXObject("Microsoft.XMLHTTP"),a._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(_){}}return n.addCommonMethods(a),a})},"dojo/text":function(){define(["./_base/kernel","require","./has","./request"],function(e,t,i,n){var s;s=function(e,t,i){n(e,{sync:!!t}).then(i)};var r={},o=function(e){if(e){e=e.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var t=e.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);t&&(e=t[1])}else e="";return e},a={},l={};return e.cache=function(e,i,n){var a;return"string"==typeof e?/\//.test(e)?(a=e,n=i):a=t.toUrl(e.replace(/\./g,"/")+(i?"/"+i:"")):(a=e+"",n=i),e=void 0!=n&&"string"!=typeof n?n.value:n,n=n&&n.sanitize,"string"==typeof e?(r[a]=e,n?o(e):e):null===e?(delete r[a],null):(a in r||s(a,!0,function(e){r[a]=e}),n?o(r[a]):r[a])},{dynamic:!0,normalize:function(e,t){var i=e.split("!"),n=i[0];return(/^\./.test(n)?t(n):n)+(i[1]?"!"+i[1]:"")},load:function(e,t,i){e=e.split("!");var n=1<e.length,c=e[0],h=t.toUrl(e[0]);e="url:"+h;var d=a,u=function(e){i(n?o(e):e)};if(c in r?d=r[c]:t.cache&&e in t.cache?d=t.cache[e]:h in r&&(d=r[h]),d===a)if(l[h])l[h].push(u);else{var f=l[h]=[u];s(h,!t.async,function(e){r[c]=r[h]=e;for(var t=0;t<f.length;)f[t++](e);delete l[h]})}else u(d)}}})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(e,t){return e.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:t("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:t("mac")&&!t("air")?t("safari")?91:224:17}})},"dojo/domReady":function(){define(["./has"],function(e){function t(e){c.push(e),l&&i()}function i(){if(!n){for(n=!0;c.length;)try{c.shift()(r)}catch(e){console.log("Error on domReady callback: "+e)}n=!1,t._onQEmpty()}}var n,s=this,r=document,o={loaded:1,complete:1},a="string"!=typeof r.readyState,l=!!o[r.readyState],c=[];if(t.load=function(e,i,n){t(n)},t._Q=c,t._onQEmpty=function(){},a&&(r.readyState="loading"),!l){var h=[],d=function(e){e=e||s.event,l||"readystatechange"==e.type&&!o[r.readyState]||(a&&(r.readyState="complete"),l=1,i())},u=function(e,t){e.addEventListener(t,d,!1),c.push(function(){e.removeEventListener(t,d,!1)})};if(!e("dom-addeventlistener")){var u=function(e,t){t="on"+t,e.attachEvent(t,d),c.push(function(){e.detachEvent(t,d)})},f=r.createElement("div");try{f.doScroll&&null===s.frameElement&&h.push(function(){try{return f.doScroll("left"),1}catch(e){}})}catch(p){}}if(u(r,"DOMContentLoaded"),u(s,"load"),"onreadystatechange"in r?u(r,"readystatechange"):a||h.push(function(){return o[r.readyState]}),h.length){var m=function(){if(!l){for(var e=h.length;e--;)if(h[e]())return d("poller"),void 0;setTimeout(m,30)}};m()}}return t})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(e,t){t.add("bug-for-in-skips-shadowed",function(){for(var e in{toString:1})return 0;return 1});var i=t("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):[],n=i.length,s=function(t,i,n){var s,r=0,o=e.global;if(!n){if(!t.length)return o;s=t[r++];try{n=e.scopeMap[s]&&e.scopeMap[s][1]}catch(a){}n=n||(s in o?o[s]:i?o[s]={}:void 0)}for(;n&&(s=t[r++]);)n=s in n?n[s]:i?n[s]={}:void 0;return n},r=Object.prototype.toString,o=function(e,t,i){return(i||[]).concat(Array.prototype.slice.call(e,t||0))},a=/\{([^\}]+)\}/g,l={_extraNames:i,_mixin:function(e,s,r){var o,a,l,c={};for(o in s)a=s[o],o in e&&(e[o]===a||o in c&&c[o]===a)||(e[o]=r?r(a):a);if(t("bug-for-in-skips-shadowed")&&s)for(l=0;n>l;++l)o=i[l],a=s[o],o in e&&(e[o]===a||o in c&&c[o]===a)||(e[o]=r?r(a):a);return e},mixin:function(e){e||(e={});for(var t=1,i=arguments.length;i>t;t++)l._mixin(e,arguments[t]);return e},setObject:function(e,t,i){var n=e.split(".");return e=n.pop(),(i=s(n,!0,i))&&e?i[e]=t:void 0},getObject:function(e,t,i){return s(e.split("."),t,i)},exists:function(e,t){return void 0!==l.getObject(e,!1,t)},isString:function(e){return"string"==typeof e||e instanceof String},isArray:function(e){return e&&(e instanceof Array||"array"==typeof e)},isFunction:function(e){return"[object Function]"===r.call(e)},isObject:function(e){return void 0!==e&&(null===e||"object"==typeof e||l.isArray(e)||l.isFunction(e))},isArrayLike:function(e){return!(!e||void 0===e||l.isString(e)||l.isFunction(e)||e.tagName&&"form"==e.tagName.toLowerCase()||!l.isArray(e)&&!isFinite(e.length))},isAlien:function(e){return e&&!l.isFunction(e)&&/\{\s*\[native code\]\s*\}/.test(String(e))},extend:function(e){for(var t=1,i=arguments.length;i>t;t++)l._mixin(e.prototype,arguments[t]);return e},_hitchArgs:function(t,i){var n=l._toArray(arguments,2),s=l.isString(i);return function(){var r=l._toArray(arguments),o=s?(t||e.global)[i]:i;return o&&o.apply(t||this,n.concat(r))}},hitch:function(t,i){if(2<arguments.length)return l._hitchArgs.apply(e,arguments);if(i||(i=t,t=null),l.isString(i)){if(t=t||e.global,!t[i])throw['lang.hitch: scope["',i,'"] is null (scope="',t,'")'].join("");return function(){return t[i].apply(t,arguments||[])}}return t?function(){return i.apply(t,arguments||[])}:i},delegate:function(){function e(){}return function(t,i){e.prototype=t;var n=new e;return e.prototype=null,i&&l._mixin(n,i),n}}(),_toArray:t("ie")?function(){function e(e,t,i){for(i=i||[],t=t||0;t<e.length;t++)i.push(e[t]);return i}return function(t){return(t.item?e:o).apply(this,arguments)}}():o,partial:function(){return l.hitch.apply(e,[null].concat(l._toArray(arguments)))},clone:function(e){if(!e||"object"!=typeof e||l.isFunction(e))return e;if(e.nodeType&&"cloneNode"in e)return e.cloneNode(!0);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return RegExp(e);var t,i,n;if(l.isArray(e))for(t=[],i=0,n=e.length;n>i;++i)i in e&&t.push(l.clone(e[i]));else t=e.constructor?new e.constructor:{};return l._mixin(t,e,l.clone)},trim:String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(e,t,i){return e.replace(i||a,l.isFunction(t)?t:function(e,i){return l.getObject(i,!1,t)})}};return l.mixin(e,l),l})},"dojo/request/util":function(){define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise".split(" "),function(e,t,i,n,s,r,o,a){function l(e){return h(e)}function c(e){return e.data||e.text}e.deepCopy=function(t,i){for(var n in i){var s=t[n],r=i[n];s!==r&&(s&&"object"==typeof s&&r&&"object"==typeof r?e.deepCopy(s,r):t[n]=r)}return t},e.deepCreate=function(t,i){i=i||{};var n,s,r=o.delegate(t);for(n in t)(s=t[n])&&"object"==typeof s&&(r[n]=e.deepCreate(s,i[n]));return e.deepCopy(r,i)};var h=Object.freeze||function(e){return e};e.deferred=function(s,r,d,u,f,p){var m=new n(function(e){return r&&r(m,s),e&&(e instanceof t||e instanceof i)?e:new i("Request canceled",s)});m.response=s,m.isValid=d,m.isReady=u,m.handleResponse=f,d=m.then(l).otherwise(function(e){throw e.response=s,e}),e.notify&&d.then(o.hitch(e.notify,"emit","load"),o.hitch(e.notify,"emit","error")),u=d.then(c),f=new a;for(var _ in u)u.hasOwnProperty(_)&&(f[_]=u[_]);return f.response=d,h(f),p&&m.then(function(e){p.call(m,e)},function(e){p.call(m,s,e)}),m.promise=f,m.then=f.then,m},e.addCommonMethods=function(e,t){r.forEach(t||["GET","POST","PUT","DELETE"],function(t){e[("DELETE"===t?"DEL":t).toLowerCase()]=function(i,n){return n=o.delegate(n||{}),n.method=t,e(i,n)}})},e.parseArgs=function(e,t,i){var n=t.data,r=t.query;return n&&!i&&"object"==typeof n&&(t.data=s.objectToQuery(n)),r?("object"==typeof r&&(r=s.objectToQuery(r)),t.preventCache&&(r+=(r?"&":"")+"request.preventCache="+ +new Date)):t.preventCache&&(r="request.preventCache="+ +new Date),e&&r&&(e+=(~e.indexOf("?")?"&":"?")+r),{url:e,options:t,getHeader:function(){return null}}},e.checkStatus=function(e){return e=e||0,e>=200&&300>e||304===e||1223===e||!e}})},"dojo/Evented":function(){define(["./aspect","./on"],function(e,t){function i(){}var n=e.after;return i.prototype={on:function(e,i){return t.parse(this,e,i,function(e,t){return n(e,"on"+t,i,!0)})},emit:function(){var e=[this];return e.push.apply(e,arguments),t.emit.apply(t,e)}},i})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(e,t,i,n,s){function r(e,i){var s=function(s,r){return t(s,e,function(e){return i?i(e,r):n.isDescendant(e.relatedTarget,s)?void 0:r.call(this,e)})};return s.bubble=function(t){return r(e,function(e,i){var n=t(e.target),s=e.relatedTarget;return n&&n!=(s&&1==s.nodeType&&t(s))?i.call(n,e):void 0})},s}return i.add("dom-quirks",s.doc&&"BackCompat"==s.doc.compatMode),i.add("events-mouseenter",s.doc&&"onmouseenter"in s.doc.createElement("div")),i.add("events-mousewheel",s.doc&&"onmousewheel"in s.doc),s=i("dom-quirks")&&i("ie")||!i("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(e,t){return e.button&t},isLeft:function(e){return 1&e.button},isMiddle:function(e){return 4&e.button},isRight:function(e){return 2&e.button}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(e,t){return e.button==t},isLeft:function(e){return 0==e.button},isMiddle:function(e){return 1==e.button},isRight:function(e){return 2==e.button}},e.mouseButtons=s,e=i("events-mousewheel")?"mousewheel":function(e,i){return t(e,"DOMMouseScroll",function(e){e.wheelDelta=-e.detail,i.call(this,e)})},{_eventHandler:r,enter:r("mouseover"),leave:r("mouseout"),wheel:e,isLeft:s.isLeft,isMiddle:s.isMiddle,isRight:s.isRight}})},"dojo/_base/xhr":function(){define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p,m){e._xhrObj=p._create;var _=e.config;e.objectToQuery=n.objectToQuery,e.queryToObject=n.queryToObject,e.fieldToObject=r.fieldToObject,e.formToObject=r.toObject,e.formToQuery=r.toQuery,e.formToJson=r.toJson,e._blockAsync=!1;var g=e._contentHandlers=e.contentHandlers={text:function(e){return e.responseText},json:function(e){return l.fromJson(e.responseText||null)},"json-comment-filtered":function(e){a.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}&&\nUse djConfig.useCommentedJson=true to turn off this message."),e=e.responseText;var t=e.indexOf("/*"),i=e.lastIndexOf("*/");if(-1==t||-1==i)throw Error("JSON was not comment filtered");return l.fromJson(e.substring(t+2,i))},javascript:function(t){return e.eval(t.responseText)},xml:function(e){var i=e.responseXML;if(i&&t("dom-qsa2.1")&&!i.querySelectorAll&&t("dom-parser")&&(i=(new DOMParser).parseFromString(e.responseText,"application/xml")),t("ie")&&(!i||!i.documentElement)){var n=function(e){return"MSXML"+e+".DOMDocument"},n=["Microsoft.XMLDOM",n(6),n(4),n(3),n(2)];h.some(n,function(t){try{var n=new ActiveXObject(t);n.async=!1,n.loadXML(e.responseText),i=n}catch(s){return!1}return!0})}return i},"json-comment-optional":function(e){return e.responseText&&/^[^{\[]*\/\*/.test(e.responseText)?g["json-comment-filtered"](e):g.json(e)}};t("native-xhr2")&&(g.arraybuffer=g.blob=g.document=function(e,i){return"blob"!==i.args.handleAs||t("native-xhr2-blob")?e.response:new Blob([e.response],{type:e.getResponseHeader("Content-Type")})}),e._ioSetArgs=function(t,i,a,l){var h={args:t,url:t.url},d=null;if(t.form){var d=s.byId(t.form),u=d.getAttributeNode("action");h.url=h.url||(u?u.value:null),d=r.toObject(d)}u=[{}],d&&u.push(d),t.content&&u.push(t.content),t.preventCache&&u.push({"dojo.preventCache":(new Date).valueOf()}),h.query=n.objectToQuery(c.mixin.apply(null,u)),h.handleAs=t.handleAs||"text";var f=new o(function(e){e.canceled=!0,i&&i(e);var t=e.ioArgs.error;return t||(t=Error("request cancelled"),t.dojoType="cancel",e.ioArgs.error=t),t});f.addCallback(a);var p=t.load;p&&c.isFunction(p)&&f.addCallback(function(e){return p.call(t,e,h)});var m=t.error;m&&c.isFunction(m)&&f.addErrback(function(e){return m.call(t,e,h)});var g=t.handle;return g&&c.isFunction(g)&&f.addBoth(function(e){return g.call(t,e,h)}),f.addErrback(function(e){return l(e,f)}),_.ioPublish&&e.publish&&!1!==h.args.ioPublish&&(f.addCallbacks(function(t){return e.publish("/dojo/io/load",[f,t]),t},function(t){return e.publish("/dojo/io/error",[f,t]),t}),f.addBoth(function(t){return e.publish("/dojo/io/done",[f,t]),t})),f.ioArgs=h,f};var y=function(e){return e=g[e.ioArgs.handleAs](e.ioArgs.xhr,e.ioArgs),void 0===e?null:e},v=function(e,t){return t.ioArgs.args.failOk||console.error(e),e},b=function(t){0>=x&&(x=0,_.ioPublish&&e.publish&&(!t||t&&!1!==t.ioArgs.args.ioPublish)&&e.publish("/dojo/io/stop"))},x=0;return u.after(f,"_onAction",function(){x-=1}),u.after(f,"_onInFlight",b),e._ioCancelAll=f.cancelAll,e._ioNotifyStart=function(t){_.ioPublish&&e.publish&&!1!==t.ioArgs.args.ioPublish&&(x||e.publish("/dojo/io/start"),x+=1,e.publish("/dojo/io/send",[t]))},e._ioWatch=function(e,t,i,n){e.ioArgs.options=e.ioArgs.args,c.mixin(e,{response:e.ioArgs,isValid:function(){return t(e)},isReady:function(){return i(e)},handleResponse:function(){return n(e)}}),f(e),b(e)},e._ioAddQueryToUrl=function(e){e.query.length&&(e.url+=(-1==e.url.indexOf("?")?"?":"&")+e.query,e.query=null)},e.xhr=function(i,n,s){var r,o=e._ioSetArgs(n,function(){r&&r.cancel()},y,v),a=o.ioArgs;"postData"in n?a.query=n.postData:"putData"in n?a.query=n.putData:"rawBody"in n?a.query=n.rawBody:(2<arguments.length&&!s||-1==="POST|PUT".indexOf(i.toUpperCase()))&&e._ioAddQueryToUrl(a);var l;t("native-xhr2")&&(l={arraybuffer:1,blob:1,document:1}),l=t("native-xhr2")&&l[n.handleAs]?n.handleAs:"text","blob"===l&&!t("native-xhr2-blob")&&(l="arraybuffer"),l={method:i,handleAs:l,responseType:n.responseType,timeout:n.timeout,withCredentials:n.withCredentials,ioArgs:a},"undefined"!=typeof n.headers&&(l.headers=n.headers),"undefined"!=typeof n.contentType&&(l.headers||(l.headers={}),l.headers["Content-Type"]=n.contentType),"undefined"!=typeof a.query&&(l.data=a.query),"undefined"!=typeof n.sync&&(l.sync=n.sync),e._ioNotifyStart(o);try{r=p(a.url,l,!0)}catch(c){return o.cancel(),o}return o.ioArgs.xhr=r.response.xhr,r.then(function(){o.resolve(o)}).otherwise(function(e){a.error=e,e.response&&(e.status=e.response.status,e.responseText=e.response.text,e.xhr=e.response.xhr),o.reject(e)}),o},e.xhrGet=function(t){return e.xhr("GET",t)},e.rawXhrPost=e.xhrPost=function(t){return e.xhr("POST",t,!0)},e.rawXhrPut=e.xhrPut=function(t){return e.xhr("PUT",t,!0)},e.xhrDelete=function(t){return e.xhr("DELETE",t)},e._isDocumentOk=function(e){return m.checkStatus(e.status)},e._getText=function(t){var i;return e.xhrGet({url:t,sync:!0,load:function(e){i=e}}),i},c.mixin(e.xhr,{_xhrObj:e._xhrObj,fieldToObject:r.fieldToObject,formToObject:r.toObject,objectToQuery:n.objectToQuery,formToQuery:r.toQuery,formToJson:r.toJson,queryToObject:n.queryToObject,contentHandlers:g,_ioSetArgs:e._ioSetArgs,_ioCancelAll:e._ioCancelAll,_ioNotifyStart:e._ioNotifyStart,_ioWatch:e._ioWatch,_ioAddQueryToUrl:e._ioAddQueryToUrl,_isDocumentOk:e._isDocumentOk,_getText:e._getText,get:e.xhrGet,post:e.xhrPost,put:e.xhrPut,del:e.xhrDelete}),e.xhr})},"dojo/topic":function(){define(["./Evented"],function(e){var t=new e;return{publish:function(){return t.emit.apply(t,arguments)},subscribe:function(){return t.on.apply(t,arguments)}}})},"dojo/loadInit":function(){define(["./_base/loader"],function(e){return{dynamic:0,normalize:function(e){return e},load:e.loadInit}})},"dojo/_base/unload":function(){define(["./kernel","./lang","../on"],function(e,t,i){var n=window,s={addOnWindowUnload:function(s,r){e.windowUnloaded||i(n,"unload",e.windowUnloaded=function(){}),i(n,"unload",t.hitch(s,r))},addOnUnload:function(e,s){i(n,"beforeunload",t.hitch(e,s))}};return e.addOnWindowUnload=s.addOnWindowUnload,e.addOnUnload=s.addOnUnload,s})},"dojo/require":function(){define(["./_base/loader"],function(e){return{dynamic:0,normalize:function(e){return e},load:e.require}})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","./promise/instrumentation"],function(e,t,i,n,s){var r=Object.freeze||function(){},o=function(e,t,i,n,s){for(2===t&&h.instrumentRejected&&0===e.length&&h.instrumentRejected(i,!1,n,s),s=0;s<e.length;s++)a(e[s],t,i,n)},a=function(e,t,i,n){var s=e[t],r=e.deferred;if(s)try{var o=s(i);if(0===t)"undefined"!=typeof o&&c(r,t,o);else{if(o&&"function"==typeof o.then)return e.cancel=o.cancel,o.then(l(r,1),l(r,2),l(r,0)),void 0;c(r,1,o)}}catch(a){c(r,2,a)}else c(r,t,i);2===t&&h.instrumentRejected&&h.instrumentRejected(i,!!s,n,r.promise)},l=function(e,t){return function(i){c(e,t,i)}},c=function(e,t,i){if(!e.isCanceled())switch(t){case 0:e.progress(i);break;case 1:e.resolve(i);break;case 2:e.reject(i)}},h=function(e){var t,s,l,c=this.promise=new n,d=this,u=!1,f=[];Error.captureStackTrace&&(Error.captureStackTrace(d,h),Error.captureStackTrace(c,h)),this.isResolved=c.isResolved=function(){return 1===t},this.isRejected=c.isRejected=function(){return 2===t},this.isFulfilled=c.isFulfilled=function(){return!!t},this.isCanceled=c.isCanceled=function(){return u},this.progress=function(e,i){if(t){if(!0===i)throw Error("This deferred has already been fulfilled.");return c}return o(f,0,e,null,d),c},this.resolve=function(e,i){if(t){if(!0===i)throw Error("This deferred has already been fulfilled.");return c}return o(f,t=1,s=e,null,d),f=null,c};var p=this.reject=function(e,i){if(t){if(!0===i)throw Error("This deferred has already been fulfilled.");return c}return Error.captureStackTrace&&Error.captureStackTrace(l={},p),o(f,t=2,s=e,l,d),f=null,c};this.then=c.then=function(e,i,n){var r=[n,e,i];return r.cancel=c.cancel,r.deferred=new h(function(e){return r.cancel&&r.cancel(e)}),t&&!f?a(r,t,s,l):f.push(r),r.deferred.promise},this.cancel=c.cancel=function(n,r){if(t){if(!0===r)throw Error("This deferred has already been fulfilled.")}else{if(e){var o=e(n);n="undefined"==typeof o?n:o}if(u=!0,!t)return"undefined"==typeof n&&(n=new i),p(n),n;if(2===t&&s===n)return n}},r(c)};return h.prototype.toString=function(){return"[object Deferred]"},s&&s(h),h})},"dojo/_base/NodeList":function(){define(["./kernel","../query","./array","./html","../NodeList-dom"],function(e,t,i){t=t.NodeList;var n=t.prototype;return n.connect=t._adaptAsForEach(function(){return e.connect.apply(this,arguments)}),n.coords=t._adaptAsMap(e.coords),t.events="blur focus change click error keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup submit".split(" "),i.forEach(t.events,function(e){var t="on"+e;n[t]=function(e,i){return this.connect(t,e,i)}}),e.NodeList=t})},"dojo/request":function(){define(["./request/default!"],function(e){return e})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(e,t,i,n){var s=e.Color=function(e){e&&this.setColor(e)};return s.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,128,128],aqua:[0,255,255],transparent:n.transparentColor||[0,0,0,0]},t.extend(s,{r:255,g:255,b:255,a:1,_set:function(e,t,i,n){this.r=e,this.g=t,this.b=i,this.a=n},setColor:function(e){return t.isString(e)?s.fromString(e,this):t.isArray(e)?s.fromArray(e,this):(this._set(e.r,e.g,e.b,e.a),e instanceof s||this.sanitize()),this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+i.map(["r","g","b"],function(e){return e=this[e].toString(16),2>e.length?"0"+e:e},this).join("")},toCss:function(e){var t=this.r+", "+this.g+", "+this.b;return(e?"rgba("+t+", "+this.a:"rgb("+t)+")"},toString:function(){return this.toCss(!0)}}),s.blendColors=e.blendColors=function(e,t,n,r){var o=r||new s;return i.forEach(["r","g","b","a"],function(i){o[i]=e[i]+(t[i]-e[i])*n,"a"!=i&&(o[i]=Math.round(o[i]))}),o.sanitize()},s.fromRgb=e.colorFromRgb=function(e,t){var i=e.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);return i&&s.fromArray(i[1].split(/\s*,\s*/),t)},s.fromHex=e.colorFromHex=function(e,t){var n=t||new s,r=4==e.length?4:8,o=(1<<r)-1;return e=Number("0x"+e.substr(1)),isNaN(e)?null:(i.forEach(["b","g","r"],function(t){var i=e&o;e>>=r,n[t]=4==r?17*i:i}),n.a=1,n)},s.fromArray=e.colorFromArray=function(e,t){var i=t||new s;return i._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(i.a)&&(i.a=1),i.sanitize()},s.fromString=e.colorFromString=function(e,t){var i=s.named[e];return i&&s.fromArray(i,t)||s.fromRgb(e,t)||s.fromHex(e,t)
},s})},"dojo/promise/instrumentation":function(){define(["./tracer","../has","../_base/lang","../_base/array"],function(e,t,i,n){function s(e,t,i){var n="";e&&e.stack&&(n+=e.stack),t&&t.stack&&(n+="\n    ----------------------------------------\n    rejected"+t.stack.split("\n").slice(1).join("\n").replace(/^\s+/," ")),i&&i.stack&&(n+="\n    ----------------------------------------\n"+i.stack),console.error(e,n)}function r(e,t,i,n){t||s(e,i,n)}function o(e,t,i,s){t?n.some(l,function(t,i){return t.error===e?(l.splice(i,1),!0):void 0}):n.some(l,function(t){return t.error===e})||l.push({error:e,rejection:i,deferred:s,timestamp:(new Date).getTime()}),c||(c=setTimeout(a,h))}function a(){var e=(new Date).getTime(),t=e-h;l=n.filter(l,function(e){return e.timestamp<t?(s(e.error,e.rejection,e.deferred),!1):!0}),c=l.length?setTimeout(a,l[0].timestamp+h-e):!1}var l=[],c=!1,h=1e3;return function(n){var s=t("config-useDeferredInstrumentation");if(s){e.on("resolved",i.hitch(console,"log","resolved")),e.on("rejected",i.hitch(console,"log","rejected")),e.on("progress",i.hitch(console,"log","progress"));var a=[];if("string"==typeof s&&(a=s.split(","),s=a.shift()),"report-rejections"===s)n.instrumentRejected=r;else{if("report-unhandled-rejections"!==s&&!0!==s&&1!==s)throw Error("Unsupported instrumentation usage <"+s+">");n.instrumentRejected=o,h=parseInt(a[0],10)||h}}}})},"dojo/selector/_loader":function(){define(["../has","require"],function(e,t){var i=document.createElement("div");e.add("dom-qsa2.1",!!i.querySelectorAll),e.add("dom-qsa3",function(){try{return i.innerHTML="<p class='TEST'></p>",1==i.querySelectorAll(".TEST:empty").length}catch(e){}});var n;return{load:function(i,s,r,o){if(o=t,i="default"==i?e("config-selectorEngine")||"css3":i,i="css2"==i||"lite"==i?"./lite":"css2.1"==i?e("dom-qsa2.1")?"./lite":"./acme":"css3"==i?e("dom-qsa3")?"./lite":"./acme":"acme"==i?"./acme":(o=s)&&i,"?"==i.charAt(i.length-1)){i=i.substring(0,i.length-1);var a=!0}return a&&(e("dom-compliant-qsa")||n)?r(n):(o([i],function(e){"./lite"!=i&&(n=e),r(e)}),void 0)}}})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(e){function t(){throw new TypeError("abstract")}return e.extend(function(){},{then:function(){t()},cancel:function(){t()},isResolved:function(){t()},isRejected:function(){t()},isFulfilled:function(){t()},isCanceled:function(){t()},always:function(e){return this.then(e,e)},otherwise:function(e){return this.then(null,e)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/request/watch":function(){define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../_base/window ../has!host-browser?dom-addeventlistener?:../on:".split(" "),function(e,t,i,n,s,r){function o(){for(var e,i=+new Date,n=0;n<c.length&&(e=c[n]);n++){var s=e.response,r=s.options;e.isCanceled&&e.isCanceled()||e.isValid&&!e.isValid(s)?(c.splice(n--,1),a._onAction&&a._onAction()):e.isReady&&e.isReady(s)?(c.splice(n--,1),e.handleResponse(s),a._onAction&&a._onAction()):e.startTime&&e.startTime+(r.timeout||0)<i&&(c.splice(n--,1),e.cancel(new t("Timeout exceeded",s)),a._onAction&&a._onAction())}a._onInFlight&&a._onInFlight(e),c.length||(clearInterval(l),l=null)}function a(e){e.response.options.timeout&&(e.startTime=+new Date),e.isFulfilled()||(c.push(e),l||(l=setInterval(o,50)),e.response.options.sync&&o())}var l=null,c=[];return a.cancelAll=function(){try{n.forEach(c,function(e){try{e.cancel(new i("All requests canceled."))}catch(t){}})}catch(e){}},s&&r&&s.doc.attachEvent&&r(s.global,"unload",function(){a.cancelAll()}),a})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(e,t,i){function n(e,t,n,s,r){if(s=t.match(/(.*):(.*)/))return t=s[2],s=s[1],a.selector(s,t).call(r,e,n);if(i("touch")&&(l.test(t)&&(n=w(n)),!i("event-orientationchange")&&"orientationchange"==t&&(t="resize",e=window,n=w(n))),f&&(n=f(n)),e.addEventListener){var o=t in d,c=o?d[t]:t;return e.addEventListener(c,n,o),{remove:function(){e.removeEventListener(c,n,o)}}}if(g&&e.attachEvent)return g(e,"on"+t,n);throw Error("Target must be an event emitter")}function s(){this.cancelable=!1,this.defaultPrevented=!0}function r(){this.bubbles=!1}var o=window.ScriptEngineMajorVersion;i.add("jscript",o&&o()+ScriptEngineMinorVersion()/10),i.add("event-orientationchange",i("touch")&&!i("android")),i.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation),i.add("event-focusin",function(e,t,i){return!!i.attachEvent});var a=function(e,t,i,s){return"function"!=typeof e.on||"function"==typeof t||e.nodeType?a.parse(e,t,i,n,s,this):e.on(t,i)};a.pausable=function(e,t,i,n){var s;return e=a(e,t,function(){return s?void 0:i.apply(this,arguments)},n),e.pause=function(){s=!0},e.resume=function(){s=!1},e},a.once=function(e,t,i){var n=a(e,t,function(){return n.remove(),i.apply(this,arguments)});return n},a.parse=function(e,t,i,n,s,r){if(t.call)return t.call(r,e,i);if(-1<t.indexOf(",")){t=t.split(/\s*,\s*/);for(var o,a=[],l=0;o=t[l++];)a.push(n(e,o,i,s,r));return a.remove=function(){for(var e=0;e<a.length;e++)a[e].remove()},a}return n(e,t,i,s,r)};var l=/^touch/;a.selector=function(e,i,n){return function(s,r){function o(i){for(l=l&&l.matches?l:t.query;!l.matches(i,e,s);)if(i==s||!1===n||!(i=i.parentNode)||1!=i.nodeType)return;return i}var l="function"==typeof e?{matches:e}:this,c=i.bubble;return c?a(s,c(o),r):a(s,i,function(e){var t=o(e.target);return t&&r.call(t,e)})}};var c=[].slice,h=a.emit=function(e,t,i){var n=c.call(arguments,2),o="on"+t;if("parentNode"in e){var a,l=n[0]={};for(a in i)l[a]=i[a];l.preventDefault=s,l.stopPropagation=r,l.target=e,l.type=t,i=l}do e[o]&&e[o].apply(e,n);while(i&&i.bubbles&&(e=e.parentNode));return i&&i.cancelable&&i},d=i("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!i("event-stopimmediatepropagation"))var u=function(){this.modified=this.immediatelyStopped=!0},f=function(e){return function(t){return t.immediatelyStopped?void 0:(t.stopImmediatePropagation=u,e.apply(this,arguments))}};if(i("dom-addeventlistener"))a.emit=function(e,t,i){if(e.dispatchEvent&&document.createEvent){var n=e.ownerDocument.createEvent("HTMLEvents");n.initEvent(t,!!i.bubbles,!!i.cancelable);for(var s in i)s in n||(n[s]=i[s]);return e.dispatchEvent(n)&&n}return h.apply(a,arguments)};else{a._fixEvent=function(e,t){if(e||(e=(t&&(t.ownerDocument||t.document||t).parentWindow||window).event),!e)return e;try{p&&e.type==p.type&&e.srcElement==p.target&&(e=p)}catch(i){}if(!e.target)switch(e.target=e.srcElement,e.currentTarget=t||e.srcElement,"mouseover"==e.type&&(e.relatedTarget=e.fromElement),"mouseout"==e.type&&(e.relatedTarget=e.toElement),e.stopPropagation||(e.stopPropagation=y,e.preventDefault=v),e.type){case"keypress":var n="charCode"in e?e.charCode:e.keyCode;10==n?(n=0,e.keyCode=13):13==n||27==n?n=0:3==n&&(n=99),e.charCode=n,n=e,n.keyChar=n.charCode?String.fromCharCode(n.charCode):"",n.charOrCode=n.keyChar||n.keyCode}return e};var p,m=function(e){this.handle=e};m.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var _=function(e){return function(t){t=a._fixEvent(t,this);var i=e.call(this,t);return t.modified&&(p||setTimeout(function(){p=null}),p=t),i}},g=function(t,n,s){if(s=_(s),((t.ownerDocument?t.ownerDocument.parentWindow:t.parentWindow||t.window||window)!=top||5.8>i("jscript"))&&!i("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var r=t[n];if(!r||!r.listeners){var o=r,r=Function("event","var callee = arguments.callee; for(var i = 0; i<callee.listeners.length; i++){var listener = _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");r.listeners=[],t[n]=r,r.global=this,o&&r.listeners.push(_dojoIEListeners_.push(o)-1)}return r.listeners.push(t=r.global._dojoIEListeners_.push(s)-1),new m(t)}return e.after(t,n,s,!0)},y=function(){this.cancelBubble=!0},v=a._preventDefault=function(){if(this.bubbledKeyCode=this.keyCode,this.ctrlKey)try{this.keyCode=0}catch(e){}this.defaultPrevented=!0,this.returnValue=!1,this.modified=!0}}if(i("touch"))var b=function(){},x=window.orientation,w=function(e){return function(t){var n=t.corrected;if(!n){var s=t.type;try{delete t.type}catch(r){}if(t.type){if(i("mozilla")){var o,n={};for(o in t)n[o]=t[o]}else b.prototype=t,n=new b;n.preventDefault=function(){t.preventDefault()},n.stopPropagation=function(){t.stopPropagation()}}else n=t,n.type=s;if(t.corrected=n,"resize"==s)return x==window.orientation?null:(x=window.orientation,n.type="orientationchange",e.call(this,n));"rotation"in n||(n.rotation=0,n.scale=1);var a,s=n.changedTouches[0];for(a in s)delete n[a],n[a]=s[a]}return e.call(this,n)}};return a})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(e,t,i){return e._name="browser",t.mixin(e,{isBrowser:!0,isFF:i("ff"),isIE:i("ie"),isKhtml:i("khtml"),isWebKit:i("webkit"),isMozilla:i("mozilla"),isMoz:i("mozilla"),isOpera:i("opera"),isSafari:i("safari"),isChrome:i("chrome"),isMac:i("mac"),isIos:i("ios"),isAndroid:i("android"),isWii:i("wii"),isQuirks:i("quirks"),isAir:i("air")}),i})},"dojo/errors/create":function(){define(["../_base/lang"],function(e){return function(t,i,n,s){n=n||Error;var r=function(e){if(n===Error){Error.captureStackTrace&&Error.captureStackTrace(this,r);var t,s=Error.call(this,e);for(t in s)s.hasOwnProperty(t)&&(this[t]=s[t]);this.message=e,this.stack=s.stack}else n.apply(this,arguments);i&&i.apply(this,arguments)};return r.prototype=e.delegate(n.prototype,s),r.prototype.name=t,r.prototype.constructor=r}})},"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(e,t,i){function n(e){return a[e]=new Function("item","index","array",e)}function s(e){var t=!e;return function(i,s,r){var o,l=0,c=i&&i.length||0;if(c&&"string"==typeof i&&(i=i.split("")),"string"==typeof s&&(s=a[s]||n(s)),r){for(;c>l;++l)if(o=!s.call(r,i[l],l,i),e^o)return!o}else for(;c>l;++l)if(o=!s(i[l],l,i),e^o)return!o;return t}}function r(e){var t=1,i=0,n=0;return e||(t=i=n=-1),function(s,r,a,c){if(c&&t>0)return l.lastIndexOf(s,r,a);c=s&&s.length||0;var h=e?c+n:i;for(a===o?a=e?i:c+n:0>a?(a=c+a,0>a&&(a=i)):a=a>=c?c+n:a,c&&"string"==typeof s&&(s=s.split(""));a!=h;a+=t)if(s[a]==r)return a;return-1}}var o,a={},l={every:s(!1),some:s(!0),indexOf:r(!0),lastIndexOf:r(!1),forEach:function(e,t,i){var s=0,r=e&&e.length||0;if(r&&"string"==typeof e&&(e=e.split("")),"string"==typeof t&&(t=a[t]||n(t)),i)for(;r>s;++s)t.call(i,e[s],s,e);else for(;r>s;++s)t(e[s],s,e)},map:function(e,t,i,s){var r=0,o=e&&e.length||0;if(s=new(s||Array)(o),o&&"string"==typeof e&&(e=e.split("")),"string"==typeof t&&(t=a[t]||n(t)),i)for(;o>r;++r)s[r]=t.call(i,e[r],r,e);else for(;o>r;++r)s[r]=t(e[r],r,e);return s},filter:function(e,t,i){var s,r=0,o=e&&e.length||0,l=[];if(o&&"string"==typeof e&&(e=e.split("")),"string"==typeof t&&(t=a[t]||n(t)),i)for(;o>r;++r)s=e[r],t.call(i,s,r,e)&&l.push(s);else for(;o>r;++r)s=e[r],t(s,r,e)&&l.push(s);return l},clearCache:function(){a={}}};return i.mixin(e,l),l})},"dojo/_base/json":function(){define(["./kernel","../json"],function(b,n){return b.fromJson=function(b){return eval("("+b+")")},b._escapeString=n.stringify,b.toJsonIndentStr="	",b.toJson=function(e,t){return n.stringify(e,function(e,t){if(t){var i=t.__json__||t.json;if("function"==typeof i)return i.call(t)}return t},t&&b.toJsonIndentStr)},b})},"dojo/_base/window":function(){define(["./kernel","./lang","../sniff"],function(e,t,i){var n={global:e.global,doc:this.document||null,body:function(t){return t=t||e.doc,t.body||t.getElementsByTagName("body")[0]},setContext:function(t,i){e.global=n.global=t,e.doc=n.doc=i},withGlobal:function(t,i,s,r){var o=e.global;try{return e.global=n.global=t,n.withDoc.call(null,t.document,i,s,r)}finally{e.global=n.global=o}},withDoc:function(t,s,r,o){var a,l,c,h=n.doc,d=i("quirks"),u=i("ie");try{return e.doc=n.doc=t,e.isQuirks=i.add("quirks","BackCompat"==e.doc.compatMode,!0,!0),i("ie")&&(c=t.parentWindow)&&c.navigator&&(a=parseFloat(c.navigator.appVersion.split("MSIE ")[1])||void 0,(l=t.documentMode)&&5!=l&&Math.floor(a)!=l&&(a=l),e.isIE=i.add("ie",a,!0,!0)),r&&"string"==typeof s&&(s=r[s]),s.apply(r,o||[])}finally{e.doc=n.doc=h,e.isQuirks=i.add("quirks",d,!0,!0),e.isIE=i.add("ie",u,!0,!0)}}};return t.mixin(e,n),n})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array","./dom"],function(e,t,i){function n(e){return"string"==typeof e||e instanceof String?e&&!r.test(e)?(o[0]=e,o):(e=e.split(r),e.length&&!e[0]&&e.shift(),e.length&&!e[e.length-1]&&e.pop(),e):e?t.filter(e,function(e){return e}):[]}var s,r=/\s+/,o=[""],a={};return s={contains:function(e,t){return 0<=(" "+i.byId(e).className+" ").indexOf(" "+t+" ")},add:function(e,t){e=i.byId(e),t=n(t);var s,r=e.className,r=r?" "+r+" ":" ";s=r.length;for(var o,a=0,l=t.length;l>a;++a)(o=t[a])&&0>r.indexOf(" "+o+" ")&&(r+=o+" ");s<r.length&&(e.className=r.substr(1,r.length-2))},remove:function(t,s){t=i.byId(t);var r;if(void 0!==s){s=n(s),r=" "+t.className+" ";for(var o=0,a=s.length;a>o;++o)r=r.replace(" "+s[o]+" "," ");r=e.trim(r)}else r="";t.className!=r&&(t.className=r)},replace:function(e,t,n){e=i.byId(e),a.className=e.className,s.remove(a,n),s.add(a,t),e.className!==a.className&&(e.className=a.className)},toggle:function(e,t,r){if(e=i.byId(e),void 0===r){t=n(t);for(var o,a=0,l=t.length;l>a;++a)o=t[a],s[s.contains(e,o)?"remove":"add"](e,o)}else s[r?"add":"remove"](e,t);return r}}})},"dojo/_base/config":function(){define(["../has","require"],function(e,t){var i,n={},s=t.rawConfig;for(i in s)n[i]=s[i];return!n.locale&&"undefined"!=typeof navigator&&(n.locale=(navigator.language||navigator.userLanguage).toLowerCase()),n})},"dojo/main":function(){define("./_base/kernel ./has require ./sniff ./_base/lang ./_base/array ./_base/config ./ready ./_base/declare ./_base/connect ./_base/Deferred ./_base/json ./_base/Color ./has!dojo-firebug?./_firebug/firebug ./_base/browser ./_base/loader".split(" "),function(e,t,i,n,s,r,o,a){o.isDebug&&i(["./_firebug/firebug"]);var l=o.require;return l&&(l=r.map(s.isArray(l)?l:[l],function(e){return e.replace(/\./g,"/")}),e.isAsync?i(l):a(1,function(){i(l)})),e})},"dojo/_base/event":function(){define(["./kernel","../on","../has","../dom-geometry"],function(e,t,i,n){if(t._fixEvent){var s=t._fixEvent;t._fixEvent=function(e,t){return(e=s(e,t))&&n.normalizeEvent(e),e}}var r={fix:function(e,i){return t._fixEvent?t._fixEvent(e,i):e},stop:function(e){i("dom-addeventlistener")||e&&e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e=e||window.event,e.cancelBubble=!0,t._preventDefault.call(e))}};return e.fixEvent=r.fix,e.stopEvent=r.stop,r})},"dojo/sniff":function(){define(["./has"],function(e){var t=navigator,i=t.userAgent,n=t.appVersion,t=parseFloat(n);if(e.add("air",0<=i.indexOf("AdobeAIR")),e.add("msapp",parseFloat(i.split("MSAppHost/")[1])||void 0),e.add("khtml",0<=n.indexOf("Konqueror")?t:void 0),e.add("webkit",parseFloat(i.split("WebKit/")[1])||void 0),e.add("chrome",parseFloat(i.split("Chrome/")[1])||void 0),e.add("safari",0<=n.indexOf("Safari")&&!e("chrome")?parseFloat(n.split("Version/")[1]):void 0),e.add("mac",0<=n.indexOf("Macintosh")),e.add("quirks","BackCompat"==document.compatMode),i.match(/(iPhone|iPod|iPad)/)){var s=RegExp.$1.replace(/P/,"p"),r=i.match(/OS ([\d_]+)/)?RegExp.$1:"1",r=parseFloat(r.replace(/_/,".").replace(/_/g,""));e.add(s,r),e.add("ios",r)}return e.add("android",parseFloat(i.split("Android ")[1])||void 0),e.add("bb",(0<=i.indexOf("BlackBerry")||0<=i.indexOf("BB10"))&&parseFloat(i.split("Version/")[1])||void 0),e.add("svg","undefined"!=typeof SVGAngle),e("webkit")||(0<=i.indexOf("Opera")&&e.add("opera",t>=9.8?parseFloat(i.split("Version/")[1])||t:t),s=0,document.all&&!e("opera")?s=parseFloat(n.split("MSIE ")[1])||void 0:n.indexOf("Trident")&&(s=parseFloat(n.split("rv:")[1])||void 0),s&&((n=document.documentMode)&&5!=n&&Math.floor(s)!=n&&(s=n),e.add("ie",s)),!e("ie")&&0<=i.indexOf("Gecko")&&!e("khtml")&&!e("webkit")&&e.add("mozilla",t),e("mozilla")&&e.add("ff",parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0),e.add("wii","undefined"!=typeof opera&&opera.wiiremote)),e})},"dojo/request/handlers":function(){define(["../json","../_base/kernel","../_base/array","../has","../selector/_loader"],function(e,t,i,n){function s(e){var t=a[e.options.handleAs];return e.data=t?t(e):e.data||e.text,e}n.add("activex","undefined"!=typeof ActiveXObject),n.add("dom-parser",function(e){return"DOMParser"in e});var r;if(n("activex")){var o=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"];r=function(e){var t=e.data;if(t&&n("dom-qsa2.1")&&!t.querySelectorAll&&n("dom-parser")&&(t=(new DOMParser).parseFromString(e.text,"application/xml")),!t||!t.documentElement){var s=e.text;i.some(o,function(e){try{var i=new ActiveXObject(e);i.async=!1,i.loadXML(s),t=i}catch(n){return!1}return!0})}return t}}var a={javascript:function(e){return t.eval(e.text||"")},json:function(t){return e.parse(t.text||null)},xml:r};return s.register=function(e,t){a[e]=t},s})},"dojo/aspect":function(){define([],function(){function e(e,t,i,s){var r,o=e[t],a="around"==t;if(a){var l=i(function(){return o.advice(this,arguments)});r={remove:function(){l&&(l=e=i=null)},advice:function(e,t){return l?l.apply(e,t):o.advice(e,t)}}}else r={remove:function(){if(r.advice){var n=r.previous,s=r.next;s||n?(n?n.next=s:e[t]=s,s&&(s.previous=n)):delete e[t],e=i=r.advice=null}},id:n++,advice:i,receiveArguments:s};if(o&&!a)if("after"==t){for(;o.next&&(o=o.next););o.next=r,r.previous=o}else"before"==t&&(e[t]=r,r.next=o,o.previous=r);else e[t]=r;return r}function t(t){return function(s,r,o,a){var l,c=s[r];return c&&c.target==s||(s[r]=l=function(){for(var e=n,t=arguments,s=l.before;s;)t=s.advice.apply(this,t)||t,s=s.next;if(l.around)var r=l.around.advice(this,t);for(s=l.after;s&&s.id<e;){if(s.receiveArguments)var o=s.advice.apply(this,t),r=o===i?r:o;else r=s.advice.call(this,r,t);s=s.next}return r},c&&(l.around={advice:function(e,t){return c.apply(e,t)}}),l.target=s),s=e(l||c,t,o,a),o=null,s}}var i,n=0,s=t("after"),r=t("before"),o=t("around");return{before:r,around:o,after:s}})},"dojo/ready":function(){define(["./_base/kernel","./has","require","./domReady","./_base/lang"],function(e,t,i,n,s){var r=0,o=[],a=0;t=function(){r=1,e._postLoad=e.config.afterOnLoad=!0,l()};var l=function(){if(!a){for(a=1;r&&(!n||0==n._Q.length)&&(i.idle?i.idle():1)&&o.length;){var e=o.shift();try{e()}catch(t){if(t.info=t.message,!i.signal)throw t;i.signal("error",t)}}a=0}};i.on&&i.on("idle",l),n&&(n._onQEmpty=l);var c=e.ready=e.addOnLoad=function(t,i,n){var r=s._toArray(arguments);for("number"!=typeof t?(n=i,i=t,t=1e3):r.shift(),n=n?s.hitch.apply(e,r):function(){i()},n.priority=t,r=0;r<o.length&&t>=o[r].priority;r++);o.splice(r,0,n),l()},h=e.config.addOnLoad;return h&&c[s.isArray(h)?"apply":"call"](e,h),e.config.parseOnLoad&&!e.isAsync&&c(99,function(){e.parser||(e.deprecated("Add explicit require(['dojo/parser']);","","2.0"),i(["dojo/parser"]))}),n?n(t):t(),c})},"dojo/_base/connect":function(){define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),function(e,t,i,n,s,r,o,a){function l(i,s,o,l,c){if(l=a.hitch(o,l),!i||!i.addEventListener&&!i.attachEvent)return n.after(i||e.global,s,l,!0);if("string"==typeof s&&"on"==s.substring(0,2)&&(s=s.substring(2)),i||(i=e.global),!c)switch(s){case"keypress":s=h;break;case"mouseenter":s=r.enter;break;case"mouseleave":s=r.leave}return t(i,s,l,c)}function c(e){e.keyChar=e.charCode?String.fromCharCode(e.charCode):"",e.charOrCode=e.keyChar||e.keyCode}o.add("events-keypress-typed",function(){var e={charCode:0};try{e=document.createEvent("KeyboardEvent"),(e.initKeyboardEvent||e.initKeyEvent).call(e,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(t){}return 0==e.charCode&&!o("opera")});var h,d={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},u=o("mac")?"metaKey":"ctrlKey",f=function(e,t){var i=a.mixin({},e,t);return c(i),i.preventDefault=function(){e.preventDefault()},i.stopPropagation=function(){e.stopPropagation()},i};h=o("events-keypress-typed")?function(e,i){var n=t(e,"keydown",function(e){var t=e.keyCode,n=13!=t&&32!=t&&(27!=t||!o("ie"))&&(48>t||t>90)&&(96>t||t>111)&&(186>t||t>192)&&(219>t||t>222)&&229!=t;if(n||e.ctrlKey){if(n=n?0:t,e.ctrlKey){if(3==t||13==t)return i.call(e.currentTarget,e);n=n>95&&106>n?n-48:!e.shiftKey&&n>=65&&90>=n?n+32:d[n]||n}if(t=f(e,{type:"keypress",faux:!0,charCode:n}),i.call(e.currentTarget,t),o("ie"))try{e.keyCode=t.keyCode}catch(s){}}}),s=t(e,"keypress",function(e){var t=e.charCode;return e=f(e,{charCode:t>=32?t:0,faux:!0}),i.call(this,e)});return{remove:function(){n.remove(),s.remove()}}}:o("opera")?function(e,i){return t(e,"keypress",function(e){var t=e.which;return 3==t&&(t=99),t=32>t&&!e.shiftKey?0:t,e.ctrlKey&&!e.shiftKey&&t>=65&&90>=t&&(t+=32),i.call(this,f(e,{charCode:t}))})}:function(e,i){return t(e,"keypress",function(e){return c(e),i.call(this,e)})};var p={_keypress:h,connect:function(){var e=arguments,t=[],i=0;t.push("string"==typeof e[0]?null:e[i++],e[i++]);var n=e[i+1];for(t.push("string"==typeof n||"function"==typeof n?e[i++]:null,e[i++]),n=e.length;n>i;i++)t.push(e[i]);return l.apply(this,t)},disconnect:function(e){e&&e.remove()},subscribe:function(e,t,n){return i.subscribe(e,a.hitch(t,n))},publish:function(e,t){return i.publish.apply(i,[e].concat(t))},connectPublisher:function(e,t,i){var n=function(){p.publish(e,arguments)};return i?p.connect(t,i,n):p.connect(t,n)},isCopyKey:function(e){return e[u]}};return p.unsubscribe=p.disconnect,a.mixin(e,p),p})},"dojo/errors/CancelError":function(){define(["./create"],function(e){return e("CancelError",null,null,{dojoType:"cancel"})})},"*noref":1}}),function(){var e=this.require;e({cache:{}}),!e.async&&e(["dojo"]),e.boot&&e.apply(null,e.boot)}(),require({cache:{"esri/layers/TimeReference":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(e,t,i,n){return e=e(null,{declaredClass:"esri.layers.TimeReference",constructor:function(e){e&&t.mixin(this,e)}}),i("extend-esri")&&t.setObject("layers.TimeReference",e,n),e})},"dijit/form/TextBox":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main".split(" "),function(e,t,i,n,s,r,o,a,l,c,h){return a=e("dijit.form.TextBox"+(o("dojo-bidi")?"_NoBidi":""),[a,l],{templateString:c,_singleNodeTemplate:'<input class="dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point="textbox,focusNode" autocomplete="off" type="${type}" ${!nameAttrSetting} />',_buttonInputDisabled:o("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var e=this.type.toLowerCase();(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==e||"file"==e)&&this.templateString==this.constructor.prototype.templateString)&&(this.templateString=this._singleNodeTemplate),this.inherited(arguments)},postCreate:function(){this.inherited(arguments),9>o("ie")&&this.defer(function(){try{var e=i.getComputedStyle(this.domNode);if(e){var t=e.fontFamily;if(t){var n=this.domNode.getElementsByTagName("INPUT");if(n)for(e=0;e<n.length;e++)n[e].style.fontFamily=t}}}catch(s){}})},_setPlaceHolderAttr:function(e){this._set("placeHolder",e),this._phspan||(this._attachPoints.push("_phspan"),this._phspan=t.create("span",{onmousedown:function(e){e.preventDefault()},className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(r(this._phspan,"touchend, MSPointerUp",s.hitch(this,function(){this.focus()})))),this._phspan.innerHTML="",this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(e)),this._updatePlaceHolder()},_onInput:function(){this.inherited(arguments),this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(){this.inherited(arguments),this._updatePlaceHolder()},getDisplayedValue:function(){return n.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0"),this.get("displayedValue")},setDisplayedValue:function(e){n.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0"),this.set("displayedValue",e)},_onBlur:function(){this.disabled||(this.inherited(arguments),this._updatePlaceHolder(),o("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(){!this.disabled&&!this.readOnly&&(this.inherited(arguments),this._updatePlaceHolder())}}),o("ie")&&(a.prototype._isTextSelected=function(){var e=this.ownerDocument.selection.createRange();return e.parentElement()==this.textbox&&0<e.text.length},h._setSelectionRange=l._setSelectionRange=function(e,t,i){e.createTextRange&&(e=e.createTextRange(),e.collapse(!0),e.moveStart("character",-99999),e.moveStart("character",t),e.moveEnd("character",i-t),e.select())}),o("dojo-bidi")&&(a=e("dijit.form.TextBox",a,{_setPlaceHolderAttr:function(){this.inherited(arguments),this.applyTextDir(this._phspan)}})),a})},"esri/tasks/QueryTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has esri/kernel esri/request esri/deferredUtils esri/geometry/normalizeUtils esri/tasks/Task esri/tasks/FeatureSet".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d){return e=e(h,{declaredClass:"esri.tasks.QueryTask",_eventMap:{complete:["featureSet"],"execute-for-count-complete":["count"],"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},constructor:function(e,i){this._handler=t.hitch(this,this._handler),this._relationshipQueryHandler=t.hitch(this,this._relationshipQueryHandler),this._executeForIdsHandler=t.hitch(this,this._executeForIdsHandler),this._countHandler=t.hitch(this,this._countHandler),this.source=i&&i.source,this.gdbVersion=i&&i.gdbVersion,this.registerConnectEvents()},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},execute:function(e,i,n,r,o){var l=o.assembly;e=this._encode(t.mixin({},this._url.query,{f:"json"},e.toJson(l&&l[0])));var c=this._handler,h=this._errorHandler;return this.source&&(l={source:this.source.toJson()},e.layer=s.toJson(l)),this.gdbVersion&&(e.gdbVersion=this.gdbVersion),a({url:this._url.path+"/query",content:e,callbackParamName:"callback",load:function(e,t){c(e,t,i,n,o.dfd)},error:function(e){h(e,n,o.dfd)},callbackSuffix:r},this.requestOptions)},executeRelationshipQuery:function(e,i,s){e=this._encode(t.mixin({},this._url.query,{f:"json"},e.toJson()));var r=this._relationshipQueryHandler,o=this._errorHandler;this.gdbVersion&&(e.gdbVersion=this.gdbVersion);var c=new n(l._dfdCanceller);return c._pendingDfd=a({url:this._url.path+"/queryRelatedRecords",content:e,callbackParamName:"callback",load:function(e,t){r(e,t,i,s,c)},error:function(e){o(e,s,c)}},this.requestOptions),c},executeForIds:function(e,i,n,r){var o=r.assembly;e=this._encode(t.mixin({},this._url.query,{f:"json",returnIdsOnly:!0},e.toJson(o&&o[0])));var l=this._executeForIdsHandler,c=this._errorHandler;return this.source&&(o={source:this.source.toJson()},e.layer=s.toJson(o)),this.gdbVersion&&(e.gdbVersion=this.gdbVersion),a({url:this._url.path+"/query",content:e,callbackParamName:"callback",load:function(e,t){l(e,t,i,n,r.dfd)},error:function(e){c(e,n,r.dfd)}},this.requestOptions)},executeForCount:function(e,i,n,r){var o=r.assembly;e=this._encode(t.mixin({},this._url.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},e.toJson(o&&o[0])));var l=this._countHandler,c=this._errorHandler;return this.source&&(o={source:this.source.toJson()},e.layer=s.toJson(o)),this.gdbVersion&&(e.gdbVersion=this.gdbVersion),a({url:this._url.path+"/query",content:e,callbackParamName:"callback",load:function(e,t){l(e,t,i,n,r.dfd)},error:function(e){c(e,n,r.dfd)}},this.requestOptions)},_handler:function(e,t,i,n,s){try{var r=new d(e);this._successHandler([r],"onComplete",i,s)}catch(o){this._errorHandler(o,n,s)}},_relationshipQueryHandler:function(e,t,n,s,r){try{var o=e.geometryType,a=e.spatialReference,l={};i.forEach(e.relatedRecordGroups,function(e){var t={};t.geometryType=o,t.spatialReference=a,t.features=e.relatedRecords,t=new d(t),l[e.objectId]=t}),this._successHandler([l],"onExecuteRelationshipQueryComplete",n,r)}catch(c){this._errorHandler(c,s,r)}},_executeForIdsHandler:function(e,t,i,n,s){try{this._successHandler([e.objectIds],"onExecuteForIdsComplete",i,s)}catch(r){this._errorHandler(r,n,s)}},_countHandler:function(e,t,i,n,s){try{var r,o=e.features,a=e.objectIds;if(a)r=a.length;else{if(o)throw Error("Unable to perform query. Please check your parameters.");r=e.count}this._successHandler([r],"onExecuteForCountComplete",i,s)}catch(l){this._errorHandler(l,n,s)}}}),c._createWrappers(e),r("extend-esri")&&t.setObject("tasks.QueryTask",e,o),e})},"esri/symbols/Font":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base esri/kernel esri/lang".split(" "),function(e,t,i,n,s,r){return e=e(null,{declaredClass:"esri.symbol.Font",constructor:function(e,s,r,o,a){e?t.isObject(e)?t.mixin(this,e):(this.size=e,parseFloat(this.size)==this.size&&(this.size+="px"),void 0!==s&&(this.style=s),void 0!==r&&(this.variant=r),void 0!==o&&(this.weight=o),void 0!==a&&(this.family=a)):t.mixin(this,n.defaultFont),parseFloat(this.size)==this.size&&(this.size+="pt"),9>i("ie")&&this.size&&t.isString(this.size)&&-1<this.size.indexOf("em")&&(this.size=n.pt2px(12*parseFloat(this.size))+"px"),this.size=this._convert2PxSize(this.size)},setSize:function(e){return this.size=this._convert2PxSize(e),this},_convert2PxSize:function(e){var i;return parseFloat(e)==e?i=e:t.isString(e)&&(-1<e.indexOf("pt")?i=n.pt2px(parseFloat(e)):-1<e.indexOf("px")?i=parseFloat(e):-1<e.indexOf("em")?i=n.pt2px(12*parseFloat(e)):-1<e.indexOf("%")&&(i=n.pt2px(.12*parseFloat(e)))),i},setStyle:function(e){return this.style=e,this},setVariant:function(e){return this.variant=e,this},setWeight:function(e){return this.weight=e,this},setFamily:function(e){return this.family=e,this},setDecoration:function(e){return this.decoration=e,this},toJson:function(){return r.fixJson({size:n.px2pt(this.size),style:this.style,variant:this.variant,decoration:this.decoration,weight:this.weight,family:this.family})}}),t.mixin(e,{STYLE_NORMAL:"normal",STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"}),i("extend-esri")&&t.setObject("symbol.Font",e,s),e})},"esri/sniff":function(){define(["dojo/_base/sniff","esri/kernel"],function(e,t){var i,n=e("ff"),s=e("ie"),r=e("webkit"),o=e("opera"),a=e("chrome"),l=e("safari"),c=navigator.userAgent;return(i=c.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+\_\d+)/i))&&e.add("esri-iphone",parseFloat(i[2].replace("_","."))),(i=c.match(/Android\s+(\d+\.\d+)/i))&&e.add("esri-android",parseFloat(i[1])),(i=c.match(/Fennec\/(\d+\.\d+)/i))&&e.add("esri-fennec",parseFloat(i[1])),0<=c.indexOf("BlackBerry")&&0<=c.indexOf("WebKit")&&e.add("esri-blackberry",1),e.add("esri-touch",e("esri-iphone")||e("esri-android")||e("esri-blackberry")||6<=e("esri-fennec")||(n||r)&&document.createTouch?!0:!1),e.add("esri-pointer",navigator.pointerEnabled||navigator.msPointerEnabled),t._getDOMAccessor=function(e){var t="";return n?t="Moz":r?t="Webkit":s?t="ms":o&&(t="O"),t+e.charAt(0).toUpperCase()+e.substr(1)},e.add("esri-cors",a>=4||n>=3.5||l>=4||s>=10),e.add("esri-file-upload",window.FormData&&window.FileList?!0:!1),e.add("esri-workers",window.Worker?!0:!1),e.add("esri-transforms",s>=9||n>=3.5||a>=4||l>=3.1||o>=10.5||3.2<=e("esri-iphone")||2.1<=e("esri-android")),e.add("esri-transitions",s>=10||n>=4||a>=4||l>=3.1||o>=10.5||3.2<=e("esri-iphone")||2.1<=e("esri-android")),e.add("esri-transforms3d",s>=11||n>=10||a>=12||l>=4||3.2<=e("esri-iphone")||3<=e("esri-android")),3>e("esri-android")&&(e.add("esri-transforms",!1,!1,!0),e.add("esri-transitions",!1,!1,!0),e.add("esri-transforms3d",!1,!1,!0)),t._css=function(t){var i=e("esri-transforms3d");
void 0!==t&&null!==t?i=t:i&&(a||l&&!e("esri-iphone"))&&(i=!1);var c=i?"translate3d(":"translate(",h=i?a?",-1px)":",0px)":")",d=i?"scale3d(":"scale(",u=i?",1)":")",f=i?"rotate3d(0,0,1,":"rotate(",p=i?"matrix3d(":"matrix(",m=i?",0,0,":",",_=i?",0,0,0,0,1,0,":",",g=i?",0,1)":")";return{names:{transition:r&&"-webkit-transition"||n&&"MozTransition"||o&&"OTransition"||s&&"msTransition",transform:r&&"-webkit-transform"||n&&"MozTransform"||o&&"OTransform"||s&&"msTransform",transformName:r&&"-webkit-transform"||n&&"-moz-transform"||o&&"-o-transform"||s&&"-ms-transform",origin:r&&"-webkit-transform-origin"||n&&"MozTransformOrigin"||o&&"OTransformOrigin"||s&&"msTransformOrigin",endEvent:r&&"webkitTransitionEnd"||n&&"transitionend"||o&&"oTransitionEnd"||s&&"MSTransitionEnd"},translate:function(e,t){return c+e+"px,"+t+"px"+h},scale:function(e){return d+e+","+e+u},rotate:function(e){return f+e+"deg)"},matrix:function(e){return p+e.xx+","+e.xy+m+e.yx+","+e.yy+_+e.dx.toFixed(10)+(n?"px,":",")+e.dy.toFixed(10)+(n?"px":"")+g}}},e("extend-esri")&&(t.isiPhone=e("esri-iphone"),t.isAndroid=e("esri-android"),t.isFennec=e("esri-fennec"),t.isBlackBerry=e("esri-blackberry"),t.isTouchEnabled=e("esri-touch"),t.isPointerEnabled=e("esri-pointer"),t._hasCors=e("esri-cors"),t._hasFileUpload=e("esri-file-upload"),t._hasTransforms=e("esri-transforms"),t._hasTransitions=e("esri-transitions"),t._has3DTransforms=e("esri-transforms3d")),e})},"esri/tasks/NAMessage":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(e,t,i,n){return e=e(null,{declaredClass:"esri.tasks.NAMessage",constructor:function(e){t.mixin(this,e)}}),t.mixin(e,{TYPE_INFORMATIVE:0,TYPE_PROCESS_DEFINITION:1,TYPE_PROCESS_START:2,TYPE_PROCESS_STOP:3,TYPE_WARNING:50,TYPE_ERROR:100,TYPE_EMPTY:101,TYPE_ABORT:200}),i("extend-esri")&&t.setObject("tasks.NAMessage",e,n),e})},"dijit/_base/scroll":function(){define(["dojo/window","../main"],function(e,t){t.scrollIntoView=function(t,i){e.scrollIntoView(t,i)}})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(e,t,i,n,s,r,o,a){var l=t("dijit._TemplatedMixin",a,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(e){var t=this.declaredClass,i=this;return o.substitute(e,this,function(e,s){if("!"==s.charAt(0)&&(e=n.getObject(s.substr(1),!1,i)),"undefined"==typeof e)throw Error(t+" template:"+s);return null==e?"":"!"==s.charAt(0)?e:e.toString().replace(/"/g,"&quot;")},this)},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=e(this.templatePath,{sanitize:!0}));var t,s=l.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument);if(n.isString(s)){if(t=i.toDom(this._stringRepl(s),this.ownerDocument),1!=t.nodeType)throw Error("Invalid template: "+s)}else t=s.cloneNode(!0);this.domNode=t}this.inherited(arguments),this._rendered||this._fillContent(this.srcNodeRef),this._rendered=!0},_fillContent:function(e){var t=this.containerNode;if(e&&t)for(;e.hasChildNodes();)t.appendChild(e.firstChild)}});return l._templateCache={},l.getCachedTemplate=function(e,t,n){var s=l._templateCache,r=e,a=s[r];if(a){try{if(!a.ownerDocument||a.ownerDocument==(n||document))return a}catch(c){}i.destroy(a)}if(e=o.trim(e),t||e.match(/\$\{([^\}]+)\}/g))return s[r]=e;if(t=i.toDom(e,n),1!=t.nodeType)throw Error("Invalid template: "+e);return s[r]=t},r("ie")&&s(window,"unload",function(){var e,t=l._templateCache;for(e in t){var n=t[e];"object"==typeof n&&i.destroy(n),delete t[e]}}),l})},"esri/dijit/Attribution":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/kernel dojo/has dojo/query dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-style dojo/dom-class dojo/dom-geometry esri/kernel esri/lang esri/SpatialReference esri/geometry/webMercatorUtils esri/geometry/Extent".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p,m,_,g){return e=e(null,{declaredClass:"esri.dijit.Attribution",itemDelimiter:" | ",listClass:"esriAttributionList",itemClass:"esriAttributionItem",lastItemClass:"esriAttributionLastItem",delimiterClass:"esriAttributionDelim",constructor:function(e,i){try{t.mixin(this,e),this._attributions={},this._pendingDfds={},this._activeLayers=[],this._sharedLayers=[];var r=this.domNode=a.byId(i),o=this.map,c="<span class='"+this.listClass+"'></span>";if(r&&(l.set(r,"innerHTML",c),this.listNode=s.query(".esriAttributionList",r)[0],this.itemNodes={}),this._eventConnections=[n.connect(o,"onLayerAdd",this,this._onLayerAdd),n.connect(o,"onLayerRemove",this,this._onLayerRemove),n.connect(o,"onLayerSuspend",this,this._onLayerSuspend),n.connect(o,"onLayerResume",this,this._onLayerResume),n.connect(o,"onExtentChange",this,this._onExtentChange)],o.loaded){var h,d,u=o.layerIds.concat(o.graphicsLayerIds),f=u.length;for(d=0;f>d;d++)h=o.getLayer(u[d]),h.loaded&&this._onLayerAdd(h)}}catch(p){}},startup:function(){},destroy:function(){i.forEach(this._eventConnections,n.disconnect),c.destroy(this.listNode),this.map=this.domNode=this._eventConnections=this.listNode=this._attributions=this._pendingDfds=this.itemNodes=this._activeLayers=this._lastItem=this._sharedLayers=null},_onLayerAdd:function(e){try{var i=this._attributions,n=e.id;if(!p.isDefined(i[n])&&e.showAttribution)if(e.hasAttributionData){var s=e.getAttributionData();this._pendingDfds[n]=1,i[n]=s,s.addBoth(t.partial(this._onAttributionLoad,this,e))}else i[n]=e.copyright||e.copyrightText||"",i[n]?(e.suspended||this._activeLayers.push(n),this._createNode(n)):this._onLayerRemove(e)}catch(r){}},_onAttributionLoad:function(e,t,i){var n=e._attributions,s=e._pendingDfds,r=t.id;s&&s[r]&&(delete s[r],(!i||i instanceof Error)&&(i=""),n[r]=i?e._createIndexByLevel(i,-1!==t.declaredClass.toLowerCase().indexOf("vetiledlayer")):t.copyright||t.copyrightText||"",n[r]?(t.suspended||e._activeLayers.push(r),e._createNode(r)):e._onLayerRemove(t))},_onLayerRemove:function(e){try{var t,n=e.id,s=this.itemNodes,r=-1;this._onLayerSuspend(e),delete this._attributions[n],delete this._pendingDfds[n],t=this._getGroupIndex(n),-1!==t&&(r=i.indexOf(this._sharedLayers[t],n),-1!==r&&(this._sharedLayers[t].splice(r,1),1>=this._sharedLayers[t].length&&this._sharedLayers.splice(t,1))),s[n]&&-1===r&&c.destroy(s[n]),delete s[n],this._updateLastItem()}catch(o){}},_onLayerSuspend:function(e){try{var t=e.id;if(this._attributions[t]){var n=i.indexOf(this._activeLayers,t),s=this.itemNodes[t];-1!==n&&this._activeLayers.splice(n,1),s&&this._toggleItem(s,!1,this._getGroupIndex(t))}}catch(r){}},_onLayerResume:function(e){try{var n=e.id,s=this._attributions[n],r=this.itemNodes[n];if(s&&(-1===i.indexOf(this._activeLayers,n)&&this._activeLayers.push(n),r)){var o=t.isString(s)?s:this._getContributorsList(s,this.map.extent,this.map.getLevel());t.isString(s)||l.set(r,"innerHTML",o?o+this._getDelimiter():""),o&&this._toggleItem(r,!0,this._getGroupIndex(n))}}catch(a){}},_onExtentChange:function(e,i,n,s){try{var r,o,a,c,h=this._activeLayers,d=this._attributions,u=this.itemNodes,f=h.length||0;for(c=0;f>c;c++)if(o=h[c],a=d[o],(r=u[o])&&!t.isString(a)){var p=this._getContributorsList(a,e,s?s.level:-1);l.set(r,"innerHTML",p?p+this._getDelimiter():""),this._toggleItem(r,!!p,-1)}}catch(m){}this._adjustCursorStyle()},_createNode:function(e){if(this.domNode){var i=this._checkShareInfo(e),n=i&&i.sharedWith,n=n&&this.itemNodes[n],s=this.map,r=this._attributions[e],r=t.isString(r)?r:this._getContributorsList(r,s.extent,s.getLevel()),s=!!r&&!s.getLayer(e).suspended;n?(this.itemNodes[e]=n,this._toggleItem(n,s,i.index)):(e=this.itemNodes[e]=c.create("span",{"class":this.itemClass,innerHTML:r?r+this._getDelimiter():"",style:{display:s?"inline":"none"}},this.listNode),s&&this._setLastItem(e)),this._adjustCursorStyle()}},_checkShareInfo:function(e){var n,s,r,o=this._attributions,a=-1,l=o[e];if(l&&t.isString(l)){for(s in o)if(n=o[s],s!==e&&n&&t.isString(n)&&n.length===l.length&&n.toLowerCase()===l.toLowerCase()){r=s;break}if(o=this._sharedLayers,n=o.length,r){for(s=0;n>s;s++)if(l=o[s],-1!==i.indexOf(l,r)){a=s,l.push(e);break}-1===a&&(a=o.push([r,e])-1)}}return a>-1?{index:a,sharedWith:r}:null},_getGroupIndex:function(e){var t,n=this._sharedLayers,s=n.length,r=-1;for(t=0;s>t;t++)if(-1!==i.indexOf(n[t],e)){r=t;break}return r},_getDelimiter:function(){var e=this.itemDelimiter;return e?"<span class='"+this.delimiterClass+"'>"+e+"</span>":""},_toggleItem:function(e,t,n){if(n>-1&&!t){n=this._sharedLayers[n];var s,r=n.length,o=this._activeLayers;for(s=0;r>s;s++)if(-1!==i.indexOf(o,n[s]))return}h.set(e,"display",t?"inline":"none"),this._updateLastItem()},_updateLastItem:function(){var e,t=this.listNode.childNodes;e=t.length;var i;if(e)for(e-=1;e>=0;e--)if(i=t[e],"none"!==h.get(i,"display")){this._setLastItem(i);break}this._adjustCursorStyle()},_setLastItem:function(e){var t=this.itemClass,i=this.lastItemClass;this._lastItem&&d.replace(this._lastItem,t,i),e&&(d.replace(e,i,t),this._lastItem=e)},_createIndexByLevel:function(e,t){var i,n,s,r,o,a,l,c=e.contributors,h=c?c.length:0,d=new m(4326),u={};for(r=0;h>r;r++)for(i=c[r],a=(n=i.coverageAreas)?n.length:0,o=0;a>o;o++)for(s=n[o],l=s.bbox,l={extent:_.geographicToWebMercator(new g(l[1],l[0],l[3],l[2],d)),attribution:i.attribution||"",zoomMin:s.zoomMin-(t&&s.zoomMin?1:0),zoomMax:s.zoomMax-(t&&s.zoomMax?1:0),score:p.isDefined(s.score)?s.score:100,objectId:r},s=l.zoomMin;s<=l.zoomMax;s++)u[s]=u[s]||[],u[s].push(l);return u},_getContributorsList:function(e,t,i){var n="";if(t&&p.isDefined(i)&&i>-1){e=e[i],i=t.getCenter().normalize();for(var s=e?e.length:0,r=[],o={},n=0;s>n;n++)t=e[n],!o[t.objectId]&&t.extent.contains(i)&&(o[t.objectId]=1,r.push(t));for(r.sort(function(e,t){return t.score-e.score||e.objectId-t.objectId}),s=r.length,n=0;s>n;n++)r[n]=r[n].attribution;n=r.join(", ")}return n},_adjustCursorStyle:function(){var e=u.position(this.listNode.parentNode,!0).h;d.contains(this.listNode.parentNode,"esriAttributionOpen")?(d.remove(this.listNode.parentNode,"esriAttributionOpen"),e>u.position(this.listNode.parentNode,!0).h?(h.set(this.listNode.parentNode,"cursor","pointer"),d.add(this.listNode.parentNode,"esriAttributionOpen")):h.set(this.listNode.parentNode,"cursor","default")):(d.add(this.listNode.parentNode,"esriAttributionOpen"),e<u.position(this.listNode.parentNode,!0).h?h.set(this.listNode.parentNode,"cursor","pointer"):h.set(this.listNode.parentNode,"cursor","default"),d.remove(this.listNode.parentNode,"esriAttributionOpen"))}}),r("extend-esri")&&t.setObject("dijit.Attribution",e,f),e})},"dijit/_Templated":function(){define("./_WidgetBase ./_TemplatedMixin ./_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/_base/kernel".split(" "),function(e,t,i,n,s,r,o){return r.extend(e,{waiRole:"",waiState:""}),s("dijit._Templated",[t,i],{widgetsInTemplate:!1,constructor:function(){o.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0")},_processNode:function(e,t){var i=this.inherited(arguments),s=t(e,"waiRole");return s&&e.setAttribute("role",s),(s=t(e,"waiState"))&&n.forEach(s.split(/\s*,\s*/),function(t){-1!=t.indexOf("-")&&(t=t.split("-"),e.setAttribute("aria-"+t[0],t[1]))}),i}})})},"esri/toolbars/navigation":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/connect dojo/_base/Color dojo/has esri/kernel esri/toolbars/_toolbar esri/undoManager esri/OperationBase esri/geometry/Extent esri/geometry/Rect esri/symbols/SimpleLineSymbol esri/symbols/SimpleFillSymbol esri/graphic".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f){var p=e(o,{declaredClass:"esri.toolbars.Navigation",_eventMap:{"extent-history-change":!0},constructor:function(e){this.zoomSymbol=new u(u.STYLE_SOLID,new d(d.STYLE_SOLID,new n([255,0,0]),2),new n([0,0,0,.25])),i.connect(e,"onUnload",this,"_cleanUp"),this.map=e,this._undoManager=new a({maxOperations:-1}),this._normalizeRect=t.hitch(this,this._normalizeRect),this._onMouseDownHandler=t.hitch(this,this._onMouseDownHandler),this._onMouseUpHandler=t.hitch(this,this._onMouseUpHandler),this._onMouseDragHandler=t.hitch(this,this._onMouseDragHandler),this._onExtentChangeHandler_connect=i.connect(e,"onExtentChange",this,"_extentChangeHandler"),this._onMapLoad_connect=i.connect(e,"onLoad",this,"_mapLoadHandler"),e.loaded&&e.extent&&(this._currentExtent=e.extent)},_mapLoadHandler:function(){this._currentExtent=this.map.extent},_navType:null,_start:null,_graphic:null,_prevExtent:!1,_currentExtent:null,_preExtent:null,_cleanUp:function(){i.disconnect(this._onExtentChangeHandler_connect),i.disconnect(this._onMapLoad_connect)},activate:function(e){var t=this.map;switch(this._graphic||(this._deactivateMapTools(!0,!1,!1,!0),this._graphic=new f(null,this.zoomSymbol)),e){case p.ZOOM_IN:case p.ZOOM_OUT:this._deactivate(),this._onMouseDownHandler_connect=i.connect(t,"onMouseDown",this,"_onMouseDownHandler"),this._onMouseDragHandler_connect=i.connect(t,"onMouseDrag",this,"_onMouseDragHandler"),this._onMouseUpHandler_connect=i.connect(t,"onMouseUp",this,"_onMouseUpHandler"),this._navType=e;break;case p.PAN:this._deactivate(),t.enablePan(),this._navType=e}},_extentChangeHandler:function(e){this._prevExtent||this._nextExtent?this._currentExtent=e:(this._preExtent=this._currentExtent,this._currentExtent=e,this._preExtent&&this._currentExtent&&(e=new p.MapExtent({map:this.map,preExtent:this._preExtent,currentExtent:this._currentExtent}),this._undoManager.add(e))),this._prevExtent=this._nextExtent=!1,this.onExtentHistoryChange()},_deactivate:function(){var e=this._navType;e===p.PAN?this.map.disablePan():(e===p.ZOOM_IN||e===p.ZOOM_OUT)&&(i.disconnect(this._onMouseDownHandler_connect),i.disconnect(this._onMouseDragHandler_connect),i.disconnect(this._onMouseUpHandler_connect))},_normalizeRect:function(e,t,i){var n=e.x;e=e.y;var s=t.x;t=t.y;var r=Math.abs(n-s),o=Math.abs(e-t);return{x:Math.min(n,s),y:Math.max(e,t),width:r,height:o,spatialReference:i}},_onMouseDownHandler:function(e){this._start=e.mapPoint},_onMouseDragHandler:function(e){var t=this._graphic,i=this.map.graphics;i.remove(t,!0),t.setGeometry(new h(this._normalizeRect(this._start,e.mapPoint,this.map.spatialReference))),i.add(t,!0)},_onMouseUpHandler:function(e){var t=this.map,i=this._normalizeRect(this._start,e.mapPoint,t.spatialReference);if(t.graphics.remove(this._graphic,!0),0!==i.width||0!==i.height)if(this._navType===p.ZOOM_IN)t.setExtent(new h(i).getExtent());else{e=t.toScreen(i);var i=t.toScreen({x:i.x+i.width,y:i.y,spatialReference:t.spatialReference}),n=t.extent.getWidth();e=(n*t.width/Math.abs(i.x-e.x)-n)/2,i=t.extent,t.setExtent(new c(i.xmin-e,i.ymin-e,i.xmax+e,i.ymax+e,i.spatialReference))}},deactivate:function(){this._deactivate(),this._graphic&&this.map.graphics.remove(this._graphic,!0),this._navType=this._start=this._graphic=null,this._activateMapTools(!0,!1,!1,!0)},setZoomSymbol:function(e){this.zoomSymbol=e},isFirstExtent:function(){return!this._undoManager.canUndo},isLastExtent:function(){return!this._undoManager.canRedo},zoomToFullExtent:function(){var e=this.map;e.setExtent(e.getLayer(e.layerIds[0]).initialExtent)},zoomToPrevExtent:function(){this._undoManager.canUndo&&(this._prevExtent=!0,this._undoManager.undo())},zoomToNextExtent:function(){this._undoManager.canRedo&&(this._nextExtent=!0,this._undoManager.redo())},onExtentHistoryChange:function(){}});return t.mixin(p,{ZOOM_IN:"zoomin",ZOOM_OUT:"zoomout",PAN:"pan"}),p.MapExtent=e(l,{declaredClass:"esri.toolbars.MapExtent",label:"extent changes",constructor:function(e){this.map=e.map,this.preExtent=e.preExtent,this.currentExtent=e.currentExtent},performRedo:function(){this.map.setExtent(this.currentExtent)},performUndo:function(){this.map.setExtent(this.preExtent)}}),s("extend-esri")&&(t.setObject("toolbars.Navigation",p,r),t.setObject("toolbars.MapExtent",p.MapExtent,r)),p})},"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d){return t=t("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments),e.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),function(e){this.watch(e,r.hitch(this,"_setStateClass"))},this);for(var t in this.cssStateNodes||{})this._trackMouseState(this[t],this.cssStateNodes[t]);this._trackMouseState(this.domNode,this.baseClass),this._setStateClass()},_cssMouseEvent:function(e){if(!this.disabled)switch(e.type){case"mouseover":case"MSPointerOver":this._set("hovering",!0),this._set("active",this._mouseDown);break;case"mouseout":case"MSPointerOut":this._set("hovering",!1),this._set("active",!1);break;case"mousedown":case"touchstart":case"MSPointerDown":case"keydown":this._set("active",!0);break;case"mouseup":case"dojotouchend":case"keyup":this._set("active",!1)}},_setStateClass:function(){function t(t){i=i.concat(e.map(i,function(e){return e+t}),"dijit"+t)}var i=this.baseClass.split(" ");this.isLeftToRight()||t("Rtl");var n="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&t(n),this.state&&t(this.state),this.selected&&t("Selected"),this._opened&&t("Opened"),this.disabled?t("Disabled"):this.readOnly?t("ReadOnly"):this.active?t("Active"):this.hovering&&t("Hover"),this.focused&&t("Focused");var n=this.stateNode||this.domNode,s={};e.forEach(n.className.split(" "),function(e){s[e]=!0}),"_stateClasses"in this&&e.forEach(this._stateClasses,function(e){delete s[e]}),e.forEach(i,function(e){s[e]=!0});var r,o=[];for(r in s)o.push(r);n.className=o.join(" "),this._stateClasses=i},_subnodeCssMouseEvent:function(e,t,i){function s(i){n.toggle(e,t+"Active",i)}if(!this.disabled&&!this.readOnly)switch(i.type){case"mouseover":case"MSPointerOver":n.toggle(e,t+"Hover",!0);break;case"mouseout":case"MSPointerOut":n.toggle(e,t+"Hover",!1),s(!1);break;case"mousedown":case"touchstart":case"MSPointerDown":case"keydown":s(!0);break;case"mouseup":case"MSPointerUp":case"dojotouchend":case"keyup":s(!1);break;case"focus":case"focusin":n.toggle(e,t+"Focused",!0);break;case"blur":case"focusout":n.toggle(e,t+"Focused",!1)}},_trackMouseState:function(e,t){e._cssState=t}}),a(function(){function e(e,t,n){if(!n||!i.isDescendant(n,t))for(;t&&t!=n;t=t.parentNode)if(t._cssState){var s=d.getEnclosingWidget(t);s&&(t==s.domNode?s._cssMouseEvent(e):s._subnodeCssMouseEvent(t,t._cssState,e))}}var t,n=c.body();o(n,l.over,function(t){e(t,t.target,t.relatedTarget)}),o(n,l.out,function(t){e(t,t.target,t.relatedTarget)}),o(n,h.press,function(i){t=i.target,e(i,t)}),o(n,h.release,function(i){e(i,t),t=null}),o(n,"focusin, focusout",function(e){var t=e.target;if(t._cssState&&!t.getAttribute("widgetId")){var i=d.getEnclosingWidget(t);i&&i._subnodeCssMouseEvent(t,t._cssState,e)}})}),t})},"esri/layers/agscommon":function(){define("esri/layers/ArcGISMapServiceLayer esri/layers/LayerInfo esri/layers/TimeInfo esri/layers/LayerTimeOptions esri/layers/TimeReference esri/layers/Field esri/layers/Domain esri/layers/RangeDomain esri/layers/CodedValueDomain esri/layers/InheritedDomain esri/layers/LayerSource esri/layers/LayerMapSource esri/layers/LayerDataSource esri/layers/DataSource esri/layers/TableDataSource esri/layers/QueryDataSource esri/layers/JoinDataSource esri/layers/RasterDataSource esri/layers/DynamicLayerInfo esri/layers/LayerDrawingOptions esri/geometry esri/utils".split(" "),function(){return{}})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d){var u=e("dijit.DialogUnderlay",[a,l],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' tabIndex='-1' data-dojo-attach-point='node'></div></div>",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(e){n.set(this.node,"id",e+"_underlay"),this._set("dialogId",e)},_setClassAttr:function(e){this.node.className="dijitDialogUnderlay "+e,this._set("class",e)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode),this.own(r(this.domNode,"keydown",t.hitch(this,"_onKeyDown"))),this.inherited(arguments)},layout:function(){var e=this.node.style,t=this.domNode.style;t.display="none";var i=o.getBox(this.ownerDocument);t.top=i.t+"px",t.left=i.l+"px",e.width=i.w+"px",e.height=i.h+"px",t.display="block"},show:function(){this.domNode.style.display="block",this.open=!0,this.layout(),this.bgIframe=new c(this.domNode);var e=o.get(this.ownerDocument);this._modalConnects=[h.on("resize",t.hitch(this,"layout")),r(e,"scroll",t.hitch(this,"layout"))]},hide:function(){for(this.bgIframe.destroy(),delete this.bgIframe,this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});return u.show=function(e,t){var i=u._singleton;!i||i._destroyed?i=d._underlay=u._singleton=new u(e):e&&i.set(e),s.set(i.domNode,"zIndex",t),i.open||i.show()},u.hide=function(){var e=u._singleton;e&&!e._destroyed&&e.hide()},u})},"esri/TimeExtent":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(e,t,i,n){var s=e(null,{declaredClass:"esri.TimeExtent",constructor:function(e){if(1<arguments.length)this._create(arguments[0],arguments[1]);else if(e)if(t.isArray(e)){var i=e[0],n=e[1];this.startTime=null===i||"null"===i?null:new Date(i),this.endTime=null===n||"null"===n?null:new Date(n)}else e instanceof Date&&this._create(e,null)},offset:function(e,t){var i=new s,n=this.startTime,r=this.endTime;return n&&(i.startTime=this._getOffsettedDate(n,e,t)),r&&(i.endTime=this._getOffsettedDate(r,e,t)),i},intersection:function(e){return this._intersection(this,e)},toJson:function(){var e=[],t=this.startTime;return e.push(t?t.getTime():"null"),t=this.endTime,e.push(t?t.getTime():"null"),e},_create:function(e,t){this.startTime=e?new Date(e.getTime()):null,this.endTime=t?new Date(t.getTime()):null},_refData:{esriTimeUnitsMilliseconds:{getter:"getUTCMilliseconds",setter:"setUTCMilliseconds",multiplier:1},esriTimeUnitsSeconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},esriTimeUnitsMinutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},esriTimeUnitsHours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},esriTimeUnitsDays:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},esriTimeUnitsWeeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},esriTimeUnitsMonths:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},esriTimeUnitsYears:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:1},esriTimeUnitsDecades:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},esriTimeUnitsCenturies:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}},_intersection:function(e,t){if(e&&t){var i,n,r=e.startTime,o=e.endTime,a=t.startTime,l=t.endTime,r=r?r.getTime():-1/0,a=a?a.getTime():-1/0,o=o?o.getTime():1/0,l=l?l.getTime():1/0;if(a>=r&&o>=a?i=a:r>=a&&l>=r&&(i=r),o>=a&&l>=o?n=o:l>=r&&o>=l&&(n=l),!isNaN(i)&&!isNaN(n))return r=new s,r.startTime=-1/0===i?null:new Date(i),r.endTime=1/0===n?null:new Date(n),r}return null},_getOffsettedDate:function(e,t,i){var n=this._refData;return e=new Date(e.getTime()),t&&i&&(n=n[i],e[n.setter](e[n.getter]()+t*n.multiplier)),e}});return i("extend-esri")&&(n.TimeExtent=s),s})},"esri/symbols/FillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has esri/kernel esri/symbols/Symbol esri/symbols/SimpleLineSymbol".split(" "),function(e,t,i,n,s,r){return e=e(s,{declaredClass:"esri.symbol.FillSymbol",constructor:function(e){e&&t.isObject(e)&&e.outline&&(this.outline=new r(e.outline))},setOutline:function(e){return this.outline=e,this},toJson:function(){var e=this.inherited("toJson",arguments);return this.outline&&(e.outline=this.outline.toJson()),e}}),i("extend-esri")&&t.setObject("symbol.FillSymbol",e,n),e})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(e,t,i,n,s,r,o){function a(n,o,a,l){var c=r.getEffectiveBox(n.ownerDocument);(!n.parentNode||"body"!=String(n.parentNode.tagName).toLowerCase())&&s.body(n.ownerDocument).appendChild(n);var h=null;e.some(o,function(e){var i=e.corner,s=e.pos,r=0,o={w:{L:c.l+c.w-s.x,R:s.x-c.l,M:c.w}[i.charAt(1)],h:{T:c.t+c.h-s.y,B:s.y-c.t,M:c.h}[i.charAt(0)]},d=n.style;d.left=d.right="auto",a&&(r=a(n,e.aroundCorner,i,o,l),r="undefined"==typeof r?0:r);var u=n.style,f=u.display,p=u.visibility;return"none"==u.display&&(u.visibility="hidden",u.display=""),d=t.position(n),u.display=f,u.visibility=p,f={L:s.x,R:s.x-d.w,M:Math.max(c.l,Math.min(c.l+c.w,s.x+(d.w>>1))-d.w)}[i.charAt(1)],p={T:s.y,B:s.y-d.h,M:Math.max(c.t,Math.min(c.t+c.h,s.y+(d.h>>1))-d.h)}[i.charAt(0)],s=Math.max(c.l,f),u=Math.max(c.t,p),f=Math.min(c.l+c.w,f+d.w),p=Math.min(c.t+c.h,p+d.h),f-=s,p-=u,r+=d.w-f+(d.h-p),(null==h||r<h.overflow)&&(h={corner:i,aroundCorner:e.aroundCorner,x:s,y:u,w:f,h:p,overflow:r,spaceAvailable:o}),!r}),h.overflow&&a&&a(n,h.aroundCorner,h.corner,h.spaceAvailable,l),o=t.isBodyLtr(n.ownerDocument);var d=h.y,u=o?h.x:c.w-h.x-h.w;/relative|absolute/.test(i.get(s.body(n.ownerDocument),"position"))&&(d-=i.get(s.body(n.ownerDocument),"marginTop"),u-=(o?1:-1)*i.get(s.body(n.ownerDocument),o?"marginLeft":"marginRight"));var f=n.style;return f.top=d+"px",f[o?"left":"right"]=u+"px",f[o?"right":"left"]="auto",h}var l={TL:"BR",TR:"BL",BL:"TR",BR:"TL"};return o.place={at:function(t,i,n,s,r){return n=e.map(n,function(e){var t={corner:e,aroundCorner:l[e],pos:{x:i.x,y:i.y}};return s&&(t.pos.x+="L"==e.charAt(1)?s.x:-s.x,t.pos.y+="T"==e.charAt(0)?s.y:-s.y),t}),a(t,n,r)},around:function(s,r,o,l,c){function h(e,t){x.push({aroundCorner:e,corner:t,pos:{x:{L:g,R:g+v,M:g+(v>>1)}[e.charAt(1)],y:{T:y,B:y+b,M:y+(b>>1)}[e.charAt(0)]}})}var d;if("string"==typeof r||"offsetWidth"in r){if(d=t.position(r,!0),/^(above|below)/.test(o[0])){var u=t.getBorderExtents(r),f=r.firstChild?t.getBorderExtents(r.firstChild):{t:0,l:0,b:0,r:0},p=t.getBorderExtents(s),m=s.firstChild?t.getBorderExtents(s.firstChild):{t:0,l:0,b:0,r:0};d.y+=Math.min(u.t+f.t,p.t+m.t),d.h-=Math.min(u.t+f.t,p.t+m.t)+Math.min(u.b+f.b,p.b+m.b)}}else d=r;if(r.parentNode)for(u="absolute"==i.getComputedStyle(r).position,r=r.parentNode;r&&1==r.nodeType&&"BODY"!=r.nodeName;){if(f=t.position(r,!0),p=i.getComputedStyle(r),/relative|absolute/.test(p.position)&&(u=!1),!u&&/hidden|auto|scroll/.test(p.overflow)){var m=Math.min(d.y+d.h,f.y+f.h),_=Math.min(d.x+d.w,f.x+f.w);d.x=Math.max(d.x,f.x),d.y=Math.max(d.y,f.y),d.h=m-d.y,d.w=_-d.x}"absolute"==p.position&&(u=!0),r=r.parentNode}var g=d.x,y=d.y,v="w"in d?d.w:d.w=d.width,b="h"in d?d.h:(n.deprecated("place.around: dijit/place.__Rectangle: { x:"+g+", y:"+y+", height:"+d.height+", width:"+v+" } has been deprecated.  Please use { x:"+g+", y:"+y+", h:"+d.height+", w:"+v+" }","","2.0"),d.h=d.height),x=[];return e.forEach(o,function(e){var t=l;switch(e){case"above-centered":h("TM","BM");break;case"below-centered":h("BM","TM");break;case"after-centered":t=!t;case"before-centered":h(t?"ML":"MR",t?"MR":"ML");break;case"after":t=!t;case"before":h(t?"TL":"TR",t?"TR":"TL"),h(t?"BL":"BR",t?"BR":"BL");break;case"below-alt":t=!t;case"below":h(t?"BL":"BR",t?"TL":"TR"),h(t?"BR":"BL",t?"TR":"TL");break;case"above-alt":t=!t;case"above":h(t?"TL":"TR",t?"BL":"BR"),h(t?"TR":"TL",t?"BR":"BL");break;default:h(e.aroundCorner,e.corner)}}),s=a(s,x,c,{w:v,h:b}),s.aroundNodePos=d,s}}})},"esri/_coremap":function(){define("require dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/Deferred dojo/_base/lang dojo/_base/array dojo/_base/event dojo/_base/unload dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/sniff dijit/registry dojox/gfx/matrix esri/kernel esri/config esri/lang esri/Evented esri/fx esri/deferredUtils esri/tileUtils esri/geometry/Point esri/geometry/ScreenPoint esri/geometry/Extent esri/geometry/Rect esri/geometry/mathUtils esri/geometry/scaleUtils esri/geometry/screenUtils esri/geometry/webMercatorUtils esri/layers/GraphicsLayer esri/layers/TileInfo esri/layers/LOD esri/layers/ArcGISTiledMapServiceLayer esri/layers/OpenStreetMapLayer esri/dijit/Popup dojo/uacss".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p,m,_,g,y,v,b,x,w,S,T,j,E,k,C,M,D,L,R,I,A,P,N,O,H){function U(e,t){var i=e.lods;i.sort(function(e,t){return e.scale>t.scale?-1:e.scale<t.scale?1:0});var n,s=[],i=o.filter(i,function(e){return-1===G(s,e.scale)?(s.push(e.scale),!0):void 0}),r=t.lods=[];o.forEach(i,function(e,t){n=r[t]=new P(e),n.level=t}),t.tileInfo=new A(V(e,{lods:r}))}var F=L.toMapPoint,z=L.toScreenPoint,B=n.connect,W=n.disconnect,q=r.hitch,J=p.set,G=o.indexOf,V=r.mixin,Y=0,X=v.defaults.map;return i=i([x],{declaredClass:"esri._CoreMap",resizeDelay:300,invalidExtent:"Map does not have a valid extent.",invalidGeometry:"Geometry (wkid: ${geometry}) cannot be converted to spatial reference of the map (wkid: ${map})",unknownBasemap:'Unable to find basemap definition for: "${basemapName}". Try one of these: ${list}',invalidBasemap:'Unable to add basemap: "${basemapName}".',unknownLayerType:'Unknown basemap layer type: "${type}" found in basemap definition for: "${basemapName}".',visible:!0,_eventMap:{"basemap-change":!0,"extent-change":["extent","delta","levelChange","lod"],"layer-add":["layer"],"layer-add-result":["layer","error"],"layer-remove":["layer"],"layer-reorder":["layer","index"],"layer-resume":["layer"],"layer-suspend":["layer"],"layers-add-result":["layers"],"layers-removed":!0,"layers-reordered":["layerIds"],load:["map"],pan:["extent","delta"],"pan-end":["extent","delta"],"pan-start":["extent","screenPoint"],reposition:["x","y"],resize:["extent","width","height"],scale:["matrix","immediate"],"time-extent-change":["timeExtent"],unload:["map"],"update-end":["error"],"update-start":!0,zoom:["extent","zoomFactor","anchor"],"zoom-end":["extent","zoomFactor","anchor","level"],"zoom-start":["extent","zoomFactor","anchor","level"],click:!0,"dbl-click":!0,"key-down":!0,"key-up":!0,"mouse-down":!0,"mouse-drag":!0,"mouse-drag-end":!0,"mouse-drag-start":!0,"mouse-move":!0,"mouse-out":!0,"mouse-over":!0,"mouse-up":!0,"mouse-wheel":!0,"basic-tap":!0,"double-tap":!0,"pinch-end":!0,"pinch-move":!0,"pinch-start":!0,"processed-double-tap":!0,"processed-tap":!0,"swipe-end":!0,"swipe-move":!0,"swipe-start":!0,tap:!0,"two-finger-tap":!0},constructor:function(e,t){this.registerConnectEvents(),V(this,{_internalLayerIds:[],_layers:[],_layerDivs:[],_layerSize:0,_clickHandles:[],_connects:[],_zoomAnimDiv:null,_zoomAnim:null,_layersDiv:null,_firstLayerId:null,_delta:null,_cursor:null,_ratioW:1,_ratioH:1,_params:null,cursor:null,layerIds:[],graphicsLayerIds:[],graphics:null,loaded:!1,__panning:!1,__zooming:!1,__container:null,root:null,__LOD:null,__tileInfo:null,__visibleRect:null,__visibleDelta:null,_rids:[]});var i=this.container=c.byId(e),n=this.id=h.get(i,"id")||_.getUniqueId(this.declaredClass);d.add(i,"map");var s=f.getContentBox(i),r=d.add,o=u.create;this.position=new E(0,0),this._reposition();var a=this.width=s.w||X.width,p=this.height=s.h||X.height;0===s.w&&J(i,"width",a+"px"),0===s.h&&J(i,"height",p+"px");var m=this.root=o("div",{id:n+"_root",style:{width:a+"px",height:p+"px",direction:"ltr"}});r(m,"container"),s=this.__container=o("div",{id:n+"_container"},m),J(s,"position","absolute"),r(s,"container"),i.appendChild(m),i=this._params=V({slider:!0,nav:!1,zoom:-1,minZoom:-1,maxZoom:-1,scale:-1,minScale:0,maxScale:0,showInfoWindowOnClick:!0,displayGraphicsOnPan:!0,wrapAround180:!0,fitExtent:!1,optimizePanAnimation:!0},t||{}),this.wrapAround180=i.wrapAround180,this.optimizePanAnimation=i.optimizePanAnimation,b.isDefined(i.resizeDelay)&&(this.resizeDelay=i.resizeDelay),i.lods&&(U({rows:512,cols:512,dpi:96,format:"JPEG",compressionQuality:75,origin:{x:-180,y:90},spatialReference:{wkid:4326},lods:i.lods},i),this.__tileInfo=i.tileInfo),this.extent=i.extent,this._extentUtil({mapCenter:i.center,targetLevel:i.zoom,targetScale:i.scale}),this.__visibleRect=new C(0,0,a,p),this.__visibleDelta=new C(0,0,a,p),n=this._layersDiv=o("div",{id:n+"_layers"}),r(n,"layersDiv"),s.appendChild(n),this._zoomAnimDiv=o("div",{style:{position:"absolute"}}),i.infoWindow?this.infoWindow=i.infoWindow:(r=this.infoWindow=new H(i.popupOptions,o("div")),r.startup(),r._ootb=!0,J(r.domNode,"zIndex",40)),this._zoomStartHandler=q(this,this._zoomStartHandler),this._zoomingHandler=q(this,this._zoomingHandler),this._zoomEndHandler=q(this,this._zoomEndHandler),this._panningHandler=q(this,this._panningHandler),this._panEndHandler=q(this,this._panEndHandler),this._endTranslate=q(this,this._endTranslate),l.addOnWindowUnload(this,this.destroy)
},_cleanUp:function(){var e=this.infoWindow;e&&(e._ootb&&e.destroy?e.destroy():e.unsetMap(this),delete this.infoWindow),W(this._tsTimeExtentChange_connect),this.setInfoWindowOnClick(!1),u.destroy(this.root),this.root=null},_addLayer:function(e,t,i){var n=e.id=e.id||(e instanceof I?X.graphicsLayerNamePrefix:X.layerNamePrefix)+Y++;this._layers[n]=e;var s,r;if((t===this.layerIds||t===this.graphicsLayerIds)&&(s=this._layerSize,this._layerSize++),e._isRefLayer="top"===i,i=!b.isDefined(i)||0>i||i>t.length||"top"===i?t.length:i,0===s&&(this._firstLayerId=n),!e._isRefLayer)for(;(r=this.getLayer(t[i-1]))&&r._isRefLayer;)i--;t.splice(i,0,n);var o=q(this,this._addLayerHandler),a=this;return i=this._connects,r=function(){e.loaded?a._onLoadFix?(a._onLoadFix=!1,setTimeout(function(){o(e)},0)):o(e):(a[n+"_addtoken_load"]=B(e,"onLoad",a,"_addLayerHandler"),a[n+"_addtoken_err"]=B(e,"onError",a,function(i){o(e,i,t)}))},this.loaded||0===s||e.loaded&&-1===G(this.graphicsLayerIds,n)?r():i.push(B(this,"onLoad",r)),e},_addLayerHandler:function(e,t,i){var n=this.id,s=e.id,r=G(e instanceof I?this.graphicsLayerIds:this.layerIds,s),o=r,a=!1,l=this._params;if(W(this[s+"_addtoken_load"]),W(this[s+"_addtoken_err"]),t)delete this._layers[s],-1!==r&&(i.splice(r,1),this.onLayerAddResult(e,t));else{if(-1===r&&(r=G(this._internalLayerIds,s),o=20+r,a=!0),s===this._firstLayerId)if(t=e.spatialReference,!(i=this.extent&&this.extent.spatialReference)||i.equals(t)||!e.tileInfo&&e.url||(i=null),i=this.spatialReference=i||t,this.wrapAround180=this.wrapAround180&&i&&i._isWrappable()?!0:!1,e.tileInfo&&(this.__tileInfo?(t=this.__tileInfo.lods,this.__tileInfo=V({},e.tileInfo),this.__tileInfo.lods=t):(U(V({},e.tileInfo),l),this.__tileInfo=l.tileInfo)),this.wrapAround180&&(t=this.__tileInfo,i=i._getInfo(),(!t||Math.abs(i.origin[0]-t.origin.x)>i.dx)&&(this.wrapAround180=!1),this.wrapAround180&&t&&T._addFrameInfo(t,i)),l.units=e.units,(t=this.__tileInfo&&this.__tileInfo.lods)&&t.length){i=l.minScale;var c,r=l.maxScale,h=-1,d=-1,u=!1,f=!1;for(c=0;c<t.length;c++)i>0&&!u&&i>=t[c].scale&&(h=t[c].level,u=!0),r>0&&!f&&r>=t[c].scale&&(d=c>0?t[c-1].level:-1,f=!0);for(-1===l.minZoom&&(l.minZoom=0===i?t[0].level:h),-1===l.maxZoom&&(l.maxZoom=0===r?t[t.length-1].level:d),c=0;c<t.length;c++)l.minZoom===t[c].level&&(l.minScale=t[c].scale),l.maxZoom===t[c].level&&(l.maxScale=t[c].scale)}else l.minZoom=l.maxZoom=l.zoom=-1;if(e instanceof I?(this._gc||(this._gc=new I._GraphicsContainer,this._gc._setMap(this,this._layersDiv).id=n+"_gc"),o=e._setMap(this,this._gc._surface),o.id=n+"_"+s,this._layerDivs[s]=o,this._reorderLayers(this.graphicsLayerIds),l.showInfoWindowOnClick&&this._clickHandles.push(B(e,"onClick",this,"_gClickHandler"))):(o=e._setMap(this,this._layersDiv,o,this.__LOD),o.id=n+"_"+s,this._layerDivs[s]=o,this._reorderLayers(this.layerIds),!a&&-1!==e.declaredClass.indexOf("VETiledLayer")&&this._onBingLayerAdd(e)),s===this._firstLayerId&&(this.graphics=new I({id:n+"_graphics",displayOnPan:l.displayGraphicsOnPan}),this._addLayer(this.graphics,this._internalLayerIds,20)),e===this.graphics){if(i=this._layers[this._firstLayerId],n=l.zoom,o=l.scale,t=l.center,i=i.initialExtent||i.fullExtent,this._firstLayerId=null,this.extent&&(this.extent=this._convertGeometry(this,this.extent)),!this.extent&&i&&(t&&(t=this._convertGeometry(i,t)),t&&(i=i.centerAt(t))),(t=this.extent||i&&new k(i.toJson()))&&(n>-1?t=this.__getExtentForLevel(n,null,t).extent:o>0&&(t=D.getExtentForScale(this,o,t))),!t)return console.log("Map: "+this.invalidExtent),void 0;n=this._fixExtent(t,l.fitExtent),this.extent=n.extent,this.__LOD=n.lod,this.__setExtent(this.extent,null,null,l.fitExtent),this.loaded=!0,this.attr("data-loaded",""),this.infoWindow.setMap(this),this.onLoad(this)}a||(this.onLayerAdd(e),this.onLayerAddResult(e)),W(this[s+"_addLayerHandler_connect"])}},_convertGeometry:function(e,t){var i=e&&e.spatialReference,n=t&&t.spatialReference;return i&&n&&!i.equals(n)&&(i._canProject(n)?i.isWebMercator()?t=R.geographicToWebMercator(t):4326===i.wkid&&(t=R.webMercatorToGeographic(t,!0)):(console.log("Map: "+b.substitute({geometry:n.wkid||n.wkt,map:i.wkid||i.wkt},this.invalidGeometry)),t=null)),t},_reorderLayers:function(e){var t=this.onLayerReorder,i=u.place,n=this._layerDivs,s=this._layers,r=this._gc?this._gc._surface.getEventSource():null;if(e===this.graphicsLayerIds)o.forEach(e,function(e,o){var a=n[e];a&&(i(a.getEventSource(),r,o),t(s[e],o))});else{var a,l=this.graphics,c=l?l.id:null,h=this._layersDiv;o.forEach(e,function(e,r){a=n[e],e!==c&&a&&(i(a,h,r),t(s[e],r))}),r&&(r=9>m("ie")?r.parentNode:r,i(r,r.parentNode,e.length))}this.onLayersReordered([].concat(e))},_zoomStartHandler:function(){this.__zoomStart(this._zoomAnimDiv.startingExtent,this._zoomAnimDiv.anchor)},_zoomingHandler:function(e){var t=parseFloat(e.left),i=parseFloat(e.top);e=new k(t,i-parseFloat(e.height),t+parseFloat(e.width),i,this.spatialReference),t=this.extent.getWidth()/e.getWidth(),this.__zoom(e,t,this._zoomAnimDiv.anchor)},_zoomEndHandler:function(){var e=this._zoomAnimDiv,t=e.extent,i=this.extent.getWidth()/t.getWidth(),n=e.anchor,s=e.newLod,r=e.levelChange;e.extent=e.anchor=e.levelChange=e.startingExtent=e.newLod=this._delta=this._zoomAnim=null,this.__zoomEnd(t,i,n,s,r)},_panningHandler:function(e){if(isNaN(parseFloat(e.left))||isNaN(parseFloat(e.top))){var t=Math.round,i=this._panAnim.node;e.left=-1*(this._delta.x-t(this.width/2))+"px",e.top=-1*(this._delta.y-t(this.height/2))+"px",p.set(i,"left",e.left),p.set(i,"top",e.top)}e=new E(parseFloat(e.left),parseFloat(e.top)),t=this.toMap(e),this.onPan(this.extent.offset(t.x,t.y),e)},_panEndHandler:function(e){this.__panning=!1;var t=Math.round;e=new E(-t(parseFloat(e.style.left)),-t(parseFloat(e.style.top)));var t=e.x,i=e.y,n=this.__visibleRect,s=this.__visibleDelta;n.x+=-t,n.y+=-i,s.x+=-t,s.y+=-i,J(this._zoomAnimDiv,{left:"0px",top:"0px"});var n=this.extent,s=this._ratioW,r=this._ratioH,n=new k(n.xmin+t/s,n.ymin-i/r,n.xmax+t/s,n.ymax-i/r,this.spatialReference);e.setX(-e.x),e.setY(-e.y),this._delta=this._panAnim=null,this._updateExtent(n),this.onPanEnd(n,e),this._fireExtChg([n,e,!1,this.__LOD])},_fixExtent:function(e,t){for(var i=this._reshapeExtent(e),n=1.25;!0===t&&(i.extent.getWidth()<e.getWidth()||i.extent.getHeight()<e.getHeight())&&0<i.lod.level&&3>=n;)i=this._reshapeExtent(e.expand(n)),n+=.25;return i},_getFrameWidth:function(){var e=-1,t=this.spatialReference._getInfo();return this.__LOD?(t=this.__LOD._frameInfo)&&(e=t[3]):t&&(e=Math.round(2*t.valid[1]/(this.extent.getWidth()/this.width))),e},_reshapeExtent:function(e){var t=e.getWidth(),i=e.getHeight(),n=t/i,s=this.width/this.height,r=0,o=0;return this.width>this.height?t>i?s>n?r=i*s-t:o=t/s-i:r=i*s-t:this.width<this.height?t>i?o=t/s-i:i>t?s>n?r=i*s-t:o=t/s-i:o=t/s-i:i>t?r=i-t:t>i&&(o=t/s-i),r&&(e.xmin-=r/2,e.xmax+=r/2),o&&(e.ymin-=o/2,e.ymax+=o/2),this._getAdjustedExtent(e)},_getAdjustedExtent:function(e){if(this.__tileInfo)return T.getCandidateTileInfo(this,this.__tileInfo,e);var t=D.getScale(this,e),i=this.getMinScale(),n=this.getMaxScale(),s=!n||t>=n;return!i||i>=t?s||(e=D.getExtentForScale(this,n,e)):e=D.getExtentForScale(this,i,e),{extent:e}},_gClickHandler:function(e){var t=e.graphic,i=this.infoWindow;if(t._getEffInfoTemplate()&&i){a.stop(e);var n=t.geometry;e=n&&"point"===n.type?n:e.mapPoint,i.setFeatures?i.setFeatures([t]):(i.setTitle(t.getTitle()),(t=t.getContent())&&r.isString(t.id)&&(n=_.byId(t.id))&&n.set&&/_PopupRenderer/.test(n.declaredClass)&&n.set("showTitle",!1),i.setContent(t)),i.show(e)}},_onBingLayerAdd:function(e){this["__"+e.id+"_vis_connect"]=n.connect(e,"onVisibilityChange",this,"_toggleBingLogo"),this._toggleBingLogo(e.visible)},_onBingLayerRemove:function(e){n.disconnect(this["__"+e.id+"_vis_connect"]),delete this["__"+e.id+"_vis_connect"],e=o.some(this.layerIds,function(e){return(e=this._layers[e])&&e.visible&&-1!==e.declaredClass.indexOf("VETiledLayer")},this),this._toggleBingLogo(e)},_toggleBingLogo:function(t){t&&!this._bingLogo?(t={left:this._mapParams&&this._mapParams.nav?"25px":""},6===m("ie")&&(t.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true', sizingMethod='crop', src='"+e.toUrl("esri")+"/images/map/bing-logo-lg.png')"),t=this._bingLogo=u.create("div",{style:t},this.root),d.add(t,"bingLogo-lg")):!t&&this._bingLogo&&(u.destroy(this._bingLogo),delete this._bingLogo)},__panStart:function(e,t){var i=this._zoomAnim,n=this._panAnim;if(i&&i._active)i.stop(),i._fire("onEnd",[i.node]);else if(n&&n._active){n.stop(),this._panAnim=null;var n=n.curve.getValue(n._getStep()),i=Math.round(parseFloat(n.left)),n=Math.round(parseFloat(n.top)),s=this.navigationManager._dragOrigin;return this.__pan(i,n),s&&(s.x-=i,s.y-=n),void 0}this.__panning=!0,this.onPanStart(this.extent,new E(e,t))},__pan:function(e,t){var i=this.extent,n=this._ratioW,s=this._ratioH;this.onPan(new k(i.xmin-e/n,i.ymin+t/s,i.xmax-e/n,i.ymax+t/s,this.spatialReference),new E(e,t))},__panEnd:function(e,t){var i=this.__visibleRect,n=this.__visibleDelta;i.x+=e,i.y+=t,n.x+=e,n.y+=t;var i=new E(e,t),n=this.extent,s=this._ratioW,r=this._ratioH,n=new k(n.xmin-e/s,n.ymin+t/r,n.xmax-e/s,n.ymax+t/r,this.spatialReference);this.__panning=!1,this._updateExtent(n),this.onPanEnd(n,i),this._fireExtChg([n,i,!1,this.__LOD])},__zoomStart:function(e,t){this.__zooming=!0,this.onZoomStart(e,1,t,this.__LOD?this.__LOD.level:null)},__zoom:function(e,t,i){this.onZoom(e,t,i)},__zoomEnd:function(e,t,i,n,s){J(this._layersDiv,{left:"0px",top:"0px"}),this._delta=new E(0,0),this.__visibleRect.x=this.__visibleRect.y=0,e=new k(e),this.__LOD=n,this._ratioW=this.width/e.getWidth(),this._ratioH=this.height/e.getHeight();var r=this._delta;this._delta=null,this.__zooming=!1,this._updateExtent(e,s),this.onZoomEnd(e,t,i,n?n.level:null),this._fireExtChg([e,r,s,n])},_extentUtil:function(e,t,i,n,o){var a,l,c,h,d,u,f,p,m,_,g,y,v,x=new s,w=this.width,S=this.height;e&&(a=e.numLevels,l=e.targetLevel,g=b.isDefined(l),c=e.factor,h=e.mapAnchor,d=e.screenAnchor,u=e.mapCenter,y=e.levelOrFactor,f=e.targetScale,p=b.isDefined(f)&&f>0),t&&(m=t.dx,_=t.dy,u=t.mapCenter),r.isArray(u)&&(u=new j(u));var T=this._panAnim;t=(e=this._stopAnim())?e.divExtent:this.extent;var C=this.__tileInfo,M=this._params;return this.loaded?u&&(u=this._convertGeometry(this,u),!u)||h&&(h=this._convertGeometry(this,h),!h)||i&&(i=this._convertGeometry(this,i),!i)?(x.reject(),x):(T&&h&&d&&(h=F(this.extent,w,S,d)),e&&h&&d&&(h=F(e.divExtent,w,S,d)),g&&(C?(a=this.getMinZoom(),g=this.getMaxZoom(),a>l?l=a:l>g&&(l=g),a=l-(e?e.level:this.getLevel())):(a=l>0?-1:1,v=y?l:null)),i||(b.isDefined(a)?(C?(w=e?e.level:this.getLevel(),S=this.__getExtentForLevel(w+a,u,t).extent):(S=(e?e.end:this.extent).expand(v||(a>0?.5*a:2*-a)),v&&u&&(S=S.centerAt(u))),S&&(u?i=S:(w=h||t.getCenter(),m=t.ymax-(S.getHeight()-t.getHeight())*(w.y-t.ymax)/t.getHeight(),w=t.xmin-(S.getWidth()-t.getWidth())*(w.x-t.xmin)/t.getWidth(),i=new k(w,m-S.getHeight(),w+S.getWidth(),m,this.spatialReference)))):p?i=D.getExtentForScale(this,f,t):b.isDefined(c)?i=t.expand(c):(m||_)&&(e?(i=e.end,h=i.getCenter(),v=z(i,w,S,h),v.x+=m,v.y+=_,v=F(i,w,S,v),i=i.offset(v.x-h.x,v.y-h.y)):(m=new E(w/2+m,S/2+_),_=F(t,w,S,m),S=t.getWidth(),m=t.getHeight(),w=_.x-S/2,_=_.y-m/2,i=new k(w,_,w+S,_+m,this.spatialReference)))),i||(u?(t=e?e.end:t,S=t.getWidth(),m=t.getHeight(),w=u.x-S/2,_=u.y-m/2,i=new k(w,_,w+S,_+m,this.spatialReference)):e&&(i=e.end)),i?(this._extentDfd&&-1===this._extentDfd.fired&&this._extentDfd.reject(),this._extentDfd=x,this.__setExtent(i,null,d,n,e,o)):x.reject(),x):(i?(t&&(i=this._convertGeometry(t,i)),i&&(this.extent=i,M.zoom=M.scale=-1,M.center=null)):(u||g||p)&&(u&&(t?(u=this._convertGeometry(t,u))&&(this.extent=t.centerAt(u),M.center=null):M.center=u),g&&l>-1?(M.zoom=l,M.scale=-1):p&&(M.scale=f,M.zoom=-1)),x.resolve(),x)},__setExtent:function(e,t,i,n,s,r){try{if(this._firstLayerId)this.extent=e;else{var o=!0,a=this.spatialReference,l=s?s.divExtent:this.extent,c=this._fixExtent(e,n||!1);e=c.extent;var h=e.getWidth(),d=e.getHeight(),u=Math.round;if(l)var f=u(1e6*l.getWidth()),p=u(1e6*h),m=u(1e6*l.getHeight()),_=u(1e6*d),o=f!==p||m!==_;var g,y,v=s&&s.rect,b=s&&s.divExtent;if(X.zoomDuration&&o&&l){b=b||new k(l),v=v||{left:l.xmin,top:l.ymax,width:l.getWidth(),height:l.getHeight()},y={left:e.xmin,top:e.ymax,width:h,height:d};var x=new j(e.xmin,e.ymax,a),S=new j(e.xmin,e.ymin,a),T=new j(this.extent.xmin,this.extent.ymax,a),D=new j(this.extent.xmin,this.extent.ymin,a);g=M.getLineIntersection(T,x,D,S,a),!g&&!s&&(o=!1)}this._ratioW=this.width/h,this._ratioH=this.height/d;var L=this._zoomAnimDiv;if(o)J(this._layersDiv,{left:"0px",top:"0px"}),t=new E(0,0),this.__visibleRect.x=this.__visibleRect.y=0,v&&y?(this._delta=t,L.id="_zAD",L.startingExtent=b,L.extent=e,L.levelChange=o,L.newLod=c.lod,L.anchor=i?i:!g&&s?s.anchor:z(this.extent,this.width,this.height,g),this._zoomAnim=w.resize({node:L,start:v,end:y,duration:X.zoomDuration,rate:X.zoomRate,beforeBegin:s?null:this._zoomStartHandler,onAnimate:this._zoomingHandler,onEnd:this._zoomEndHandler}).play(),this._fireOnScale(this.extent.getWidth()/e.getWidth(),L.anchor)):(this._updateExtent(e,o),this._fireExtChg([this.extent,t,o,this.__LOD=c.lod]));else if(!this.__panning)if(!1===this.loaded||r)this._updateExtent(e,o),this._fireExtChg([this.extent,t,o,this.__LOD=c.lod]);else{this.__panning=!0,v=new C(0,0,this.width,this.height,this.spatialReference).getCenter(),v.x=u(v.x),v.y=u(v.y);var R=this._delta=this.toScreen(e.getCenter());this.optimizePanAnimation&&(Math.abs(v.x-R.x)>2*this.width||Math.abs(v.y-R.y)>2*this.height)?(t=new E(v.x-R.x,v.y-R.y),this.__panStart(v.x,v.y),this.__pan(t.x,t.y),this.__panEnd(t.x,t.y)):(this.onPanStart(this.extent,new E(0,0)),this._panAnim=w.slideTo({node:L,left:v.x-R.x,top:v.y-R.y,duration:X.panDuration,rate:X.panRate,onAnimate:this._panningHandler,onEnd:this._panEndHandler}),this._panAnim.play())}}}catch(I){console.log(I.stack),console.error(I)}},_fireOnScale:function(e,t,i){if("css-transforms"===this.navigationMode){var n=this.__visibleDelta;this.onScale(g.scaleAt(e,{x:-1*(this.width/2-(t.x-n.x)),y:-1*(this.height/2-(t.y-n.y))}),i)}},_stopAnim:function(){var e=this._zoomAnim,t=this._panAnim;if(e&&e._active){e.stop();var t=e.curve.getValue(e._getStep()),i=parseFloat(t.left),n=parseFloat(t.top),e=e.node;return{anchor:e.anchor,start:e.startingExtent,end:e.extent,level:e.newLod&&e.newLod.level,rect:t,divExtent:new k(i,n-parseFloat(t.height),i+parseFloat(t.width),n,this.spatialReference)}}t&&t._active&&(t.stop(),t._fire("onEnd",[t.node]))},__getExtentForLevel:function(e,t,i){var n=this.__tileInfo,n=n&&n.lods;if(e=b.isDefined(e)?e:0,i=i||this.extent,t=t||i&&i.getCenter(),n){if(t){i=this.getMinZoom();var s=this.getMaxZoom();return e>s&&(e=s),i>e&&(e=i),e=n[e],n=this.width*e.resolution/2,i=this.height*e.resolution/2,{extent:new k(t.x-n,t.y-i,t.x+n,t.y+i,t.spatialReference),lod:e}}}else if(i)return{extent:i.expand(!e||1>e?1:e).centerAt(t)};console.log("Map: "+this.invalidExtent)},_jobs:0,_incr:function(){1===++this._jobs&&(this.updating=!0,this.attr("data-updating",""),this.onUpdateStart())},_decr:function(){var e=--this._jobs;e?0>e&&(this._jobs=0):(this.updating=!1,this.attr("data-updating"),this.onUpdateEnd())},_fireEvent:function(e,t){this[e]&&this[e].apply(this,t)},_updateExtent:function(e,t){this.extent=e,t&&this._setClipRect();var i=this.spatialReference;i&&(i.isWebMercator()?this.geographicExtent=R.webMercatorToGeographic(this._getAvailExtent(),!0):4326===i.wkid&&(this.geographicExtent=new k(this._getAvailExtent().toJson())))},_fireExtChg:function(e){this.attr("data-zoom",this.getZoom()),this.attr("data-scale",this.getScale()),this._fireEvent("onExtentChange",e),(e=this._extentDfd)&&(delete this._extentDfd,e.resolve())},attr:function(e,t){var i=this.container;return i&&(null==t?i.removeAttribute(e):i.setAttribute(e,t)),this},onUpdateStart:function(){},onUpdateEnd:function(){},onLoad:function(){this._setClipRect()},onUnload:function(){},onExtentChange:function(){},onTimeExtentChange:function(){},onLayerAdd:function(){},onLayerAddResult:function(){},onLayersAddResult:function(){},onLayerRemove:function(){},onLayersRemoved:function(){},onLayerReorder:function(){},onLayersReordered:function(){},onLayerSuspend:function(){},onLayerResume:function(){},onPanStart:function(){},onPan:function(){},onPanEnd:function(){},onScale:function(){},onZoomStart:function(){},onZoom:function(){},onZoomEnd:function(){},onResize:function(){this._setClipRect()},onReposition:function(){},destroy:function(){this._destroyed||(this.removeAllLayers(),this._cleanUp(),this._gc&&this._gc._cleanUp(),this._destroyed=!0,this.onUnload(this))},setCursor:function(e){J(this.__container,"cursor",this.cursor=e)},setMapCursor:function(e){this.setCursor(this._cursor=e)},resetMapCursor:function(){this.setCursor(this._cursor)},setInfoWindow:function(e){var t=this.infoWindow;t&&t.unsetMap(this),this.infoWindow=e,this.loaded&&e&&e.setMap(this)},setInfoWindowOnClick:function(e){var t=this._params;if(e){if(!t.showInfoWindowOnClick){var i=[this.graphics].concat(o.map(this.graphicsLayerIds,this.getLayer,this));o.map(i,function(e){e&&e.loaded&&this._clickHandles.push(B(e,"onClick",this,"_gClickHandler"))},this)}}else o.forEach(this._clickHandles,W),this._clickHandles=[];t.showInfoWindowOnClick=e},getInfoWindowAnchor:function(e){return this.infoWindow&&this.infoWindow._getAnchor&&this.infoWindow._getAnchor(e)||"upperright"},toScreen:function(e,t){return z(this.extent,this.width,this.height,e,t)},toMap:function(e){return F(this.extent,this.width,this.height,e)},addLayer:function(e,t){return e&&!this.getLayer(e.id)&&this._addLayer(e,e instanceof I?this.graphicsLayerIds:this.layerIds,t),e},addLayers:function(e){var t,i,s=[],r=e.length,a=e.length;for(t=n.connect(this,"onLayerAddResult",function(i,a){-1!==o.indexOf(e,i)&&(r--,s.push({layer:i,success:!a,error:a}),r||(n.disconnect(t),this.onLayersAddResult(s)))}),i=0;a>i;i++)this.addLayer(e[i]);return this},removeLayer:function(e,t){var i=e.id,n=e instanceof I?this.graphicsLayerIds:this.layerIds,s=G(n,i);s>=0&&(n.splice(s,1),e instanceof I?(W(this["_gl_"+e.id+"_click_connect"]),e.loaded&&e._unsetMap(this,this._gc._surface)):e.loaded&&(e._unsetMap(this,this._layersDiv),-1!==e.declaredClass.indexOf("VETiledLayer")&&this._onBingLayerRemove(e)),delete this._layers[i],delete this._layerDivs[i],t||this._reorderLayers(n),this.onLayerRemove(e))},removeAllLayers:function(){var e,t=this.layerIds;for(e=t.length-1;e>=0;e--)this.removeLayer(this._layers[t[e]],1);for(t=this.graphicsLayerIds,e=t.length-1;e>=0;e--)this.removeLayer(this._layers[t[e]],1);this.onLayersRemoved()},reorderLayer:function(e,i){r.isString(e)&&(t.deprecated(this.declaredClass+": Map.reorderLayer(/*String*/ id, /*Number*/ index) deprecated. Use Map.reorderLayer(/*Layer*/ layer, /*Number*/ index).",null,"v2.0"),e=this.getLayer(e));var n,s=e.id,o=e instanceof I?this.graphicsLayerIds:this.layerIds;0>i?i=0:i>=o.length&&(i=o.length-1),n=G(o,s),-1===n||n===i||(o.splice(n,1),o.splice(i,0,s),this._reorderLayers(o))},getLayer:function(e){return this._layers[e]},setExtent:function(e,t){e=new k(e.toJson());var i=e.getWidth(),n=e.getHeight();return 0===i&&0===n?this.centerAt(new j({x:e.xmin,y:e.ymin,spatialReference:e.spatialReference&&e.spatialReference.toJson()})):this._extentUtil(null,null,e,t)},centerAt:function(e){return this._extentUtil(null,{mapCenter:e})},centerAndZoom:function(e,t){return this._extentUtil({targetLevel:t,mapCenter:e,levelOrFactor:!0})},getScale:function(){return this.__LOD?this.__LOD.scale:D.getScale(this)},getResolution:function(){return this.__LOD?this.__LOD.resolution:this.extent?this.extent.getWidth()/this.width:0},getResolutionInMeters:function(){return this.getResolution()*(D.getUnitValue(this.spatialReference)||20015077/180)},getMinScale:function(){return this._params.minScale},getMaxScale:function(){return this._params.maxScale},setScale:function(e){return this._extentUtil({targetScale:e})},getLayersVisibleAtScale:function(e){var t=[];return(e=e||this.getScale())&&o.forEach(this.layerIds.concat(this.graphicsLayerIds),function(i){i=this.getLayer(i),i.isVisibleAtScale(e)&&t.push(i)},this),t},getNumLevels:function(){var e=this.getMinZoom(),t=this.getMaxZoom();return e===t&&0>e?0:t-e+1},getLevel:function(){return this.__LOD?this.__LOD.level:-1},setLevel:function(e){return e>-1?this._extentUtil({targetLevel:e}):void 0},getZoom:function(){return this.getLevel()},setZoom:function(e){return this.setLevel(e)},getMinZoom:function(){return this._params.minZoom},getMaxZoom:function(){return this._params.maxZoom},setBasemap:function(e){var t;if(r.isObject(e)?(t=e,e=t.title):t=X.basemaps&&X.basemaps[e],t){this._basemapDfd&&-1===this._basemapDfd.fired&&this._basemapDfd.cancel();var i=[],a=[],l=0;if(o.forEach(t.baseMapLayers||t.layers,function(t){var n,s={id:t.id,displayLevels:t.displayLevels,opacity:b.isDefined(t.opacity)?t.opacity:null,visible:b.isDefined(t.visibility)?t.visibility:null};if(t.type)switch(t.type){case"OpenStreetMap":n=new O(s);break;default:console.log("Map.setBasemap: "+b.substitute({basemapName:e,type:t.type},this.unknownLayerType))}else n=t.url,"https:"!==window.location.protocol||-1===n.search(/^http\:\/\/server\.arcgisonline\.com/i)&&-1===n.search(/^http\:\/\/services\.arcgisonline\.com/i)&&-1===n.search(/^http\:\/\/.+\.arcgis\.com/i)||(n=n.replace(/http:/i,"https:")),n=new N(n,s);n&&(i.push(n),a.push(t),t.isReference||l++)},this),i.length&&l){var c={basemapName:e,infos:a,layers:i};if(this.loaded){var h=this,d=new s(S._dfdCanceller),u=function(e){d._pendingLayers--,e=o.indexOf(c.layers,this),e>-1&&(e=d._layerEvents[e])&&(n.disconnect(e[0]),n.disconnect(e[1])),0>=d._pendingLayers&&(delete d._layerEvents,delete h._basemapDfd,0>d.fired&&d.callback(c))};this._basemapDfd=d,d._pendingLayers=0,d._layerEvents={},o.forEach(i,function(e,t){e&&(d._pendingLayers++,e.loaded?u(e):d._layerEvents[t]=[n.connect(e,"onLoad",e,u),n.connect(e,"onError",e,u)])}),d.addCallback(r.hitch(this,this._basemapLoaded))}else this._basemapLoaded(c)}else console.log("Map.setBasemap: "+b.substitute({basemapName:e},this.invalidBasemap))}else{t=[];for(var f in X.basemaps)t.push(f);console.log("Map.setBasemap: "+b.substitute({basemapName:e,list:t.join(",")},this.unknownBasemap))}},_basemapLoaded:function(e){var t,i=e.layers,n=e.infos,s=0,r=!0;this.loaded&&(o.forEach(i,function(e,t){e.loaded&&(n[t].isReference||s++)}),r=s),r&&(this.basemapLayerIds&&(t={basemapName:this._basemap,infos:X.basemaps&&X.basemaps[this._basemap]&&X.basemaps[this._basemap].baseMapLayers},t.basemapName||(o.forEach(this.basemapLayerIds,function(e){return this.getLayer(e)instanceof O?(t.basemapName="osm",t.infos=X.basemaps&&X.basemaps.osm&&X.basemaps.osm.baseMapLayers,!1):void 0},this),t.basemapName||(t=null))),this._removeBasemap(),this._basemap=e.basemapName,this.basemapLayerIds=this._addBasemap(i,n),this.attr("data-basemap",this.getBasemap()),this.emit("basemap-change",{current:e,previous:t}))},_addBasemap:function(e,t){var i=[],n=[],s=0;return o.forEach(e,function(e,r){t[r].isReference?i.push(e):(this.addLayer(e,s++),n.push(e.id))},this),i.length&&o.forEach(i,function(e){this.addLayer(e,"top"),n.push(e.id)},this),n},_removeBasemap:function(){var e,t=this.basemapLayerIds;t&&t.length&&o.forEach(t,function(t){(e=this.getLayer(t))&&this.removeLayer(e)},this)},getBasemap:function(){return this._basemap||""},translate:function(e,t){if(e=e||0,t=t||0,!this._txTimer){this._tx=this._ty=0;var i=this.toScreen(this.extent.getCenter());this.__panStart(i.x,i.y)}this._tx+=e,this._ty+=t,this.__pan(this._tx,this._ty),clearTimeout(this._txTimer),this._txTimer=setTimeout(this._endTranslate,150)},_endTranslate:function(){clearTimeout(this._txTimer),this._txTimer=null;var e=this._tx,t=this._ty;this._tx=this._ty=0,this.__panEnd(e,t)},setTimeExtent:function(e){e=(this.timeExtent=e)?new e.constructor(e.toJson()):null,this.onTimeExtentChange(e)},setTimeSlider:function(e){this.timeSlider&&(W(this._tsTimeExtentChange_connect),this.timeSlider=this._tsTimeExtentChange_connect=null),e&&(this.timeSlider=e,this.setTimeExtent(e.getCurrentTimeExtent()),this._tsTimeExtentChange_connect=B(e,"onTimeExtentChange",this,"setTimeExtent"))},setVisibility:function(e){if(this.visible!==e){if(this.visible=e,e||(this._display=this.container.style.display),this.container.style.display=e?this._display:"none",this.autoResize){var t=e?"resume":"pause";this._rszSignal[t](),this._oriSignal[t]()}e&&this.resize()}return this},resize:function(e){var t=this,i=function(){clearTimeout(t._resizeT),t.reposition(),t._resize()};clearTimeout(t._resizeT),!0===e?i():t._resizeT=setTimeout(i,t.resizeDelay)},_resize:function(){var e=this.width,t=this.height,i=f.getContentBox(this.container);if(e!==i.w||t!==i.h){var n=this._zoomAnim||this._panAnim;n&&(n.stop(),n._fire("onEnd",[n.node])),J(this.root,{width:(this.width=i.w)+"px",height:(this.height=i.h)+"px"}),i=this.width,n=this.height,this.attribution&&this.attribution.domNode&&p.set(this.attribution.domNode,"maxWidth",Math.floor(i*this._mapParams.attributionWidth)+"px"),this.__visibleRect.update(this.__visibleRect.x,this.__visibleRect.y,i,n),this.__visibleDelta.update(this.__visibleDelta.x,this.__visibleDelta.y,i,n);var s=new C(this.extent),e=new C(s.x,s.y,s.width*(i/e),s.height*(n/t),this.spatialReference).getExtent();this.onResize(e,i,n),this._extentUtil(null,null,e,null,!0)}},reposition:function(){this._reposition(),this.onReposition(this.position.x,this.position.y)},_reposition:function(){var e=f.position(this.container,!0),t=f.getPadBorderExtents(this.container);this.position.update(e.x+t.l,e.y+t.t)},_setClipRect:function(){delete this._clip;var e=m("ie")?"rect(auto,auto,auto,auto)":null;if(this.wrapAround180){var t=this.width,i=this.height,n=this._getFrameWidth(),s=t-n;s>0&&(e=s/2,e="rect(0px,"+(e+n)+"px,"+i+"px,"+e+"px)",i=this.extent.getWidth(),t=i*(n/t),this._clip=[(i-t)/2,t])}J(this.__container,"clip",e)},_getAvailExtent:function(){var e=this.extent,t=this._clip;if(t){if(!e._clip){var i=new C(e);i.width=t[1],i.x+=t[0],e._clip=i.getExtent()}return e._clip}return e},_fixedPan:function(e,t){return this._extentUtil(null,{dx:e,dy:t})},panUp:function(){return this._fixedPan(0,-.75*this.height)},panUpperRight:function(){return this._fixedPan(.75*this.width,-.75*this.height)},panRight:function(){return this._fixedPan(.75*this.width,0)},panLowerRight:function(){return this._fixedPan(.75*this.width,.75*this.height)},panDown:function(){return this._fixedPan(0,.75*this.height)},panLowerLeft:function(){return this._fixedPan(-.75*this.width,.75*this.height)},panLeft:function(){return this._fixedPan(-.75*this.width,0)},panUpperLeft:function(){return this._fixedPan(-.75*this.width,-.75*this.height)},enableSnapping:function(t){if(t=t||{},"esri.SnappingManager"===t.declaredClass)this.snappingManager=t;else{var i=Y++,n=this;this._rids&&this._rids.push(i),e(["esri/SnappingManager"],function(e){var s=n._rids?o.indexOf(n._rids,i):-1;-1!==s&&(n._rids.splice(s,1),n.snappingManager=new e(r.mixin({map:n},t)))})}return this.snappingManager},disableSnapping:function(){this.snappingManager&&this.snappingManager.destroy(),this.snappingManager=null}}),m("extend-esri")&&(y._CoreMap=i),i})},"dijit/_HasDropDown":function(){define("dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on dojo/touch ./registry ./focus ./popup ./_FocusMixin".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p,m){return e("dijit._HasDropDown",m,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:!0,forceWidth:!1,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:!0,_onDropDownMouseDown:function(e){!this.disabled&&!this.readOnly&&(e.preventDefault(),this._docHandler=this.own(h(this.ownerDocument,d.release,c.hitch(this,"_onDropDownMouseUp")))[0],this.toggleDropDown())},_onDropDownMouseUp:function(e){e&&this._docHandler&&(this._docHandler.remove(),this._docHandler=null);var t=this.dropDown,i=!1;if(e&&this._opened){var n=r.position(this._buttonNode,!0);if(!(e.pageX>=n.x&&e.pageX<=n.x+n.w&&e.pageY>=n.y&&e.pageY<=n.y+n.h)){for(n=e.target;n&&!i;)s.contains(n,"dijitPopup")?i=!0:n=n.parentNode;if(i){if(n=e.target,t.onItemClick){for(var o;n&&!(o=u.byNode(n));)n=n.parentNode;o&&o.onClick&&o.getParent&&o.getParent().onItemClick(o,e)}return}}}this._opened?t.focus&&!1!==t.autoFocus&&(this._focusDropDownTimer=this.defer(function(){t.focus(),delete this._focusDropDownTimer})):this.focus&&this.defer("focus")},_onDropDownClick:function(e){this._stopClickEvents&&(e.stopPropagation(),e.preventDefault())},buildRendering:function(){this.inherited(arguments),this._buttonNode=this._buttonNode||this.focusNode||this.domNode,this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var e={after:this.isLeftToRight()?"Right":"Left",before:this.isLeftToRight()?"Left":"Right",above:"Up",below:"Down",left:"Left",right:"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";s.add(this._arrowWrapperNode||this._buttonNode,"dijit"+e+"ArrowButton")},postCreate:function(){this.inherited(arguments);var e=this.focusNode||this.domNode;this.own(h(this._buttonNode,d.press,c.hitch(this,"_onDropDownMouseDown")),h(this._buttonNode,"click",c.hitch(this,"_onDropDownClick")),h(e,"keydown",c.hitch(this,"_onKey")),h(e,"keyup",c.hitch(this,"_onKeyUp")))},destroy:function(){this.dropDown&&(this.dropDown._destroyed||this.dropDown.destroyRecursive(),delete this.dropDown),this.inherited(arguments)},_onKey:function(e){if(!this.disabled&&!this.readOnly){var t=this.dropDown,i=e.target;t&&this._opened&&t.handleKey&&!1===t.handleKey(e)?(e.stopPropagation(),e.preventDefault()):t&&this._opened&&e.keyCode==l.ESCAPE?(this.closeDropDown(),e.stopPropagation(),e.preventDefault()):!this._opened&&(e.keyCode==l.DOWN_ARROW||(e.keyCode==l.ENTER||e.keyCode==l.SPACE&&(!this._searchTimer||e.ctrlKey||e.altKey||e.metaKey))&&("input"!==(i.tagName||"").toLowerCase()||i.type&&"text"!==i.type.toLowerCase()))&&(this._toggleOnKeyUp=!0,e.stopPropagation(),e.preventDefault())}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp,this.toggleDropDown();var e=this.dropDown;e&&e.focus&&this.defer(c.hitch(e,"focus"),1)}},_onBlur:function(){this.closeDropDown(!1),this.inherited(arguments)},isLoaded:function(){return!0},loadDropDown:function(e){e()},loadAndOpenDropDown:function(){var e=new t,i=c.hitch(this,function(){this.openDropDown(),e.resolve(this.dropDown)});return this.isLoaded()?i():this.loadDropDown(i),e},toggleDropDown:function(){!this.disabled&&!this.readOnly&&(this._opened?this.closeDropDown(!0):this.loadAndOpenDropDown())},openDropDown:function(){var e=this.dropDown,t=e.domNode,i=this._aroundNode||this.domNode,o=this,a=p.open({parent:this,popup:e,around:i,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){o.closeDropDown(!0)},onCancel:function(){o.closeDropDown(!0)},onClose:function(){n.set(o._popupStateNode,"popupActive",!1),s.remove(o._popupStateNode,"dijitHasDropDownOpen"),o._set("_opened",!1)}});return(this.forceWidth||this.autoWidth&&i.offsetWidth>e._popupWrapper.offsetWidth)&&(i={w:i.offsetWidth-(e._popupWrapper.offsetWidth-e.domNode.offsetWidth)},c.isFunction(e.resize)?e.resize(i):r.setMarginBox(t,i)),n.set(this._popupStateNode,"popupActive","true"),s.add(this._popupStateNode,"dijitHasDropDownOpen"),this._set("_opened",!0),this._popupStateNode.setAttribute("aria-expanded","true"),this._popupStateNode.setAttribute("aria-owns",e.id),"presentation"!==t.getAttribute("role")&&!t.getAttribute("aria-labelledby")&&t.setAttribute("aria-labelledby",this.id),a},closeDropDown:function(e){this._focusDropDownTimer&&(this._focusDropDownTimer.remove(),delete this._focusDropDownTimer),this._opened&&(this._popupStateNode.setAttribute("aria-expanded","false"),e&&this.focus(),p.close(this.dropDown),this._opened=!1)}})})},"esri/dijit/_EventedWidget":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/on esri/Evented dijit/_WidgetBase".split(" "),function(e,t,i,n,s,r){return e([r,s],{_onMap:function(e){var t,i=this.constructor._onMap;
return i&&i.FINAL||(delete this.constructor._onMap,i=this.registerConnectEvents(),i.FINAL=!0),e=e.toLowerCase(),i[e]?t=this[i[e].method]:(e=this._onCamelCase(e),this[e]&&(t=e)),t},on:function(e,t){var i=this._onMap(e),s=e.replace(/\-/g,""),r="on"+s in this.domNode;return i||!r?this.inherited(arguments):this.own(n(this.domNode,s,t))[0]},emit:function(e,i){var n,s,r,o=e.toLowerCase(),a=this.constructor._onMap||this.registerConnectEvents();return s=this[this._onMap(o)],i=i||{},i.target||(i.target=this),s&&a&&a[o]&&(this._onObj2Arr(function(){n=Array.prototype.slice.call(arguments)},a[o].argKeys)(i),r=t.mixin({},arguments),r[2]=n,r[0]=a[o].name.replace(/^on/,"")),this.inherited(r||arguments)}})})},"esri/layers/agsimageservice":function(){define("esri/layers/agscommon esri/layers/ArcGISImageServiceLayer esri/layers/ImageServiceParameters esri/layers/MosaicRule esri/layers/RasterFunction esri/utils".split(" "),function(){return{}})},"esri/layerUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel"],function(e,t,i,n,s){var r={_serializeLayerDefinitions:function(e){var n=[],s=!1,r=/[:;]/;if(e&&(t.forEach(e,function(e,t){e&&(n.push([t,e]),!s&&r.test(e)&&(s=!0))}),0<n.length)){var o;return s?(o={},t.forEach(n,function(e){o[e[0]]=e[1]}),o=i.toJson(o)):(o=[],t.forEach(n,function(e){o.push(e[0]+":"+e[1])}),o=o.join(";")),o}return null},_serializeTimeOptions:function(e,n){if(e){var s=[];if(t.forEach(e,function(e,r){if(e){var o=e.toJson();n&&-1!==t.indexOf(n,r)&&(o.useTime=!1),s.push('"'+r+'":'+i.toJson(o))}}),s.length)return"{"+s.join(",")+"}"}},_getDefaultVisibleLayers:function(e){var i,n=[];if(!e)return n;for(i=0;i<e.length;i++)0<=e[i].parentLayerId&&-1===t.indexOf(n,e[i].parentLayerId)&&t.some(e,function(t){return t.id===e[i].parentLayerId})||e[i].defaultVisibility&&n.push(e[i].id);return n},_getLayersForScale:function(e,i){var n=[];if(e>0&&i){var s;for(s=0;s<i.length;s++)if(!(0<=i[s].parentLayerId&&-1===t.indexOf(n,i[s].parentLayerId)&&t.some(i,function(e){return e.id===i[s].parentLayerId}))&&0<=i[s].id){var r=!0,o=i[s].maxScale,a=i[s].minScale;(o>0||a>0)&&(o>0&&a>0?r=e>=o&&a>=e:o>0?r=e>=o:a>0&&(r=a>=e)),r&&n.push(i[s].id)}}return n}};return n("extend-esri")&&e.mixin(s,r),r})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-class dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p,m,_){var g,y=new(t([d,o],{curNode:null,activeStack:[],constructor:function(){var t=a.hitch(this,function(e){i.isDescendant(this.curNode,e)&&this.set("curNode",null),i.isDescendant(this.prevNode,e)&&this.set("prevNode",null)});e.before(s,"empty",t),e.before(s,"destroy",t)},registerIframe:function(e){return this.registerWin(e.contentWindow,e)},registerWin:function(e,t){var i=this,n=e.document&&e.document.body;if(n){var s=l(e.document,"mousedown, touchstart",function(e){i._justMouseDowned=!0,setTimeout(function(){i._justMouseDowned=!1},0),e&&e.target&&null==e.target.parentNode||i._onTouchNode(t||e.target,"mouse")}),r=l(n,"focusin",function(e){if(g=(new Date).getTime(),e.target.tagName){var n=e.target.tagName.toLowerCase();"#document"==n||"body"==n||(p.isTabNavigable(e.target)?i._onFocusNode(t||e.target):i._onTouchNode(t||e.target))}}),o=l(n,"focusout",function(e){(new Date).getTime()<g+100||i._onBlurNode(t||e.target)});return{remove:function(){s.remove(),r.remove(),o.remove(),n=s=r=o=null}}}},_onBlurNode:function(){this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(a.hitch(this,function(){this.set("prevNode",this.curNode),this.set("curNode",null)}),0),this._justMouseDowned||(this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),this._clearActiveWidgetsTimer=setTimeout(a.hitch(this,function(){delete this._clearActiveWidgetsTimer,this._setStack([])}),0))},_onTouchNode:function(e,t){this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);var i=[];try{for(e&&r.contains(e,"dijitMenuPopup")&&!e.getAttribute("dijitPopupParent")&&(e=e.firstChild);e;){var s=n.get(e,"dijitPopupParent");if(s)e=m.byId(s).domNode;else if(e.tagName&&"body"==e.tagName.toLowerCase()){if(e===u.body())break;e=f.get(e.ownerDocument).frameElement}else{var o=e.getAttribute&&e.getAttribute("widgetId"),a=o&&m.byId(o);a&&!("mouse"==t&&a.get("disabled"))&&i.unshift(o),e=e.parentNode}}}catch(l){}this._setStack(i,t)},_onFocusNode:function(e){e&&9!=e.nodeType&&(this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(e),e!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",e)))},_setStack:function(e,t){var i=this.activeStack,n=i.length-1,s=e.length-1;if(e[s]!=i[n]){this.set("activeStack",e);var r;for(r=n;r>=0&&i[r]!=e[r];r--)(n=m.byId(i[r]))&&(n._hasBeenBlurred=!0,n.set("focused",!1),n._focusManager==this&&n._onBlur(t),this.emit("widget-blur",n,t));for(r++;s>=r;r++)(n=m.byId(e[r]))&&(n.set("focused",!0),n._focusManager==this&&n._onFocus(t),this.emit("widget-focus",n,t))}},focus:function(e){if(e)try{e.focus()}catch(t){}}}));c(function(){var e=y.registerWin(f.get(document));h("ie")&&l(window,"unload",function(){e&&(e.remove(),e=null)})}),_.focus=function(e){y.focus(e)};for(var v in y)/^_/.test(v)||(_.focus[v]="function"==typeof y[v]?a.hitch(y,v):y[v]);return y.watch(function(e,t,i){_.focus[e]=i}),y})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(e,t,i,n){return i(function(){t("highcontrast")&&e.add(n.body(),"dijit_a11y")}),t})},"esri/graphic":function(){define("dojo/_base/declare dojo/_base/lang dojo/has esri/kernel esri/domUtils esri/lang esri/InfoTemplate esri/geometry/jsonUtils esri/symbols/jsonUtils".split(" "),function(e,t,i,n,s,r,o,a,l){return e=e(null,{declaredClass:"esri.Graphic",constructor:function(e,t,i,n){e&&!e.declaredClass?(this.geometry=e.geometry?a.fromJson(e.geometry):null,this.symbol=e.symbol?l.fromJson(e.symbol):null,this.attributes=e.attributes||null,this.infoTemplate=e.infoTemplate?new o(e.infoTemplate):null):(this.geometry=e,this.symbol=t,this.attributes=i,this.infoTemplate=n)},_shape:null,_graphicsLayer:null,_visible:!0,visible:!0,getDojoShape:function(){return this._shape},getShapes:function(){var e=[];return this._shape&&e.push(this._shape),this._bgShape&&e.push(this._bgShape),e},getNode:function(){var e=this._shape&&this._shape.getNode();return e&&e.nodeType?e:null},getNodes:function(){var e,t,i=this.getShapes(),n=i.length,s=[];for(t=0;n>t;t++)(e=i[t]&&i[t].getNode())&&e.nodeType&&s.push(e);return s},getLayer:function(){return this._graphicsLayer},draw:function(){var e=this._graphicsLayer;return e&&e._draw(this,!0),this},setGeometry:function(e){return this.geometry=e,(e=this._graphicsLayer)&&(e._updateExtent(this),e._draw(this,!0)),this},setSymbol:function(e,t){var i=this._graphicsLayer,n=this._shape;return(this.symbol=e)&&(this.symbol._stroke=this.symbol._fill=null),i&&(t&&n&&i._removeShape(this),i._draw(this,!0)),this},setAttributes:function(e){return this.attributes=e,this},setInfoTemplate:function(e){return this.infoTemplate=e,this},getInfoTemplate:function(){return this._getEffInfoTemplate()},_getEffInfoTemplate:function(){var e=this.getLayer();return this.infoTemplate||e&&e.infoTemplate},getTitle:function(){var e=this.getInfoTemplate(),i=e&&e.title;if(t.isFunction(i))i=i.call(e,this);else if(t.isString(i))var n=(e=this._graphicsLayer)&&e._getDateOpts,i=r.substitute(this.attributes,i,{first:!0,dateFormat:n&&n.call(e)});return i},getContent:function(){var e=this.getInfoTemplate(),i=e&&e.content;if(t.isFunction(i))i=i.call(e,this);else if(t.isString(i))var n=(e=this._graphicsLayer)&&e._getDateOpts,i=r.substitute(this.attributes,i,{dateFormat:n&&n.call(e)});return i},attr:function(e,t){var i,n=this.getNodes(),s=n.length;for(i=0;s>i;i++)null==t?n[i].removeAttribute(e):n[i].setAttribute(e,t);return this},show:function(){this.visible=this._visible=!0;var e,t,i;if(this.getShapes().length)for(e=this.getNodes(),i=e.length,this.attr("data-hidden"),t=0;i>t;t++)s.show(e[t]);else this._graphicsLayer&&this._graphicsLayer._draw(this,!0);return this},hide:function(){this.visible=this._visible=!1;var e,t,i=this._graphicsLayer;if(i)if("canvas-2d"===i.surfaceType)i._removeShape(this);else if(i=this.getNodes(),t=i.length)for(this.attr("data-hidden",""),e=0;t>e;e++)s.hide(i[e]);return this},toJson:function(){var e={};return this.geometry&&(e.geometry=this.geometry.toJson()),this.attributes&&(e.attributes=t.mixin({},this.attributes)),this.symbol&&(e.symbol=this.symbol.toJson()),this.infoTemplate&&(e.infoTemplate=this.infoTemplate.toJson()),e}}),e.prototype.getShape=e.prototype.getDojoShape,i("extend-esri")&&(n.Graphic=e),e})},"esri/tasks/DirectionsFeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has esri/kernel esri/geometry/Extent esri/geometry/Polyline esri/tasks/FeatureSet".split(" "),function(e,t,i,n,s,r,o,a){return e=e(a,{declaredClass:"esri.tasks.DirectionsFeatureSet",constructor:function(e,n){this.routeId=e.routeId,this.routeName=e.routeName,t.mixin(this,e.summary),this.extent=new r(this.envelope);var s=this._fromCompressedGeometry,o=this.features,a=this.extent.spatialReference,l=[];i.forEach(n,function(e,t){o[t].setGeometry(l[t]=s(e,a))}),this.strings=e.strings,this.mergedGeometry=this._mergePolylinesToSinglePath(l,a),this.geometryType="esriGeometryPolyline",delete this.envelope},_fromCompressedGeometry:function(e,t){var i,n,s,r,a=0,l=0,c=[];s=e.match(/((\+|\-)[^\+\-]+)/g),r=parseInt(s[0],32);for(var h=1;h<s.length;h+=2)a=i=parseInt(s[h],32)+a,l=n=parseInt(s[h+1],32)+l,c.push([i/r,n/r]);return a=new o({paths:[c]}),a.setSpatialReference(t),a},_mergePolylinesToSinglePath:function(e,t){var n=[];i.forEach(e,function(e){i.forEach(e.paths,function(e){n=n.concat(e)})});var s=[],r=[0,0];return i.forEach(n,function(e){(e[0]!==r[0]||e[1]!==r[1])&&(s.push(e),r=e)}),new o({paths:[s]}).setSpatialReference(t)}}),n("extend-esri")&&t.setObject("tasks.DirectionsFeatureSet",e,s),e})},"esri/layers/GraphicsLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/dom-attr dojo/dom-construct dojo/dom-style dojox/gfx dojox/gfx/matrix esri/kernel esri/lang esri/sniff esri/domUtils esri/layers/layer esri/symbols/MarkerSymbol esri/symbols/SimpleMarkerSymbol esri/geometry/Point esri/geometry/ScreenPoint esri/geometry/Extent esri/geometry/mathUtils esri/geometry/screenUtils".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p,m,_,g,y,v,b){var x,w=-1!==a.renderer.toLowerCase().indexOf("svg"),S=-1!==a.renderer.toLowerCase().indexOf("canvas"),T=9>d("ie"),j=d("esri-touch"),E=e(null,{declaredClass:"esri.layers._GraphicsContainer",_setMap:function(e,i){var n,s=this._connects=[];return this._map=e,S?(n=r.create("div",{style:"overflow: visible; position: absolute;"},i),this._surface={getEventSource:function(){return n}},s.push(t.connect(n,"onmousedown",this,this._canvasDownHandler)),s.push(t.connect(n,"onmouseup",this,this._canvasUpHandler)),s.push(t.connect(n,"onclick",this,this._canvasClickHandler)),x.prototype._canvas=!0):(n=(this._surface=a.createSurface(i,e.width,e.height)).getEventSource(),o.set(n=T?n.parentNode:n,{overflow:"visible",position:"absolute"})),s.push(t.connect(e,"onResize",this,"_onResizeHandler")),n},_onResizeHandler:function(e,t,i){e=this._surface.getEventSource();var r,a=this._map;T&&o.set(e=e.parentNode,{width:t+"px",height:i+"px",clip:"rect(0px "+t+"px "+i+"px 0px)"}),s.set(e,"width",t),s.set(e,"height",i),this._surface.declaredClass||n.forEach(e.childNodes,function(e){s.set(e,"width",t),s.set(e,"height",i)}),a.loaded&&(a.graphics.suspended||(a.graphics._resized=!0),n.forEach(a.graphicsLayerIds,function(e){r=a.getLayer(e),r.suspended||(r._resized=!0)}))},_cleanUp:function(){n.forEach(this._connects,t.disconnect,t),this._map=this._surface=null},_processEvent:function(e){var t=this._map;e.screenPoint=new g(e.pageX-t.position.x,e.pageY-t.position.y),e.mapPoint=t.toMap(e.screenPoint)},_canvasDownHandler:function(e){this._processEvent(e),this._downPt=e.screenPoint.x+","+e.screenPoint.y},_canvasUpHandler:function(e){this._processEvent(e),this._upPt=e.screenPoint.x+","+e.screenPoint.y},_tolerance:15,_isPrimaryMatch:function(e,t,i,s){if(!e.visible||!t)return!1;var r,o=t.getTransformedBoundingBox();return o?(r=new y(o[0].x,o[0].y,o[2].x,o[2].y),delete r.spatialReference,j?r.intersects(i):r.contains(s)):n.some(t.children||[],function(e){return o=e.getTransformedBoundingBox(),r=new y(o[0].x,o[0].y,o[2].x,o[2].y),delete r.spatialReference,j?r.intersects(i):r.contains(s)})},_canvasClickHandler:function(e){if(this._downPt&&this._upPt&&this._downPt===this._upPt){this._processEvent(e);var t=this._map,i=n.map(t.graphicsLayerIds,function(e){return t.getLayer(e)});i.push(t.graphics),i.reverse();var s,i=n.filter(i,function(e){return e.loaded&&e._mouseEvents&&!e.suspended&&(!h.isDefined(e.opacity)||0<e.opacity)}),r=e.screenPoint,o=this._tolerance,a=r.x-o,l=r.y+o,c=r.x+o,o=r.y-o,d=new y(a,o,c,l),a=t.toMap(new g(a,l)),c=t.toMap(new g(c,o)),l=a.spatialReference._getInfo(),u=new y(y.prototype._normalizeX(a.x,l).x,a.y,y.prototype._normalizeX(c.x,l).x,c.y,a.spatialReference);delete d.spatialReference,n.some(i,function(e){if(e=n.filter(e.graphics,function(e){return this._isPrimaryMatch(e,e.getDojoShape(),d,r)||!(!e._bgShape||!this._isPrimaryMatch(e,e._bgShape,d,r))},this),e.reverse(),0<e.length){var t;if(n.some(e,function(e){return e.geometry&&u.intersects(e.geometry)?(t=e,!0):!1}),t)return s=t,!0}return!1},this),s&&(i=s.getLayer())&&(e.graphic=s,i.onClick(e))}}});return x=e(f,{declaredClass:"esri.layers._GraphicsLayer",managedSuspension:!0,surfaceType:S?"canvas-2d":a.renderer,_eventMap:{"graphic-add":["graphic"],"graphic-remove":["graphic"]},constructor:function(e,t){e&&(i.isString(e)||i.isObject(e)&&e.layerDefinition)&&(e=t),this._params=i.mixin({displayOnPan:!0,drawMode:!0,styling:!0},e||{});var n=this._params.dataAttributes;"string"==typeof n&&(n=[n]),this.styling=w?this._params.styling:!0,this.dataAttributes=n,this.infoTemplate=e&&e.infoTemplate,this.graphics=[],this._draw=i.hitch(this,this._draw),this._refresh=i.hitch(this,this._refresh),this.registerConnectEvents()},getNode:function(){return this._div&&this._div.getEventSource()},setDrawMode:function(e){this._params.drawMode=e},renderer:null,_setMap:function(e,t){this.inherited(arguments),this._map=e,this._wrap=e.wrapAround180,this._srInfo=e.spatialReference._getInfo(),this._canvas?(t=a.createSurface(t.getEventSource(),e.width,e.height),o.set(t.rawNode,"position","absolute"),this._div=t.createGroup(),this._renderProto=this._div.constructor.prototype._render,this._div._render=i.hitch(this,this._canvasRender)):this._div=t.createGroup(),this._bgGroup=this._div.createGroup(),this._div.getEventSource().id=this.id+"_layer";var n=this.opacity;return h.isDefined(n)&&1>n&&this.setOpacity(n,!0),this._div},_unsetMap:function(e,t){n.forEach(this.graphics,function(e){e._shape=null}),this._canvas?(t=this._div.getParent(),t._parent={},r.destroy(t.rawNode),t.destroy()):(this._div.clear(),t.remove(this._div),r.destroy(this._div.getEventSource())),this._map=this._div=null,clearTimeout(this._wakeTimer),this._wakeTimer=null,this._disableDrawConnectors(),this.inherited(arguments)},_onZoomStartHandler:function(){u.hide(this._div.getEventSource())},_onExtentChangeHandler:function(e,t,i){clearTimeout(this._wakeTimer),this._wakeTimer=null,i?(e=this._map.__visibleRect,t=this._div,this._evalSDRenderer(),this._refresh(!0),t.setTransform(l.translate({x:e.x,y:e.y})),this._renderProto&&t.surface.pendingRender?this._dirty=!0:this.suspended||u.show(t.getEventSource())):this._resized&&(this._refresh(!1),this._resized=!1),0<this.graphics.length&&this.onUpdate()},_canvasRender:function(){var e=this._div;return this._dirty&&(delete this._dirty,this.suspended||u.show(e.getEventSource())),this._renderProto.apply(e,arguments)},_refresh:function(e){var t,i=this.graphics,n=i.length,s=this._draw;for(t=0;n>t;t++)s(i[t],e)},refresh:function(){this._refresh(!0)},redraw:function(){this._refresh(!0)},_onPanHandler:function(e,t){this._panDx=t.x,this._panDy=t.y;var i=this._map.__visibleRect,n=l.translate({x:i.x+t.x,y:i.y+t.y});this._div.setTransform(n)},_onPanEndUpdateHandler:function(e,t){if(!this._params._child&&(t.x!==this._panDx||t.y!==this._panDy)){var i=this._map.__visibleRect;this._div.setTransform(l.translate({x:i.x,y:i.y}))}this._refresh(!1),this.graphics.length&&this.onUpdate()},_onPanStartHandler:function(){u.hide(this._div.getEventSource())},_onPanEndHandler:function(){var e=this._map.__visibleRect,t=this._div;t.setTransform(l.translate({x:e.x,y:e.y})),this._refresh(!1),this._renderProto&&t.surface.pendingRender?this._dirty=!0:u.show(t.getEventSource()),this.graphics.length&&this.onUpdate()},onSuspend:function(){this.inherited(arguments),u.hide(this._div.getEventSource()),clearTimeout(this._wakeTimer),this._wakeTimer=null,this._disableDrawConnectors()},onResume:function(e){this.inherited(arguments),e.firstOccurrence&&this._evalSDRenderer(),this._enableDrawConnectors(),this._wakeTimer=this._wakeTimer||setTimeout(i.hitch(this,function(){this.suspended||this._onExtentChangeHandler(null,null,!0)}),0)},_enableDrawConnectors:function(){var e=this._map,i=t.connect;this._disableDrawConnectors(),this._params.displayOnPan?(this._params._child||(this._onPanHandler_connect=i(e,"onPan",this,"_onPanHandler")),this._onPanEndHandler_connect=i(e,"onPanEnd",this,"_onPanEndUpdateHandler")):(this._onPanStartHandler_connect=i(e,"onPanStart",this,"_onPanStartHandler"),this._onPanEndHandler_connect=i(e,"onPanEnd",this,"_onPanEndHandler")),this._onZoomStartHandler_connect=i(e,"onZoomStart",this,"_onZoomStartHandler"),this._onExtentChangeHandler_connect=i(e,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var e=t.disconnect;e(this._onExtentChangeHandler_connect),e(this._onZoomStartHandler_connect),e(this._onPanHandler_connect),e(this._onPanStartHandler_connect),e(this._onPanEndHandler_connect),this._onExtentChangeHandler_connect=this._onZoomStartHandler_connect=this._onPanHandler_connect=this._onPanStartHandler_connect=this._onPanEndHandler_connect=null},_updateExtent:function(e){var t=e.geometry;if(t){if(!(e._extent=t.getExtent())){var i,n;if("esri.geometry.Point"===t.declaredClass)i=t.x,n=t.y;else{if("esri.geometry.Multipoint"!==t.declaredClass)return e._extent=null,void 0;i=t.points[0][0],n=t.points[0][1]}e._extent=new y(i,n,i,n,t.spatialReference)}}else e._extent=null},_intersects:function(e,t,i){var s=e.spatialReference,r=t.spatialReference,o=s&&r&&!s.equals(r)&&s._canProject(r)&&4326===r.wkid;if(this._wrap&&!i){i=[];var a,l,c,h,s=e._getFrameWidth(),d=this._srInfo,u=e._clip?e._getAvailExtent():e.extent,f=[];if(a=t._partwise,o&&(u=e.geographicExtent,d=r._getInfo()),e=u._getParts(d),a&&a.length)for(t=[],r=0,o=a.length;o>r;r++)t=t.concat(a[r]._getParts(d));else t=t._getParts(d);for(r=0,o=t.length;o>r;r++)for(c=t[r],d=0,u=e.length;u>d;d++)if(h=e[d],h.extent.intersects(c.extent))for(a=0,l=c.frameIds.length;l>a;a++)i.push((h.frameIds[0]-c.frameIds[a])*s);for(r=0,o=i.length;o>r;r++)a=i[r],n.indexOf(i,a)===r&&f.push(a);return f.length?f:null}return(o?e.geographicExtent:e.extent).intersects(t)?[0]:null},_defaultMarker:{type:"simplemarkersymbol",style:"square",size:1,xoffset:0,yoffset:0,angle:0},_draw:function(e,t){if(this._params.drawMode&&this._map&&!this.suspended){var i,n,s,r=e._extent,o=!w||this.styling,a=w&&this.dataAttributes,l=e.getDojoShape();if(e.visible&&r&&(i=this._intersects(this._map,r,e.geometry._originOnly))&&(n=o?this._getSymbol(e):this._defaultMarker)){if(e._offsets&&e._offsets.join(",")===i.join(",")?s=!0:e._offsets=i,!l||t||!s){var c=e.geometry.type,r={graphic:e},h=e._bgShape,d=o&&!e.symbol?this._getRenderer(e):null,u=d&&d.backgroundFillSymbol;if("point"===c)this._isInvalidShape(n,l)&&this._removeShape(e),e._shape=this._drawPoint(this._div,e.geometry,n,e.getDojoShape(),i,d,e),o&&this._symbolizePoint(e.getDojoShape(),n,d,e);else if("multipoint"===c)this._drawMarkers(e,n,i,d),o&&this._symbolizeMarkers(e,n,d);else{var f,m,_,c=n;o&&(c=(f=n.isInstanceOf(p)?n:null)?u:n),c&&c===u&&(m=this._bgGroup),h&&!m&&this._removeBgShape(e),c&&(!m&&this._isInvalidShape(c,e._shape)&&this._removeShape(e,!1),_=this._drawShape(e,i,m||this._div,m?h:e.getDojoShape()),this._symbolizeShape(_,c,!u&&d,e),e[m?"_bgShape":"_shape"]=_),f&&(this._isInvalidShape(f,e._shape)&&this._removeShape(e,!1),_=this._drawPoint(this._div,e.geometry.getCentroid(),f,e._shape,i,d,e),this._symbolizePoint(_,f,d,e),e._shape=_)}S||(e._bgShape&&this._initNode(e,e._bgShape,e._bgShape!==h,r,a),e._shape&&this._initNode(e,e._shape,e._shape!==l,r,a)),this.onGraphicDraw(r)}}else l&&this._removeShape(e)}},_initNode:function(e,t,i,n,s){(t=t&&t.getNode())&&(t.e_graphic=e,this._addDataAttrs(e,s,t),i&&(n.node=t,this.onGraphicNodeAdd(n)))},_removeShape:function(e,t){var i=e.getDojoShape(),n=i&&i.getNode();i&&(i.removeShape(),i.destroy()),e._shape=e._offsets=null,!1!==t&&this._removeBgShape(e),n&&(n.e_graphic=null,!S)&&this.onGraphicNodeRemove({graphic:e,node:n})},_removeBgShape:function(e){var t=e._bgShape,i=t&&t.getNode();t&&(t.removeShape(),t.destroy(),e._bgShape=null),i&&(i.e_graphic=null,!S)&&this.onGraphicNodeRemove({graphic:e,node:i})},_addDataAttrs:function(e,t,i){var n,s=e.attributes,r=t?t.length:0,o=this._getRenderer(e);if(i&&s){for(n=0;r>n;n++)(i=t[n])&&e.attr("data-"+i,s[i]);!this.styling&&o&&(o.getBreakIndex?(t=o.getBreakIndex(e),e.attr("data-class-break",-1!==t?t:null)):o.getUniqueValueInfo&&(t=o.getUniqueValueInfo(e),e.attr("data-unique-value",t?t.value:null)))}},_drawShape:function(e,t,i,n){e=e.geometry;var s,r,o=e.type,a=this._map,l=a.extent,c=a.width,h=a.height,a=a.__visibleRect,d=[];if(s="extent"===o,"rect"===o||s)d={x:0,y:0,spatialReference:e.spatialReference},d.x=s?e.xmin:e.x,d.y=s?e.ymax:e.y,o=b.toScreenPoint(l,c,h,d),d.x=s?e.xmax:e.x+e.width,d.y=s?e.ymin:e.y+e.height,e=b.toScreenPoint(l,c,h,d),t={x:o.x-a.x+t[0],y:o.y-a.y,width:Math.abs(e.x-o.x),height:Math.abs(e.y-o.y)},0===t.width&&(t.width=1),0===t.height&&(t.height=1),n=this._drawRect(i,n,t);else if("polyline"===o||"polygon"===o){for(s=0,r=t.length;r>s;s++)d=d.concat(b._toScreenPath(l,c,h,e,-a.x+t[s],-a.y));n=this._drawPath(i,n,d),this._rendererLimits&&("polyline"===o?this._clipPolyline(n,e):this._clipPolygon(n,e))}return n},_drawRect:function(e,t,i){return t?t.setShape(i):e.createRect(i)},_drawImage:function(e,t,i){return t?t.setShape(i):e.createImage(i)},_drawCircle:function(e,t,i){return t?t.setShape(i):e.createCircle(i)},_drawPath:function(){return T?function(e,t,i,n){return i=n?i:i.join(" "),t?t.setShape(i):(t=e.createObject(n?a.Path:a.EsriPath,i),e._overrideSize(t.getEventSource()),t)}:function(e,t,i,n){return i=n?i:i.join(" "),t?t.setShape(i):e.createPath(i)}}(),_drawText:function(e,t,i){return t?t.setShape(i):e.createText(i)},_evalSDRenderer:function(){var e,t=this._map,i=this.renderer;t&&t.loaded&&i&&i.getRendererInfo&&(e="zoom"===i.rangeType?i.getRendererInfoByZoom(t.getZoom()):i.getRendererInfoByScale(t.getScale())),this._rndForScale=e&&e.renderer},_getRenderer:function(e){var t=this._rndForScale||this.renderer;return e&&t&&t.getObservationRenderer&&(t=t.getObservationRenderer(e)),t},_getSymbol:function(e){var t=this._getRenderer();return e.symbol||t&&t.getSymbol(e)},_symbolizeShape:function(e,t,n,s){var r,o,a=t._stroke,l=t._fill,c=t.type,h=n&&n.proportionalSymbolInfo?n.getSize(s):null;(null===a||null===l)&&(a=t._stroke=t.getStroke(),l=t._fill=t.getFill()),n&&n.colorInfo&&"picturefillsymbol"!==c&&(t=n.getColor(s),-1!==c.indexOf("linesymbol")?r=t:l&&l.toCss&&(o=t)),e.setStroke(null!=h||r?i.mixin({},a,h&&{width:h},r&&{color:r}):a).setFill(o||l)},_smsToPath:function(){return T?function(e,t,i,n,s,r,o,a,l){switch(t){case e.STYLE_SQUARE:return["M",s+","+o,"L",r+","+o,r+","+a,s+","+a,"X","E"];case e.STYLE_CROSS:return["M",i+","+o,"L",i+","+a,"M",s+","+n,"L",r+","+n,"E"];case e.STYLE_X:return["M",s+","+o,"L",r+","+a,"M",s+","+a,"L",r+","+o,"E"];case e.STYLE_DIAMOND:return["M",i+","+o,"L",r+","+n,i+","+a,s+","+n,"X","E"];case e.STYLE_TARGET:return["M",s+","+o,"L",r+","+o,r+","+a,s+","+a,s+","+o,"M",s-l+","+n,"L",s+","+n,"M",i+","+(o-l),"L",i+","+o,"M",r+l+","+n,"L",r+","+n,"M",i+","+(a+l),"L",i+","+a,"E"]}}:function(e,t,i,n,s,r,o,a,l){switch(t){case e.STYLE_SQUARE:return["M",s+","+o,r+","+o,r+","+a,s+","+a,"Z"];case e.STYLE_CROSS:return["M",i+","+o,i+","+a,"M",s+","+n,r+","+n];case e.STYLE_X:return["M",s+","+o,r+","+a,"M",s+","+a,r+","+o];case e.STYLE_DIAMOND:return["M",i+","+o,r+","+n,i+","+a,s+","+n,"Z"];case e.STYLE_TARGET:return["M",s+","+o,r+","+o,r+","+a,s+","+a,s+","+o,"M",s-l+","+n,s+","+n,"M",i+","+(o-l),i+","+o,"M",r+l+","+n,r+","+n,"M",i+","+(a+l),i+","+a]}}}(),_pathStyles:{square:1,cross:1,x:1,diamond:1,target:1},_typeMaps:{picturemarkersymbol:"image",picturefillsymbol:"path",simplefillsymbol:"path",simplelinesymbol:"path",cartographiclinesymbol:"path",textsymbol:"text"},_isInvalidShape:function(e,t){var i=t&&t.shape&&t.shape.type,n=e&&e.type,s=e&&e.style;return n&&(s=this._typeMaps[n]||s),this._pathStyles[s]&&(s="path"),!(!i||!s||i===s)},_drawPoint:function(e,t,i,n,s,r,o){var a,c=i.type,h=this._map,d=h.__visibleRect,u=b.toScreenPoint(h.extent,h.width,h.height,t).offset(-d.x+s[0],-d.y),h=u.x,d=u.y;t=[];var f=r&&r.rotationInfo?r.getRotationAngle(o):null,p=r&&r.proportionalSymbolInfo;if(r=p?r.getSize(o,{shape:i.style}):null,f&&t.push(l.rotategAt(f,u)),(0!==i.xoffset||0!==i.yoffset)&&t.push(l.translate(i.xoffset,-i.yoffset)),0!==i.angle&&t.push(l.rotategAt(i.angle,u)),"simplemarkersymbol"===c)switch(a=i.style,c=Math.round,r=p?r:i.size,a){case m.STYLE_SQUARE:case m.STYLE_CROSS:case m.STYLE_X:case m.STYLE_DIAMOND:i=isNaN(r)?16:r/2,a=this._drawPath(e,n,this._smsToPath(m,a,h,d,c(h-i),c(h+i),c(d-i),c(d+i)));break;case m.STYLE_TARGET:u=i._targetWidth/2,p=i._targetHeight/2,a=this._drawPath(e,n,this._smsToPath(m,a,h,d,c(h-u),c(h+u),c(d-p),c(d+p),i._spikeSize));break;case m.STYLE_PATH:a=this._drawPath(e,n,i.path,!0),i=a.getBoundingBox(),e=this._getScaleMatrix(i,r),(1!==e.xx||1!==e.yy)&&t.push(l.scaleAt(e.xx,e.yy,u)),t.push(l.translate(-(i.x+i.width/2)+h,-(i.y+i.height/2)+d));break;default:i=isNaN(r)?16:r/2,a=this._drawCircle(e,n,{cx:h,cy:d,r:i})}else"shieldlabelsymbol"===c?(a=i.width,u=i.height,n=e.createGroup(),a=e.createImage({x:h-a/2,y:d-u/2,width:a,height:u,src:i.url}),n.add(a),null!=i.font&&(d+=.2*i.getHeight(),e=e.createText({type:"text",text:i.text,x:h,y:d,align:"middle",decoration:i.decoration,rotated:i.rotated,kerning:i.kerning}),e.setFont(i.font),e.setFill(i.color),n.add(e)),a=n):"picturemarkersymbol"===c?(a=p?r:i.width,u=p?r:i.height,a=this._drawImage(e,n,{x:h-a/2,y:d-u/2,width:a,height:u,src:i.url})):"textsymbol"===c&&(a=this._drawText(e,n,{type:"text",text:i.text,x:h,y:d,align:i.getSVGAlign(),decoration:i.decoration||i.font&&i.font.decoration,rotated:i.rotated,kerning:i.kerning}),w&&(e=a.getNode(),h=i.getSVGBaseline(),i=i.getSVGBaselineShift(),e&&(e.setAttribute("dominant-baseline",h),i&&e.setAttribute("baseline-shift",i))));return a.setTransform(l.multiply(t)),a._wrapOffsets=s,a},_getScaleMatrix:function(e,t){var i=e.width/e.height,n=1,s=1;return isNaN(t)||(i>1?(n=t/e.width,s=t/i/e.height):(s=t/e.height,n=t*i/e.width)),{xx:n,yy:s}},_symbolizePoint:function(e,t,i,n){var s=t.type;if("shieldlabelsymbol"!==s&&"picturemarkersymbol"!==s){var r=t._stroke,o=t._fill,a=i&&i.colorInfo;"textsymbol"===s?e.setFont(t.font).setFill(t.getFill()):((null===r||null===o)&&(r=t._stroke=t.getStroke(),o=t._fill=t.getFill()),"simplemarkersymbol"===s&&e.setFill(a?i.getColor(n):o).setStroke(r))}},_drawMarkers:function(e,t,i,n){var s,r,o,a=e.geometry,l=a.points,c=e.getDojoShape()||this._div.createGroup(),h=l.length,d=[],u=0,f=i?i.length:0;for(c.children[0]&&this._isInvalidShape(t,c.children[0])&&c.clear(),r=0;h>r;r++)for(s=l[r],o=0;f>o;o++)d[0]=i[o],this._drawPoint(c,{x:s[0],y:s[1],spatialReference:a.spatialReference},t,c.children[u++],d,n,e);if(t=c.children.length,h*i.length<t)for(r=t-1;r>=h*i.length;r--)c.children[r].removeShape();e._shape=c},_symbolizeMarkers:function(e,t,i){var n,s=e.getDojoShape().children,r=s.length;for(n=0;r>n;n++)this._symbolizePoint(s[n],t,i,e)},_errorHandler:function(e,t){e.message=t?"Unable to draw graphic (geometry:"+(t.geometry?t.geometry.declaredClass:null)+", symbol:"+(t.symbol?t.symbol.declaredClass:null)+"): "+e.message:"Unable to draw graphic (null): "+e.message,this.inherited(arguments)},_rendererLimits:function(){var e,t,i;return d("ff")?(e=16125,t=-32250,i=32250):T?(e=1e5,t=-1e5,i=1e5):d("chrome")&&6>d("chrome")&&(e=8150,t=-1e4,i=1e4),e?{clipLimit:e,rangeMin:t,rangeMax:i,clipBBox:[-e,-e,e,e],clipSegments:[[[-e,-e],[e,-e]],[[e,-e],[e,e]],[[e,e],[-e,e]],[[-e,e],[-e,-e]]]}:void 0}(),_clipPolyline:function(e,t){var i=this._getCorners(e,t),s=i.br,r=this._rendererLimits,o=r.rangeMin,a=r.rangeMax,l=r.clipBBox,c=r.clipSegments,r=this._isPointWithinRange,h=this._isPointWithinBBox,d=this._getClipperIntersection,u=this._getPlaneIndex;if(!r(i.tl,o,a)||!r(s,o,a)){T&&this._createSegments(e);var f=[];n.forEach(e.segments,function(e){e=e.args;var t,i=e.length,n=[];for(t=0;i>t;t+=2){var s=[e[t],e[t+1]],r=[e[t+2],e[t+3]],o=h(s,l),a=h(r,l);o^a?(a=d([s,r],c))&&(o?(t?n.push(a[1]):n.push(s,a[1]),f.push(n),n=[]):n.push(a[1],r)):o?t?n.push(r):n.push(s,r):(a=u(s,l),o=u(r,l),-1===a||-1===o||a===o||(s=d([s,r],c,!0),0<s.length&&(s[a]||(a=s[a[0]]?a[0]:a[1]),s[o]||(o=s[o[0]]?o[0]:o[1]),r=s[a],s=s[o],r&&n.push(r),s&&(n.push(s),f.push(n),n=[]))))}f.push(n)}),e.setShape(this._getPathStringFromPaths(f))}},_clipPolygon:function(e,t){var s=this._getCorners(e,t),r=s.br,o=this._rendererLimits,a=o.clipLimit,l=o.rangeMin,c=o.rangeMax,h=o.clipBBox,d=o.clipSegments,o=this._isPointWithinRange,u=this._isPointWithinBBox,f=this._getClipperIntersection,p=this._getPlaneIndex,m=v._pointLineDistance;o(s.tl,l,c)&&o(r,l,c)||(T&&this._createSegments(e),s=n.map(e.segments,function(e){var t=e.args,s=t.length,r=[];e=[];var o;for(o=0;s>o;o+=2){var l=[t[o],t[o+1]],c=[t[o+2],t[o+3]];if(o===s-2){r.push(l);break}var _=u(l,h),g=u(c,h);if(r.push(l),_^g)(g=f([l,c],d))&&(l=g[1],l[_?"inOut":"outIn"]=!0,r.push(l),e.push([_?"INOUT":"OUTIN",r.length-1,g[0]]));else if(!_){var _=p(l,h),y=p(c,h);-1===_||-1===y||_===y||(g=f([l,c],d,!0),0<g.length?(g[_]||(_=g[_[0]]?_[0]:_[1]),g[y]||(y=g[y[0]]?y[0]:y[1]),l=g[_],c=g[y],l&&(l.outIn=!0,r.push(l),e.push(["OUTIN",r.length-1,_])),c&&(c.inOut=!0,r.push(c),e.push(["INOUT",r.length-1,y]))):i.isArray(_)&&i.isArray(y)&&(g=_.concat(y),g.sort(),"0123"===g.join("")&&(g=[],3===_[0]+_[1]?g.push([a,-a],[-a,a]):g.push([-a,-a],[a,a]),_=m(g[0],[l,c]),l=m(g[1],[l,c]),r.push(l>_?g[0]:g[1]))))}}var v=h[0],b=h[1],x=h[2],w=h[3];if(n.forEach(r,function(e){e[0]<v&&(e[1]>=b&&e[1]<=w?e[0]=v:(e[0]=v,e[1]=e[1]<b?b:w))}),n.forEach(r,function(e){e[1]<b&&(e[0]>=v&&e[0]<=x?e[1]=b:(e[1]=b,e[0]=e[0]<v?v:x))}),n.forEach(r,function(e){e[0]>x&&(e[1]>=b&&e[1]<=w?e[0]=x:(e[0]=x,e[1]=e[1]<b?b:w))}),n.forEach(r,function(e){e[1]>w&&(e[0]>=v&&e[0]<=x?e[1]=w:(e[1]=w,e[0]=e[0]<v?v:x))}),t=0,s=e.length,s>0)do{if(c=e[t],o=e[(t+1)%s],c[2]===o[2]&&"INOUT"===c[0]&&"OUTIN"===o[0])if(l=c[1],o=o[1],o>l)for(l+=1;o>l;l++)r[l][2]=!0;else if(l>o){for(l+=1;l<r.length;l++)r[l][2]=!0;for(l=0;o>l;l++)r[l][2]=!0}t=(t+1)%s}while(0!==t);for(s=r[0],t=r[r.length-1],s[2]&&(t[2]=!0,n.some(e,function(e){return 1===e[1]?(r.splice(r.length-1,0,i.clone(r[1])),!0):!1})),r=n.filter(r,function(e){return e[2]?!1:!0}),t=0;t<r.length-1;t++)s=r[t],!(o=r[t+1])||s[0]!==o[0]||s[1]!==o[1]||(o.outIn?s.outIn=!0:o.inOut&&(s.inOut=!0),r.splice(t+1,1));for(s=Math.abs,e=[],t=0;t<r.length-1;t++){c=r[t],l=c[0],c=c[1],_=s(l)===a,g=s(c)===a,o=r[t+1],y=o[0],o=o[1];var S=s(y)===a,T=s(o)===a;_&&T?e.push([t+1,[l,o]]):g&&S&&e.push([t+1,[y,c]])}for(t=e.length-1;t>=0;t--)o=e[t],l=r[o[0]-1],s=r[o[0]],!l.outIn&&!l.inOut&&!s.outIn&&!s.inOut&&r.splice(o[0],0,o[1]);
return s=r[0],t=r[r.length-1],(s[0]!==t[0]||s[1]!==t[1])&&r.push(s),r}),e.setShape(this._getPathStringFromPaths(s)))},_getCorners:function(e,t){if(T){var i=this._map,n=t.getExtent(),s=n.spatialReference,r=i.toScreen(new _(n.xmin,n.ymax,s)),i=i.toScreen(new _(n.xmax,n.ymin,s));return{tl:r,br:i}}return r=e.getTransformedBoundingBox(),{tl:r[0],br:r[2]}},_createSegments:function(e){e.shape.path=e.vmlPath,e.segmented=!1,e._confirmSegmented();var t=e.segments;1<t.length&&(e.segments=n.filter(t,function(e,t,i){return t=i[t+1],"M"===e.action&&t&&"L"===t.action?(e.args=e.args.concat(t.args),!0):!1}))},_getPathStringFromPaths:function(e){return T?(e=n.map(e,function(e){return"m "+n.map(e,function(e,t){return(1===t?"l ":"")+e.join(",")}).join(" ")}),e.push("e")):e=n.map(e,function(e){return"M "+n.map(e,function(e){return e.join(",")}).join(" ")}),e.join(" ")},_isPointWithinBBox:function(e,t){var i=t[1],n=t[2],s=t[3],r=e[0],o=e[1];return r>t[0]&&n>r&&o>i&&s>o?!0:!1},_isPointWithinRange:function(e,t,i){var n=e.x;return e=e.y,t>n||t>e||n>i||e>i?!1:!0},_getClipperIntersection:function(e,t,i){var n,s=v._getLineIntersection2,r=Math.round,o={length:0};for(n=0;4>n;n++){var a=s(e,t[n]);if(a){if(a[0]=r(a[0]),a[1]=r(a[1]),!i)return[n,a];o[n]=a,o.length++}}return i?o:null},_getPlaneIndex:function(e,t){var i=e[0],n=e[1],s=t[0],r=t[1],o=t[2],a=t[3];return s>=i?n>=r&&a>=n?3:r>n?[0,3]:[2,3]:r>=n?i>=s&&o>=i?0:s>i?[3,0]:[1,0]:i>=o?n>=r&&a>=n?1:r>n?[0,1]:[2,1]:n>=a?i>=s&&o>=i?2:s>i?[3,2]:[1,2]:-1},onGraphicAdd:function(){},onGraphicRemove:function(){},onGraphicNodeAdd:function(){},onGraphicNodeRemove:function(){},onGraphicDraw:function(){},onGraphicsClear:function(){},onRendererChange:function(){},onOpacityChange:function(){},setInfoTemplate:function(e){this.infoTemplate=e},add:function(e,t){return e._graphicsLayer===this?e:(t||this.graphics.push(e),e._graphicsLayer=this,this._updateExtent(e),this._draw(e),t||this.onGraphicAdd(e),e)},remove:function(e,t){if(!t){var i;if(-1===(i=n.indexOf(this.graphics,e)))return null;e=this.graphics.splice(i,1)[0]}return e.getDojoShape()&&this._removeShape(e),e._shape=e._graphicsLayer=null,this.onGraphicRemove(e),e},clear:function(e,t){for(var i=this.graphics;0<i.length;)this.remove(i[0]);t||this.onGraphicsClear()},_setIEOpacity:function(e,t){var i=e&&e.getNode();if(i){var n=e.strokeStyle,s=i.stroke;n&&s&&(s.opacity=n.color.a*t),n=e.fillStyle,s=i.fill,n&&s&&("tile"===s.type?o.set(i,"opacity",t):s.opacity=n.a*t)}},setOpacity:function(e,t){if(t||this.opacity!=e){var i=this._div;i&&(T?(n.forEach(this.graphics,function(t){this._setIEOpacity(t._shape,e),this._setIEOpacity(t._bgShape,e)},this),i._esriIeOpacity=e,this._bgGroup._esriIeOpacity=e):this._canvas?o.set(i.getEventSource(),"opacity",e):i.getEventSource().setAttribute("opacity",e)),this.opacity=e,t||this.onOpacityChange(e)}},setRenderer:function(e){this.renderer=e,this._evalSDRenderer(),this.onRendererChange()}}),e=e(x,{declaredClass:"esri.layers.GraphicsLayer",constructor:function(){this.enableMouseEvents=i.hitch(this,this.enableMouseEvents),this.disableMouseEvents=i.hitch(this,this.disableMouseEvents),this._processEvent=i.hitch(this,this._processEvent),this._initLayer()},_initLayer:function(){this.loaded=!0,this.onLoad(this)},_setMap:function(){var e=this.inherited("_setMap",arguments);return this.enableMouseEvents(),e},_unsetMap:function(){this.disableMouseEvents(),this.inherited("_unsetMap",arguments)},_processEvent:function(e){var t,i=this._map,n=e.target;for(e.screenPoint=new g(e.pageX-i.position.x,e.pageY-i.position.y),e.mapPoint=i.toMap(e.screenPoint);n&&!(t=n.e_graphic);)n=n.parentNode;return t?(e.graphic=t,e):void 0},_onMouseOverHandler:function(e){this._processEvent(e)&&this.onMouseOver(e)},_onMouseMoveHandler:function(e){this._processEvent(e)&&this.onMouseMove(e)},_onMouseDragHandler:function(e){this._processEvent(e)&&this.onMouseDrag(e)},_onMouseOutHandler:function(e){this._processEvent(e)&&this.onMouseOut(e)},_onMouseDownHandler:function(e){this._downGr=this._downPt=null,this._processEvent(e)&&(t.disconnect(this._onmousemove_connect),t.disconnect(this._onmousedrag_connect),this._onmousedrag_connect=t.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseDragHandler"),this._downGr=e.graphic,this._downPt=e.screenPoint.x+","+e.screenPoint.y,this.onMouseDown(e))},_onMouseUpHandler:function(e){this._upGr=this._upPt=null,this._processEvent(e)&&(t.disconnect(this._onmousedrag_connect),t.disconnect(this._onmousemove_connect),this._onmousemove_connect=t.connect(this._div.getEventSource(),"onmousemove",this,"_onMouseMoveHandler"),this._upGr=e.graphic,this._upPt=e.screenPoint.x+","+e.screenPoint.y,this.onMouseUp(e))},_onClickHandler:function(e){if(this._processEvent(e)){var t=this._downGr,i=this._upGr;t&&i&&t===i&&this._downPt===this._upPt&&(T&&(c._ieGraphic=e.graphic),this.onClick(e))}},_onDblClickHandler:function(e){this._processEvent(e)&&this.onDblClick(e)},onMouseOver:function(){},onMouseMove:function(){},onMouseDrag:function(){},onMouseOut:function(){},onMouseDown:function(){},onMouseUp:function(){},onClick:function(){},onDblClick:function(){},enableMouseEvents:function(){if(!this._mouseEvents){var e=t.connect,i=this._div.getEventSource();S||(this._onmouseover_connect=e(i,"onmouseover",this,"_onMouseOverHandler"),this._onmousemove_connect=e(i,"onmousemove",this,"_onMouseMoveHandler"),this._onmouseout_connect=e(i,"onmouseout",this,"_onMouseOutHandler"),this._onmousedown_connect=e(i,"onmousedown",this,"_onMouseDownHandler"),this._onmouseup_connect=e(i,"onmouseup",this,"_onMouseUpHandler"),this._onclick_connect=e(i,"onclick",this,"_onClickHandler"),this._ondblclick_connect=e(i,"ondblclick",this,"_onDblClickHandler")),this._mouseEvents=!0}},disableMouseEvents:function(){if(this._mouseEvents){var e=t.disconnect;e(this._onmouseover_connect),e(this._onmousemove_connect),e(this._onmousedrag_connect),e(this._onmouseout_connect),e(this._onmousedown_connect),e(this._onmouseup_connect),e(this._onclick_connect),e(this._ondblclick_connect),this._mouseEvents=!1}}}),e._GraphicsContainer=E,e._GraphicsLayer=x,d("extend-esri")&&(i.setObject("layers.GraphicsLayer",e,c),i.setObject("layers._GraphicsContainer",E,c),i.setObject("layers._GraphicsLayer",x,c)),e})},"esri/tasks/query":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has esri/kernel esri/geometry/jsonUtils esri/tasks/SpatialRelationship dojo/has!extend-esri?esri/tasks/QueryTask dojo/has!extend-esri?esri/tasks/RelationshipQuery dojo/has!extend-esri?esri/tasks/StatisticDefinition".split(" "),function(e,t,i,n,s,r,o,a){var l=e(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=l.SPATIAL_REL_INTERSECTS},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:!1,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,toJson:function(e){var t={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision};e=e&&e.geometry||this.geometry;var s=this.objectIds,r=this.outFields,a=this.outSpatialReference,c=this.groupByFieldsForStatistics,h=this.orderByFields,d=this.outStatistics;if(e&&(t.geometry=e,t.geometryType=o.getJsonType(e),t.inSR=e.spatialReference.wkid||n.toJson(e.spatialReference.toJson())),s&&(t.objectIds=s.join(",")),r&&(t.outFields=r.join(",")),c&&(t.groupByFieldsForStatistics=c.join(",")),h&&(t.orderByFields=h.join(",")),d){var u=[];i.forEach(d,function(e){u.push(e.toJson())}),t.outStatistics=n.toJson(u)}return null!==a?t.outSR=a.wkid||n.toJson(a.toJson()):e&&(t.outSR=e.spatialReference.wkid||n.toJson(e.spatialReference.toJson())),e=this.timeExtent,t.time=e?e.toJson().join(","):null,(e=this.relationParam)&&this.spatialRelationship===l.SPATIAL_REL_RELATION&&(t.relationParam=e),t.pixelSize=this.pixelSize?n.toJson(this.pixelSize.toJson()):null,t._ts=this._ts,t}});return t.mixin(l,a),s("extend-esri")&&t.setObject("tasks.Query",l,r),l})},"esri/layers/ArcGISDynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/sniff dojo/io-query esri/kernel esri/config esri/request esri/urlUtils esri/layerUtils esri/geometry/scaleUtils esri/layers/DynamicMapServiceLayer esri/layers/ArcGISMapServiceLayer esri/layers/TimeInfo esri/layers/LayerTimeOptions esri/layers/ImageParameters esri/layers/DynamicLayerInfo esri/layers/LayerMapSource".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p,m,_,g,y){return e=e([u,f],{declaredClass:"esri.layers.ArcGISDynamicMapServiceLayer",_eventMap:{"gdb-version-change":!0},constructor:function(e,i,n){e=i&&i.imageParameters;var s=t.hitch;if(e){var r=e.layerDefinitions;r&&this.setLayerDefinitions(r),e.layerOption===_.LAYER_OPTION_SHOW&&(this.visibleLayers=[].concat(e.layerIds))}this._setIsPNG32=s(this,this._setIsPNG32),this.dpi=e&&e.dpi||96,this.imageFormat=e&&e.format||"png8",this.imageTransparency=e&&!1===e.transparent?!1:!0,this._setIsPNG32(),this.gdbVersion=i&&i.gdbVersion,this._params.gdbVersion=this.gdbVersion,t.mixin(this._params,this._url.query,{dpi:this.dpi,transparent:this.imageTransparency,format:this.imageFormat},e?e.toJson():{}),this.getImageUrl=s(this,this.getImageUrl),this._initLayer=s(this,this._initLayer),this._load=s(this,this._load),this.useMapImage=i?i.useMapImage:!1,this._loadCallback=i&&i.loadCallback,(i=i&&i.resourceInfo)?this._initLayer(i):(void 0===n||!1===n)&&this._load(),this.registerConnectEvents()},disableClientCaching:!1,layerDefinitions:null,_initLayer:function(e){this.inherited(arguments),e.timeInfo&&(this.timeInfo=new p(e.timeInfo)),this.loaded=!0,this.onLoad(this);var t=this._loadCallback;t&&(delete this._loadCallback,t(this))},getImageUrl:function(e,i,s,o){var h=this._url.path+"/export?",d=this._params,u=e.spatialReference.wkid||n.toJson(e.spatialReference.toJson()),f=this._errorHandler;delete d._ts,t.mixin(d,{bbox:e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:u,imageSR:u,size:i+","+s},this.disableClientCaching?{_ts:(new Date).getTime()}:{}),d.layerDefs&&(e=d.layerDefs,delete d.layerDefs,t.mixin(d,{layerDefs:e}));var p=d.token=this._getToken();e=c.addProxy(h+r.objectToQuery(t.mixin({},d,{f:"image"}))),e.length>a.defaults.io.postLength||this.useMapImage?this._jsonRequest=l({url:h,content:t.mixin(d,{f:"json"}),callbackParamName:"callback",load:function(e){var t=e.href;p&&(t+=-1===t.indexOf("?")?"?token="+p:"&token="+p),o(c.addProxy(t))},error:f}):o(e)},_setIsPNG32:function(){var e=this.imageFormat.toLowerCase(),t=s("ie");this.isPNG32=t&&6===t&&("png32"===e||"png24"===e)&&this.imageTransparency},_setTime:function(e){var t=this.timeInfo;if(e=this._params.time=e?e.toJson().join(","):null,10.02>this.version&&t)if(e)this._params.layerTimeOptions=h._serializeTimeOptions(this.layerTimeOptions);else{var n=this.layerInfos;if(n){var s=this.layerTimeOptions,r=s?s.slice(0):[],o=[];i.forEach(n,function(e){e.subLayerIds||o.push(e.id)}),o.length&&(i.forEach(o,function(e){if(!r[e]){var t=new m;t.useTime=!1,r[e]=t}}),this._params.layerTimeOptions=h._serializeTimeOptions(r,o))}}10.02<=this.version&&t&&!e&&!t.hasLiveData&&(this._params.time="null,null")},setDPI:function(e,t){this.dpi=this._params.dpi=e,t||this.refresh(!0)},setImageFormat:function(e,t){this.imageFormat=this._params.format=e,this._setIsPNG32(),t||this.refresh(!0)},setImageTransparency:function(e,t){this.imageTransparency=this._params.transparent=e,this._setIsPNG32(),t||this.refresh(!0)},setVisibleLayers:function(e,t){this.visibleLayers=e,this._params.layers=_.LAYER_OPTION_SHOW+":"+e.join(","),this._updateDynamicLayers(),t||this.refresh(!0)},setDefaultVisibleLayers:function(e){this.visibleLayers=this._defaultVisibleLayers,this._params.layers=null,this._updateDynamicLayers(),e||this.refresh(!0)},setLayerDefinitions:function(e,t){this.layerDefinitions=e,this._params.layerDefs=h._serializeLayerDefinitions(e),this._updateDynamicLayers(),t||this.refresh(!0)},setDefaultLayerDefinitions:function(e){this.layerDefinitions=this._params.layerDefs=null,this._updateDynamicLayers(),e||this.refresh(!0)},setDisableClientCaching:function(e){this.disableClientCaching=e},setLayerTimeOptions:function(e,t){this.layerTimeOptions=e,this._params.layerTimeOptions=h._serializeTimeOptions(e),this._updateDynamicLayers(),t||this.refresh(!0)},refresh:function(e){if(e)this.inherited(arguments);else{var t=this.disableClientCaching;this.disableClientCaching=!0,this.inherited(arguments),this.disableClientCaching=t}},setLayerDrawingOptions:function(e,t){this.layerDrawingOptions=e,this._updateDynamicLayers(),t||this.refresh(!0)},setDynamicLayerInfos:function(e,t){e&&0<e.length?(this.dynamicLayerInfos=e,this.visibleLayers=h._getDefaultVisibleLayers(e)):this.dynamicLayerInfos=this.layerDrawingOptions=null,this._updateDynamicLayers(),t||this.refresh(!0)},createDynamicLayerInfosFromLayerInfos:function(){var e,t=[];return i.forEach(this.layerInfos,function(i){e=new g(i.toJson()),e.source=new y({mapLayerId:i.id}),t.push(e)}),t},_onDynamicLayersChange:function(){},_updateDynamicLayers:function(){if(this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length||this.layerDrawingOptions&&0<this.layerDrawingOptions.length){this.dynamicLayerInfos&&0!==this.dynamicLayerInfos.length||(this.dynamicLayerInfos=this.createDynamicLayerInfosFromLayerInfos());var e;e=this.dynamicLayerInfos;var t=[],s=this._map&&d.getScale(this._map),r=this.visibleLayers,o=s?h._getLayersForScale(s,e):r;i.forEach(e,function(e){if(!e.subLayerIds){var n,s=e.id;if(-1!==i.indexOf(r,s)&&-1!==i.indexOf(o,s)){n={id:s},n.source=e.source&&e.source.toJson();var a;this.layerDefinitions&&this.layerDefinitions[s]&&(a=this.layerDefinitions[s]),a&&(n.definitionExpression=a);var l;this.layerDrawingOptions&&this.layerDrawingOptions[s]&&(l=this.layerDrawingOptions[s]),l&&(n.drawingInfo=l.toJson());var c;this.layerTimeOptions&&this.layerTimeOptions[s]&&(c=this.layerTimeOptions[s]),c&&(n.layerTimeOptions=c.toJson()),n.minScale=e.minScale||0,n.maxScale=e.maxScale||0,t.push(n)}}},this),e=n.toJson(t),this._params.dynamicLayers&&this._params.dynamicLayers.length===e.length&&this._params.dynamicLayers===e||(this._params.dynamicLayers=e,this._onDynamicLayersChange(this._params.dynamicLayers))}else this._params.dynamicLayers?(this._params.dynamicLayers=null,this._onDynamicLayersChange(null)):this._params.dynamicLayers=null},_onExtentChangeHandler:function(e,t,i){i&&this._updateDynamicLayers(),this.inherited(arguments)},_setMap:function(e){return this._map=e,this._updateDynamicLayers(),this.inherited(arguments)},onGDBVersionChange:function(){},setGDBVersion:function(e,t){this.gdbVersion=e,this._params.gdbVersion=e,this.onGDBVersionChange(),t||this.refresh(!0)},exportMapImage:function(e,i){var n=a.defaults.map,n=t.mixin({size:n.width+","+n.height},this._params,e?e.toJson(this.normalization):{},{f:"json"});if(delete n._ts,n.layerDefs){var s=n.layerDefs;delete n.layerDefs,t.mixin(n,{layerDefs:s})}this._exportMapImage(this._url.path+"/export",n,i)}}),s("extend-esri")&&t.setObject("layers.ArcGISDynamicMapServiceLayer",e,o),e})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(d,l,p,q,h,k,g,f,b,a,c,e,m,r,u,n){function v(a){return eval("("+a+")")}function s(e){var t=e._nameCaseMap,i=e.prototype;if(!t||t._extendCnt<x){var n,t=e._nameCaseMap={};for(n in i)"_"!==n.charAt(0)&&(t[n.toLowerCase()]=n);t._extendCnt=x}return t}function y(e,t){var i=e.join();if(!w[i]){for(var n=[],s=0,r=e.length;r>s;s++){var o=e[s];n[n.length]=w[o]=w[o]||p.getObject(o)||~o.indexOf("/")&&(t?t(o):d(o))}s=n.shift(),w[i]=n.length?s.createSubclass?s.createSubclass(n):s.extend.apply(s,n):s}return w[i]}new Date("X");var x=0;b.after(p,"extend",function(){x++},!0);var w={},A={_clearCache:function(){x++,w={}},_functionFromScript:function(e,t){var i="",n="",s=e.getAttribute(t+"args")||e.getAttribute("args"),r=e.getAttribute("with"),s=(s||"").split(/\s*,\s*/);return r&&r.length&&q.forEach(r.split(/\s*,\s*/),function(e){i+="with("+e+"){",n+="}"}),new Function(s,i+e.innerHTML+n)},instantiate:function(e,t,i){t=t||{},i=i||{};var n=(i.scope||l._scopeName)+"Type",s="data-"+(i.scope||l._scopeName)+"-",r=s+"type",o=s+"mixins",a=[];return q.forEach(e,function(e){var i=n in t?t[n]:e.getAttribute(r)||e.getAttribute(n);if(i){var s=e.getAttribute(o),i=s?[i].concat(s.split(/\s*,\s*/)):[i];a.push({node:e,types:i})}}),this._instantiate(a,t,i)},_instantiate:function(e,t,i,n){function s(e){return!t._started&&!i.noStart&&q.forEach(e,function(e){"function"==typeof e.startup&&!e._started&&e.startup()}),e}return e=q.map(e,function(e){var n=e.ctor||y(e.types,i.contextRequire);if(!n)throw Error("Unable to resolve constructor for: '"+e.types.join()+"'");return this.construct(n,e.node,t,i,e.scripts,e.inherited)},this),n?a(e).then(s):s(e)},construct:function(e,t,i,n,o,a){function h(e){for(S&&p.setObject(S,e),j=0;j<M.length;j++)b[M[j].advice||"after"](e,M[j].method,p.hitch(e,M[j].func),!0);for(j=0;j<D.length;j++)D[j].call(e);for(j=0;j<L.length;j++)e.watch(L[j].prop,L[j].func);for(j=0;j<R.length;j++)u(e,R[j].event,R[j].func);return e}var d=e&&e.prototype;n=n||{};var _={};n.defaults&&p.mixin(_,n.defaults),a&&p.mixin(_,a);var g;m("dom-attributes-explicit")?g=t.attributes:m("dom-attributes-specified-flag")?g=q.filter(t.attributes,function(e){return e.specified}):(a=(/^input$|^img$/i.test(t.nodeName)?t:t.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),g=q.map(a.split(/\s+/),function(e){var i=e.toLowerCase();return{name:e,value:"LI"==t.nodeName&&"value"==e||"enctype"==i?t.getAttribute(i):t.getAttributeNode(i).value}}));var y=n.scope||l._scopeName;a="data-"+y+"-";var x={};"dojo"!==y&&(x[a+"props"]="data-dojo-props",x[a+"type"]="data-dojo-type",x[a+"mixins"]="data-dojo-mixins",x[y+"type"]="dojoType",x[a+"id"]="data-dojo-id");for(var w,S,T,j=0,y=[];w=g[j++];){var E=w.name,k=E.toLowerCase();switch(w=w.value,x[k]||k){case"data-dojo-type":case"dojotype":case"data-dojo-mixins":break;case"data-dojo-props":T=w;break;case"data-dojo-id":case"jsid":S=w;break;case"data-dojo-attach-point":case"dojoattachpoint":_.dojoAttachPoint=w;break;case"data-dojo-attach-event":case"dojoattachevent":_.dojoAttachEvent=w;break;case"class":_["class"]=t.className;break;case"style":_.style=t.style&&t.style.cssText;break;default:if(E in d||(E=s(e)[k]||E),E in d)switch(typeof d[E]){case"string":_[E]=w;break;case"number":_[E]=w.length?Number(w):0/0;break;case"boolean":_[E]="false"!=w.toLowerCase();break;case"function":_[E]=""===w||-1!=w.search(/[^\w\.]+/i)?new Function(w):p.getObject(w,!1)||new Function(w),y.push(E);break;default:k=d[E],_[E]=k&&"length"in k?w?w.split(/\s*,\s*/):[]:k instanceof Date?""==w?new Date(""):"now"==w?new Date:c.fromISOString(w):k instanceof f?l.baseUrl+w:v(w)}else _[E]=w}}for(g=0;g<y.length;g++)x=y[g].toLowerCase(),t.removeAttribute(x),t[x]=null;if(T)try{T=v.call(n.propsThis,"{"+T+"}"),p.mixin(_,T)}catch(C){throw Error(C.toString()+" in data-dojo-props='"+T+"'")}p.mixin(_,i),o||(o=e&&(e._noScript||d._noScript)?[]:r("> script[type^='dojo/']",t));var M=[],D=[],L=[],R=[];if(o)for(j=0;j<o.length;j++)x=o[j],t.removeChild(x),i=x.getAttribute(a+"event")||x.getAttribute("event"),n=x.getAttribute(a+"prop"),T=x.getAttribute(a+"method"),y=x.getAttribute(a+"advice"),g=x.getAttribute("type"),x=this._functionFromScript(x,a),i?"dojo/connect"==g?M.push({method:i,func:x}):"dojo/on"==g?R.push({event:i,func:x}):_[i]=x:"dojo/aspect"==g?M.push({method:T,advice:y,func:x}):"dojo/watch"==g?L.push({prop:n,func:x}):D.push(x);return e=(o=e.markupFactory||d.markupFactory)?o(_,t,e):new e(_,t),e.then?e.then(h):h(e)},scan:function(t,i){function n(e){if(!e.inherited){e.inherited={};var t,i=e.node,s=n(e.parent),i={dir:i.getAttribute("dir")||s.dir,lang:i.getAttribute("lang")||s.lang,textDir:i.getAttribute(u)||s.textDir};for(t in i)i[t]&&(e.inherited[t]=i[t])}return e.inherited}var s=[],r=[],o={},a=(i.scope||l._scopeName)+"Type",c="data-"+(i.scope||l._scopeName)+"-",h=c+"type",u=c+"textdir",c=c+"mixins",f=t.firstChild,p=i.inherited;if(!p){var _,g=function(e,t){return e.getAttribute&&e.getAttribute(t)||e.parentNode&&g(e.parentNode,t)},p={dir:g(t,"dir"),lang:g(t,"lang"),textDir:g(t,u)};for(_ in p)p[_]||delete p[_]}for(var v,b,p={inherited:p};;)if(f)if(1!=f.nodeType)f=f.nextSibling;else if(v&&"script"==f.nodeName.toLowerCase())(x=f.getAttribute("type"))&&/^dojo\/\w/i.test(x)&&v.push(f),f=f.nextSibling;else if(b)f=f.nextSibling;else{var x=f.getAttribute(h)||f.getAttribute(a);if(_=f.firstChild,x||_&&(3!=_.nodeType||_.nextSibling)){if(b=null,x){var w=f.getAttribute(c);v=w?[x].concat(w.split(/\s*,\s*/)):[x];try{b=y(v,i.contextRequire)}catch(S){}b||q.forEach(v,function(e){~e.indexOf("/")&&!o[e]&&(o[e]=!0,r[r.length]=e)}),w=b&&!b.prototype._noScript?[]:null,p={types:v,ctor:b,parent:p,node:f,scripts:w},p.inherited=n(p),s.push(p)}else p={node:f,scripts:v,parent:p};v=w,b=f.stopParser||b&&b.prototype.stopParser&&!i.template,f=_}else f=f.nextSibling}else{if(!p||!p.node)break;f=p.node.nextSibling,b=!1,p=p.parent,v=p.scripts}var T=new e;return r.length?(m("dojo-debug-messages")&&console.warn("WARNING: Modules being Auto-Required: "+r.join(", ")),(i.contextRequire||d)(r,function(){T.resolve(q.filter(s,function(e){if(!e.ctor)try{e.ctor=y(e.types,i.contextRequire)}catch(t){}for(var n=e.parent;n&&!n.types;)n=n.parent;var s=e.ctor&&e.ctor.prototype;return e.instantiateChildren=!(s&&s.stopParser&&!i.template),e.instantiate=!n||n.instantiate&&n.instantiateChildren,e.instantiate}))})):T.resolve(s),T.promise},_require:function(t,i){var n,s=v("{"+t.innerHTML+"}"),r=[],o=[],a=new e,l=i&&i.contextRequire||d;for(n in s)r.push(n),o.push(s[n]);return l(o,function(){for(var e=0;e<r.length;e++)p.setObject(r[e],arguments[e]);a.resolve(arguments)}),a.promise},_scanAmd:function(t,i){var n=new e,s=n.promise;n.resolve(!0);var o=this;return r("script[type='dojo/require']",t).forEach(function(e){s=s.then(function(){return o._require(e,i)}),e.parentNode.removeChild(e)}),s},parse:function(e,t){var i;!t&&e&&e.rootNode?(t=e,i=t.rootNode):!e||!p.isObject(e)||"nodeType"in e?i=e:t=e,i=i?k.byId(i):g.body(),t=t||{};var n=t.template?{template:!0}:{},s=[],r=this,o=this._scanAmd(i,t).then(function(){return r.scan(i,t)}).then(function(e){return r._instantiate(e,n,t,!0)}).then(function(e){return s=s.concat(e)}).otherwise(function(e){throw console.error("dojo/parser::parse() error",e),e});return p.mixin(s,o),s}};return l.parser=A,h.parseOnLoad&&n(100,A,"parse"),A})},"esri/layers/MapImage":function(){define("dojo/_base/declare dojo/_base/lang dojo/has esri/kernel esri/domUtils esri/geometry/Extent".split(" "),function(e,t,i,n,s,r){return e=e(null,{declaredClass:"esri.layers.MapImage",constructor:function(e){t.mixin(this,e),this.extent=new r(this.extent)},visible:!0,getLayer:function(){return this._layer},getNode:function(){return this._node},show:function(){if(!this.visible){this.visible=!0;var e,t=this._node,i=this._layer;t&&((e=i&&i._div)&&(i.suspended||i._setPos(t,e._left,e._top),(i._active||e).appendChild(t)),s.show(t))}},hide:function(){if(this.visible){this.visible=!1;var e=this._node;e&&(s.hide(e),e.parentNode&&e.parentNode.removeChild(e))}}}),i("extend-esri")&&t.setObject("layers.MapImage",e,n),e})},"esri/symbols/Symbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has esri/kernel esri/lang".split(" "),function(e,t,i,n,s,r){function o(e){return e&&new i([e[0],e[1],e[2],e[3]/255])}function a(e){return e&&[e.r,e.g,e.b,Math.round(255*e.a)]}return e=e(null,{declaredClass:"esri.symbol.Symbol",color:new i([0,0,0,1]),type:null,_stroke:null,_fill:null,constructor:function(e){e&&t.isObject(e)&&(t.mixin(this,e),this.color&&r.isDefined(this.color[0])&&(this.color=o(this.color)),(e=this.type)&&0===e.indexOf("esri"))&&(this.type={esriSMS:"simplemarkersymbol",esriPMS:"picturemarkersymbol",esriSLS:"simplelinesymbol",esriCLS:"cartographiclinesymbol",esriSFS:"simplefillsymbol",esriPFS:"picturefillsymbol",esriTS:"textsymbol"}[e])},setColor:function(e){return this.color=e,this},toJson:function(){return{color:a(this.color)}}}),e.toDojoColor=o,e.toJsonColor=a,n("extend-esri")&&(t.setObject("symbol.Symbol",e,s),s.symbol.toDojoColor=o,s.symbol.toJsonColor=a),e})},"esri/symbol":function(){define("esri/symbols/Symbol esri/symbols/MarkerSymbol esri/symbols/SimpleMarkerSymbol esri/symbols/PictureMarkerSymbol esri/symbols/LineSymbol esri/symbols/SimpleLineSymbol esri/symbols/CartographicLineSymbol esri/symbols/FillSymbol esri/symbols/SimpleFillSymbol esri/symbols/PictureFillSymbol esri/symbols/Font esri/symbols/TextSymbol esri/symbols/jsonUtils".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u){return{Symbol:e,MarkerSymbol:t,SimpleMarkerSymbol:i,PictureMarkerSymbol:n,LineSymbol:s,SimpleLineSymbol:r,CartographicLineSymbol:o,FillSymbol:a,SimpleFillSymbol:l,PictureFillSymbol:c,Font:h,TextSymbol:d,jsonUtils:u}})},"esri/virtualearth/VEAddress":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(e,t,i,n){return e=e(null,{declaredClass:"esri.virtualearth.VEAddress",constructor:function(e){t.mixin(this,{addressLine:null,adminDistrict:null,countryRegion:null,district:null,formattedAddress:null,locality:null,postalCode:null,postalTown:null},e)}}),i("extend-esri")&&t.setObject("virtualearth.VEAddress",e,n),e})},"dijit/form/ToggleButton":function(){define(["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(e,t,i,n){return e("dijit.form.ToggleButton",[i,n],{baseClass:"dijitToggleButton",setChecked:function(e){t.deprecated("setChecked("+e+") is deprecated. Use set('checked',"+e+") instead.","","2.0"),this.set("checked",e)}})})},"esri/SpatialReference":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has esri/kernel esri/lang".split(" "),function(e,t,i,n,s,r){var o=[-20037508.342788905,20037508.342788905],a=[-20037508.342787,20037508.342787];return e=e(null,{declaredClass:"esri.SpatialReference",constructor:function(e){e&&(i.isObject(e)?i.mixin(this,e):i.isString(e)?this.wkt=e:this.wkid=e)},wkid:null,wkt:null,_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:o,origin:a,dx:1e-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:o,origin:a,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:o,origin:a,dx:1e-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:o,origin:a,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",${Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",${Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,180],dx:1e-5}},_isWebMercator:function(){return-1!==t.indexOf([102113,102100,3857,3785],this.wkid)},_isWrappable:function(){return-1!==t.indexOf([102113,102100,3857,3785,4326],this.wkid)},_getInfo:function(){return this.wkid?this._info[this.wkid]:null},_canProject:function(e){var t=!1;return e&&(t=this.isWebMercator()&&4326===e.wkid||e.isWebMercator()&&4326===this.wkid),t},isWebMercator:function(){return this._isWebMercator()},equals:function(e){var t=!1;return e&&(this===e&&(t=!0),this.wkid||e.wkid?t=this.wkid===e.wkid||this.isWebMercator()&&e.isWebMercator()||this.wkid===e.latestWkid||e.wkid===this.latestWkid:this.wkt&&e.wkt&&(t=this.wkt.toUpperCase()===e.wkt.toUpperCase())),t},toJson:function(){var e=null,t=r.isDefined;return t(this.wkid)?e={wkid:this.wkid}:t(this.wkt)&&(e={wkt:this.wkt}),e&&t(this.latestWkid)&&(e.latestWkid=this.latestWkid),e}}),n("extend-esri")&&(s.SpatialReference=e),e})},"esri/layers/LabelClass":function(){define("dojo/_base/declare dojo/_base/lang dojo/has esri/kernel esri/lang esri/symbols/TextSymbol".split(" "),function(e,t,i,n,s,r){return e=e(null,{declaredClass:"esri.layers.LabelClass",labelPlacement:null,labelExpression:null,useCodedValues:null,symbol:null,maxScale:0,minScale:0,where:null,_labelPlacementLookup:{"above-center":"esriServerPointLabelPlacementAboveCenter","above-left":"esriServerPointLabelPlacementAboveLeft","above-right":"esriServerPointLabelPlacementAboveRight","below-center":"esriServerPointLabelPlacementBelowCenter","below-left":"esriServerPointLabelPlacementBelowLeft","below-right":"esriServerPointLabelPlacementBelowRight","center-center":"esriServerPointLabelPlacementCenterCenter","center-left":"esriServerPointLabelPlacementCenterLeft","center-right":"esriServerPointLabelPlacementCenterRight","above-after":"esriServerLinePlacementAboveAfter","above-along":"esriServerLinePlacementAboveAlong","above-before":"esriServerLinePlacementAboveBefore","above-start":"esriServerLinePlacementAboveStart","above-end":"esriServerLinePlacementAboveEnd","below-after":"esriServerLinePlacementBelowAfter","below-along":"esriServerLinePlacementBelowAlong","below-before":"esriServerLinePlacementBelowBefore","below-start":"esriServerLinePlacementBelowStart","below-end":"esriServerLinePlacementBelowEnd","center-after":"esriServerLinePlacementCenterAfter","center-along":"esriServerLinePlacementCenterAlong","center-before":"esriServerLinePlacementCenterBefore","center-start":"esriServerLinePlacementCenterStart","center-end":"esriServerLinePlacementCenterEnd","always-horizontal":"esriServerPolygonPlacementAlwaysHorizontal"},constructor:function(e){e&&(t.mixin(this,e),this.labelPlacement=s.valueOf(this._labelPlacementLookup,e.labelPlacement),e.symbol&&(this.symbol=new r(e.symbol)))},toJson:function(){var e={};return e.labelExpression=this.labelExpression,e.useCodedValues=this.useCodedValues,e.maxScale=this.maxScale,e.minScale=this.minScale,e.where=this.where,e.labelPlacement=this._labelPlacementLookup.hasOwnProperty(this.labelPlacement)?this._labelPlacementLookup[this.labelPlacement]:this.labelPlacement,this.symbol&&(e.symbol=this.symbol.toJson()),s.fixJson(e)}}),i("extend-esri")&&t.setObject("layers.LabelClass",e,n),e
})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(e,t){var i={};return e.setObject("dojo.date.stamp",i),i.fromISOString=function(e,n){i._isoRegExp||(i._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var s=i._isoRegExp.exec(e),r=null;if(s){s.shift(),s[1]&&s[1]--,s[6]&&(s[6]*=1e3),n&&(n=new Date(n),t.forEach(t.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),function(e){return n["get"+e]()}),function(e,t){s[t]=s[t]||e})),r=new Date(s[0]||1970,s[1]||0,s[2]||1,s[3]||0,s[4]||0,s[5]||0,s[6]||0),100>s[0]&&r.setFullYear(s[0]||1970);var o=0,a=s[7]&&s[7].charAt(0);"Z"!=a&&(o=60*(s[8]||0)+(Number(s[9])||0),"-"!=a&&(o*=-1)),a&&(o-=r.getTimezoneOffset()),o&&r.setTime(r.getTime()+6e4*o)}return r},i.toISOString=function(e,t){var i=function(e){return 10>e?"0"+e:e};t=t||{};var n=[],s=t.zulu?"getUTC":"get",r="";if("time"!=t.selector&&(r=e[s+"FullYear"](),r=["0000".substr((r+"").length)+r,i(e[s+"Month"]()+1),i(e[s+"Date"]())].join("-")),n.push(r),"date"!=t.selector){if(r=[i(e[s+"Hours"]()),i(e[s+"Minutes"]()),i(e[s+"Seconds"]())].join(":"),s=e[s+"Milliseconds"](),t.milliseconds&&(r+="."+(100>s?"0":"")+i(s)),t.zulu)r+="Z";else if("time"!=t.selector)var s=e.getTimezoneOffset(),o=Math.abs(s),r=r+((s>0?"-":"+")+i(Math.floor(o/60))+":"+i(o%60));n.push(r)}return n.join("T")},i})},"dojox/gfx/_base":function(){define("dojo/_base/kernel dojo/_base/lang dojo/_base/Color dojo/_base/sniff dojo/_base/window dojo/_base/array dojo/dom dojo/dom-construct dojo/dom-geometry".split(" "),function(e,t,i,n,s,r,o,a,l){var c=t.getObject("dojox.gfx",!0),h=c._base={};c._hasClass=function(e,t){var i=e.getAttribute("className");return i&&0<=(" "+i+" ").indexOf(" "+t+" ")},c._addClass=function(e,t){var i=e.getAttribute("className")||"";(!i||0>(" "+i+" ").indexOf(" "+t+" "))&&e.setAttribute("className",i+(i?" ":"")+t)},c._removeClass=function(e,t){var i=e.getAttribute("className");i&&e.setAttribute("className",i.replace(RegExp("(^|\\s+)"+t+"(\\s+|$)"),"$1$2"))},h._getFontMeasurements=function(){var e,t={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,small:0,medium:0,large:0,"x-large":0,"xx-large":0};n("ie")&&(s.doc.documentElement.style.fontSize="100%");var i=a.create("div",{style:{position:"absolute",left:"0",top:"-100px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},s.body());for(e in t)i.style.fontSize=e,t[e]=16*Math.round(12*i.offsetHeight/16)/12/1e3;return s.body().removeChild(i),t};var d=null;h._getCachedFontMeasurements=function(e){return(e||!d)&&(d=h._getFontMeasurements()),d};var u=null,f={};h._getTextBox=function(e,t,i){var n,r,o,c=arguments.length;if(u||(u=a.create("div",{style:{position:"absolute",top:"-10000px",left:"0"}},s.body())),n=u,n.className="",r=n.style,r.borderWidth="0",r.margin="0",r.padding="0",r.outline="0",c>1&&t)for(o in t)o in f||(r[o]=t[o]);return c>2&&i&&(n.className=i),n.innerHTML=e,n.getBoundingClientRect?(n=n.getBoundingClientRect(),{l:n.left,t:n.top,w:n.width||n.right-n.left,h:n.height||n.bottom-n.top}):l.getMarginBox(n)},h._computeTextLocation=function(e,t,i,n){var s={};switch(e.align){case"end":s.x=e.x-t;break;case"middle":s.x=e.x-t/2;break;default:s.x=e.x}return s.y=e.y-i*(n?.75:1),s},h._computeTextBoundingBox=function(e){if(!c._base._isRendered(e))return{x:0,y:0,width:0,height:0};var t;t=e.getShape();var i=e.getFont()||c.defaultFont;return e=e.getTextWidth(),i=c.normalizedLength(i.size),t=h._computeTextLocation(t,e,i,!0),{x:t.x,y:t.y,width:e,height:i}},h._isRendered=function(e){for(e=e.parent;e&&e.getParent;)e=e.parent;return null!==e};var p=0;return h._getUniqueId=function(){var t;do t=e._scopeName+"xUnique"+ ++p;while(o.byId(t));return t},h._fixMsTouchAction=function(e){e=e.rawNode,"undefined"!=typeof e.style.msTouchAction&&(e.style.msTouchAction="none")},t.mixin(c,{defaultPath:{type:"path",path:""},defaultPolyline:{type:"polyline",points:[]},defaultRect:{type:"rect",x:0,y:0,width:100,height:100,r:0},defaultEllipse:{type:"ellipse",cx:0,cy:0,rx:200,ry:100},defaultCircle:{type:"circle",cx:0,cy:0,r:100},defaultLine:{type:"line",x1:0,y1:0,x2:100,y2:100},defaultImage:{type:"image",x:0,y:0,width:0,height:0,src:""},defaultText:{type:"text",x:0,y:0,text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultTextPath:{type:"textpath",text:"",align:"start",decoration:"none",rotated:!1,kerning:!0},defaultStroke:{type:"stroke",color:"black",style:"solid",width:1,cap:"butt",join:4},defaultLinearGradient:{type:"linear",x1:0,y1:0,x2:100,y2:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultRadialGradient:{type:"radial",cx:0,cy:0,r:100,colors:[{offset:0,color:"black"},{offset:1,color:"white"}]},defaultPattern:{type:"pattern",x:0,y:0,width:0,height:0,src:""},defaultFont:{type:"font",style:"normal",variant:"normal",weight:"normal",size:"10pt",family:"serif"},getDefault:function(){var e={};return function(t){var i=e[t];return i?new i:(i=e[t]=new Function,i.prototype=c["default"+t],new i)}}(),normalizeColor:function(e){return e instanceof i?e:new i(e)},normalizeParameters:function(e,t){var i;if(t){var n={};for(i in e)i in t&&!(i in n)&&(e[i]=t[i])}return e},makeParameters:function(e,i){var n=null;if(!i)return t.delegate(e);var s={};for(n in e)n in s||(s[n]=t.clone(n in i?i[n]:e[n]));return s},formatNumber:function(e,t){var i=e.toString();if(0<=i.indexOf("e"))i=e.toFixed(4);else{var n=i.indexOf(".");n>=0&&5<i.length-n&&(i=e.toFixed(4))}return 0>e?i:t?" "+i:i},makeFontString:function(e){return e.style+" "+e.variant+" "+e.weight+" "+e.size+" "+e.family},splitFontString:function(e){var t=c.getDefault("Font");if(e=e.split(/\s+/),!(5>e.length)){t.style=e[0],t.variant=e[1],t.weight=e[2];var i=e[3].indexOf("/");t.size=0>i?e[3]:e[3].substring(0,i);var n=4;0>i&&("/"==e[4]?n=6:"/"==e[4].charAt(0)&&(n=5)),n<e.length&&(t.family=e.slice(n).join(" "))}return t},cm_in_pt:72/2.54,mm_in_pt:7.2/2.54,px_in_pt:function(){return c._base._getCachedFontMeasurements()["12pt"]/12},pt2px:function(e){return e*c.px_in_pt()},px2pt:function(e){return e/c.px_in_pt()},normalizedLength:function(e){if(0===e.length)return 0;if(2<e.length){var t=c.px_in_pt(),i=parseFloat(e);switch(e.slice(-2)){case"px":return i;case"pt":return i*t;case"in":return 72*i*t;case"pc":return 12*i*t;case"mm":return i*c.mm_in_pt*t;case"cm":return i*c.cm_in_pt*t}}return parseFloat(e)},pathVmlRegExp:/([A-Za-z]+)|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,pathSvgRegExp:/([A-Za-z])|(\d+(\.\d+)?)|(\.\d+)|(-\d+(\.\d+)?)|(-\.\d+)/g,equalSources:function(e,t){return e&&t&&e===t},switchTo:function(e){var t="string"==typeof e?c[e]:e;t&&(r.forEach("Group Rect Ellipse Circle Line Polyline Image Text Path TextPath EsriPath Surface createSurface fixTarget".split(" "),function(e){c[e]=t[e]}),"string"==typeof e?c.renderer=e:r.some(["svg","vml","canvas","canvasWithEvents","silverlight"],function(e){return c.renderer=c[e]&&c[e].Surface===c.Surface?e:null}))}}),c})},"esri/IdentityManagerBase":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/_base/url dojo/has dojo/cookie esri/kernel esri/config esri/lang esri/ServerInfo esri/urlUtils esri/deferredUtils esri/request esri/Evented".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p,m,_){var g,y={},v=function(e){var t=new o(e.owningSystemUrl).host;e=new o(e.server).host;var i=/.+\.arcgis\.com$/i;return i.test(t)&&i.test(e)},b=function(e,t){return!(!v(e)||!t||!n.some(t,function(t){return t.test(e.server)}))};return _=e(_,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=i.getObject("esriGeowConfig"),this.serverInfos=[],this.credentials=[],this._soReqs=[],this._xoReqs=[],this._portals=[]},defaultTokenValidity:60,tokenValidity:null,signInPage:null,useSignInPage:!0,normalizeWebTierAuth:!1,_busy:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i,_adminSvcs:/\/admin\/services(\/|$)/i,_agolSuffix:".arcgis.com",_gwDomains:[{regex:/https?:\/\/www\.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/dev\.arcgis\.com/i,tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*dev[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*qa[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/gi,_regexServerType:/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|GeoenrichmentServer)).*/gi,_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_publicUrls:[/\/arcgis\/tokens/i,/\/sharing\/generatetoken/i,/\/rest\/info/i],registerServers:function(e){var t=this.serverInfos;t?(e=n.filter(e,function(e){return!this.findServerInfo(e.server)},this),this.serverInfos=t.concat(e)):this.serverInfos=e,n.forEach(e,function(e){if(e.owningSystemUrl&&this._portals.push(e.owningSystemUrl),e.hasPortal){this._portals.push(e.server);var t=h.defaults.io.corsEnabledServers,i=this._getOrigin(e.tokenServiceUrl);f.canUseXhr(e.server)||t.push(e.server.replace(/^https?:\/\//i,"")),f.canUseXhr(i)||t.push(i.replace(/^https?:\/\//i,""))}},this)},registerToken:function(e){var t,n=this._sanitizeUrl(e.server),s=this.findServerInfo(n);s||(s=new u,s.server=this._getOrigin(n),s.tokenServiceUrl=this._getTokenSvcUrl(n),s.hasPortal=!0,this.registerServers([s])),(t=this.findCredential(n,e.userId))?i.mixin(t,e):(t=new g({userId:e.userId,server:s.server,token:e.token,expires:e.expires,ssl:e.ssl,scope:this._isServerRsrc(n)?"server":"portal"}),t.resources=[n],this.credentials.push(t)),t.onTokenChange(!1)},toJson:function(){return d.fixJson({serverInfos:n.map(this.serverInfos,function(e){return e.toJson()}),credentials:n.map(this.credentials,function(e){return e.toJson()})})},initialize:function(e){if(e){i.isString(e)&&(e=r.fromJson(e));var t=e.serverInfos;if(e=e.credentials,t){var s=[];n.forEach(t,function(e){e.server&&e.tokenServiceUrl&&s.push(e.declaredClass?e:new u(e))}),s.length&&this.registerServers(s)}e&&n.forEach(e,function(e){e.userId&&e.server&&e.token&&e.expires&&e.expires>(new Date).getTime()&&(e=e.declaredClass?e:new g(e),e.onTokenChange(),this.credentials.push(e))},this)}},findServerInfo:function(e){var t;return e=this._sanitizeUrl(e),n.some(this.serverInfos,function(i){return f.hasSameOrigin(i.server,e,!0)&&(t=i),!!t}),t},findCredential:function(e,t){var i,s;return e=this._sanitizeUrl(e),s=this._isServerRsrc(e)?"server":"portal",t?n.some(this.credentials,function(n){return f.hasSameOrigin(e,n.server,!0)&&t===n.userId&&n.scope===s&&(i=n),!!i},this):n.some(this.credentials,function(t){return f.hasSameOrigin(e,t.server,!0)&&-1!==this._getIdenticalSvcIdx(e,t)&&t.scope===s&&(i=t),!!i},this),i},getCredential:function(e,n){var o,a,c=!0;d.isDefined(n)&&(i.isObject(n)?(o=!!n.token,a=n.error,c=!1!==n.prompt):o=n),e=this._sanitizeUrl(e);var h=new s(p._dfdCanceller),f=this._isAdminResource(e),m=o&&this._doPortalSignIn(e)?l("esri_auth"):null;if(o=o?this.findCredential(e):null,m||o)return m=m&&r.fromJson(m),c=Error("You are currently signed in as: '"+(m&&m.email||o&&o.userId)+"'. You do not have access to this resource: "+e),c.code="IdentityManagerBase.1",c.httpCode=a&&a.httpCode,c.messageCode=a?a.messageCode:null,c.subcode=a?a.subcode:null,c.details=a?a.details:null,c.log=t.isDebug,h.errback(c),h;if(a=this._findCredential(e,n))return h.callback(a),h;if(a=this.findServerInfo(e))!a.hasServer&&this._isServerRsrc(e)&&(a._restInfoDfd=this._getTokenSvcUrl(e,!0),a.hasServer=!0);else{if(m=this._getTokenSvcUrl(e),!m)return c=Error("Unknown resource - could not find token service endpoint."),c.code="IdentityManagerBase.2",c.log=t.isDebug,h.errback(c),h;a=new u,a.server=this._getOrigin(e),i.isString(m)?(a.tokenServiceUrl=m,c&&(a._selfDfd=this._getPortalSelf(m.replace(/\/sharing\/generatetoken/i,"/sharing/rest/portals/self"),e)),a.hasPortal=!0):(a._restInfoDfd=m,a.hasServer=!0),this.registerServers([a])}return this._enqueue(e,a,n,h,f)},getResourceName:function(e){return this._isRESTService(e)?e.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(e)&&e.replace(this._gwUser,"$1")||this._gwItem.test(e)&&e.replace(this._gwItem,"$1")||this._gwGroup.test(e)&&e.replace(this._gwGroup,"$1")||""},generateToken:function(e,n,s){var a,h,d,u,p,_,g,v=new o(window.location.href.toLowerCase()),b=l("esri_auth"),x=e.webTierAuth&&!n;u=e.shortLivedTokenValidity;var w;return n&&(w=c.id.tokenValidity||u||c.id.defaultTokenValidity,w>u&&(w=u)),s&&(a=s.isAdmin,h=s.serverUrl,d=s.token,_=s.ssl,e.customParameters=s.customParameters),a?u=e.adminTokenServiceUrl:(u=e.tokenServiceUrl,p=new o(u.toLowerCase()),b&&(b=r.fromJson(b),g=(g=b.auth_tier)&&g.toLowerCase()),("web"===g||e.webTierAuth)&&s&&s.serverUrl&&!_&&"http"===v.scheme&&(f.hasSameOrigin(v.uri,u,!0)||"https"===p.scheme&&v.host===p.host&&"7080"===v.port&&"7443"===p.port)&&(u=u.replace(/^https:/i,"http:").replace(/:7443/i,":7080"))),s=m(i.mixin({url:u,content:i.mixin({request:"getToken",username:n&&n.username,password:n&&n.password,serverUrl:h,token:d,expiration:w,referer:a||-1!==e.tokenServiceUrl.toLowerCase().indexOf("/sharing/generatetoken")?window.location.host:null,client:a?"referer":null,f:"json"},e.customParameters),handleAs:"json",callbackParamName:x?"callback":void 0},s&&s.ioArgs),{usePost:!x,disableIdentityLookup:!0,useProxy:this._useProxy(e,s)}),s.addCallback(function(i){if(!i||!i.token)return i=Error("Unable to generate token"),i.code="IdentityManagerBase.3",i.log=t.isDebug,i;var s=e.server;return y[s]||(y[s]={}),n&&(y[s][n.username]=n.password),i.validity=w,i}),s.addErrback(function(){}),s},isBusy:function(){return!!this._busy},checkSignInStatus:function(e){return this.getCredential(e,{prompt:!1})},setRedirectionHandler:function(e){this._redirectFunc=e},setProtocolErrorHandler:function(e){this._protocolFunc=e},signIn:function(){},_findCredential:function(e,t){var i,s,r,o,a=-1,l=t&&t.token;i=t&&t.resource;var c=this._isServerRsrc(e)?"server":"portal",h=n.filter(this.credentials,function(t){return f.hasSameOrigin(t.server,e,!0)&&t.scope===c});if(e=i||e,h.length)if(1===h.length){if(i=h[0],r=(s=(o=this.findServerInfo(i.server))&&o.owningSystemUrl)&&this.findCredential(s,i.userId),a=this._getIdenticalSvcIdx(e,i),!l)return-1===a&&i.resources.push(e),this._addResource(e,r),i;-1!==a&&(i.resources.splice(a,1),this._removeResource(e,r))}else{var d,u;if(n.some(h,function(t){return u=this._getIdenticalSvcIdx(e,t),-1!==u?(d=t,r=(s=(o=this.findServerInfo(d.server))&&o.owningSystemUrl)&&this.findCredential(s,d.userId),a=u,!0):!1},this),l)d&&(d.resources.splice(a,1),this._removeResource(e,r));else if(d)return this._addResource(e,r),d}},_addResource:function(e,t){t&&-1===this._getIdenticalSvcIdx(e,t)&&t.resources.push(e)},_removeResource:function(e,t){var i=-1;t&&(i=this._getIdenticalSvcIdx(e,t),i>-1&&t.resources.splice(i,1))},_useProxy:function(e,t){return t&&t.isAdmin&&!f.hasSameOrigin(e.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(e.tokenServiceUrl)&&10.1==e.currentVersion&&!f.hasSameOrigin(e.tokenServiceUrl,window.location.href)},_getOrigin:function(e){return e=new o(e),e.scheme+"://"+e.host+(d.isDefined(e.port)?":"+e.port:"")},_sanitizeUrl:function(e){e=f.fixUrl(i.trim(e));var t=(h.defaults.io.proxyUrl||"").toLowerCase(),n=t?e.toLowerCase().indexOf(t+"?"):-1;return-1!==n&&(e=e.substring(n+t.length+1)),f.urlToObject(e).path},_isRESTService:function(e){return-1<e.indexOf(this._agsRest)},_isAdminResource:function(e){return this._agsAdmin.test(e)||this._adminSvcs.test(e)},_isServerRsrc:function(e){return this._isRESTService(e)||this._isAdminResource(e)},_isIdenticalService:function(e,t){var i;if(this._isRESTService(e)&&this._isRESTService(t)){var n=this._getSuffix(e).toLowerCase(),s=this._getSuffix(t).toLowerCase();i=n===s,i||(i=/(.*)\/(MapServer|FeatureServer).*/gi,i=n.replace(i,"$1")===s.replace(i,"$1"))}else this._isAdminResource(e)&&this._isAdminResource(t)?i=!0:!this._isServerRsrc(e)&&!this._isServerRsrc(t)&&this._isPortalDomain(e)&&(i=!0);return i},_isPortalDomain:function(e){e=e.toLowerCase();var t=new o(e).authority,s=this._portalConfig,r=-1!==t.indexOf(this._agolSuffix);return!r&&s&&(r=f.hasSameOrigin(s.restBaseUrl,e,!0)),r||(!this._arcgisUrl&&(s=i.getObject("esri.arcgis.utils.arcgisUrl"))&&(this._arcgisUrl=new o(s).authority),this._arcgisUrl&&(r=this._arcgisUrl.toLowerCase()===t)),r||(r=n.some(this._portals,function(t){return f.hasSameOrigin(t,e,!0)})),r=r||this._agsPortal.test(e)},_isIdProvider:function(e,t){var i=-1,s=-1;n.forEach(this._gwDomains,function(n,r){-1===i&&n.regex.test(e)&&(i=r),-1===s&&n.regex.test(t)&&(s=r)});var r=!1;if(i>-1&&s>-1&&(0===i||4===i?(0===s||4===s)&&(r=!0):1===i?(1===s||2===s)&&(r=!0):2===i?2===s&&(r=!0):3===i&&3===s&&(r=!0)),!r){var o=this.findServerInfo(t),a=o&&o.owningSystemUrl;a&&v(o)&&this._isPortalDomain(a)&&this._isIdProvider(e,a)&&(r=!0)}return r},_isPublic:function(e){return e=this._sanitizeUrl(e),n.some(this._publicUrls,function(t){return t.test(e)})},_getIdenticalSvcIdx:function(e,t){var i=-1;return n.some(t.resources,function(t,n){return this._isIdenticalService(e,t)?(i=n,!0):!1},this),i},_getSuffix:function(e){return e.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(e){var t,i;if((t=this._isRESTService(e))||this._isAdminResource(e))return i=e.toLowerCase().indexOf(t?this._agsRest:"/admin/"),t=e.substring(0,i)+"/admin/generateToken",e=e.substring(0,i)+"/rest/info",i=m({url:e,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),i.adminUrl_=t,i;if(this._isPortalDomain(e)){var s="";return n.some(this._gwDomains,function(t){return t.regex.test(e)&&(s=t.tokenServiceUrl),!!s}),s||n.some(this._portals,function(t){return f.hasSameOrigin(t,e,!0)&&(s=t+this._gwTokenUrl),!!s},this),s||(i=e.toLowerCase().indexOf("/sharing"),-1!==i&&(s=e.substring(0,i)+this._gwTokenUrl)),s||(s=this._getOrigin(e)+this._gwTokenUrl),s&&(t=new o(e).port,/^http:\/\//i.test(e)&&"7080"===t&&(s=s.replace(/:7080/i,":7443")),s=s.replace(/http:/i,"https:")),s}return-1!==e.toLowerCase().indexOf("premium.arcgisonline.com")?"https://premium.arcgisonline.com/server/tokens":void 0},_getPortalSelf:function(e,t){return"https:"===window.location.protocol?e=e.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(t)&&(e=e.replace(/^https:/i,"http:").replace(/:7443/i,":7080")),m({url:e,content:{f:"json"},handleAs:"json",callbackParamName:"callback"},{crossOrigin:!1,disableIdentityLookup:!0})},_hasPortalSession:function(){return l.isSupported()?!!l("esri_auth"):!1},_doPortalSignIn:function(e){if(l.isSupported()){var t=l("esri_auth"),i=this._portalConfig,n=window.location.href,s=this.findServerInfo(e);if(this.useSignInPage&&(i||this._isPortalDomain(n)||t)&&(s?s.hasPortal||s.owningSystemUrl&&this._isPortalDomain(s.owningSystemUrl):this._isPortalDomain(e))&&(this._isIdProvider(n,e)||i&&(f.hasSameOrigin(i.restBaseUrl,e,!0)||this._isIdProvider(i.restBaseUrl,e))||f.hasSameOrigin(n,e,!0)))return!0}return!1},_checkProtocol:function(e,n,s,r){var o=!0;return r=r?n.adminTokenServiceUrl:n.tokenServiceUrl,0!==i.trim(r).toLowerCase().indexOf("https:")||0===window.location.href.toLowerCase().indexOf("https:")||h.defaults.io.useCors&&(f.canUseXhr(r)||f.canUseXhr(f.getProxyUrl(!0).path))||(o=this._protocolFunc?!!this._protocolFunc({resourceUrl:e,serverInfo:n}):!1,o||(e=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),e.code="IdentityManagerBase.4",e.log=t.isDebug,console.log(e.message),s(e))),o},_enqueue:function(e,t,i,n,r,o){return n||(n=new s(p._dfdCanceller)),n.resUrl_=e,n.sinfo_=t,n.options_=i,n.admin_=r,n.refresh_=o,this._busy?f.hasSameOrigin(e,this._busy.resUrl_,!0)?this._soReqs.push(n):this._xoReqs.push(n):this._doSignIn(n),n},_doSignIn:function(e){this._busy=e;var s=this,o=function(t){var i=e.options_&&e.options_.resource,r=e.resUrl_,o=e.refresh_;-1===n.indexOf(s.credentials,t)&&(o&&-1!==n.indexOf(s.credentials,o)?(o.userId=t.userId,o.token=t.token,o.expires=t.expires,o.validity=t.validity,o.ssl=t.ssl,o.creationTime=t.creationTime,t=o):s.credentials.push(t)),t.resources||(t.resources=[]),t.resources.push(i||r),t.scope=s._isServerRsrc(r)?"server":"portal",t.onTokenChange();var i=s._soReqs,a={};s._soReqs=[],n.forEach(i,function(e){if(!this._isIdenticalService(r,e.resUrl_)){var i=this._getSuffix(e.resUrl_);a[i]||(a[i]=!0,t.resources.push(e.resUrl_))}},s),e.callback(t),n.forEach(i,function(e){e.callback(t)}),s._busy=e.resUrl_=e.sinfo_=e.refresh_=null,s._soReqs.length&&s._doSignIn(s._soReqs.shift()),s._xoReqs.length&&s._doSignIn(s._xoReqs.shift())},a=function(t){e.errback(t),s._busy=e.resUrl_=e.sinfo_=e.refresh_=null,s._soReqs.length&&s._doSignIn(s._soReqs.shift()),s._xoReqs.length&&s._doSignIn(s._xoReqs.shift())},c=function(i,n,c,h){var u=e.sinfo_,f=!e.options_||!1!==e.options_.prompt;s._doPortalSignIn(e.resUrl_)?(n=l("esri_auth"),i=s._portalConfig,n?(n=r.fromJson(n),o(new g({userId:n.email,server:u.server,token:n.token,expires:null}))):f?(f="",n=window.location.href,f=s.signInPage?s.signInPage:i?i.baseUrl+i.signin:s._isIdProvider(n,e.resUrl_)?s._getOrigin(n)+"/home/signin.html":u.tokenServiceUrl.replace(/\/sharing\/generatetoken/i,"")+"/home/signin.html",f=f.replace(/http:/i,"https:"),i&&!1===i.useSSL&&(f=f.replace(/https:/i,"http:")),0===n.toLowerCase().replace("https","http").indexOf(f.toLowerCase().replace("https","http"))?(u=Error("Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: "+e.resUrl_),u.code="IdentityManagerBase.5",u.log=t.isDebug,a(u)):s._redirectFunc?s._redirectFunc({signInPage:f,returnUrlParamName:"returnUrl",returnUrl:n,resourceUrl:e.resUrl_,serverInfo:u}):window.location=f+"?returnUrl="+window.escape(n)):(u=Error("User is not signed in."),u.code="IdentityManagerBase.6",u.log=t.isDebug,a(u))):i?o(new g({userId:i,server:u.server,token:c,expires:d.isDefined(h)?Number(h):null,ssl:!!n})):f?s._checkProtocol(e.resUrl_,u,a,e.admin_)&&(f=e.options_,e.admin_&&(f=f||{},f.isAdmin=!0),e._pendingDfd=s.signIn(e.resUrl_,u,f).addCallbacks(o,a)):(u=Error("User is not signed in."),u.code="IdentityManagerBase.6",u.log=t.isDebug,a(u))},h=function(){var t,i,r,l=e.sinfo_,c=l.owningSystemUrl,h=e.options_;h&&(t=h.token,i=h.error),r=s._findCredential(c,{token:t,resource:e.resUrl_}),!r&&v(l)&&n.some(s.credentials,function(e){return this._isIdProvider(c,e.server)&&(r=e),!!r},s),r?(h=s.findCredential(e.resUrl_,r.userId))?o(h):b(l,s._legacyFed)?(h=r.toJson(),h.server=l.server,h.resources=null,o(new g(h))):(e._pendingDfd=s.generateToken(s.findServerInfo(r.server),null,{serverUrl:e.resUrl_,token:r.token,ssl:r.ssl})).addCallbacks(function(t){o(new g({userId:r.userId,server:l.server,token:t.token,expires:d.isDefined(t.expires)?Number(t.expires):null,ssl:!!t.ssl,isAdmin:e.admin_,validity:t.validity}))},a):(s._busy=null,t&&(e.options_.token=null),(e._pendingDfd=s.getCredential(c.replace(/\/?$/,"/sharing"),{resource:e.resUrl_,token:t,error:i})).addCallbacks(function(){s._enqueue(e.resUrl_,e.sinfo_,e.options_,e,e.admin_)},function(e){a(e)}))},u=e.sinfo_.owningSystemUrl,p=this._isServerRsrc(e.resUrl_),m=e.sinfo_._restInfoDfd;m?m.addCallbacks(function(t){var n=e.sinfo_;n.adminTokenServiceUrl=n._restInfoDfd.adminUrl_,n._restInfoDfd=null,n.tokenServiceUrl=i.getObject("authInfo.tokenServicesUrl",!1,t)||i.getObject("authInfo.tokenServiceUrl",!1,t)||i.getObject("tokenServiceUrl",!1,t),n.shortLivedTokenValidity=i.getObject("authInfo.shortLivedTokenValidity",!1,t),n.currentVersion=t.currentVersion,n.owningTenant=t.owningTenant,(t=n.owningSystemUrl=t.owningSystemUrl)&&(s._portals.push(t),!n.hasPortal&&f.hasSameOrigin(t,e.resUrl_,!0)&&(n._selfDfd=s._getPortalSelf(t.replace(/\/?$/,"/sharing/rest/portals/self"),e.resUrl_),n.hasPortal=!0)),p&&t?h():c()},function(){e.sinfo_._restInfoDfd=null;var i=Error("Unknown resource - could not find token service endpoint.");i.code="IdentityManagerBase.2",i.log=t.isDebug,a(i)}):p&&u?h():e.sinfo_._selfDfd?(u=function(t){e.sinfo_._selfDfd=null;var i=t&&t.user&&t.user.username,n=t&&t.allSSL;e.sinfo_.webTierAuth=!!i,i&&s.normalizeWebTierAuth?(e.sinfo_._tokenDfd=s.generateToken(e.sinfo_,null,{ssl:n}),t=function(t){e.sinfo_._tokenDfd=null,c(i,n,t&&t.token,t&&t.expires)},e.sinfo_._tokenDfd.then(t,t)):c(i,n)},e.sinfo_._selfDfd.then(u,u)):c()}}),_.prototype.checkLoginStatus=_.prototype.checkSignInStatus,g=e(null,{declaredClass:"esri.Credential",tokenRefreshBuffer:2,constructor:function(e){i.mixin(this,e),this.resources=this.resources||[],d.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},refreshToken:function(){var e,t,i=this,s=this.resources&&this.resources[0],r=c.id.findServerInfo(this.server),o=r&&r.owningSystemUrl,a=!!o&&"server"===this.scope,l=a&&b(r,c.id._legacyFed),h=a&&c.id.findServerInfo(o),u=(e=r.webTierAuth)&&c.id.normalizeWebTierAuth,p=y[this.server],p=p&&p[this.userId],m={username:this.userId,password:p};if((!e||u)&&(a&&!h&&n.some(c.id.serverInfos,function(e){return c.id._isIdProvider(o,e.server)&&(h=e),!!h}),e=h&&c.id.findCredential(h.server,this.userId),!a||e)){if(!l){if(a)t={serverUrl:s,token:e&&e.token,ssl:e&&e.ssl};else if(u)m=null,t={ssl:this.ssl};else{if(!p){var _;return s&&(s=c.id._sanitizeUrl(s),this._enqueued=1,_=c.id._enqueue(s,r,null,null,this.isAdmin,this),_.addBoth(function(){i._enqueued=0})),_}this.isAdmin&&(t={isAdmin:!0})}return c.id.generateToken(a?h:r,a?null:m,t).addCallback(function(e){i.token=e.token,i.expires=d.isDefined(e.expires)?Number(e.expires):null,i.creationTime=(new Date).getTime(),i.validity=e.validity,i.onTokenChange(),"portal"===i.scope&&n.forEach(c.id.credentials,function(e){var t=c.id.findServerInfo(e.server),n=t&&t.owningSystemUrl;e!==i&&e.userId===i.userId&&n&&"server"===e.scope&&(f.hasSameOrigin(i.server,n,!0)||c.id._isIdProvider(n,i.server))&&(b(t,c.id._legacyFed)?(e.token=i.token,e.expires=i.expires,e.creationTime=i.creationTime,e.validity=i.validity,e.onTokenChange()):e.refreshToken())})}).addErrback(function(){})}e.refreshToken()}},onTokenChange:function(e){clearTimeout(this._refreshTimer);var t=this.server&&c.id.findServerInfo(this.server),i=(t=t&&t.owningSystemUrl)&&c.id.findServerInfo(t);!1!==e&&(!t||"portal"===this.scope||i&&i.webTierAuth&&!c.id.normalizeWebTierAuth)&&(d.isDefined(this.expires)||d.isDefined(this.validity))&&this._startRefreshTimer()},onDestroy:function(){},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;var e=n.indexOf(c.id.credentials,this);e>-1&&c.id.credentials.splice(e,1),this.onTokenChange(),this.onDestroy()},toJson:function(){return this._toJson()},_toJson:function(){var e=d.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),t=this.resources;return t&&0<t.length&&(e.resources=t),e},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var e=6e4*this.tokenRefreshBuffer,t=(this.validity?this.creationTime+6e4*this.validity:this.expires)-(new Date).getTime();0>t&&(t=0),this._refreshTimer=setTimeout(i.hitch(this,this.refreshToken),t>e?t-e:t)}}),_.Credential=g,a("extend-esri")&&(c.IdentityManagerBase=_,c.Credential=g),_})},"esri/layers/TableDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has esri/kernel esri/lang esri/layers/DataSource".split(" "),function(e,t,i,n,s,r){return e=e(r,{declaredClass:"esri.layers.TableDataSource",toJson:function(){return s.fixJson({type:"table",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName,gdbVersion:this.gdbVersion})}}),i("extend-esri")&&t.setObject("layers.TableDataSource",e,n),e})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(e,t,i,n){return e("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(e){var t=this._attrPairNames;return t[e]?t[e]:t[e]={s:"_"+e+"Setter",g:"_"+e+"Getter"}},postscript:function(e){e&&this.set(e)},_get:function(e,t){return"function"==typeof this[t.g]?this[t.g]():this[e]},get:function(e){return this._get(e,this._getAttrNames(e))},set:function(e,t){if("object"==typeof e){for(var i in e)e.hasOwnProperty(i)&&"_watchCallbacks"!=i&&this.set(i,e[i]);return this}i=this._getAttrNames(e);var s=this._get(e,i);i=this[i.s];var r;if("function"==typeof i?r=i.apply(this,Array.prototype.slice.call(arguments,1)):this[e]=t,this._watchCallbacks){var o=this;n(r,function(){o._watchCallbacks(e,s,t)})}return this},_changeAttrValue:function(e,t){var i=this.get(e);return this[e]=t,this._watchCallbacks&&this._watchCallbacks(e,i,t),this},watch:function(e,t){var n=this._watchCallbacks;if(!n)var s=this,n=this._watchCallbacks=function(e,t,i,r){var o=function(n){if(n){n=n.slice();for(var r=0,o=n.length;o>r;r++)n[r].call(s,e,t,i)}};o(n["_"+e]),r||o(n["*"])};t||"function"!=typeof e?e="_"+e:(t=e,e="*");var r=n[e];"object"!=typeof r&&(r=n[e]=[]),r.push(t);var o={};return o.unwatch=o.remove=function(){var e=i.indexOf(r,t);e>-1&&r.splice(e,1)},o}})})},"esri/tasks/IdentifyTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has esri/kernel esri/request esri/geometry/normalizeUtils esri/tasks/Task esri/tasks/IdentifyResult".split(" "),function(e,t,i,n,s,r,o,a,l){return e=e(a,{declaredClass:"esri.tasks.IdentifyTask",_eventMap:{complete:["results"]},constructor:function(e,i){this._url.path+="/identify",this._handler=t.hitch(this,this._handler),this.gdbVersion=i&&i.gdbVersion,this.registerConnectEvents()},__msigns:[{n:"execute",c:3,a:[{i:0,p:["geometry"]}],e:2}],_handler:function(e,t,n,s,r){try{var o=[];i.forEach(e.results,function(e,t){o[t]=new l(e)}),this._successHandler([o],"onComplete",n,r)}catch(a){this._errorHandler(a,s,r)}},execute:function(e,i,n,s){var o=s.assembly;e=this._encode(t.mixin({},this._url.query,{f:"json"},e.toJson(o&&o[0])));var a=this._handler,l=this._errorHandler;return this.gdbVersion&&(e.gdbVersion=this.gdbVersion),r({url:this._url.path,content:e,callbackParamName:"callback",load:function(e,t){a(e,t,i,n,s.dfd)},error:function(e){l(e,n,s.dfd)}})},onComplete:function(){}}),o._createWrappers(e),n("extend-esri")&&t.setObject("tasks.IdentifyTask",e,s),e})},"dijit/form/ComboButton":function(){define(["dojo/_base/declare","dojo/keys","../focus","./DropDownButton","dojo/text!./templates/ComboButton.html"],function(e,t,i,n,s){return e("dijit.form.ComboButton",n,{templateString:s,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{buttonNode:"dijitButtonNode",titleNode:"dijitButtonContents",_popupStateNode:"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyDown:function(e){e.keyCode==t[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]&&(i.focus(this._popupStateNode),e.stopPropagation(),e.preventDefault())},_onArrowKeyDown:function(e){e.keyCode==t[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]&&(i.focus(this.titleNode),e.stopPropagation(),e.preventDefault())},focus:function(e){this.disabled||i.focus("start"==e?this.titleNode:this._popupStateNode)}})})},"dojox/xml/parser":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(e){return e.getObject("xml.parser",!0,dojox),dojox.xml.parser.parse=function(t,i){var n,s=e.doc;if(i=i||"text/xml",t&&e.trim(t)&&"DOMParser"in e.global){if(n=(new DOMParser).parseFromString(t,i),s=n.documentElement,"parsererror"==s.nodeName&&"http://www.mozilla.org/newlayout/xml/parsererror.xml"==s.namespaceURI){var r=s.getElementsByTagNameNS("http://www.mozilla.org/newlayout/xml/parsererror.xml","sourcetext")[0];
throw r&&(r=r.firstChild.data),Error("Error parsing text "+s.firstChild.data+" \n"+r)}return n}if("ActiveXObject"in e.global){if(s=function(e){return"MSXML"+e+".DOMDocument"},s=["Microsoft.XMLDOM",s(6),s(4),s(3),s(2)],e.some(s,function(e){try{n=new ActiveXObject(e)}catch(t){return!1}return!0}),t&&n&&(n.async=!1,n.loadXML(t),s=n.parseError,0!==s.errorCode))throw Error("Line: "+s.line+"\nCol: "+s.linepos+"\nReason: "+s.reason+"\nError Code: "+s.errorCode+"\nSource: "+s.srcText);if(n)return n}else if(s.implementation&&s.implementation.createDocument){if(t&&e.trim(t)&&s.createElement){r=s.createElement("xml"),r.innerHTML=t;var o=s.implementation.createDocument("foo","",null);return e.forEach(r.childNodes,function(e){o.importNode(e,!0)}),o}return s.implementation.createDocument("","",null)}return null},dojox.xml.parser.textContent=function(t,i){if(1<arguments.length)return dojox.xml.parser.replaceChildren(t,(t.ownerDocument||e.doc).createTextNode(i)),i;if(void 0!==t.textContent)return t.textContent;var n="";return t&&e.forEach(t.childNodes,function(e){switch(e.nodeType){case 1:case 5:n+=dojox.xml.parser.textContent(e);break;case 3:case 2:case 4:n+=e.nodeValue}}),n},dojox.xml.parser.replaceChildren=function(t,i){var n=[];e.isIE&&e.forEach(t.childNodes,function(e){n.push(e)}),dojox.xml.parser.removeChildren(t),e.forEach(n,e.destroy),e.isArray(i)?e.forEach(i,function(e){t.appendChild(e)}):t.appendChild(i)},dojox.xml.parser.removeChildren=function(e){for(var t=e.childNodes.length;e.hasChildNodes();)e.removeChild(e.firstChild);return t},dojox.xml.parser.innerXML=function(e){return e.innerXML?e.innerXML:e.xml?e.xml:"undefined"!=typeof XMLSerializer?(new XMLSerializer).serializeToString(e):null},dojox.xml.parser})},"esri/undoManager":function(){define(["dojo/_base/declare","dojo/has","esri/kernel","dojo/has!extend-esri?esri/OperationBase"],function(e,t,i){return e=e(null,{declaredClass:"esri.UndoManager",maxOperations:10,canUndo:!1,canRedo:!1,position:0,length:0,onUndo:function(){},onRedo:function(){},onAdd:function(){},onChange:function(){},constructor:function(e){e=e||{},e.maxOperations&&(this.maxOperations=e.maxOperations),this._historyStack=[]},add:function(e){if(0<this.maxOperations)for(;this._historyStack.length>=this.maxOperations;)this._historyStack.shift();this._historyStack.splice(this.position,0,e),this.position++,this.clearRedo(),this.onAdd(),this._checkAvailability()},undo:function(){if(0===this.position)return null;var e=this.peekUndo();this.position--,e&&e.performUndo(),this.onUndo(),this._checkAvailability()},redo:function(){if(this.position===this._historyStack.length)return null;var e=this.peekRedo();this.position++,e&&e.performRedo(),this.onRedo(),this._checkAvailability()},_checkAvailability:function(){this.length=this._historyStack.length,0===this.length?this.canUndo=this.canRedo=!1:0===this.position?(this.canRedo=!0,this.canUndo=!1):this.position===this.length?(this.canUndo=!0,this.canRedo=!1):this.canRedo=this.canUndo=!0,this.onChange()},clearUndo:function(){this._historyStack.splice(0,this.position),this.position=0,this._checkAvailability()},clearRedo:function(){this._historyStack.splice(this.position,this._historyStack.length-this.position),this.position=this._historyStack.length,this._checkAvailability()},peekUndo:function(){return 0<this._historyStack.length&&0<this.position?this.get(this.position-1):void 0},peekRedo:function(){return 0<this._historyStack.length&&this.position<this._historyStack.length?this.get(this.position):void 0},get:function(e){return this._historyStack[e]},remove:function(e){0<this._historyStack.length&&(this._historyStack.splice(e,1),0<this.position&&e<this.position&&this.position--,this._checkAvailability())},destroy:function(){this._historyStack=null}}),t("extend-esri")&&(i.UndoManager=e),e})},"esri/virtualearth/VEGeocodeResult":function(){define("dojo/_base/declare dojo/_base/lang dojo/has esri/kernel esri/geometry/Point esri/geometry/Extent esri/virtualearth/VEAddress".split(" "),function(e,t,i,n,s,r,o){return e=e(null,{declaredClass:"esri.virtualearth.VEGeocodeResult",constructor:function(e){t.mixin(this,{address:null,bestView:null,calculationMethod:null,confidence:null,displayName:null,entityType:null,location:null,matchCodes:null},e),this.address&&(this.address=new o(this.address)),this.bestView&&(this.bestView=new r(this.bestView)),this.locationArray&&(this.calculationMethod=this.locationArray[0].calculationMethod,this.location=new s(this.locationArray[0]))}}),i("extend-esri")&&t.setObject("virtualearth.VEGeocodeResult",e,n),e})},"esri/geometry/normalizeUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/_base/Deferred dojo/has esri/kernel esri/config esri/deferredUtils esri/geometry/Polyline esri/geometry/Polygon esri/geometry/webMercatorUtils esri/geometry/jsonUtils".split(" "),function(e,t,i,n,s,r,o,a,l,c,h){function d(e,t){return Math.ceil((e-t)/(2*t))}function u(e,t){var i,n,s,r=e.paths||e.rings,o=r.length;for(i=0;o>i;i++)for(s=r[i].length,n=0;s>n;n++){var a=e.getPoint(i,n);e.setPoint(i,n,a.offset(t,0))}return e}function f(t,i){if(!(t instanceof a||t instanceof l))throw console.error("_straightLineDensify: the input geometry is neither polyline nor polygon"),Error("_straightLineDensify: the input geometry is neither polyline nor polygon");var n,s=t instanceof a,r=[];return e.forEach(s?t.paths:t.rings,function(e){r.push(n=[]),n.push([e[0][0],e[0][1]]);var t,s,o,a,l,c,h,d,u,f,p,m;for(l=0;l<e.length-1;l++){if(t=e[l][0],s=e[l][1],o=e[l+1][0],a=e[l+1][1],h=Math.sqrt((o-t)*(o-t)+(a-s)*(a-s)),d=(a-s)/h,u=(o-t)/h,f=h/i,f>1){for(c=1;f-1>=c;c++)m=c*i,p=u*m+t,m=d*m+s,n.push([p,m]);c=(h+Math.floor(f-1)*i)/2,p=u*c+t,m=d*c+s,n.push([p,m])}n.push([o,a])}}),s?new a({paths:r,spatialReference:t.spatialReference}):new l({rings:r,spatialReference:t.spatialReference})}function p(e,t,i){return t&&(e=f(e,1e6),e=c.webMercatorToGeographic(e,!0)),i&&(e=u(e,i)),e}function m(e,t,i){var n,s=e.x||e[0];return s>t?(n=d(s,t),e.x?e=e.offset(-2*n*t,0):e[0]=s+-2*n*t):i>s&&(n=d(s,i),e.x?e=e.offset(-2*n*i,0):e[0]=s+-2*n*i),e}function _(t,i){var n=-1;return e.forEach(i.cutIndexes,function(s,r){var o=i.geometries[r];e.forEach(o.rings||o.paths,function(t,i){e.some(t,function(e){if(!(180>e[0])){e=0;var n,s,r=t.length;for(n=0;r>n;n++)s=t[n][0],e=s>e?s:e;for(e=-360*d(e,180),r=t.length,n=0;r>n;n++)s=o.getPoint(i,n),o.setPoint(i,n,s.offset(e,0))}return!0})}),s===n?o.rings?e.forEach(o.rings,function(e){t[s]=t[s].addRing(e)}):e.forEach(o.paths,function(e){t[s]=t[s].addPath(e)}):(n=s,t[s]=o)}),t}function g(t,n,s,r){var o=new i;o.addCallbacks(s,r);var f,g,y,v,b,x,w,S,T=[],j=[],E=0;e.forEach(t,function(t){if(t)if(f||(f=t.spatialReference,g=f._getInfo(),v=(y=f._isWebMercator())?20037508.342788905:180,b=y?-20037508.342788905:-180,x=y?102100:4326,w=new a({paths:[[[v,b],[v,v]]],spatialReference:{wkid:x}}),S=new a({paths:[[[b,b],[b,v]]],spatialReference:{wkid:x}})),g){var i=h.fromJson(t.toJson()),n=t.getExtent();"point"===t.type?T.push(m(i,v,b)):"multipoint"===t.type?(i.points=e.map(i.points,function(e){return m(e,v,b)}),T.push(i)):"extent"===t.type?(i=n._normalize(null,null,g),T.push(i.rings?new l(i):i)):(t=2*d(n.xmin,b)*v,i=0===t?i:u(i,t),n=n.offset(t,0),n.intersects(w)&&n.xmax!==v?(E=n.xmax>E?n.xmax:E,i=p(i,y),j.push(i),T.push("cut")):n.intersects(S)&&n.xmin!==b?(E=2*n.xmax*v>E?2*n.xmax*v:E,i=p(i,y,360),j.push(i),T.push("cut")):T.push(i))}else T.push(t);else T.push(t)}),s=new a,r=d(E,v);for(var k=-90,C=r;r>0;){var M=-180+360*r;s.addPath([[M,k],[M,-1*k]]),k*=-1,r--}return 0<j.length&&C>0?n?n.cut(j,s,function(i){j=_(j,i);var s=[];e.forEach(T,function(e,i){if("cut"===e){var n=j.shift();t[i].rings&&1<t[i].rings.length&&n.rings.length>=t[i].rings.length?(T[i]="simplify",s.push(n)):T[i]=!0===y?c.geographicToWebMercator(n):n}}),0<s.length?n.simplify(s,function(t){e.forEach(T,function(e,i){"simplify"===e&&(T[i]=!0===y?c.geographicToWebMercator(t.shift()):t.shift())}),o.callback(T)},function(e){o.errback(e)}):o.callback(T)},function(e){o.errback(e)}):o.errback(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):(e.forEach(T,function(e,t){if("cut"===e){var i=j.shift();T[t]=!0===y?c.geographicToWebMercator(i):i}}),o.callback(T)),o}function y(i,n,s,r){var o,a=!1;t.isObject(i)&&i&&(t.isArray(i)?i.length&&((o=i[0]&&i[0].declaredClass)&&-1!==o.indexOf("Graphic")?(i=e.map(i,function(e){return e.geometry}),a=i.length?!0:!1):o&&-1!==o.indexOf("esri.geometry.")&&(a=!0)):(o=i.declaredClass)&&-1!==o.indexOf("FeatureSet")?(i=e.map(i.features||[],function(e){return e.geometry}),a=i.length?!0:!1):o&&-1!==o.indexOf("esri.geometry.")&&(a=!0)),a&&n.push({index:s,property:r,value:i})}function v(i,n){var s=[];return e.forEach(n,function(n){var r=n.i,o=i[r];n=n.p;var a;if(t.isObject(o)&&o)if(n)if("*"===n[0])for(a in o)o.hasOwnProperty(a)&&y(o[a],s,r,a);else e.forEach(n,function(e){y(t.getObject(e,!1,o),s,r,e)});else y(o,s,r)}),s}function b(i,n){var s=0,r={};return e.forEach(n,function(e){var n=e.index,o=e.property,a=e.value,l=a.length||1,c=i.slice(s,s+l);t.isArray(a)||(c=c[0]),s+=l,delete e.value,o?(r[n]=r[n]||{},r[n][o]=c):r[n]=c}),r}var x={normalizeCentralMeridian:g,_foldCutResults:_,_prepareGeometryForCut:p,_offsetMagnitude:d,_pointNormalization:m,_updatePolyGeometry:u,_straightLineDensify:f,_createWrappers:function(n){var s=t.isObject(n)?n.prototype:t.getObject(n+".prototype");e.forEach(s.__msigns,function(t){var n=s[t.n];s[t.n]=function(){var s,a=this,l=[],c=new i(o._dfdCanceller);for(t.f&&o._fixDfd(c),s=0;s<t.c;s++)l[s]=arguments[s];var h={dfd:c};l.push(h);var d,u,f=[];return a.normalization&&!a._isTable&&(d=v(l,t.a),e.forEach(d,function(e){f=f.concat(e.value)}),f.length&&(u=g(f,r.defaults.geometryService))),u?(c._pendingDfd=u,u.addCallbacks(function(e){c.canceled||(h.assembly=b(e,d),c._pendingDfd=n.apply(a,l))},function(e){var i=a.declaredClass;i&&-1!==i.indexOf("FeatureLayer")?a._resolve([e],null,l[t.e],c,!0):a._errorHandler(e,l[t.e],c)})):c._pendingDfd=n.apply(a,l),c}})},_disassemble:v,_addToBucket:y,_reassemble:b};return n("extend-esri")&&t.mixin(t.getObject("geometry",!0,s),x),x})},"esri/tasks/IdentifyResult":function(){define("dojo/_base/declare dojo/_base/lang dojo/has esri/kernel esri/graphic esri/geometry/jsonUtils".split(" "),function(e,t,i,n,s,r){return e=e(null,{declaredClass:"esri.tasks.IdentifyResult",constructor:function(e){t.mixin(this,e),this.feature=new s(e.geometry?r.fromJson(e.geometry):null,null,e.attributes),delete this.geometry,delete this.attributes}}),i("extend-esri")&&t.setObject("tasks.IdentifyResult",e,n),e})},"esri/tasks/DataFile":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(e,t,i,n){return e=e(null,{declaredClass:"esri.tasks.DataFile",constructor:function(e){e&&t.mixin(this,e)},url:null,itemID:null,toJson:function(){var e={};return this.url&&(e.url=this.url),this.itemID&&(e.itemID=this.itemID),e}}),i("extend-esri")&&t.setObject("tasks.DataFile",e,n),e})},"esri/geometry/Extent":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has esri/kernel esri/lang esri/SpatialReference esri/geometry/Geometry esri/geometry/Point esri/geometry/webMercatorUtils esri/geometry/mathUtils".split(" "),function(e,t,i,n,s,r,o,a,l,c,h){var d={type:"extent",xmin:0,ymin:0,xmax:0,ymax:0},u=e(a,{declaredClass:"esri.geometry.Extent",constructor:function(e,t,n,s,r){i.mixin(this,d),i.isObject(e)?(i.mixin(this,e),this.spatialReference&&(this.spatialReference=new o(this.spatialReference))):this.update(e,t,n,s,r),this.verifySR()},getWidth:function(){return Math.abs(this.xmax-this.xmin)},getHeight:function(){return Math.abs(this.ymax-this.ymin)},getCenter:function(){return new l((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2,this.spatialReference)},centerAt:function(e){var t=this.getCenter(),i=e.x-t.x;return e=e.y-t.y,new u(this.xmin+i,this.ymin+e,this.xmax+i,this.ymax+e,this.spatialReference)},update:function(e,t,i,n,s){return this.xmin=e,this.ymin=t,this.xmax=i,this.ymax=n,this.spatialReference=s,this},offset:function(e,t){return new u(this.xmin+e,this.ymin+t,this.xmax+e,this.ymax+t,this.spatialReference)},expand:function(e){var t=(1-e)/2;return e=this.getWidth()*t,t*=this.getHeight(),new u(this.xmin+e,this.ymin+t,this.xmax-e,this.ymax-t,this.spatialReference)},intersects:function(e){var t=e.type,i=this.spatialReference,n=e.spatialReference;switch(i&&n&&!i.equals(n)&&i._canProject(n)&&(e=i.isWebMercator()?c.geographicToWebMercator(e):c.webMercatorToGeographic(e,!0)),t){case"point":return this.contains(e);case"multipoint":return this._intersectsMultipoint(e);case"extent":return this._intersectsExtent(e);case"polygon":return this._intersectsPolygon(e);case"polyline":return this._intersectsPolyline(e)}},_intersectsMultipoint:function(e){var t,i=e.points.length;for(t=0;i>t;t++)if(this.contains(e.getPoint(t)))return!0;return!1},_intersectsExtent:function(e){var t,i,n,s,r=!1;return this.xmin<=e.xmin?(t=e.xmin,this.xmax<t?r=!0:n=Math.min(this.xmax,e.xmax)-t):(t=this.xmin,e.xmax<t?r=!0:n=Math.min(this.xmax,e.xmax)-t),this.ymin<=e.ymin?(i=e.ymin,this.ymax<i?r=!0:s=Math.min(this.ymax,e.ymax)-i):(i=this.ymin,e.ymax<i?r=!0:s=Math.min(this.ymax,e.ymax)-i),r?null:new u(t,i,t+n,i+s,this.spatialReference)},_intersectsPolygon:function(e){var t,i=[this.xmin,this.ymax],n=[this.xmax,this.ymax],s=[this.xmin,this.ymin],r=[this.xmax,this.ymin],o=[i,n,s,r],i=[[s,i],[i,n],[n,r],[r,s]],s=e.rings,r=s.length,a=new l(0,0,this.spatialReference);for(t=o.length,n=0;t>n;n++)if(a.update(o[n][0],o[n][1]),e.contains(a))return!0;a.setSpatialReference(e.spatialReference);for(var c,h,n=0;r>n;n++)if(o=s[n],t=o.length){if(c=o[0],a.update(c[0],c[1]),this.contains(a))return!0;for(e=1;t>e;e++){if(h=o[e],a.update(h[0],h[1]),this.contains(a)||this._intersectsLine([c,h],i))return!0;c=h}}return!1},_intersectsPolyline:function(e){var t,i,n,s,r,o=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],a=e.paths,c=a.length,h=new l(0,0,e.spatialReference);for(e=0;c>e;e++)if(i=a[e],n=i.length){if(s=i[0],h.update(s[0],s[1]),this.contains(h))return!0;for(t=1;n>t;t++){if(r=i[t],h.update(r[0],r[1]),this.contains(h)||this._intersectsLine([s,r],o))return!0;s=r}}return!1},_intersectsLine:function(e,t){var i,n=h._getLineIntersection2,s=t.length;for(i=0;s>i;i++)if(n(e,t[i]))return!0;return!1},contains:function(e){if(!e)return!1;var t=e.type;if("point"===t){var i=this.spatialReference,n=e.spatialReference,t=e.x;return e=e.y,i&&n&&!i.equals(n)&&i._canProject(n)&&(e=i.isWebMercator()?l.lngLatToXY(t,e):l.xyToLngLat(t,e,!0),t=e[0],e=e[1]),t>=this.xmin&&t<=this.xmax&&e>=this.ymin&&e<=this.ymax}return"extent"===t?this._containsExtent(e):!1},_containsExtent:function(e){var t=e.xmin,i=e.ymin,n=e.xmax,s=e.ymax,r=e.spatialReference;return e=new l(t,i,r),t=new l(t,s,r),s=new l(n,s,r),i=new l(n,i,r),this.contains(e)&&this.contains(t)&&this.contains(s)&&this.contains(i)?!0:!1},union:function(e){return new u(Math.min(this.xmin,e.xmin),Math.min(this.ymin,e.ymin),Math.max(this.xmax,e.xmax),Math.max(this.ymax,e.ymax),this.spatialReference)},getExtent:function(){var e=this.spatialReference;return new u(this.xmin,this.ymin,this.xmax,this.ymax,e&&new o(e.toJson()))},_shiftCM:function(e){if(!this._shifted){var t=new u(this.toJson()),i=t.spatialReference;if(e=e||i._getInfo()){var n=this._getCM(e);if(n){var s=i._isWebMercator()?c.webMercatorToGeographic(n):n;t.xmin-=n.x,t.xmax-=n.x,i._isWebMercator()||(s.x=this._normalizeX(s.x,e).x),t.spatialReference.wkt=r.substitute({Central_Meridian:s.x},4326===i.wkid?e.altTemplate:e.wkTemplate),t.spatialReference.wkid=null,delete t.spatialReference.wkid}}this._shifted=t}return this._shifted},_getCM:function(e){var t,i=e.valid[0];e=e.valid[1];var n=this.xmin,s=this.xmax;return n>=i&&e>=n&&s>=i&&e>=s||(t=this.getCenter()),t},_normalize:function(e,i,n){var s=new u(this.toJson()),r=s.spatialReference;if(r&&(n=n||r._getInfo())){var o=t.map(this._getParts(n),function(e){return e.extent});return 2<o.length?e?this._shiftCM(n):s.update(n.valid[0],s.ymin,n.valid[1],s.ymax,r):2===o.length?e?this._shiftCM(n):i?o:{rings:t.map(o,function(e){return[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]}),spatialReference:r}:o[0]||s}return s},_getParts:function(e){if(!this._parts){var t,i,n=this.xmin,s=this.xmax,r=this.ymin,o=this.ymax,a=this.spatialReference,l=this.getWidth(),c=n,h=s,d=0,f=0,p=[];if(e=e||a._getInfo(),t=e.valid[0],i=e.valid[1],f=this._normalizeX(n,e),n=f.x,d=f.frameId,f=this._normalizeX(s,e),s=f.x,f=f.frameId,e=n===s&&l>0,l>2*i){for(l=new u(h>c?n:s,r,i,o,a),n=new u(t,r,h>c?s:n,o,a),i=new u(0,r,i,o,a),r=new u(t,r,0,o,a),a=[],t=[],l.contains(i)&&a.push(d),l.contains(r)&&t.push(d),n.contains(i)&&a.push(f),n.contains(r)&&t.push(f),o=d+1;f>o;o++)a.push(o),t.push(o);p.push({extent:l,frameIds:[d]},{extent:n,frameIds:[f]},{extent:i,frameIds:a},{extent:r,frameIds:t})}else n>s||e?p.push({extent:new u(n,r,i,o,a),frameIds:[d]},{extent:new u(t,r,s,o,a),frameIds:[f]}):p.push({extent:new u(n,r,s,o,a),frameIds:[d]});this._parts=p}return this._parts},_normalizeX:function(e,t){var i=0,n=t.valid[0],s=t.valid[1],r=2*s;return e>s?(i=Math.ceil(Math.abs(e-s)/r),e-=i*r):n>e&&(i=Math.ceil(Math.abs(e-n)/r),e+=i*r,i=-i),{x:e,frameId:i}},toJson:function(){var e={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax},t=this.spatialReference;return t&&(e.spatialReference=t.toJson()),e}});return u.defaultProps=d,n("extend-esri")&&(i.setObject("geometry.Extent",u,s),s.geometry.defaultExtent=d),u})},"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/has dojo/keys dojo/_base/lang dojo/on ../main".split(" "),function(e,t,i,n,s,r,o,a){var l=t("dijit.form._TextBoxMixin"+(n("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(e,t,i){var n;void 0!==e&&(n=this.filter(e),"string"!=typeof i&&(i=null===n||"number"==typeof n&&isNaN(n)?"":this.filter(this.format(n,this.constraints)))),null==i||"number"==typeof i&&isNaN(i)||this.textbox.value==i||(this.textbox.value=i,this._set("displayedValue",this.get("displayedValue"))),this.inherited(arguments,[n,t])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(e){null==e?e="":"string"!=typeof e&&(e=String(e)),this.textbox.value=e,this._setValueAttr(this.get("value"),void 0),this._set("displayedValue",this.get("displayedValue"))},format:function(e){return null==e?"":e.toString?e.toString():e},parse:function(e){return e},_refreshState:function(){},onInput:function(){},__skipInputEvent:!1,_onInput:function(e){this._processInput(e),this.intermediateChanges&&this.defer(function(){this._handleOnChange(this.get("value"),!1)})},_processInput:function(){this._refreshState(),this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value),this.inherited(arguments),this.own(o(this.textbox,"keydown, keypress, paste, cut, input, compositionend",r.hitch(this,function(e){var t;if("keydown"==e.type){switch(t=e.keyCode){case s.SHIFT:case s.ALT:case s.CTRL:case s.META:case s.CAPS_LOCK:case s.NUM_LOCK:case s.SCROLL_LOCK:return}if(!e.ctrlKey&&!e.metaKey&&!e.altKey){switch(t){case s.NUMPAD_0:case s.NUMPAD_1:case s.NUMPAD_2:case s.NUMPAD_3:case s.NUMPAD_4:case s.NUMPAD_5:case s.NUMPAD_6:case s.NUMPAD_7:case s.NUMPAD_8:case s.NUMPAD_9:case s.NUMPAD_MULTIPLY:case s.NUMPAD_PLUS:case s.NUMPAD_ENTER:case s.NUMPAD_MINUS:case s.NUMPAD_PERIOD:case s.NUMPAD_DIVIDE:return}if(t>=65&&90>=t||t>=48&&57>=t||t==s.SPACE)return;t=!1;for(var i in s)if(s[i]===e.keyCode){t=!0;break}if(!t)return}}if((t=32<=e.charCode?String.fromCharCode(e.charCode):e.charCode)||(t=65<=e.keyCode&&90>=e.keyCode||48<=e.keyCode&&57>=e.keyCode||e.keyCode==s.SPACE?String.fromCharCode(e.keyCode):e.keyCode),t||(t=229),"keypress"==e.type){if("string"!=typeof t)return;if((t>="a"&&"z">=t||t>="A"&&"Z">=t||t>="0"&&"9">=t||" "===t)&&(e.ctrlKey||e.metaKey||e.altKey))return}if("input"==e.type){if(this.__skipInputEvent)return this.__skipInputEvent=!1,void 0}else this.__skipInputEvent=!0;var n,o={faux:!0};for(n in e)"layerX"!=n&&"layerY"!=n&&(i=e[n],"function"!=typeof i&&"undefined"!=typeof i&&(o[n]=i));r.mixin(o,{charOrCode:t,_wasConsumed:!1,preventDefault:function(){o._wasConsumed=!0,e.preventDefault()},stopPropagation:function(){e.stopPropagation()}}),!1===this.onInput(o)&&(o.preventDefault(),o.stopPropagation()),o._wasConsumed||(this.defer(function(){this._onInput(o)}),"keypress"==e.type&&e.stopPropagation())})))},_blankValue:"",filter:function(e){return null===e?this._blankValue:"string"!=typeof e?e:(this.trim&&(e=r.trim(e)),this.uppercase&&(e=e.toUpperCase()),this.lowercase&&(e=e.toLowerCase()),this.propercase&&(e=e.replace(/[^\s]+/g,function(e){return e.substring(0,1).toUpperCase()+e.substring(1)})),e)},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(){this.disabled||(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(e){!this.disabled&&!this.readOnly&&(this.selectOnClick&&"mouse"==e&&(this._selectOnClickHandle=o.once(this.domNode,"mouseup, touchend",r.hitch(this,function(){this._isTextSelected()||l.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="",this.inherited(arguments)}});return n("dojo-bidi")&&(l=t("dijit.form._TextBoxMixin",l,{_setValueAttr:function(){this.inherited(arguments),this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments),this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode),this.inherited(arguments)}})),l._setSelectionRange=a._setSelectionRange=function(e,t,i){e.setSelectionRange&&e.setSelectionRange(t,i)},l.selectInputText=a.selectInputText=function(e,t,n){e=i.byId(e),isNaN(t)&&(t=0),isNaN(n)&&(n=e.value?e.value.length:0);try{e.focus(),l._setSelectionRange(e,t,n)}catch(s){}},l})},"esri/layers/ArcGISTiledMapServiceLayer":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has dojo/io-query esri/kernel esri/urlUtils esri/SpatialReference esri/layers/TiledMapServiceLayer esri/layers/ArcGISMapServiceLayer esri/layers/TileInfo esri/layers/TimeInfo".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f){return t=t([h,d],{declaredClass:"esri.layers.ArcGISTiledMapServiceLayer",_agolAttrs:["ocean_basemap","world_imagery","world_street_map","world_topo_map"],constructor:function(t,s){s&&(s.roundrobin&&(e.deprecated(this.declaredClass+" : Constructor option 'roundrobin' deprecated. Use option 'tileServers'."),s.tileServers=s.roundrobin),this._setTileServers(s.tileServers),this._loadCallback=s.loadCallback),this._params=i.mixin({},this._url.query);var r=["servicesdev.arcgisonline.com/arcgis/rest/services","services.arcgisonline.com/arcgis/rest/services","servicesqa.arcgisonline.com/arcgis/rest/services"];this.resampling=this.resampling||n.some(r,function(e){return-1<t.toLowerCase().indexOf(e.toLowerCase())}),this._initLayer=i.hitch(this,this._initLayer),(r=s&&s.resourceInfo)?this._initLayer(r):(this._load=i.hitch(this,this._load),this._load())},_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},_setTileServers:function(e){if(e&&0<e.length){this.tileServers=e;var t,i=e.length;for(t=0;i>t;t++)e[t]=l.urlToObject(e[t]).path}},_initLayer:function(e){this.inherited(arguments),this.resourceInfo=s.toJson(e),this.tileInfo=new u(e.tileInfo),!this.spatialReference&&this.tileInfo.spatialReference&&(this.spatialReference=new c(this.tileInfo.spatialReference.toJson())),this.isPNG32="PNG24"===this.tileInfo.format||"PNG32"===this.tileInfo.format,e.timeInfo&&(this.timeInfo=new f(e.timeInfo));var t=this._url.path,i=this._loadCallback,r="file:"===window.location.protocol?"http:":window.location.protocol,o=t.match(/^https?\:\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+)\/mapserver/i),o=o&&o[2];if(!this.tileServers)if(e.tileServers)this._setTileServers(e.tileServers);else{var a=-1!==t.search(/^https?\:\/\/server\.arcgisonline\.com/i),l=-1!==t.search(/^https?\:\/\/services\.arcgisonline\.com/i);(a||l)&&this._setTileServers([t,t.replace(a?/server\.arcgisonline/i:/services\.arcgisonline/i,a?"services.arcgisonline":"server.arcgisonline")])}o&&-1!==n.indexOf(this._agolAttrs,o.toLowerCase())&&(this.hasAttributionData=!0,this.attributionDataUrl=this.attributionDataUrl||r+"//static.arcgis.com/attribution/"+o),this.loaded=!0,this.onLoad(this),i&&(delete this._loadCallback,i(this))},getTileUrl:function(e,t,i){var n=this.tileServers,s=this._getToken(),r=this._url.query;return e=(n?n[t%n.length]:this._url.path)+"/tile/"+e+"/"+t+"/"+i,this.resampling&&(e+="?blankTile=false"),r&&(e=this.resampling?e+("&"+o.objectToQuery(r)):e+("?"+o.objectToQuery(r))),!s||r&&r.token||(e+=(-1===e.indexOf("?")?"?":"&")+"token="+s),e=this.addTimestampToURL(e),l.addProxy(e)}}),r("extend-esri")&&i.setObject("layers.ArcGISTiledMapServiceLayer",t,a),t})},"esri/geometry/Geometry":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/SpatialReference"],function(e,t,i,n,s){return e=e(null,{declaredClass:"esri.geometry.Geometry",spatialReference:null,type:null,setSpatialReference:function(e){return this.spatialReference=e,this},verifySR:function(){this.spatialReference||this.setSpatialReference(new s(4326))},getExtent:function(){return null}}),i("extend-esri")&&t.setObject("geometry.Geometry",e,n),e})},"dijit/_base/window":function(){define(["dojo/window","../main"],function(e,t){t.getDocumentWindow=function(t){return e.get(t)}})},"esri/tasks/Date":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/date/locale","dojo/has","esri/kernel"],function(e,t,i,n,s){return e=e(null,{declaredClass:"esri.tasks.Date",constructor:function(e){e&&(e.format&&(this.format=e.format),this.date=i.parse(e.date,{selector:"date",datePattern:this.format}))},date:new Date,format:"EEE MMM dd HH:mm:ss zzz yyyy",toJson:function(){return{date:i.format(this.date,{selector:"date",datePattern:this.format}),format:this.format}}}),n("extend-esri")&&t.setObject("tasks.Date",e,s),e})},"esri/tasks/IdentifyParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has esri/kernel esri/layerUtils esri/geometry/jsonUtils esri/geometry/scaleUtils".split(" "),function(e,t,i,n,s,r,o,a,l){var c=e(null,{declaredClass:"esri.tasks.IdentifyParameters",constructor:function(){this.layerOption=c.LAYER_OPTION_TOP},geometry:null,spatialReference:null,layerIds:null,tolerance:null,returnGeometry:!1,mapExtent:null,width:400,height:400,dpi:96,layerDefinitions:null,timeExtent:null,layerTimeOptions:null,dynamicLayerInfos:null,toJson:function(e){var t=e&&e.geometry||this.geometry,s=this.mapExtent,r=this.spatialReference,c=this.layerIds;if(e={geometry:t,tolerance:this.tolerance,returnGeometry:this.returnGeometry,mapExtent:s,imageDisplay:this.width+","+this.height+","+this.dpi,maxAllowableOffset:this.maxAllowableOffset},t&&(e.geometryType=a.getJsonType(t)),null!==r?e.sr=r.wkid||n.toJson(r.toJson()):t?e.sr=t.spatialReference.wkid||n.toJson(t.spatialReference.toJson()):s&&(e.sr=s.spatialReference.wkid||n.toJson(s.spatialReference.toJson())),e.layers=this.layerOption,c&&(e.layers+=":"+c.join(",")),e.layerDefs=o._serializeLayerDefinitions(this.layerDefinitions),t=this.timeExtent,e.time=t?t.toJson().join(","):null,e.layerTimeOptions=o._serializeTimeOptions(this.layerTimeOptions),this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length){var s=l.getScale({extent:s,width:this.width,spatialReference:s.spatialReference}),h=o._getLayersForScale(s,this.dynamicLayerInfos),d=[];i.forEach(this.dynamicLayerInfos,function(e){if(!e.subLayerIds){var t=e.id;if((!this.layerIds||this.layerIds&&-1!==i.indexOf(this.layerIds,t))&&-1!==i.indexOf(h,t)){var n={id:t};n.source=e.source&&e.source.toJson();var s;this.layerDefinitions&&this.layerDefinitions[t]&&(s=this.layerDefinitions[t]),s&&(n.definitionExpression=s);var r;this.layerTimeOptions&&this.layerTimeOptions[t]&&(r=this.layerTimeOptions[t]),r&&(n.layerTimeOptions=r.toJson()),d.push(n)}}},this),s=n.toJson(d),"[]"===s&&(s="[{}]"),e.dynamicLayers=s}return e}});return t.mixin(c,{LAYER_OPTION_TOP:"top",LAYER_OPTION_VISIBLE:"visible",LAYER_OPTION_ALL:"all"}),s("extend-esri")&&t.setObject("tasks.IdentifyParameters",c,r),c})},"esri/geometry":function(){define("esri/units esri/SpatialReference esri/geometry/Geometry esri/geometry/Point esri/geometry/ScreenPoint esri/geometry/Multipoint esri/geometry/Polyline esri/geometry/Polygon esri/geometry/Extent esri/geometry/Rect esri/geometry/geodesicUtils esri/geometry/jsonUtils esri/geometry/mathUtils esri/geometry/normalizeUtils esri/geometry/scaleUtils esri/geometry/screenUtils esri/geometry/webMercatorUtils".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p,m,_){return{units:e,SpatialReference:t,Geometry:i,Point:n,ScreenPoint:s,Multipoint:r,Polyline:o,Polygon:a,Extent:l,Rect:c,geodesicUtils:h,jsonUtils:d,mathUtils:u,normalizeUtils:f,scaleUtils:p,screenUtils:m,webMercatorUtils:_}})},"esri/geometry/webMercatorUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has esri/kernel esri/SpatialReference esri/geometry/Point".split(" "),function(e,t,i,n,s,r){function o(t,i,n,r){if("point"===t.type){var o=i(t.x,t.y,r);return new t.constructor(o[0],o[1],new s(n))}if("extent"===t.type){var o=i(t.xmin,t.ymin,r),a=i(t.xmax,t.ymax,r);return new t.constructor(o[0],o[1],a[0],a[1],new s(n))}if("polyline"===t.type||"polygon"===t.type){var l,o="polyline"===t.type,c=[];return e.forEach(o?t.paths:t.rings,function(t){c.push(l=[]),e.forEach(t,function(e){l.push(i(e[0],e[1],r))})}),o?new t.constructor({paths:c,spatialReference:n}):new t.constructor({rings:c,spatialReference:n})}if("multipoint"===t.type){var h=[];return e.forEach(t.points,function(e){h.push(i(e[0],e[1],r))}),new t.constructor({points:h,spatialReference:n})}}var a={lngLatToXY:r.lngLatToXY,xyToLngLat:r.xyToLngLat,geographicToWebMercator:function(e){return o(e,r.lngLatToXY,{wkid:102100})},webMercatorToGeographic:function(e,t){return o(e,r.xyToLngLat,{wkid:4326},t)}};return i("extend-esri")&&t.mixin(t.getObject("geometry",!0,n),a),a})},"esri/layers/LayerSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(e,t,i,n){return e=e(null,{declaredClass:"esri.layers.LayerSource",type:null,constructor:function(e){e&&t.mixin(this,e)},toJson:function(){}}),i("extend-esri")&&t.setObject("layers.LayerSource",e,n),e})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(e,t,i,n,s,r,o){return s.add("highcontrast",function(){var i=o.doc.createElement("div");i.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("+(t.blankGif||e.toUrl("./resources/blank.gif"))+");",o.body().appendChild(i);var r=n.getComputedStyle(i),a=r.backgroundImage,r=r.borderTopColor==r.borderRightColor||a&&("none"==a||"url(invalid-url:)"==a);return 8>=s("ie")?i.outerHTML="":o.body().removeChild(i),r}),r(function(){s("highcontrast")&&i.add(o.body(),"dj_a11y")}),s})},"esri/tasks/Geoprocessor":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has dojo/io-query esri/kernel esri/request esri/deferredUtils esri/geometry/normalizeUtils esri/tasks/Task esri/tasks/FeatureSet esri/tasks/JobInfo esri/tasks/GPMessage esri/tasks/LinearUnit esri/tasks/DataFile esri/tasks/RasterData esri/tasks/Date esri/tasks/ParameterValue esri/tasks/GPResultImageLayer esri/layers/MapImage".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p,m,_,g,y,v,b,x){return e=e(d,{declaredClass:"esri.tasks.Geoprocessor",_eventMap:{"execute-complete":["results","messages"],"get-result-data-complete":["result"],"get-result-image-complete":["mapImage"],"get-result-image-layer-complete":["layer"],"job-cancel":["jobInfo"],"job-complete":["jobInfo"],"status-update":["jobInfo"]},constructor:function(){this._jobUpdateHandler=t.hitch(this,this._jobUpdateHandler),this._getJobStatus=t.hitch(this,this._getJobStatus),this._getResultDataHandler=t.hitch(this,this._getResultDataHandler),this._getResultImageHandler=t.hitch(this,this._getResultImageHandler),this._executeHandler=t.hitch(this,this._executeHandler),this._updateTimers=[],this.registerConnectEvents()
},updateDelay:1e3,processSpatialReference:null,outputSpatialReference:null,outSpatialReference:null,setUpdateDelay:function(e){this.updateDelay=e},setProcessSpatialReference:function(e){this.processSpatialReference=e},setOutputSpatialReference:function(e){this._setOutSR(e)},setOutSpatialReference:function(e){this._setOutSR(e)},__msigns:[{n:"execute",c:3,a:[{i:0,p:["*"]}],e:2,f:1},{n:"submitJob",c:4,a:[{i:0,p:["*"]}],e:3}],_setOutSR:function(e){this.outSpatialReference=this.outputSpatialReference=e},_getOutSR:function(){return this.outSpatialReference||this.outputSpatialReference},_gpEncode:function(e,n,r){for(var o in e){var a=e[o];t.isArray(a)?e[o]=s.toJson(i.map(a,function(e){return this._gpEncode({item:e},!0).item},this)):a instanceof Date&&(e[o]=a.getTime())}return this._encode(e,n,r)},_decode:function(e){var n=e.dataType,s=new v(e);if(-1!==i.indexOf(["GPBoolean","GPDouble","GPLong","GPString"],n))return s;if("GPLinearUnit"===n)s.value=new m(s.value);else if("GPFeatureRecordSetLayer"===n||"GPRecordSet"===n)s.value=new u(s.value);else if("GPDataFile"===n)s.value=new _(s.value);else if("GPDate"===n)e=s.value,s.value=t.isString(e)?new y({date:e}):new Date(e);else if("GPRasterData"===n||"GPRasterDataLayer"===n)e=e.value.mapImage,s.value=e?new x(e):new g(s.value);else if(-1!==n.indexOf("GPMultiValue:")){var r=n.split(":")[1];e=s.value,s.value=i.map(e,function(e){return this._decode({paramName:"_name",dataType:r,value:e}).value},this)}else console.log(this.declaredClass+" : GP Data type not handled. : "+s.dataType),s=null;return s},submitJob:function(e,i,n,r,o){var a=this._getOutSR(),c=o.assembly;e=this._gpEncode(t.mixin({},this._url.query,{f:"json","env:outSR":a?a.wkid||s.toJson(a.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||s.toJson(this.processSpatialReference.toJson()):null},e),null,c&&c[0]);var h=this._jobUpdateHandler,d=this._errorHandler;return l({url:this._url.path+"/submitJob",content:e,callbackParamName:"callback",load:function(e,t){h(e,t,!1,i,n,o.dfd)},error:function(e){d(e,r,o.dfd)}})},_jobUpdateHandler:function(e,t,i,n,s,r){var o=e.jobId;if(t=new f(e),this._successHandler([t],"onStatusUpdate",s,i&&r),!i)switch(clearTimeout(this._updateTimers[o]),this._updateTimers[o]=null,r&&r.progress(t),e.jobStatus){case f.STATUS_SUBMITTED:case f.STATUS_EXECUTING:case f.STATUS_WAITING:case f.STATUS_NEW:var a=this._getJobStatus;this._updateTimers[o]=setTimeout(function(){a(o,i,n,s,r)},this.updateDelay);break;default:this._successHandler([t],"onJobComplete",n,r)}},_getJobStatus:function(e,i,n,s,r){var o=this._jobUpdateHandler;l({url:this._url.path+"/jobs/"+e,content:t.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:function(e,t){o(e,t,i,n,s,r)},error:this._errorHandler})},_getResultDataHandler:function(e,t,i,n,s){try{var r=this._decode(e);this._successHandler([r],"onGetResultDataComplete",i,s)}catch(o){this._errorHandler(o,n,s)}},getResultData:function(e,i,s,r){var o=this._getResultDataHandler,a=this._errorHandler,h=new n(c._dfdCanceller);return h._pendingDfd=l({url:this._url.path+"/jobs/"+e+"/results/"+i,content:t.mixin({},this._url.query,{f:"json",returnType:"data"}),callbackParamName:"callback",load:function(e,t){o(e,t,s,r,h)},error:function(e){a(e,r,h)}}),h},checkJobStatus:function(e,i,s){var r=this._jobUpdateHandler,o=this._errorHandler,a=new n(c._dfdCanceller);return a._pendingDfd=l({url:this._url.path+"/jobs/"+e,content:t.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:function(e,t){r(e,t,!0,null,i,a)},error:function(e){o(e,s,a)}}),a},cancelJob:function(e,i,s){var r=this._errorHandler,o=new n(c._dfdCanceller);return o._pendingDfd=l({url:this._url.path+"/jobs/"+e+"/cancel",content:t.mixin({},this._url.query,{f:"json"}),callbackParamName:"callback",load:t.hitch(this,function(e){this._successHandler([e],"onJobCancel",i,o)}),error:function(e){r(e,s,o)}}),o},execute:function(e,i,n,r){var o=this._getOutSR(),a=r.assembly;e=this._gpEncode(t.mixin({},this._url.query,{f:"json","env:outSR":o?o.wkid||s.toJson(o.toJson()):null,"env:processSR":this.processSpatialReference?this.processSpatialReference.wkid||s.toJson(this.processSpatialReference.toJson()):null},e),null,a&&a[0]);var c=this._executeHandler,h=this._errorHandler;return l({url:this._url.path+"/execute",content:e,callbackParamName:"callback",load:function(e,t){c(e,t,i,n,r.dfd)},error:function(e){h(e,n,r.dfd)}})},_executeHandler:function(e,t,i,n,s){try{var r,o,a=e.results,l=e.messages;for(r=0,o=a.length;o>r;r++)a[r]=this._decode(a[r]);for(r=0,o=l.length;o>r;r++)l[r]=new p(l[r]);this._successHandler([a,l],"onExecuteComplete",i,s)}catch(c){this._errorHandler(c,n,s)}},_getResultImageHandler:function(e,t,i,n,s){try{var r=this._decode(e);this._successHandler([r],"onGetResultImageComplete",i,s)}catch(o){this._errorHandler(o,n,s)}},getResultImage:function(e,i,s,r,o){var a=this._getResultImageHandler,h=this._errorHandler;s=this._gpEncode(t.mixin({},this._url.query,{f:"json"},s.toJson()));var d=new n(c._dfdCanceller);return d._pendingDfd=l({url:this._url.path+"/jobs/"+e+"/results/"+i,content:s,callbackParamName:"callback",load:function(e,t){a(e,t,r,o,d)},error:function(e){h(e,o,d)}}),d},cancelJobStatusUpdates:function(e){clearTimeout(this._updateTimers[e]),this._updateTimers[e]=null},getResultImageLayer:function(e,t,i,n){return e=this._url.path+"/jobs/"+e+"/results/"+t,this._url.query&&(e+="?"+o.objectToQuery(this._url.query)),i=new b(e,{imageParameters:i},!0),this.onGetResultImageLayerComplete(i),n&&n(i),i},onStatusUpdate:function(){},onJobComplete:function(){},onExecuteComplete:function(){},onGetResultDataComplete:function(){},onGetResultImageComplete:function(){},onGetResultImageLayerComplete:function(){},onJobCancel:function(){}}),h._createWrappers(e),r("extend-esri")&&t.setObject("tasks.Geoprocessor",e,a),e})},"esri/geometry/jsonUtils":function(){define("dojo/_base/lang dojo/has esri/kernel esri/geometry/Point esri/geometry/Polyline esri/geometry/Polygon esri/geometry/Multipoint esri/geometry/Extent".split(" "),function(e,t,i,n,s,r,o,a){var l={fromJson:function(e){return void 0!==e.x&&void 0!==e.y?new n(e):void 0!==e.paths?new s(e):void 0!==e.rings?new r(e):void 0!==e.points?new o(e):void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax?new a(e):void 0},getJsonType:function(e){return e instanceof n?"esriGeometryPoint":e instanceof s?"esriGeometryPolyline":e instanceof r?"esriGeometryPolygon":e instanceof a?"esriGeometryEnvelope":e instanceof o?"esriGeometryMultipoint":null},getGeometryType:function(e){return"esriGeometryPoint"===e?n:"esriGeometryPolyline"===e?s:"esriGeometryPolygon"===e?r:"esriGeometryEnvelope"===e?a:"esriGeometryMultipoint"===e?o:null}};return t("extend-esri")&&e.mixin(e.getObject("geometry",!0,i),l),l})},"esri/geometry/screenUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/sniff esri/kernel esri/geometry/Point esri/geometry/ScreenPoint esri/geometry/Polyline esri/geometry/Polygon esri/geometry/Multipoint esri/geometry/Extent".split(" "),function(e,t,i,n,s,r,o,a,l,c){var h=function(){return 9>i("ie")?function(e,t,i,n,s,r,o,a,l){var c,h,d,u,f,p,m,_=[],g=Math.round,y=o.length;for(c=0;y>c;c++)if(h=o[c],f=a?a(h[0][0],h[0][1],l):h[0],1<(u=h.length))for(p=g((f[0]-e)*i+s),m=g((t-f[1])*n+r),f=a?a(h[1][0],h[1][1],l):h[1],d=g((f[0]-e)*i+s),f=g((t-f[1])*n+r),_.push("M",p+","+m,"L",d+","+f),d=2;u>d;d++)f=a?a(h[d][0],h[d][1],l):h[d],p=g((f[0]-e)*i+s),m=g((t-f[1])*n+r),_.push(p+","+m);else p=g((f[0]-e)*i+s),m=g((t-f[1])*n+r),_.push("M",p+","+m);return _}:function(e,t,i,n,s,r,o,a,l){var c,h,d,u,f,p,m=[],_=Math.round;for(c=0,d=o?o.length:0;d>c;c++)for(f=o[c],m.push("M"),h=0,u=f?f.length:0;u>h;h++)p=a?a(f[h][0],f[h][1],l):f[h],m.push(_((p[0]-e)*i+s)+","+_((t-p[1])*n+r));return m}}(),d={toScreenPoint:function(e,t,i,n,o){var a=e.spatialReference,l=n.spatialReference,c=n.x;return n=n.y,a&&l&&!a.equals(l)&&a._canProject(l)&&(a=a.isWebMercator()?s.lngLatToXY(c,n):s.xyToLngLat(c,n,!0),c=a[0],n=a[1]),c=(c-e.xmin)*(t/e.getWidth()),n=(e.ymax-n)*(i/e.getHeight()),o||(c=Math.round(c),n=Math.round(n)),new r(c,n)},toScreenGeometry:function(t,i,n,r){var h=t.xmin,d=t.ymax,u=i/t.getWidth(),f=n/t.getHeight(),p=e.forEach,m=Math.round;if(r instanceof s)return new s(m((r.x-h)*u),m((d-r.y)*f));if(r instanceof l){t=new l;var _=t.points;return p(r.points,function(e,t){_[t]=[m((e[0]-h)*u),m((d-e[1])*f)]}),t}if(r instanceof c)return new c(m((r.xmin-h)*u),m((d-r.ymin)*f),m((r.xmax-h)*u),m((d-r.ymax)*u));if(r instanceof o){t=new o;var g,y=t.paths;return p(r.paths,function(e,t){g=y[t]=[],p(e,function(e,t){g[t]=[m((e[0]-h)*u),m((d-e[1])*f)]})}),t}if(r instanceof a){t=new a;var v,b=t.rings;return p(r.rings,function(e,t){v=b[t]=[],p(e,function(e,t){v[t]=[m((e[0]-h)*u),m((d-e[1])*f)]})}),t}},_toScreenPath:function(e,t,i,n,r,a){var l,c,d=n instanceof o,u=e.spatialReference,f=n.spatialReference;return u&&f&&!u.equals(f)&&u._canProject(f)&&(u.isWebMercator()?l=s.lngLatToXY:(l=s.xyToLngLat,c=!0)),h(e.xmin,e.ymax,t/e.getWidth(),i/e.getHeight(),r,a,d?n.paths:n.rings,l,c)},toMapPoint:function(e,t,i,n){return new s(e.xmin+n.x/(t/e.getWidth()),e.ymax-n.y/(i/e.getHeight()),e.spatialReference)},toMapGeometry:function(t,i,n,r){var h=t.xmin,d=t.ymax,u=t.spatialReference,f=i/t.getWidth(),p=n/t.getHeight(),m=e.forEach;if(r instanceof s)return new s(h+r.x/f,d-r.y/p,u);if(r instanceof l){t=new l(u);var _=t.points;return m(r.points,function(e,t){_[t]=[h+e[0]/f,d-e[1]/p]}),t}if(r instanceof c)return new c(h+r.xmin/f,d-r.ymin/p,h+r.xmax/f,d-r.ymax/p,u);if(r instanceof o){t=new o(u);var g,y=t.paths;return m(r.paths,function(e,t){g=y[t]=[],m(e,function(e,t){g[t]=[h+e[0]/f,d-e[1]/p]})}),t}if(r instanceof a){t=new a(u);var v,b=t.rings;return m(r.rings,function(e,t){v=b[t]=[],m(e,function(e,t){v[t]=[h+e[0]/f,d-e[1]/p]})}),t}}};return i("extend-esri")&&t.mixin(t.getObject("geometry",!0,n),d),d})},"esri/tasks/identify":function(){define(["esri/tasks/IdentifyTask","esri/tasks/IdentifyParameters","esri/tasks/IdentifyResult"],function(){return{}})},"dijit/main":function(){define(["dojo/_base/kernel"],function(e){return e.dijit})},"esri/tasks/ImageServiceIdentifyResult":function(){define("dojo/_base/declare dojo/_base/lang dojo/has esri/kernel esri/geometry/jsonUtils esri/tasks/FeatureSet".split(" "),function(e,t,i,n,s,r){return e=e(null,{declaredClass:"esri.tasks.ImageServiceIdentifyResult",constructor:function(e){e.catalogItems&&(this.catalogItems=new r(e.catalogItems)),e.location&&(this.location=s.fromJson(e.location)),this.catalogItemVisibilities=e.catalogItemVisibilities,this.name=e.name,this.objectId=e.objectId,this.value=e.value,this.properties=e.properties}}),i("extend-esri")&&t.setObject("tasks.ImageServiceIdentifyResult",e,n),e})},"esri/layers/TimeInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has esri/kernel esri/TimeExtent esri/layers/TimeReference esri/layers/LayerTimeOptions".split(" "),function(e,t,i,n,s,r,o){return e=e(null,{declaredClass:"esri.layers.TimeInfo",constructor:function(e){null!==e&&(t.mixin(this,e),e.exportOptions&&(this.exportOptions=new o(e.exportOptions)),this.timeExtent=new s(e.timeExtent),this.timeReference=new r(e.timeReference))}}),t.mixin(e,{UNIT_CENTURIES:"esriTimeUnitsCenturies",UNIT_DAYS:"esriTimeUnitsDays",UNIT_DECADES:"esriTimeUnitsDecades",UNIT_HOURS:"esriTimeUnitsHours",UNIT_MILLISECONDS:"esriTimeUnitsMilliseconds",UNIT_MINUTES:"esriTimeUnitsMinutes",UNIT_MONTHS:"esriTimeUnitsMonths",UNIT_SECONDS:"esriTimeUnitsSeconds",UNIT_UNKNOWN:"esriTimeUnitsUnknown",UNIT_WEEKS:"esriTimeUnitsWeeks",UNIT_YEARS:"esriTimeUnitsYears"}),i("extend-esri")&&t.setObject("layers.TimeInfo",e,n),e})},"esri/layers/LOD":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(e,t,i,n,s){return e=e(null,{declaredClass:"esri.layers.LOD",constructor:function(e){t.mixin(this,e)},toJson:function(){return s.fixJson({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})}}),i("extend-esri")&&t.setObject("layers.LOD",e,n),e})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(e,t,i,n,s,r){return e=n("dijit._OnDijitClickMixin",null,{connect:function(e,t,i){return this.inherited(arguments,[e,"ondijitclick"==t?r:t,i])}}),e.a11yclick=r,e})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),function(e,t,i,n,s,r){var o={};e.setObject("dojo.dnd.autoscroll",o),o.getViewport=r.getBox,o.V_TRIGGER_AUTOSCROLL=32,o.H_TRIGGER_AUTOSCROLL=32,o.V_AUTOSCROLL_VALUE=16,o.H_AUTOSCROLL_VALUE=16;var a,l=i.doc,c=1/0,h=1/0;return o.autoScrollStart=function(e){l=e,a=r.getBox(l),e=i.body(l).parentNode,c=Math.max(e.scrollHeight-a.h,0),h=Math.max(e.scrollWidth-a.w,0)},o.autoScroll=function(e){var t=a||r.getBox(l),n=i.body(l).parentNode,s=0,d=0;e.clientX<o.H_TRIGGER_AUTOSCROLL?s=-o.H_AUTOSCROLL_VALUE:e.clientX>t.w-o.H_TRIGGER_AUTOSCROLL&&(s=Math.min(o.H_AUTOSCROLL_VALUE,h-n.scrollLeft)),e.clientY<o.V_TRIGGER_AUTOSCROLL?d=-o.V_AUTOSCROLL_VALUE:e.clientY>t.h-o.V_TRIGGER_AUTOSCROLL&&(d=Math.min(o.V_AUTOSCROLL_VALUE,c-n.scrollTop)),window.scrollBy(s,d)},o._validNodes={div:1,p:1,td:1},o._validOverflow={auto:1,scroll:1},o.autoScrollNodes=function(e){for(var r,a,l,c,h,d,u=0,f=0,p=e.target;p;){if(1==p.nodeType&&p.tagName.toLowerCase()in o._validNodes&&(l=s.getComputedStyle(p),c=l.overflow.toLowerCase()in o._validOverflow,h=l.overflowX.toLowerCase()in o._validOverflow,d=l.overflowY.toLowerCase()in o._validOverflow,(c||h||d)&&(r=n.getContentBox(p,l),a=n.position(p,!0)),(c||h)&&(l=Math.min(o.H_TRIGGER_AUTOSCROLL,r.w/2),h=e.pageX-a.x,(t("webkit")||t("opera"))&&(h+=i.body().scrollLeft),u=0,h>0&&h<r.w&&(l>h?u=-l:h>r.w-l&&(u=l),p.scrollLeft+=u)),(c||d)&&(c=Math.min(o.V_TRIGGER_AUTOSCROLL,r.h/2),d=e.pageY-a.y,(t("webkit")||t("opera"))&&(d+=i.body().scrollTop),f=0,d>0&&d<r.h&&(c>d?f=-c:d>r.h-c&&(f=c),p.scrollTop+=f)),u||f))return;try{p=p.parentNode}catch(m){p=null}}o.autoScroll(e)},o})},"esri/tasks/TrimExtendParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has esri/kernel".split(" "),function(e,t,i,n,s,r){return e=e(null,{declaredClass:"esri.tasks.TrimExtendParameters",polylines:null,trimExtendTo:null,extendHow:null,toJson:function(){var e=i.map(this.polylines,function(e){return e.toJson()}),t={};return t.polylines=n.toJson(e),t.trimExtendTo=n.toJson(this.trimExtendTo.toJson()),t.sr=n.toJson(this.polylines[0].spatialReference.toJson()),t.extendHow=this.extendHow||0,t}}),t.mixin(e,{DEFAULT_CURVE_EXTENSION:0,RELOCATE_ENDS:1,KEEP_END_ATTRIBUTES:2,NO_END_ATTRIBUTES:4,NO_EXTEND_AT_FROM:8,NO_EXTEND_AT_TO:16}),s("extend-esri")&&t.setObject("tasks.TrimExtendParameters",e,r),e})},"esri/symbols/jsonUtils":function(){define("dojo/_base/lang dojo/has esri/kernel esri/symbols/SimpleMarkerSymbol esri/symbols/PictureMarkerSymbol esri/symbols/SimpleLineSymbol esri/symbols/CartographicLineSymbol esri/symbols/SimpleFillSymbol esri/symbols/PictureFillSymbol esri/symbols/TextSymbol".split(" "),function(e,t,i,n,s,r,o,a,l,c){var h={fromJson:function(e){var t=null;switch(e.type.substring(0,6)){case"esriSM":t=new n(e);break;case"esriPM":t=new s(e);break;case"esriTS":t=new c(e);break;case"esriSL":t=void 0!==e.cap?new o(e):new r(e);break;case"esriSF":t=new a(e);break;case"esriPF":t=new l(e)}return t},getShapeDescriptors:function(e){return e&&e.getShapeDescriptors?e.getShapeDescriptors():{defaultShape:null,fill:null,stroke:null}}};return t("extend-esri")&&e.mixin(e.getObject("symbol",!0,i),h),h})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(e,t){var i=t.prototype.onMove;return e("dojo.dnd.TimedMoveable",t,{timeout:40,constructor:function(e,t){t||(t={}),t.timeout&&"number"==typeof t.timeout&&0<=t.timeout&&(this.timeout=t.timeout)},onMoveStop:function(e){e._timer&&(clearTimeout(e._timer),i.call(this,e,e._leftTop)),t.prototype.onMoveStop.apply(this,arguments)},onMove:function(e,t){if(e._leftTop=t,!e._timer){var n=this;e._timer=setTimeout(function(){e._timer=null,i.call(n,e,e._leftTop)},this.timeout)}}})})},"esri/geometry/geodesicUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/has esri/kernel esri/SpatialReference esri/geometry/Point esri/geometry/Polyline esri/geometry/Polygon".split(" "),function(e,t,i,n,s,r,o,a){function l(e){var t=Math.PI/180,i=Math.sin(e.y*t),i=.9933056200098026*(i/(1-.006694379990197414*i*i)-6.111035746609262*Math.log((1-.0818191908429643*i)/(1+.0818191908429643*i)));return new r(6378137*e.x*t,3189068.5*i)}function c(e,t,i,n){var o=1/298.257223563,a=Math.sin(i);i=Math.cos(i),e=(1-o)*Math.tan(e);var l=1/Math.sqrt(1+e*e),c=e*l,h=Math.atan2(e,i);e=l*a;for(var d,u,f,p=1-e*e,m=272331606107.54688*p/40408299984661.45,_=1+m/16384*(4096+m*(-768+m*(320-175*m))),g=m/1024*(256+m*(-128+m*(74-47*m))),m=n/(6356752.31424518*_),y=2*Math.PI;1e-12<Math.abs(m-y);){f=Math.cos(2*h+m),d=Math.sin(m),u=Math.cos(m);var v=g*d*(f+g/4*(u*(-1+2*f*f)-g/6*f*(-3+4*d*d)*(-3+4*f*f))),y=m,m=n/(6356752.31424518*_)+v}return n=c*d-l*u*i,n=Math.atan2(c*u+l*d*i,(1-o)*Math.sqrt(e*e+n*n)),a=Math.atan2(d*a,l*u-c*d*i),i=o/16*p*(4+o*(4-3*p)),new r((t+(a-(1-i)*o*e*(m+i*d*(f+i*u*(-1+2*f*f)))))/(Math.PI/180),n/(Math.PI/180),new s({wkid:4326}))}function h(e,t,i,n){var s,r,o,a,l,c,h=1/298.257223563,d=n-t,u=Math.atan((1-h)*Math.tan(e)),f=Math.atan((1-h)*Math.tan(i)),p=Math.sin(u),u=Math.cos(u),m=Math.sin(f),f=Math.cos(f),_=d,g=1e3;do{if(a=Math.sin(_),l=Math.cos(_),o=Math.sqrt(f*a*f*a+(u*m-p*f*l)*(u*m-p*f*l)),0===o)return 0;l=p*m+u*f*l,c=Math.atan2(o,l);var y=u*f*a/o;r=1-y*y,a=l-2*p*m/r,isNaN(a)&&(a=0);var v=h/16*r*(4+h*(4-3*r));s=_,_=d+(1-v)*h*y*(c+v*o*(a+v*l*(-1+2*a*a)))}while(1e-12<Math.abs(_-s)&&0<--g);return 0===g?(p=6371009*Math.acos(Math.sin(e)*Math.sin(i)+Math.cos(e)*Math.cos(i)*Math.cos(n-t)),m=n-t,u=Math.sin(m)*Math.cos(i),e=Math.cos(e)*Math.sin(i)-Math.sin(e)*Math.cos(i)*Math.cos(m),{azimuth:Math.atan2(u,e),geodesicDistance:p}):(e=272331606107.54688*r/40408299984661.45,i=e/1024*(256+e*(-128+e*(74-47*e))),e=6356752.31424518*(1+e/16384*(4096+e*(-768+e*(320-175*e))))*(c-i*o*(a+i/4*(l*(-1+2*a*a)-i/6*a*(-3+4*o*o)*(-3+4*a*a)))),i=Math.atan2(f*Math.sin(_),u*m-p*f*Math.cos(_)),p=Math.atan2(u*Math.sin(_),u*m*Math.cos(_)-p*f),{azimuth:i,geodesicDistance:e,reverseAzimuth:p})}function d(t,i){var n=Math.PI/180;if(637.100877151506>i&&(i=637.100877151506),!(t instanceof o||t instanceof a))throw console.error("_geodesicDensify: the input geometry is neither polyline nor polygon"),Error("_geodesicDensify: the input geometry is neither polyline nor polygon");var s,r=t instanceof o,l=[];return e.forEach(r?t.paths:t.rings,function(e){l.push(s=[]),s.push([e[0][0],e[0][1]]);var t,r,o,a,d,u;for(t=e[0][0]*n,r=e[0][1]*n,d=0;d<e.length-1;d++){o=e[d+1][0]*n,a=e[d+1][1]*n,a=h(r,t,a,o),o=a.azimuth,a=a.geodesicDistance;var f=a/i;if(f>1){for(u=1;f-1>=u;u++){var p=c(r,t,o,u*i);s.push([p.x,p.y])}u=c(r,t,o,(a+Math.floor(f-1)*i)/2),s.push([u.x,u.y])}r=c(r,t,o,a),s.push([r.x,r.y]),t=r.x*n,r=r.y*n}}),r?new o({paths:l,spatialReference:t.spatialReference}):new a({rings:l,spatialReference:t.spatialReference})}var u={esriMiles:1,esriKilometers:1.609344,esriFeet:5280,esriMeters:1609.34,esriYards:1760,esriNauticalMiles:.869,esriCentimeters:160934,esriDecimeters:16093.4,esriInches:63360,esriMillimeters:1609340,esriAcres:1,esriAres:40.4685642,esriSquareKilometers:.00404685642,esriSquareMiles:.0015625,esriSquareFeet:43560,esriSquareMeters:4046.85642,esriHectares:.404685642,esriSquareYards:4840,esriSquareInches:6272640,esriSquareMillimeters:4046856420,esriSquareCentimeters:40468564.2,esriSquareDecimeters:404685.642},f={geodesicDensify:d,geodesicLengths:function(t,i){var n=Math.PI/180,s=[];return e.forEach(t,function(t){var r=0;e.forEach(t.paths,function(e){var t,i,s,o,a,l=0;for(t=1;t<e.length;t++)i=e[t-1][0]*n,s=e[t][0]*n,o=e[t-1][1]*n,a=e[t][1]*n,o===a&&i===s||(i=h(o,i,a,s),l+=i.geodesicDistance/1609.344);r+=l}),r*=u[i],s.push(r)}),s},geodesicAreas:function(t,i){var n=[];e.forEach(t,function(e){var t=d(e,1e4);n.push(t)});var s,o,a=[];return e.forEach(n,function(t){var n=0;e.forEach(t.rings,function(e){s=l(new r(e[0][0],e[0][1])),o=l(new r(e[e.length-1][0],e[e.length-1][1]));var t,i=o.x*s.y-s.x*o.y;for(t=0;t<e.length-1;t++)s=l(new r(e[t+1][0],e[t+1][1])),o=l(new r(e[t][0],e[t][1])),i+=o.x*s.y-s.x*o.y;n+=i/4046.87}),n*=u[i],a.push(n/-2)}),a},_unitsDictionary:u,_toEqualAreaPoint:l,_directGeodeticSolver:c,_inverseGeodeticSolver:h};return i("extend-esri")&&t.mixin(t.getObject("geometry",!0,n),f),f})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(e,t){return e.cookie=function(e,i,n){var s,r=document.cookie;if(1==arguments.length)s=(s=r.match(RegExp("(?:^|; )"+t.escapeString(e)+"=([^;]*)")))?decodeURIComponent(s[1]):void 0;else{if(n=n||{},r=n.expires,"number"==typeof r){var o=new Date;o.setTime(o.getTime()+864e5*r),r=n.expires=o}r&&r.toUTCString&&(n.expires=r.toUTCString()),i=encodeURIComponent(i);var a,r=e+"="+i;for(a in n)r+="; "+a,o=n[a],!0!==o&&(r+="="+o);document.cookie=r}return s},e.cookie.isSupported=function(){return"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1})),navigator.cookieEnabled},e.cookie})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(e){return e.cache})},"dijit/_base/popup":function(){define(["dojo/dom-class","dojo/_base/window","../popup","../BackgroundIframe"],function(e,t,i){var n=i._createWrapper;i._createWrapper=function(i){return i.declaredClass||(i={_popupWrapper:i.parentNode&&e.contains(i.parentNode,"dijitPopup")?i.parentNode:null,domNode:i,destroy:function(){},ownerDocument:i.ownerDocument,ownerDocumentBody:t.body(i.ownerDocument)}),n.call(this,i)};var s=i.open;return i.open=function(e){if(e.orient&&"string"!=typeof e.orient&&!("length"in e.orient)){var t,i=[];for(t in e.orient)i.push({aroundCorner:t,corner:e.orient[t]});e.orient=i}return s.call(this,e)},i})},"esri/layers/ArcGISMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has esri/kernel esri/lang esri/request esri/SpatialReference esri/geometry/Extent esri/layers/LayerInfo".split(" "),function(e,t,i,n,s,r,o,a,l,c){return e=e(null,{declaredClass:"esri.layers.ArcGISMapServiceLayer",constructor:function(){this.layerInfos=[];var e=this._params={},t=this._url.query?this._url.query.token:null;t&&(e.token=t)},_load:function(){o({url:this._url.path,content:t.mixin({f:"json"},this._params),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler})},spatialReference:null,initialExtent:null,fullExtent:null,description:null,units:null,_initLayer:function(e){try{this._findCredential(),(this.credential&&this.credential.ssl||e&&e._ssl)&&this._useSSL(),this.description=e.description,this.copyright=e.copyrightText,this.spatialReference=e.spatialReference&&new a(e.spatialReference),this.initialExtent=e.initialExtent&&new l(e.initialExtent),this.fullExtent=e.fullExtent&&new l(e.fullExtent),this.units=e.units,this.maxRecordCount=e.maxRecordCount,this.maxImageHeight=e.maxImageHeight,this.maxImageWidth=e.maxImageWidth,this.supportsDynamicLayers=e.supportsDynamicLayers;var t=this.layerInfos=[],n=e.layers,s=this._defaultVisibleLayers=[];i.forEach(n,function(e,i){t[i]=new c(e),e.defaultVisibility&&s.push(e.id)}),this.visibleLayers||(this.visibleLayers=s),this.version=e.currentVersion,this.version||(this.version="capabilities"in e||"tables"in e?10:"supportedImageFormatTypes"in e?9.31:9.3),this.capabilities=e.capabilities,r.isDefined(e.minScale)&&!this._hasMin&&this.setMinScale(e.minScale),r.isDefined(e.maxScale)&&!this._hasMax&&this.setMaxScale(e.maxScale)}catch(o){this._errorHandler(o)}}}),n("extend-esri")&&t.setObject("layers.ArcGISMapServiceLayer",e,s),e})},"esri/layers/Domain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(e,t,i,n,s){return e=e(null,{declaredClass:"esri.layers.Domain",constructor:function(e){e&&t.isObject(e)&&(this.name=e.name,this.type=e.type)},toJson:function(){return s.fixJson({name:this.name,type:this.type})}}),i("extend-esri")&&t.setObject("layers.Domain",e,n),e})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(e,t,i){var n=e.some;return function(e){var s,r;e instanceof Array?r=e:e&&"object"==typeof e&&(s=e);var o,a=[];if(s){r=[];for(var l in s)Object.hasOwnProperty.call(s,l)&&(a.push(l),r.push(s[l]));o={}}else r&&(o=[]);if(!r||!r.length)return(new t).resolve(o);var c=new t;c.promise.always(function(){o=a=null});var h=r.length;return n(r,function(e,t){return s||a.push(t),i(e,function(e){c.isFulfilled()||(o[a[t]]=e,0===--h&&c.resolve(o))},c.reject),c.isFulfilled()}),c.promise}})},"esri/geometry/mathUtils":function(){define(["dojo/_base/lang","dojo/has","esri/kernel","esri/geometry/Point"],function(e,t,i,n){function s(e,t,i){return e instanceof n?new n(e.x+i*(t.x-e.x),e.y+i*(t.y-e.y)):[e[0]+i*(t[0]-e[0]),e[1]+i*(t[1]-e[1])]}function r(e,t){return 1e-8>Math.abs(e-t)}function o(e,t,i,n){var s,o=r(e[0],t[0])?1e10:(e[1]-t[1])/(e[0]-t[0]);s=r(i[0],n[0])?1e10:(i[1]-n[1])/(i[0]-n[0]);var a=e[1]-o*e[0],l=i[1]-s*i[0];if(r(o,s)){if(r(a,l)){if(r(e[0],t[0])){if(!(Math.min(e[1],t[1])<Math.max(i[1],n[1])||Math.max(e[1],t[1])>Math.min(i[1],n[1])))return null;s=(e[1]+t[1]+i[1]+n[1]-Math.min(e[1],t[1],i[1],n[1])-Math.max(e[1],t[1],i[1],n[1]))/2,e=(s-a)/o}else{if(!(Math.min(e[0],t[0])<Math.max(i[0],n[0])||Math.max(e[0],t[0])>Math.min(i[0],n[0])))return null;e=(e[0]+t[0]+i[0]+n[0]-Math.min(e[0],t[0],i[0],n[0])-Math.max(e[0],t[0],i[0],n[0]))/2,s=o*e+a}return[e,s]}return null}return r(o,1e10)?(e=e[0],s=s*e+l):(e=r(s,1e10)?i[0]:-(a-l)/(o-s),s=o*e+a),[e,s]}var a={getLength:function(e,t){var i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)},_getLength:function(e,t){var i=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(i*i+n*n)},getPointOnLine:s,getMidpoint:function(e,t){return s(e,t,.5)},_equals:r,_getLineIntersection:o,getLineIntersection:function(e,t,i,s,r){return(e=o([e.x,e.y],[t.x,t.y],[i.x,i.y],[s.x,s.y]))&&(e=new n(e[0],e[1],r)),e},_getLineIntersection2:function(e,t){var i=e[0],n=e[1],s=t[0],r=t[1],o=i[0],i=i[1],a=n[0],n=n[1],l=s[0],c=s[1],s=r[0]-l,l=o-l,h=a-o,r=r[1]-c,c=i-c,d=n-i,u=r*h-s*d;return 0===u?!1:(s=(s*c-r*l)/u,l=(h*c-d*l)/u,s>=0&&1>=s&&l>=0&&1>=l?[o+s*(a-o),i+s*(n-i)]:!1)},_pointLineDistance:function(e,t){var i=t[0],n=t[1],s=i[0],r=i[1],i=e[0],o=e[1],a=n[0]-s,l=n[1]-r,c=i-s,h=o-r,n=Math.sqrt,d=Math.pow,u=n(d(a,2)+d(l,2)),c=(c*a+h*l)/(u*u),r=r+c*l;return n(d(i-(s+c*a),2)+d(o-r,2))}};return t("extend-esri")&&e.mixin(e.getObject("geometry",!0,i),a),a})},"esri/tasks/BufferParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has esri/kernel esri/geometry/Polygon esri/geometry/jsonUtils".split(" "),function(e,t,i,n,s,r,o,a){return e=e(null,{declaredClass:"esri.tasks.BufferParameters",geometries:null,outSpatialReference:null,bufferSpatialReference:null,distances:null,unit:null,unionResults:!1,geodesic:!1,toJson:function(){var e={unit:this.unit,unionResults:this.unionResults,geodesic:this.geodesic},t=this.distances,s=this.outSpatialReference,r=this.bufferSpatialReference,o=i.map(this.geometries,function(e){return e="extent"===e.type?this._extentToPolygon(e):e,e.toJson()},this),l=this.geometries;if(l&&0<l.length){var c="extent"===l[0].type?"esriGeometryPolygon":a.getJsonType(l[0]);e.geometries=n.toJson({geometryType:c,geometries:o}),e.inSR=l[0].spatialReference.wkid?l[0].spatialReference.wkid:n.toJson(l[0].spatialReference.toJson())}return t&&(e.distances=t.join(",")),s&&(e.outSR=s.wkid?s.wkid:n.toJson(s.toJson())),r&&(e.bufferSR=r.wkid?r.wkid:n.toJson(r.toJson())),e},_extentToPolygon:function(e){var t=e.xmin,i=e.ymin,n=e.xmax,s=e.ymax;return new o({rings:[[[t,i],[t,s],[n,s],[n,i],[t,i]]],spatialReference:e.spatialReference.toJson()})}}),s("extend-esri")&&t.setObject("tasks.BufferParameters",e,r),e})},"esri/tasks/FindParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has esri/kernel esri/layerUtils".split(" "),function(e,t,i,n,s,r,o){return e=e(null,{declaredClass:"esri.tasks.FindParameters",searchText:null,contains:!0,searchFields:null,outSpatialReference:null,layerIds:null,returnGeometry:!1,layerDefinitions:null,dynamicLayerInfos:null,toJson:function(){var e={searchText:this.searchText,contains:this.contains,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset},t=this.layerIds,s=this.searchFields,r=this.outSpatialReference;if(t&&(e.layers=t.join(",")),s&&(e.searchFields=s.join(",")),r&&(e.sr=r.wkid||n.toJson(r.toJson())),e.layerDefs=o._serializeLayerDefinitions(this.layerDefinitions),this.dynamicLayerInfos&&0<this.dynamicLayerInfos.length){var a=[];i.forEach(this.dynamicLayerInfos,function(e){if(!e.subLayerIds){var t=e.id;if(this.layerIds&&-1!==i.indexOf(this.layerIds,t)){var n={id:t};n.source=e.source&&e.source.toJson();var s;this.layerDefinitions&&this.layerDefinitions[t]&&(s=this.layerDefinitions[t]),s&&(n.definitionExpression=s),a.push(n)}}},this),t=n.toJson(a),"[]"===t&&(t="[{}]"),e.dynamicLayers=t}return e}}),s("extend-esri")&&t.setObject("tasks.FindParameters",e,r),e})},"esri/tasks/AddressCandidate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/geometry/Point"],function(e,t,i,n,s){return e=e(null,{declaredClass:"esri.tasks.AddressCandidate",constructor:function(e){t.mixin(this,e),this.location=new s(this.location)}}),i("extend-esri")&&t.setObject("tasks.AddressCandidate",e,n),e})},"esri/MouseEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/_base/connect dojo/_base/event esri/kernel esri/Evented esri/geometry/Point esri/geometry/ScreenPoint".split(" "),function(e,t,i,n,s,r,o,a,l,c){var h=s.connect,d=s.disconnect;return e=e([a],{declaredClass:"esri.MouseEvents",doubleClickDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==n("mac")?1:3,wheelDivisor:2>n("chrome")?360:120,preventPageScroll:!0,map:null,constructor:function(e,s){this.node=e,i.mixin(this,s);var o=function(e){return r.stop(e),!1};n("mozilla")&&t.style(e,"MozUserSelect","none"),this._handles=[h(e,"onselectstart",o),h(e,"ondragstart",o),h(e,"onmouseenter",this,this._onMouseEnterHandler),h(e,"onmouseleave",this,this._onMouseLeaveHandler),h(e,"onmousedown",this,this._onMouseDownHandler),h(e,"onclick",this,this._onClickHandler),h(e,"ondblclick",this,this._onDblClickHandler)],this._onMouseMoveHandler_connect=h(e,"onmousemove",this,this._onMouseMoveHandler),this._onMouseUpHandler_connect=h(e,"onmouseup",this,this._onMouseUpHandler),this._fireClickEvent=i.hitch(this,this._fireClickEvent),this._initialDuration=this.doubleClickDuration,this.preventPageScroll=(o=this.map)?o.isScrollWheelZoom||o.isScrollWheelPan:this.preventPageScroll,this.enableMouseWheel(!1)},_fire:function(e,t){this[e]&&this[e](t),this.map&&this.map[e]&&this.map[e](t)},_processEvent:function(e){e=r.fix(e,e.target);var t=this.map,i=t&&t.position;return i&&(e.screenPoint="DOMMouseScroll"===e.type&&3>n("ff")?new c(window.scrollX+e.screenX-i.x,window.scrollY+e.screenY-i.y):new c(e.pageX-i.x,e.pageY-i.y),e.mapPoint=t.extent?t.toMap(e.screenPoint):new l),e.numPoints=0,e},_onMouseEnterHandler:function(e){d(this._onKeyDown_connect),d(this._onKeyUp_connect),this._onKeyDown_connect=h(document,"onkeydown",this,this._onKeyDownHandler),this._onKeyUp_connect=h(document,"onkeyup",this,this._onKeyUpHandler),this._fire("onMouseOver",this._processEvent(e))},_onMouseLeaveHandler:function(e){d(this._onKeyDown_connect),d(this._onKeyUp_connect),this._onKeyDown_connect=this._onKeyUp_connect=null,this._fire("onMouseOut",this._processEvent(e))},_onMouseMoveHandler:function(e){this._dragEnd?this._dragEnd=!1:this._fire("onMouseMove",this._processEvent(e))
},_onMouseDownHandler:function(e){d(this._onMouseMoveHandler_connect),this._onMouseMoveHandler_connect=null,this.node.setCapture&&this.node.setCapture(!1),this._onMouseDragHandler_connect=h(document,"onmousemove",this,this._onMouseDragHandler),this._startX=e.pageX,this._startY=e.pageY,this._fire("onMouseDown",this._processEvent(e))},_onMouseUpHandler:function(e){var t=this.node;t.releaseCapture&&t.releaseCapture(),d(this._onMouseDragHandler_connect),this._onMouseDragHandler_connect=null,d(this._onMouseMoveHandler_connect),this._onMouseMoveHandler_connect=h(t,"onmousemove",this,this._onMouseMoveHandler),this._fire("onMouseUp",this._processEvent(e))},_onMouseDragHandler:function(e){d(this._onMouseDragHandler_connect),this._onMouseDragHandler_connect=h(document,"onmousemove",this,this._onMouseDraggingHandler),d(this._onMouseUpHandler_connect),this._onMouseUpHandler_connect=h(document,"onmouseup",this,this._onDragMouseUpHandler),this._docLeaveConnect=h(document,"onmouseout",this,this._onDocMouseOut),this._fire("onMouseDragStart",this._processEvent(e))},_onMouseDraggingHandler:function(e){r.stop(e),this._fire("onMouseDrag",this._processEvent(e))},_onDragMouseUpHandler:function(e){var t=this.node;t.releaseCapture&&t.releaseCapture(),this._dragEnd=!0,d(this._docLeaveConnect),d(this._onMouseDragHandler_connect),d(this._onMouseUpHandler_connect),this._docLeaveConnect=this._onMouseDragHandler_connect=null,this._onMouseMoveHandler_connect=h(t,"onmousemove",this,this._onMouseMoveHandler),this._onMouseUpHandler_connect=h(t,"onmouseup",this,this._onMouseUpHandler),e=this._processEvent(e),this._fire("onMouseDragEnd",e),this._fire("onMouseUp",e)},_onDocMouseOut:function(e){var t=9>n("ie")?e.toElement:e.relatedTarget,i=t&&t.nodeName.toLowerCase();(!t||n("chrome")&&"html"===i)&&this._onDragMouseUpHandler(e)},_onClickHandler:function(e){e=this._processEvent(e),e.pageX!==this._startX||e.pageY!==this._startY||(clearTimeout(this._clickTimer),this._clickEvent=i.mixin({},e),this._clickTimer=setTimeout(this._fireClickEvent,this.doubleClickDuration))},_fireClickEvent:function(){clearTimeout(this._clickTimer),9>n("ie")&&(this._clickEvent.graphic=o._ieGraphic,delete o._ieGraphic),this._fire("onClick",this._clickEvent)},_onDblClickHandler:function(e){clearTimeout(this._clickTimer),this._fire("onDblClick",this._processEvent(e))},_onMouseWheelHandler:function(e){var t=this.map;(t?t.isScrollWheelZoom||t.isScrollWheelPan:this.preventPageScroll)&&r.stop(e);var t=n("ie")||n("webkit")?e.wheelDelta/this.wheelDivisor:-e.detail/this.mozWheelDivisor,i=Math.abs(t),i=i<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;e.value=0>t?-i:i,this._fire("onMouseWheel",this._processEvent(e))},_onKeyDownHandler:function(e){this._fire("onKeyDown",e)},_onKeyUpHandler:function(e){this._fire("onKeyUp",e)},enableMouseWheel:function(e){d(this._scrollHandle),this._scrollHandle=h(this.node,n("ff")||n("mozilla")?e?"MozMousePixelScroll":"DOMMouseScroll":"onmousewheel",this,this._onMouseWheelHandler)},setImmediateClick:function(e){this.doubleClickDuration=e?0:this._initialDuration},destroy:function(){var e,t=this._handles.concat([this._onMouseMoveHandler_connect,this._onMouseUpHandler_connect,this._onMouseDragHandler_connect,this._scrollHandle,this._onKeyDown_connect,this._onKeyUp_connect,this._docLeaveConnect]);for(e=0;e<t.length;e++)d(t[e]);clearTimeout(this._clickTimer),this.node=this.map=this._handles=this._clickEvent=this._onMouseMoveHandler_connect=this._onMouseUpHandler_connect=this._onMouseDragHandler_connect=this._scrollHandle=this._onKeyDown_connect=this._onKeyUp_connect=this._docLeaveConnect=null}}),n("extend-esri")&&(o.MouseEvents=e),e})},"dojo/_base/url":function(){define(["./kernel"],function(e){var t=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,i=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,n=function(){for(var e=arguments,s=[e[0]],r=1;r<e.length;r++)if(e[r]){var o=new n(e[r]+""),s=new n(s[0]+"");if(""!=o.path||o.scheme||o.authority||o.query){if(!o.scheme&&(o.scheme=s.scheme,!o.authority&&(o.authority=s.authority,"/"!=o.path.charAt(0)))){for(var s=(s.path.substring(0,s.path.lastIndexOf("/")+1)+o.path).split("/"),a=0;a<s.length;a++)"."==s[a]?a==s.length-1?s[a]="":(s.splice(a,1),a--):a>0&&!(1==a&&""==s[0])&&".."==s[a]&&".."!=s[a-1]&&(a==s.length-1?(s.splice(a,1),s[a-1]=""):(s.splice(a-1,2),a-=2));o.path=s.join("/")}}else null!=o.fragment&&(s.fragment=o.fragment),o=s;s=[],o.scheme&&s.push(o.scheme,":"),o.authority&&s.push("//",o.authority),s.push(o.path),o.query&&s.push("?",o.query),o.fragment&&s.push("#",o.fragment)}this.uri=s.join(""),e=this.uri.match(t),this.scheme=e[2]||(e[1]?"":null),this.authority=e[4]||(e[3]?"":null),this.path=e[5],this.query=e[7]||(e[6]?"":null),this.fragment=e[9]||(e[8]?"":null),null!=this.authority&&(e=this.authority.match(i),this.user=e[3]||null,this.password=e[4]||null,this.host=e[6]||e[7],this.port=e[9]||null)};return n.prototype.toString=function(){return this.uri},e._Url=n})},"esri/layers/MosaicRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has esri/kernel esri/lang esri/geometry/Point".split(" "),function(e,t,i,n,s,r,o){var a=e(null,{declaredClass:"esri.layers.MosaicRule",method:null,where:null,sortField:null,sortValue:null,ascending:!1,lockRasterIds:null,viewpoint:null,objectIds:null,operation:null,constructor:function(e){t.isObject(e)&&(t.mixin(this,e),e.mosaicMethod&&(this.method=e.mosaicMethod),this.method&&"esri"!==this.method.toLowerCase().substring(0,4)&&(this.method=this._getMethodEnum(this.method)),e.mosaicOperation&&(this.operation=e.mosaicOperation),this.operation&&"MT_"!==this.operation.toUpperCase().substring(0,3)&&(this.operation=this._getOperatorEnum(this.operation)),e.fids&&(this.objectIds=e.fids),e.viewpoint&&(this.viewpoint=new o(e.viewpoint)))},toJson:function(){var e={mosaicMethod:this.method,where:this.where,sortField:this.sortField,sortValue:this.sortValue,ascending:this.ascending,lockRasterIds:this.lockRasterIds,viewpoint:this.viewpoint?this.viewpoint.toJson():null,fids:this.objectIds,mosaicOperation:this.operation};return r.filter(e,function(e){return null!==e?!0:void 0})},_getMethodEnum:function(e){if(e){var t=a.METHOD_NONE;switch(e.toLowerCase()){case"byattribute":t=a.METHOD_ATTRIBUTE;break;case"center":t=a.METHOD_CENTER;break;case"lockraster":t=a.METHOD_LOCKRASTER;break;case"nadir":t=a.METHOD_NADIR;break;case"northwest":t=a.METHOD_NORTHWEST;break;case"seamline":t=a.METHOD_SEAMLINE;break;case"viewpoint":t=a.METHOD_VIEWPOINT}return t}},_getOperatorEnum:function(e){if(e)switch(e.toLowerCase()){case"first":return a.OPERATION_FIRST;case"last":return a.OPERATION_LAST;case"max":return a.OPERATION_MAX;case"min":return a.OPERATION_MIN;case"blend":return a.OPERATION_BLEND;case"mean":return a.OPERATION_MEAN}}});return t.mixin(a,{METHOD_NONE:"esriMosaicNone",METHOD_CENTER:"esriMosaicCenter",METHOD_NADIR:"esriMosaicNadir",METHOD_VIEWPOINT:"esriMosaicViewpoint",METHOD_ATTRIBUTE:"esriMosaicAttribute",METHOD_LOCKRASTER:"esriMosaicLockRaster",METHOD_NORTHWEST:"esriMosaicNorthwest",METHOD_SEAMLINE:"esriMosaicSeamline",OPERATION_FIRST:"MT_FIRST",OPERATION_LAST:"MT_LAST",OPERATION_MIN:"MT_MIN",OPERATION_MAX:"MT_MAX",OPERATION_MEAN:"MT_MEAN",OPERATION_BLEND:"MT_BLEND"}),n("extend-esri")&&t.setObject("layers.MosaicRule",a,s),a})},"esri/layers/DynamicMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/dom-construct dojo/dom-style dojox/xml/parser dojox/gfx/matrix esri/kernel esri/config esri/sniff esri/request esri/domUtils esri/layers/layer esri/layers/MapImage".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f){var p=l.defaults.map.zoomDuration;return e=e(u,{declaredClass:"esri.layers.DynamicMapServiceLayer",_eventMap:{"map-image-export":["mapImage"]},constructor:function(e,t){this.useMapTime=t&&t.hasOwnProperty("useMapTime")?!!t.useMapTime:!0;var n=i.hitch;this._exportMapImageHandler=n(this,this._exportMapImageHandler),this._imgSrcFunc=n(this,this._imgSrcFunc),this._divAlphaImageFunc=n(this,this._divAlphaImageFunc),this._tileLoadHandler=n(this,this._tileLoadHandler),this._tileErrorHandler=n(this,this._tileErrorHandler),this.registerConnectEvents()},opacity:1,isPNG32:!1,_setMap:function(e,i){this.inherited(arguments),this._map=e;var r=this._div=n.create("div",null,i),o=a._css.names,l={position:"absolute",width:e.width+"px",height:e.height+"px",overflow:"visible",opacity:this.opacity},h=c("ie"),d=t.connect,u=e.__visibleDelta;if(h&&h>7&&delete l.opacity,"css-transforms"===e.navigationMode?(l[o.transform]=a._css.translate(u.x,u.y),s.set(r,l),this._left=u.x,this._top=u.y):(l.left="0px",l.top="0px",s.set(r,l),this._left=this._top=0),s.set(r,l),this._onResizeHandler_connect=d(e,"onResize",this,"_onResizeHandler"),this._opacityChangeHandler_connect=d(this,"onOpacityChange",this,"_opacityChangeHandler"),this._img_loading=null,this._dragOrigin={x:0,y:0},this.evaluateSuspension(),this.suspended&&!e.loaded)var f=t.connect(e,"onLoad",this,function(){t.disconnect(f),f=null,this.evaluateSuspension()});return r},_unsetMap:function(){n.destroy(this._div),this._map=this._div=null;var e=t.disconnect;e(this._onResizeHandler_connect),e(this._opacityChangeHandler_connect),this._onResizeHandler_connect=this._opacityChangeHandler_connect=null,this._fireUpdateEnd(),this._toggleTime(),clearTimeout(this._wakeTimer),this._wakeTimer=null,this._disableDrawConnectors(),this.inherited(arguments)},_onResizeHandler:function(e,t,i){s.set(this._div,{width:t+"px",height:i+"px"}),this._onExtentChangeHandler(e)},onSuspend:function(){this.inherited(arguments),this._fireUpdateEnd(),this._toggleTime(),d.hide(this._div),clearTimeout(this._wakeTimer),this._wakeTimer=null,this._disableDrawConnectors()},onResume:function(){this.inherited(arguments);var e=this._map;this._toggleTime(),"css-transforms"===e.navigationMode&&(e=e.__visibleDelta,this._left=e.x,this._top=e.y,s.set(this._div,a._css.names.transform,a._css.translate(this._left,this._top))),this._enableDrawConnectors(),this._wakeTimer=this._wakeTimer||setTimeout(i.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent)}),0)},_enableDrawConnectors:function(){var e=t.connect,i=this._map;i&&(this._onPanHandler_connect=e(i,"onPan",this,"_onPanHandler"),this._onExtentChangeHandler_connect=e(i,"onExtentChange",this,"_onExtentChangeHandler"),"css-transforms"===i.navigationMode?this._onScaleHandler_connect=e(i,"onScale",this,this._onScaleHandler):this._onZoomHandler_connect=e(i,"onZoom",this,"_onZoomHandler"))},_disableDrawConnectors:function(){var e=t.disconnect;e(this._onPanHandler_connect),e(this._onExtentChangeHandler_connect),e(this._onZoomHandler_connect),e(this._onScaleHandler_connect),this._onPanHandler_connect=this._onExtentChangeHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=null},_toggleTime:function(){var e=this._map;this.timeInfo&&this.useMapTime&&e&&!this.suspended?(this._timeConnect||(this._timeConnect=t.connect(e,"onTimeExtentChange",this,this._onTimeExtentChangeHandler)),this._setTime(e.timeExtent)):(t.disconnect(this._timeConnect),this._timeConnect=null,this._setTime(null))},_setTime:function(e){this._params&&(this._params.time=e?e.toJson().join(","):null)},_onPanHandler:function(e,t){this._panDx=t.x,this._panDy=t.y;var i=this._dragOrigin,n=this._map.__visibleDelta,r=this._img;r&&("css-transforms"===this._map.navigationMode?(this._left=n.x+t.x,this._top=n.y+t.y,s.set(this._div,a._css.names.transform,a._css.translate(this._left,this._top))):s.set(r,{left:i.x+t.x+"px",top:i.y+t.y+"px"}))},_onExtentChangeHandler:function(e,i,r){if(!this.suspended){clearTimeout(this._wakeTimer),this._wakeTimer=null;var l=this._map,h=this._img,d=h&&h.style,u=this._dragOrigin;if(!i||r||!h||i.x===this._panDx&&i.y===this._panDy||("css-transforms"===l.navigationMode?(i=l.__visibleDelta,this._left=i.x,this._top=i.y,s.set(this._div,a._css.names.transform,a._css.translate(this._left,this._top))):s.set(h,{left:u.x+i.x+"px",top:u.y+i.y+"px"})),h?(u.x=parseInt(d.left,10),u.y=parseInt(d.top,10)):u.x=u.y=0,"css-transforms"===l.navigationMode&&r&&h&&(s.set(h,a._css.names.transition,"none"),h._multiply=h._multiply?o.multiply(h._matrix,h._multiply):h._matrix),this._fireUpdateStart(),(r=this._img_loading)&&(t.disconnect(r._onload_connect),t.disconnect(r._onerror_connect),t.disconnect(r._onabort_connect),n.destroy(r),this._img_loading=null,r=this._jsonRequest)){try{r.cancel()}catch(f){}this._jsonRequest=null}if(10<=this.version&&l.wrapAround180&&(e=e._normalize(!0)),this.isPNG32)h=this._img_loading=n.create("div"),h.id=l.id+"_"+this.id+"_"+(new Date).getTime(),s.set(h,{position:"absolute",left:"0px",top:"0px",width:l.width+"px",height:l.height+"px"}),h=h.appendChild(n.create("div")),s.set(h,{opacity:0,width:l.width+"px",height:l.height+"px"}),this.getImageUrl(e,l.width,l.height,this._divAlphaImageFunc);else{r=this._img_loading=n.create("img"),i=a._css.names;var m=c("ie"),_={position:"absolute",width:l.width+"px",height:l.height+"px"};m&&m>7&&(_.opacity=this.opacity),"css-transforms"===l.navigationMode?(_[i.transform]=a._css.translate(-this._left,-this._top),r._tdx=-this._left,r._tdy=-this._top,_[i.transition]=i.transformName+" "+p+"ms ease"):(_.left="0px",_.top="0px"),r.id=l.id+"_"+this.id+"_"+(new Date).getTime(),s.set(r,_),r._onload_connect=t.connect(r,"onload",this,"_onLoadHandler"),r._onerror_connect=t.connect(r,"onerror",this,"_onErrorHandler"),r._onabort_connect=t.connect(r,"onabort",this,"_onErrorHandler"),this._startRect={left:u.x,top:u.y,width:h?parseInt(d.width,10):l.width,height:h?parseInt(d.height,10):l.height,zoom:d&&d.zoom?parseFloat(d.zoom):1},this.getImageUrl(e,l.width,l.height,this._imgSrcFunc)}}},_onTimeExtentChangeHandler:function(e){this.suspended||(this._setTime(e),this.refresh(!0))},getImageUrl:function(){},_imgSrcFunc:function(e){this._img_loading.src=e},_divAlphaImageFunc:function(e){s.set(this._img_loading,"filter","progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+e+"', sizingMethod='scale')"),this._onLoadHandler({currentTarget:this._img_loading})},_onLoadHandler:function(e){e=e.currentTarget;var i=t.disconnect,s=this._map;i(e._onload_connect),i(e._onerror_connect),i(e._onabort_connect),!s||s.__panning||s.__zooming?n.destroy(e):(r.removeChildren(this._div),this._img=e,this._startRect={left:0,top:0,width:s.width,height:s.height,zoom:1},this._div.appendChild(e),this.suspended||d.show(this._div),e._onload_connect=e._onerror_connect=e._onabort_connect=this._img_loading=null,e=this._dragOrigin,e.x=e.y=0,this.onUpdate()),this._fireUpdateEnd()},_onErrorHandler:function(e){e=e.currentTarget;var i=t.disconnect;s.set(e,"visibility","hidden"),i(e._onload_connect),i(e._onerror_connect),i(e._onabort_connect),e._onload_connect=e._onerror_connect=e._onabort_connect=null,e=Error("Unable to load image: "+e.src),this.onError(e),this._fireUpdateEnd(e)},setUseMapTime:function(e,t){this.useMapTime=e,this._toggleTime(),t||this.refresh(!0)},refresh:function(){this._map&&this._onExtentChangeHandler(this._map.extent)},_onScaleHandler:function(e,t){var i={},n=a._css.names,r=this._img;r&&(s.set(r,n.transition,t?"none":n.transformName+" "+p+"ms ease"),r._matrix=e,e=r._multiply?o.multiply(e,r._multiply):e,(r._tdx||r._tdy)&&(e=o.multiply(e,{xx:1,xy:0,yx:0,yy:1,dx:r._tdx,dy:r._tdy})),i[n.transform]=a._css.matrix(e),s.set(r,i))},_onZoomHandler:function(e,t,i){e=this._startRect;var n=e.width*t,r=e.height*t,o=this._img,a=c("ie");o&&(a&&8>a?s.set(o,{left:e.left-(n-e.width)*(i.x-e.left)/e.width+"px",top:e.top-(r-e.height)*(i.y-e.top)/e.height+"px",zoom:t*e.zoom}):s.set(o,{left:e.left-(n-e.width)*(i.x-e.left)/e.width+"px",top:e.top-(r-e.height)*(i.y-e.top)/e.height+"px",width:n+"px",height:r+"px"}))},_exportMapImage:function(e,t,i){var n=this._exportMapImageHandler;t.token=this._getToken(),h({url:e,content:t,callbackParamName:"callback",load:function(e,t){n(e,t,i)},error:l.defaults.io.errorHandler})},_exportMapImageHandler:function(e,t,i){e=new f(e),this.onMapImageExport(e),i&&i(e)},onMapImageExport:function(){},setOpacity:function(e){this.opacity!=e&&this.onOpacityChange(this.opacity=e)},onOpacityChange:function(){},_opacityChangeHandler:function(e){s.set(this._div,"opacity",e)}}),c("extend-esri")&&i.setObject("layers.DynamicMapServiceLayer",e,a),e})},"esri/lang":function(){define("dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale esri/kernel".split(" "),function(e,t,i,n,s,r,o,a,l){function c(e,t,s){return[n.isString(e)?e.split(""):e,t||i.global,n.isString(s)?new Function("item","index","array",s):s]}function h(e){return void 0!==e&&null!==e}function d(i,r,l){var c=l.match(/([^\(]+)(\([^\)]+\))?/i),d=n.trim(c[1]);l=r[i];var c=t.fromJson((c[2]?n.trim(c[2]):"()").replace(/^\(/,"({").replace(/\)$/,"})")),u=c.utcOffset;if(-1===e.indexOf(f,d))d=n.getObject(d),n.isFunction(d)&&(l=d(l,i,r));else if("number"==typeof l||"string"==typeof l&&l&&!isNaN(Number(l)))switch(l=Number(l),d){case"NumberFormat":return o.format(l,c);case"DateString":return i=new Date(l),c.local||c.systemLocale?c.systemLocale?i.toLocaleDateString()+(c.hideTime?"":" "+i.toLocaleTimeString()):i.toDateString()+(c.hideTime?"":" "+i.toTimeString()):(i=i.toUTCString(),c.hideTime&&(i=i.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,"")),i);case"DateFormat":return i=new Date(l),h(u)&&(i=s.add(i,"minute",i.getTimezoneOffset()-u)),a.format(i,c)}return h(l)?l:""}function u(e,t){var i;if(t)for(i in e)e.hasOwnProperty(i)&&(void 0===e[i]||null===e[i]?delete e[i]:e[i]instanceof Object&&u(e[i],!0));else for(i in e)e.hasOwnProperty(i)&&void 0===e[i]&&delete e[i];return e}var f=["NumberFormat","DateString","DateFormat"],p={valueOf:function(e,t){for(var i in e)if(e[i]==t)return i;return null},substitute:function(t,i,s){var r,o,a;if(h(s)&&(n.isObject(s)?(r=s.first,o=s.dateFormat,a=s.numberFormat):r=s),!i||"${*}"===i){i=[];for(var l in t)if(s=t[l],o&&-1!==e.indexOf(o.properties||"",l)?s=d(l,t,o.formatter||"DateString"):a&&-1!==e.indexOf(a.properties||"",l)&&(s=d(l,t,a.formatter||"NumberFormat")),i.push(l+" = "+(h(s)?s:"")+"<br/>"),r)break;return i.join("")}return n.replace(i,n.hitch({obj:t},function(t,i){var n=i.split(":");return 1<n.length?(i=n[0],n.shift(),d(i,this.obj,n.join(":"))):o&&-1!==e.indexOf(o.properties||"",i)?d(i,this.obj,o.formatter||"DateString"):a&&-1!==e.indexOf(a.properties||"",i)?d(i,this.obj,a.formatter||"NumberFormat"):h(this.obj[i])?this.obj[i]:""}),/\$\{([^\}]+)\}/g)},filter:function(e,t,i){t=c(e,i,t),i={};var n;e=t[0];for(n in e)t[2].call(t[n],e[n],n,e)&&(i[n]=e[n]);return i},isDefined:h,fixJson:u};return r("extend-esri")&&(n.mixin(l,p),l._isDefined=h,l._getParts=c,l._sanitize=u),p})},"esri/renderers/jsonUtils":function(){define("dojo/_base/lang dojo/has esri/kernel esri/renderers/SimpleRenderer esri/renderers/UniqueValueRenderer esri/renderers/ClassBreaksRenderer".split(" "),function(e,t,i,n,s,r){var o={fromJson:function(e){var t;switch(e.type||""){case"simple":t=new n(e);break;case"uniqueValue":t=new s(e);break;case"classBreaks":t=new r(e)}return t}};return t("extend-esri")&&e.mixin(e.getObject("renderer",!0,i),o),o})},"esri/tasks/FeatureSet":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has esri/kernel esri/lang esri/graphic esri/SpatialReference esri/graphicsUtils esri/geometry/jsonUtils esri/symbols/jsonUtils".split(" "),function(e,t,i,n,s,r,o,a,l,c,h){return e=e(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(e){if(e){t.mixin(this,e);var n=this.features,s=e.spatialReference,r=c.getGeometryType(e.geometryType),s=this.spatialReference=new a(s);this.geometryType=e.geometryType,e.fields&&(this.fields=e.fields),i.forEach(n,function(e,t){var i=e.geometry&&e.geometry.spatialReference;n[t]=new o(r&&e.geometry?new r(e.geometry):null,e.symbol&&h.fromJson(e.symbol),e.attributes),n[t].geometry&&!i&&n[t].geometry.setSpatialReference(s)})}else this.features=[]},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(e){var t={};return this.displayFieldName&&(t.displayFieldName=this.displayFieldName),this.fields&&(t.fields=this.fields),this.spatialReference?t.spatialReference=this.spatialReference.toJson():this.features[0]&&this.features[0].geometry&&(t.spatialReference=this.features[0].geometry.spatialReference.toJson()),this.features[0]&&(this.features[0].geometry&&(t.geometryType=c.getJsonType(this.features[0].geometry)),t.features=l._encodeGraphics(this.features,e)),t.exceededTransferLimit=this.exceededTransferLimit,r.fixJson(t)}}),n("extend-esri")&&t.setObject("tasks.FeatureSet",e,s),e})},"esri/renderers/Renderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/_base/Color esri/kernel".split(" "),function(e,t,i,n,s,r){return e=e(null,{declaredClass:"esri.renderer.Renderer",constructor:function(e){if(e&&!e.declaredClass){if(this.rotationInfo=e.rotationInfo,!this.rotationInfo){var i=e.rotationType,n=e.rotationExpression;(i||n)&&(this.rotationInfo={type:i,expression:n})}this.setRotationInfo(this.rotationInfo),this.setProportionalSymbolInfo(e.proportionalSymbolInfo),this.setColorInfo(e.colorInfo)}this.getSymbol=t.hitch(this,this.getSymbol)},getSymbol:function(){},setRotationInfo:function(e){if((e=this.rotationInfo="string"==typeof e?{field:e}:e)&&e.expression&&!e.field){var t=e.expression.match(this.rotationRE);t&&t[1]&&(e.field=t[1])}return this},rotationRE:/^\[([^\]]+)\]$/i,getRotationAngle:function(e){var i=this.rotationInfo,n="arithmetic"===i.type,i=i.field,s=e.attributes,r=0;return i&&(t.isFunction(i)?r=i.apply(this,arguments):s&&(r=s[i]||0),r=(r+(n?-90:0))*(n?-1:1)),r},setProportionalSymbolInfo:function(e){return this.proportionalSymbolInfo=e,this},getSize:function(e,i){var n=e.attributes,s=this.proportionalSymbolInfo,r=s&&s.field,o=0,a="number"==typeof e?e:0;if(r){var l=s.minSize,c=s.maxSize,h=s.minDataValue,d=s.maxDataValue,u=s.valueUnit||"unknown",f=s.valueRepresentation,s=s.normalizationField,p=n?parseFloat(n[s]):void 0,s=i&&i.shape;t.isFunction(r)?a=r.apply(this,arguments):n&&(a=n[r]||0),isNaN(p)||(a/=p),null!=l&&null!=c&&null!=h&&null!=d?o=h>=a?l:a>=d?c:l+(a-h)/(d-h)*(c-l):"unknown"===u?null!=l&&null!=h&&(l&&h?(a/=h,o="circle"===s?2*Math.sqrt(a*Math.pow(l/2,2)):"square"===s||"diamond"===s||"image"===s?Math.sqrt(a*Math.pow(l,2)):a*l):o=a+(l||h),o=l>o?l:o,null!=c&&o>c&&(o=c)):(n=(i&&i.resolution?i.resolution:e.getLayer().getMap().getResolutionInMeters())*this._meterIn[u],"area"===f?(o=Math.sqrt(a/Math.PI)/n,o*=2):(o=a/n,("radius"===f||"distance"===f)&&(o*=2)),null!=l&&l>o&&(o=l),null!=c&&o>c&&(o=c))}return o=isNaN(o)?0:o},setColorInfo:function(e){return this.colorInfo=e,this._interpolateData(),this},getColor:function(e){var i,n=e.attributes,s=this.colorInfo,r=s&&s.field,o="number"==typeof e?e:0;if(r){var a=s.colors,l=s.minDataValue,c=s.maxDataValue,s=s.normalizationField,s=n?parseFloat(n[s]):void 0;t.isFunction(r)?o=r.apply(this,arguments):n&&(o=n[r]||0),isNaN(s)||(o/=s),null!=a&&null!=l&&null!=c&&(i=this._getColor(o))}return i},_interpolateData:function(){var e,t=this.colorInfo;if(t){var i=t.colors.length,n=t.minDataValue,s=(t.maxDataValue-n)/(i-1);for(e=[],t=0;i>t;t++)e[t]=n+t*s}this._interpolatedValues=e},_getColor:function(e){e=this._getColorRange(e);var t,i=this.colorInfo.colors;if(e){t=e[0];var n=e[1];t=t===n?i[t]:s.blendColors(i[t],i[n],e[2])}return t},_getColorRange:function(e){var t,n=this._interpolatedValues;if(n){var s=0,r=n.length-1;i.some(n,function(t,i){return t>e?(r=i,!0):(s=i,!1)}),t=[s,r,(e-n[s])/(n[r]-n[s])]}return t},_meterIn:{inches:39.3701,feet:3.28084,yards:1.09361,miles:621371e-9,"nautical-miles":539957e-9,millimeters:1e3,centimeters:100,decimeters:10,meters:1,kilometers:.001,"decimal-degrees":180/20015077},toJson:function(){var e,n=this.proportionalSymbolInfo,s=this.colorInfo,r=this.rotationInfo;e=r&&r.field;var o=r&&(r.expression||e&&(t.isFunction(e)?e:"["+e+"]"));return s&&(s=t.mixin({},s),s.colors=i.map(s.colors,function(e){return t.isArray(e)?t.clone(e):[e.r,e.g,e.b,Math.round(255*e.a)]})),n&&(n=t.mixin({},n),e=n.legendOptions)&&(n.legendOptions=t.mixin({},e),(e=e.customValues)&&(n.legendOptions.customValues=e.slice(0))),{rotationType:o&&(r.type||"geographic"),rotationExpression:o,colorInfo:s,proportionalSymbolInfo:n}}}),n("extend-esri")&&t.setObject("renderer.Renderer",e,r),e})},"esri/tasks/LengthsParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has esri/kernel".split(" "),function(e,t,i,n,s,r){return e=e(null,{declaredClass:"esri.tasks.LengthsParameters",polylines:null,lengthUnit:null,geodesic:null,calculationType:null,toJson:function(){var e=i.map(this.polylines,function(e){return e.toJson()}),t={};return t.polylines=n.toJson(e),e=this.polylines[0].spatialReference,t.sr=e.wkid?e.wkid:n.toJson(e.toJson()),this.lengthUnit&&(t.lengthUnit=this.lengthUnit),this.geodesic&&(t.geodesic=this.geodesic),this.calculationType&&(t.calculationType=this.calculationType),t}}),s("extend-esri")&&t.setObject("tasks.LengthsParameters",e,r),e})},"esri/symbols/CartographicLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base esri/kernel esri/lang esri/symbols/SimpleLineSymbol".split(" "),function(e,t,i,n,s,r,o,a){var l={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_INSIDE_FRAME:"insideframe",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},c={color:[0,0,0,1],style:l.STYLE_SOLID,width:1,cap:l.CAP_BUTT,join:l.JOIN_MITER,miterLimit:10};return e=e(a,{declaredClass:"esri.symbol.CartographicLineSymbol",type:"cartographiclinesymbol",_caps:{butt:"esriLCSButt",round:"esriLCSRound",square:"esriLCSSquare"},_joins:{miter:"esriLJSMiter",round:"esriLJSRound",bevel:"esriLJSBevel"},constructor:function(e,n,r,a,l,h){e?t.isString(e)?(this.style=e,n&&(this.color=n),void 0!==r&&(this.width=r),a&&(this.cap=a),l&&(this.join=l),void 0!==h&&(this.miterLimit=h)):(this.cap=o.valueOf(this._caps,e.cap),this.join=o.valueOf(this._joins,e.join),this.width=s.pt2px(e.width),this.miterLimit=s.pt2px(e.miterLimit)):(t.mixin(this,c),this.color=new i(this.color),this.width=s.pt2px(this.width),this.miterLimit=s.pt2px(this.miterLimit))},setCap:function(e){return this.cap=e,this},setJoin:function(e){return this.join=e,this},setMiterLimit:function(e){return this.miterLimit=e,this},getStroke:function(){return t.mixin(this.inherited("getStroke",arguments),{cap:this.cap,join:this.join===l.JOIN_MITER?this.miterLimit:this.join})},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){var e=s.px2pt(this.miterLimit),e=isNaN(e)?void 0:e;return o.fixJson(t.mixin(this.inherited("toJson",arguments),{type:"esriCLS",cap:this._caps[this.cap],join:this._joins[this.join],miterLimit:e}))}}),t.mixin(e,l),e.defaultProps=c,n("extend-esri")&&(t.setObject("symbol.CartographicLineSymbol",e,r),r.symbol.defaultCartographicLineSymbol=c),e})},"esri/geometry/Multipoint":function(){define("dojo/_base/declare dojo/_base/lang dojo/has esri/kernel esri/SpatialReference esri/geometry/Geometry esri/geometry/Point esri/geometry/Extent".split(" "),function(e,t,i,n,s,r,o,a){var l={type:"multipoint",points:null};return e=e(r,{declaredClass:"esri.geometry.Multipoint",constructor:function(e){t.mixin(this,l),this.points=[],e&&(e.points?t.mixin(this,e):this.spatialReference=e,this.spatialReference&&(this.spatialReference=new s(this.spatialReference))),this.verifySR()},_extent:null,addPoint:function(e){return this._extent=null,t.isArray(e)?this.points.push(e):this.points.push([e.x,e.y]),this},removePoint:function(e){return this._validateInputs(e)?(this._extent=null,new o(this.points.splice(e,1)[0],this.spatialReference)):void 0},getExtent:function(){if(this._extent)return new a(this._extent);var e=this.points,t=e.length;if(t){var i,n,s,r,o=e[0],l=i=o[0],c=n=o[1],h=Math.min,d=Math.max,u=this.spatialReference;for(r=0;t>r;r++)o=e[r],s=o[0],o=o[1],l=h(l,s),c=h(c,o),i=d(i,s),n=d(n,o);return this._extent={xmin:l,ymin:c,xmax:i,ymax:n,spatialReference:u?u.toJson():null},new a(this._extent)}},_validateInputs:function(e){return null===e||0>e||e>=this.points.length?!1:!0},getPoint:function(e){return this._validateInputs(e)?(e=this.points[e],new o(e[0],e[1],this.spatialReference)):void 0},setPoint:function(e,t){return this._validateInputs(e)?(this._extent=null,this.points[e]=[t.x,t.y],this):void 0},toJson:function(){var e={points:t.clone(this.points)},i=this.spatialReference;return i&&(e.spatialReference=i.toJson()),e}}),e.defaultProps=l,i("extend-esri")&&(t.setObject("geometry.Multipoint",e,n),n.geometry.defaultMultipoint=l),e})},"esri/deferredUtils":function(){define(["dojo/_base/lang","dojo/has","esri/kernel"],function(e,t,i){var n={_dfdCanceller:function(e){e.canceled=!0;var t=e._pendingDfd;-1===e.fired&&t&&-1===t.fired&&t.cancel(),e._pendingDfd=null},_fixDfd:function(e){var t=e.then;return e.then=function(e,i,n){if(e){var s=e;e=function(e){return e&&e._argsArray?s.apply(null,e):s(e)}}return t.call(this,e,i,n)},e},_resDfd:function(e,t,i){var n=t.length;1===n?i?e.errback(t[0]):e.callback(t[0]):n>1?(t._argsArray=!0,e.callback(t)):e.callback()}};return t("extend-esri")&&e.mixin(i,n),n})},"esri/layers/ImageServiceParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has esri/kernel esri/lang".split(" "),function(e,t,i,n,s,r){return e=e(null,{declaredClass:"esri.layers.ImageServiceParameters",extent:null,width:null,height:null,imageSpatialReference:null,format:null,interpolation:null,compressionQuality:null,bandIds:null,timeExtent:null,mosaicRule:null,renderingRule:null,noData:null,toJson:function(e){var t=this.bbox||this.extent;e=(t=t&&e&&t._normalize(!0))?t.spatialReference.wkid||i.toJson(t.spatialReference.toJson()):null;var n=this.imageSpatialReference,t={bbox:t?t.xmin+","+t.ymin+","+t.xmax+","+t.ymax:null,bboxSR:e,size:null!==this.width&&null!==this.height?this.width+","+this.height:null,imageSR:n?n.wkid||i.toJson(n.toJson()):e,format:this.format,interpolation:this.interpolation,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null,mosaicRule:this.mosaicRule?i.toJson(this.mosaicRule.toJson()):null,renderingRule:this.renderingRule?i.toJson(this.renderingRule.toJson()):null,noData:this.noData,noDataInterpretation:this.noDataInterpretation};return e=this.timeExtent,t.time=e?e.toJson().join(","):null,r.filter(t,function(e){return null!==e&&void 0!==e?!0:void 0})}}),t.mixin(e,{INTERPOLATION_BILINEAR:"RSP_BilinearInterpolation",INTERPOLATION_CUBICCONVOLUTION:"RSP_CubicConvolution",INTERPOLATION_MAJORITY:"RSP_Majority",INTERPOLATION_NEARESTNEIGHBOR:"RSP_NearestNeighbor",NODATA_MATCH_ALL:"esriNoDataMatchAll",NODATA_MATCH_ANY:"esriNoDataMatchAny"}),n("extend-esri")&&t.setObject("layers.ImageServiceParameters",e,s),e})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(e,t,i,n,s){var r=s.doc.documentElement;s=n("ie");var o=n("opera"),a=Math.floor,l=n("ff"),c=e.boxModel.replace(/-/,""),o={dj_quirks:n("quirks"),dj_opera:o,dj_khtml:n("khtml"),dj_webkit:n("webkit"),dj_safari:n("safari"),dj_chrome:n("chrome"),dj_gecko:n("mozilla"),dj_ios:n("ios"),dj_android:n("android")};s&&(o.dj_ie=!0,o["dj_ie"+a(s)]=!0,o.dj_iequirks=n("quirks")),l&&(o["dj_ff"+a(l)]=!0),o["dj_"+c]=!0;var h,d="";for(h in o)o[h]&&(d+=h+" ");return r.className=t.trim(r.className+" "+d),i(function(){if(!e.isBodyLtr()){var i="dj_rtl dijitRtl "+d.replace(/ /g,"-rtl ");r.className=t.trim(r.className+" "+i+"dj_rtl dijitRtl "+d.replace(/ /g,"-rtl "))
}}),n})},"esri/layers/RasterDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has esri/kernel esri/lang esri/layers/DataSource".split(" "),function(e,t,i,n,s,r){return e=e(r,{declaredClass:"esri.layers.RasterDataSource",toJson:function(){return s.fixJson({type:"raster",workspaceId:this.workspaceId,dataSourceName:this.dataSourceName})}}),i("extend-esri")&&t.setObject("layers.RasterDataSource",e,n),e})},"esri/request":function(){define("dojo/_base/array dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/_base/url dojo/_base/xhr dojo/io/script dojo/io/iframe dojo/dom-construct dojo/io-query esri/kernel esri/config esri/sniff esri/lang esri/urlUtils esri/deferredUtils".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p,m){function _(e){return e=new s(e),(e.host+(e.port?":"+e.port:"")).toLowerCase()}function g(s,d,m,g){var y,v=!1,b=!1;f.isDefined(d)&&(n.isObject(d)?(v=!!d.useProxy,b=!!d.usePost,y=d.crossOrigin):v=!!d),s=n.mixin({},s),s._ssl&&(s.url=s.url.replace(/^http:/i,"https:")),d=s.content;var x=s.url,T=m&&s.form,j=S;y=f.isDefined(y)?y:j.useCors,s.load=function(e){var i;return e&&(e.error?(i=n.mixin(Error(),e.error),i.log=t.isDebug):"error"===e.status&&(i=n.mixin(Error(),e),i.log=t.isDebug),i&&!f.isDefined(i.httpCode)&&(i.httpCode=i.code)),i||e},s.error=function(e,i){return i&&i.xhr&&i.xhr.abort(),e instanceof Error||(e=n.mixin(Error(),e)),e.log=t.isDebug,j.errorHandler(e,i),e},s._token&&(s.content=s.content||{},s.content.token=s._token);var E=0;d&&x&&(E=c.objectToQuery(d).length+x.length+1),s.timeout=f.isDefined(s.timeout)?s.timeout:j.timeout,s.handleAs=s.handleAs||"json";try{var k,C,M=y&&p.canUseXhr(s.url)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(s.url),D=p.hasSameOrigin(s.url,window.location.href)||M,L=b||m||E>j.postLength?!0:!1,R=D||-1===s.handleAs.indexOf("json")||!s.callbackParamName||m?!1:!0,I=p.getProxyRule(s.url)||j.alwaysUseProxy||v||(!R||L)&&!D?!0:!1;if(m&&!u("esri-file-upload")&&!I&&M&&(I=!0),I)if(k=p.getProxyUrl(x,y),C=k.path,k._xo&&(M=!0),!L&&C.length+1+E>j.postLength&&(L=!0),s.url=C+"?"+x,L)s.content=n.mixin(k.query||{},d);else{var A=c.objectToQuery(n.mixin(k.query||{},d));A&&(s.url+="?"+A),s.content=null}if(R&&!L)return!f.isDefined(s.isAsync)&&4>u("ff")&&(s.isAsync=!0),o.get(w?w(s):s);var P=s.headers;if(!M||P&&P.hasOwnProperty("X-Requested-With")||(P=s.headers=P||{},P["X-Requested-With"]=null),m){var N,O,H,U,F,z=s.callbackParamName||"callback.html",B=s.callbackElementName||"textarea",W=T.elements?T.elements.length:0;if(d=s.content)for(N in d)if(H=d[N],f.isDefined(H)){for(O=null,U=0;W>U;U++)if(F=T.elements[U],F.name===N){O=F;break}O?O.value=H:g?T.append(N,H):T.appendChild(l.create("input",{type:"hidden",name:N,value:H}))}u("esri-file-upload")?(e.forEach(T.elements,function(e){e.name===z&&T.removeChild(e)}),s.contentType=!1,s.postData=g?T:new FormData(T),delete s.form):(T.enctype="multipart/form-data",9>u("ie")&&(T.encoding="multipart/form-data"),T.method="post",e.some(T.elements,function(e){return e.name===z})||T.appendChild(l.create("input",{type:"hidden",name:z,value:B})),(-1!==x.toLowerCase().indexOf("addattachment")||-1!==x.toLowerCase().indexOf("updateattachment"))&&(s.url=x+(-1===x.indexOf("?")?"?":"&")+z+"="+B,I&&(s.url=C+"?"+s.url)),delete s.content)}if(M&&!s.hasOwnProperty("withCredentials"))if(g=I?C:x,-1!==e.indexOf(S.webTierAuthServers,_(g)))s.withCredentials=!0;else if(h.id){var q=h.id.findServerInfo(g);q&&q.webTierAuth&&(s.withCredentials=!0)}return s=w?w(s):s,L?m&&!u("esri-file-upload")?a.send(s):r.post(s):r.get(s)}catch(J){return m=new i,m.errback(s.error(J)),m}}function y(e){var t=S._processedCorsServers,i=-1,i=p.canUseXhr(e,!0);return i>-1&&S.corsEnabledServers.splice(i,1),t[_(e)]=1,i}function v(e){var t=S._processedCorsServers;if(S.corsDetection&&S.useCors)try{var i=_(e);u("esri-cors")&&e&&-1!==e.toLowerCase().indexOf("/rest/services")&&!p.hasSameOrigin(e,window.location.href)&&!p.canUseXhr(e)&&!t[i]&&(t[i]=-1,r.get({url:e.substring(0,e.toLowerCase().indexOf("/rest/")+6)+"info",content:{f:"json"},failOk:!0,handleAs:"json",headers:{"X-Requested-With":null}}).then(function(n){n?(t[i]=2,p.canUseXhr(e)||S.corsEnabledServers.push(i)):t[i]=1},function(){t[i]=1}))}catch(n){console.log("esri._detectCors: an unknown error occurred while detecting CORS support")}}function b(e){w=e}function x(n,s){function o(i){if(i._pendingDfd=g(n,s,E,j),!i._pendingDfd){i.ioArgs=i._pendingDfd&&i._pendingDfd.ioArgs;var r=Error("Deferred object is missing");return r.log=t.isDebug,n._usrDfd=null,i.errback(r),i._pendingDfd=null,i}i._pendingDfd.addCallback(function(e){i.ioArgs=i._pendingDfd&&i._pendingDfd.ioArgs,n._usrDfd=null,i.callback(e),i._pendingDfd=null}).addErrback(function(t){var r,o,a;if(t&&(r=t.code,o=t.subcode,a=(a=t.messageCode)&&a.toUpperCase()),t&&403==r&&(4==o||t.message&&-1<t.message.toLowerCase().indexOf("ssl")&&-1===t.message.toLowerCase().indexOf("permission"))){if(!n._ssl)return n._ssl=n._sslFromServer=!0,n._usrDfd=i,x(n,s),void 0}else if(t&&415==t.status){if(y(n.url),!n._err415)return n._err415=1,n._usrDfd=i,x(n,s),void 0}else if(!(!h.id||-1===e.indexOf(h.id._errorCodes,r)||h.id._isPublic(n.url)||c||403==r&&(-1!==e.indexOf(T,a)||f.isDefined(o)&&2!=o)))return i._pendingDfd=h.id.getCredential(n.url,{token:n._token,error:t}),i._pendingDfd.addCallback(function(e){n._token=e.token,n._usrDfd=i,n._credential=e,n._ssl=n._sslFromServer||e.ssl,x(n,s)}).addErrback(function(e){n._usrDfd=null,i.errback(e),i._pendingDfd=null}),void 0;i.ioArgs=i._pendingDfd&&i._pendingDfd.ioArgs,n._usrDfd=null,i.errback(t),i._pendingDfd=null})}n.url=p.fixUrl(n.url),s=s||{};var a,l=n.form,c=s.disableIdentityLookup,d=s._preLookup,b=!1;if(u("esri-workers")&&!1!==S.useWorkers)if(!0===s.useWorkers||!0===S.useWorkers)b=!0;else if(s.workerOptions){var w=s.workerOptions;(w.callback||w.worker&&w.worker.worker instanceof Worker)&&(b=!0)}var j=l&&l.append,E=l&&(l.elements?e.some(l.elements,function(e){return"file"===e.type}):j),k=-1!==n.url.toLowerCase().indexOf("token=")||n.content&&n.content.token||E&&e.some(l.elements,function(e){return"token"===e.name})?1:0;if(v(n.url),n._usrDfd)a=n._usrDfd;else{a=new i(m._dfdCanceller),a.addCallback(function(e){if(/\/sharing\/rest\/accounts\/self/i.test(n.url)&&!k&&!n._token&&e.user&&e.user.username&&S.webTierAuthServers.push(_(n.url)),e=n._credential){var t=h.id.findServerInfo(e.server);(t=t&&t.owningSystemUrl)&&(t=t.replace(/\/?$/,"/sharing"),(e=h.id.findCredential(t,e.userId))&&-1===h.id._getIdenticalSvcIdx(t,e)&&e.resources.splice(0,0,t))}}),a.addBoth(function(e){delete n._credential,!e||u("ie")&&e.nodeType||(e._ssl=n._ssl)});var C=n.load,M=n.error;C&&a.addCallback(function(e){var t=a._pendingDfd,t=t&&t.ioArgs;return C.call(t&&t.args,e,t)}),M&&a.addErrback(function(e){var t=a._pendingDfd,t=t&&t.ioArgs;return M.call(t&&t.args,e,t)})}return!h.id||k||n._token||h.id._isPublic(n.url)||c&&!d||(l=h.id.findCredential(n.url))&&(n._token=l.token,n._ssl=l.ssl),b?s.workerOptions&&s.workerOptions.worker?(r=s.workerOptions.worker,o(a)):require(["esri/workers/RequestClient"],function(e){if(s.workerOptions){var t=s.workerOptions;r=e.getClient(t.callback,t.cbFunction)}else r=e.getClient();o(a)}):o(a),a}var w,S=d.defaults.io,T=["COM_0056","COM_0057"];return x._request=g,x._disableCors=y,x._detectCors=v,x.setRequestPreCallback=b,u("extend-esri")&&(h.request=x,h._request=g,h._disableCors=y,h._detectCors=v,h.setRequestPreCallback=b),x})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(e,t){var i={};return t.setObject("dojo.string",i),i.rep=function(e,t){if(0>=t||!e)return"";for(var i=[];1&t&&i.push(e),t>>=1;)e+=e;return i.join("")},i.pad=function(e,t,n,s){return n||(n="0"),e=String(e),t=i.rep(n,Math.ceil((t-e.length)/n.length)),s?e+t:t+e},i.substitute=function(i,n,s,r){return r=r||e.global,s=s?t.hitch(r,s):function(e){return e},i.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(e,i,o){return e=t.getObject(i,!1,n),o&&(e=t.getObject(o,!1,r).call(r,e,i)),s(e,i).toString()})},i.trim=String.prototype.trim?t.trim:function(e){e=e.replace(/^\s+/,"");for(var t=e.length-1;t>=0;t--)if(/\S/.test(e.charAt(t))){e=e.substring(0,t+1);break}return e},i})},"esri/layers/InheritedDomain":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/layers/Domain"],function(e,t,i,n,s){return e=e([s],{declaredClass:"esri.layers.InheritedDomain"}),i("extend-esri")&&t.setObject("layers.InheritedDomain",e,n),e})},"dijit/Tooltip":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p,m,_,g){var y=t("dijit._MasterTooltip",[f,p],{duration:d.defaultDuration,templateString:_,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode),this.bgIframe=new m(this.domNode),this.fadeIn=i.fadeIn({node:this.domNode,duration:this.duration,onEnd:a.hitch(this,"_onShow")}),this.fadeOut=i.fadeOut({node:this.domNode,duration:this.duration,onEnd:a.hitch(this,"_onHide")})},show:function(e,t,i,n,s){if(!this.aroundNode||this.aroundNode!==t||this.containerNode.innerHTML!=e)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=e,s&&this.set("textDir",s),this.containerNode.align=n?"right":"left";var r=u.around(this.domNode,t,i&&i.length?i:v.defaultPosition,!n,a.hitch(this,"orient")),l=r.aroundNodePos;"M"==r.corner.charAt(0)&&"M"==r.aroundCorner.charAt(0)?(this.connectorNode.style.top=l.y+(l.h-this.connectorNode.offsetHeight>>1)-r.y+"px",this.connectorNode.style.left=""):"M"==r.corner.charAt(1)&&"M"==r.aroundCorner.charAt(1)?this.connectorNode.style.left=l.x+(l.w-this.connectorNode.offsetWidth>>1)-r.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top=""),o.set(this.domNode,"opacity",0),this.fadeIn.play(),this.isShowingNow=!0,this.aroundNode=t}},orient:function(e,t,i,n,s){this.connectorNode.style.top="";var o=n.h;n=n.w,e.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[t+"-"+i],this.domNode.style.width="auto";var a=r.position(this.domNode);9==h("ie")&&(a.w+=2);var l=Math.min(Math.max(n,1),a.w);return r.setMarginBox(this.domNode,{w:l}),"B"==i.charAt(0)&&"B"==t.charAt(0)?(e=r.position(e),t=this.connectorNode.offsetHeight,e.h>o?(this.connectorNode.style.top=o-(s.h+t>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(s.h/2-t/2,0),e.h-t)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom=""),Math.max(0,a.w-n)},_onShow:function(){h("ie")&&(this.domNode.style.filter="")},hide:function(e){this._onDeck&&this._onDeck[1]==e?this._onDeck=null:this.aroundNode===e&&(this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=null,this.fadeOut.play())},_onHide:function(){this.domNode.style.cssText="",this.containerNode.innerHTML="",this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});h("dojo-bidi")&&y.extend({_setAutoTextDir:function(t){this.applyTextDir(t),e.forEach(t.children,function(e){this._setAutoTextDir(e)},this)},_setTextDirAttr:function(e){this._set("textDir",e),"auto"==e?this._setAutoTextDir(this.containerNode):this.containerNode.dir=this.textDir}}),g.showTooltip=function(t,i,n,s,r){return n&&(n=e.map(n,function(e){return{after:"after-centered",before:"before-centered"}[e]||e})),v._masterTT||(g._masterTT=v._masterTT=new y),v._masterTT.show(t,i,n,s,r)},g.hideTooltip=function(e){return v._masterTT&&v._masterTT.hide(e)};var v=t("dijit.Tooltip",f,{label:"",showDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(t){e.forEach(this._connections||[],function(t){e.forEach(t,function(e){e.remove()})},this),this._connectIds=e.filter(a.isArrayLike(t)?t:t?[t]:[],function(e){return n.byId(e,this.ownerDocument)},this),this._connections=e.map(this._connectIds,function(e){e=n.byId(e,this.ownerDocument);var t=this.selector,i=t?function(e){return c.selector(t,e)}:function(e){return e},s=this;return[c(e,i(l.enter),function(){s._onHover(this)}),c(e,i("focusin"),function(){s._onHover(this)}),c(e,i(l.leave),a.hitch(s,"_onUnHover")),c(e,i("focusout"),a.hitch(s,"_onUnHover"))]},this),this._set("connectId",t)},addTarget:function(t){t=t.id||t,-1==e.indexOf(this._connectIds,t)&&this.set("connectId",this._connectIds.concat(t))},removeTarget:function(t){t=e.indexOf(this._connectIds,t.id||t),t>=0&&(this._connectIds.splice(t,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments),s.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var t=this.connectId;e.forEach(a.isArrayLike(t)?t:[t],this.addTarget,this)},getContent:function(){return this.label||this.domNode.innerHTML},_onHover:function(e){this._showTimer||(this._showTimer=this.defer(function(){this.open(e)},this.showDelay))},_onUnHover:function(){this._showTimer&&(this._showTimer.remove(),delete this._showTimer),this.close()},open:function(e){this._showTimer&&(this._showTimer.remove(),delete this._showTimer);var t=this.getContent(e);t&&(v.show(t,e,this.position,!this.isLeftToRight(),this.textDir),this._connectNode=e,this.onShow(e,this.position))},close:function(){this._connectNode&&(v.hide(this._connectNode),delete this._connectNode,this.onHide()),this._showTimer&&(this._showTimer.remove(),delete this._showTimer)},onShow:function(){},onHide:function(){},destroy:function(){this.close(),e.forEach(this._connections||[],function(t){e.forEach(t,function(e){e.remove()})},this),this.inherited(arguments)}});return v._MasterTooltip=y,v.show=g.showTooltip,v.hide=g.hideTooltip,v.defaultPosition=["after-centered","before-centered"],v})},"esri/symbols/PictureMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base esri/kernel esri/lang esri/urlUtils esri/symbols/MarkerSymbol".split(" "),function(e,t,i,n,s,r,o,a){var l={url:"",width:12,height:12,angle:0,xoffset:0,yoffset:0};return e=e(a,{declaredClass:"esri.symbol.PictureMarkerSymbol",type:"picturemarkersymbol",constructor:function(e,s,r){e?t.isString(e)?(this.url=e,s&&(this.width=s),r&&(this.height=r)):(this.width=n.pt2px(e.width),this.height=n.pt2px(e.height),s=e.imageData,!(9>i("ie"))&&s&&(r=this.url,this.url="data:"+(e.contentType||"image")+";base64,"+s,this.imageData=r)):(t.mixin(this,l),this.width=n.pt2px(this.width),this.height=n.pt2px(this.height))},getStroke:function(){return null},getFill:function(){return null},setWidth:function(e){return this.width=e,this},setHeight:function(e){return this.height=e,this},setUrl:function(e){return e!==this.url&&(delete this.imageData,delete this.contentType),this.url=e,this},getShapeDescriptors:function(){return{defaultShape:{type:"image",x:-Math.round(this.width/2),y:-Math.round(this.height/2),width:this.width,height:this.height,src:this.url||""},fill:null,stroke:null}},toJson:function(){var e=this.url,i=this.imageData;if(0===e.indexOf("data:"))var s=e,e=i,i=s.indexOf(";base64,")+8,i=s.substr(i);!t.isString(e)||0!==e.indexOf("/")&&0!==e.indexOf("//")&&0!==e.indexOf("./")&&0!==e.indexOf("../")||(e=o.getAbsoluteUrl(e));var s=n.px2pt(this.width),s=isNaN(s)?void 0:s,a=n.px2pt(this.height),a=isNaN(a)?void 0:a,e=r.fixJson(t.mixin(this.inherited("toJson",arguments),{type:"esriPMS",url:e,imageData:i,contentType:this.contentType,width:s,height:a}));return delete e.color,delete e.size,e.imageData||delete e.imageData,e}}),e.defaultProps=l,i("extend-esri")&&(t.setObject("symbol.PictureMarkerSymbol",e,s),s.symbol.defaultPictureMarkerSymbol=l),e})},"esri/layers/LayerMapSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has esri/kernel esri/lang esri/layers/LayerSource".split(" "),function(e,t,i,n,s,r){return e=e(r,{declaredClass:"esri.layers.LayerMapSource",type:"mapLayer",toJson:function(){return s.fixJson({type:"mapLayer",mapLayerId:this.mapLayerId,gdbVersion:this.gdbVersion})}}),i("extend-esri")&&t.setObject("layers.LayerMapSource",e,n),e})},"esri/tasks/find":function(){define(["esri/tasks/FindTask","esri/tasks/FindParameters","esri/tasks/FindResult"],function(){return{}})},"dijit/form/DropDownButton":function(){define("dojo/_base/declare dojo/_base/lang dojo/query ../registry ../popup ./Button ../_Container ../_HasDropDown dojo/text!./templates/DropDownButton.html".split(" "),function(e,t,i,n,s,r,o,a,l){return e("dijit.form.DropDownButton",[r,o,a],{baseClass:"dijitDropDownButton",templateString:l,_fillContent:function(){if(this.srcNodeRef){var e=i("*",this.srcNodeRef);this.inherited(arguments,[e[0]]),this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this._started){if(!this.dropDown&&this.dropDownContainer){var e=i("[widgetId]",this.dropDownContainer)[0];e&&(this.dropDown=n.byNode(e)),delete this.dropDownContainer}this.dropDown&&s.hide(this.dropDown),this.inherited(arguments)}},isLoaded:function(){var e=this.dropDown;return!!e&&(!e.href||e.isLoaded)},loadDropDown:function(e){var i=this.dropDown,n=i.on("load",t.hitch(this,function(){n.remove(),e()}));i.refresh()},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown}})})},"dijit/form/_FormValueMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dojo/sniff ./_FormWidgetMixin".split(" "),function(e,t,i,n,s,r,o){return e("dijit.form._FormValueMixin",o,{readOnly:!1,_setReadOnlyAttr:function(e){t.set(this.focusNode,"readOnly",e),this._set("readOnly",e)},postCreate:function(){this.inherited(arguments),void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(e,t){this._handleOnChange(e,t)},_handleOnChange:function(e){this._set("value",e),this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1,this._setValueAttr(this._resetValue,!0)}})})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),function(e,t,i,n,s,r,o,a,l,c){return t("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(t){this._set("disabled",t),i.set(this.focusNode,"disabled",t),this.valueNode&&i.set(this.valueNode,"disabled",t),this.focusNode.setAttribute("aria-disabled",t?"true":"false"),t?(this._set("hovering",!1),this._set("active",!1),t="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",e.forEach(s.isArray(t)?t:[t],function(e){e=this[e],a("webkit")||c.hasDefaultTabStop(e)?e.setAttribute("tabIndex","-1"):e.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(e){if("mouse"==e&&this.isFocusable())var t=this.own(o(this.focusNode,"focus",function(){i.remove(),t.remove()}))[0],i=this.own(o(this.ownerDocumentBody,"mouseup, touchend",s.hitch(this,function(e){i.remove(),t.remove(),this.focused&&("touchend"==e.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){l.scrollIntoView(this.domNode)}),this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=n.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(e){}},compare:function(e,t){return"number"==typeof e&&"number"==typeof t?isNaN(e)&&isNaN(t)?0:e-t:e>t?1:t>e?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(e,t){void 0!=this._lastValueReported||null!==t&&this._onChangeActive||(this._resetValue=this._lastValueReported=e),this._pendingOnChange=this._pendingOnChange||typeof e!=typeof this._lastValueReported||0!=this.compare(e,this._lastValueReported),(this.intermediateChanges||t||void 0===t)&&this._pendingOnChange&&(this._lastValueReported=e,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null,this.onChange(e)})))},create:function(){this.inherited(arguments),this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported)),this.inherited(arguments)}})})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(e,t,i,n){function s(t){if((t.keyCode===e.ENTER||t.keyCode===e.SPACE)&&!/input|button|textarea/i.test(t.target.nodeName))for(t=t.target;t;t=t.parentNode)if(t.dojoClick)return!0}var r;i(document,"keydown",function(e){s(e)?(r=e.target,e.preventDefault()):r=null}),i(document,"keyup",function(e){s(e)&&e.target==r&&(r=null,i.emit(e.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,altKey:e.altKey,_origType:e.type}))});var o=function(e,t){return e.dojoClick=!0,i(e,"click",t)};return o.click=o,o.press=function(s,r){var o=i(s,n.press,function(e){("mousedown"!=e.type||t.isLeft(e))&&r(e)}),a=i(s,"keydown",function(t){(t.keyCode===e.ENTER||t.keyCode===e.SPACE)&&r(t)});return{remove:function(){o.remove(),a.remove()}}},o.release=function(s,r){var o=i(s,n.release,function(e){("mouseup"!=e.type||t.isLeft(e))&&r(e)}),a=i(s,"keyup",function(t){(t.keyCode===e.ENTER||t.keyCode===e.SPACE)&&r(t)});return{remove:function(){o.remove(),a.remove()}}},o.move=n.move,o})},"esri/toolbars/draw":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Color dojo/_base/window dojo/has dojo/keys dojo/dom-construct dojo/dom-style esri/kernel esri/sniff esri/toolbars/_toolbar esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleLineSymbol esri/symbols/SimpleFillSymbol esri/graphic esri/geometry/jsonUtils esri/geometry/webMercatorUtils esri/geometry/Polyline esri/geometry/Polygon esri/geometry/Multipoint esri/geometry/Rect dojo/i18n!esri/nls/jsapi".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p,m,_,g,y,v,b,x,w,S){var T=e(u,{declaredClass:"esri.toolbars.Draw",_eventMap:{"draw-complete":!0,"draw-end":["geometry"]},constructor:function(e,i){this.markerSymbol=new f(f.STYLE_SOLID,10,new p(p.STYLE_SOLID,new s([255,0,0]),2),new s([0,0,0,.25])),this.lineSymbol=new p(p.STYLE_SOLID,new s([255,0,0]),2),this.fillSymbol=new m(m.STYLE_SOLID,new p(p.STYLE_SOLID,new s([255,0,0]),2),new s([0,0,0,.25])),this._points=[],this._defaultOptions={showTooltips:!0,drawTime:75,tolerance:8,tooltipOffset:15},this._options=t.mixin(t.mixin({},this._defaultOptions),i||{}),this._mouse=!o("esri-touch")&&!o("esri-pointer"),this._mouse||(this._options.showTooltips=!1),this._onKeyDownHandler=t.hitch(this,this._onKeyDownHandler),this._onMouseDownHandler=t.hitch(this,this._onMouseDownHandler),this._onMouseUpHandler=t.hitch(this,this._onMouseUpHandler),this._onClickHandler=t.hitch(this,this._onClickHandler),this._onMouseMoveHandler=t.hitch(this,this._onMouseMoveHandler),this._onMouseDragHandler=t.hitch(this,this._onMouseDragHandler),this._onDblClickHandler=t.hitch(this,this._onDblClickHandler),this._updateTooltip=t.hitch(this,this._updateTooltip),this._hideTooltip=t.hitch(this,this._hideTooltip),this._redrawGraphic=t.hitch(this,this._redrawGraphic)},_geometryType:null,respectDrawingVertexOrder:!1,setRespectDrawingVertexOrder:function(e){this.respectDrawingVertexOrder=e},setMarkerSymbol:function(e){this.markerSymbol=e},setLineSymbol:function(e){this.lineSymbol=e},setFillSymbol:function(e){this.fillSymbol=e},activate:function(e,i){this._geometryType&&this.deactivate();var s=this.map,r=n.connect,a=T;switch(this._options=t.mixin(t.mixin({},this._options),i||{}),s.navigationManager.setImmediateClick(!1),e){case a.ARROW:case a.LEFT_ARROW:case a.RIGHT_ARROW:case a.UP_ARROW:case a.DOWN_ARROW:case a.TRIANGLE:case a.CIRCLE:case a.ELLIPSE:case a.RECTANGLE:this._deactivateMapTools(!0,!1,!1,!0),this._onClickHandler_connect=r(s,"onClick",this._onClickHandler),this._onMouseDownHandler_connect=r(s,this._mouse?"onMouseDown":"onSwipeStart",this._onMouseDownHandler),this._onMouseDragHandler_connect=r(s,this._mouse?"onMouseDrag":"onSwipeMove",this._onMouseDragHandler),this._onMouseUpHandler_connect=r(s,this._mouse?"onMouseUp":"onSwipeEnd",this._onMouseUpHandler),o("esri-touch")&&!o("esri-pointer")&&(this._onMouseDownHandler2_connect=r(s,"onMouseDown",this._onMouseDownHandler),this._onMouseDragHandler2_connect=r(s,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler2_connect=r(s,"onMouseUp",this._onMouseUpHandler));break;case a.POINT:this._onClickHandler_connect=r(s,"onClick",this._onClickHandler);break;case a.LINE:case a.EXTENT:case a.FREEHAND_POLYLINE:case a.FREEHAND_POLYGON:this._deactivateMapTools(!0,!1,!1,!0),this._onMouseDownHandler_connect=r(s,this._mouse?"onMouseDown":"onSwipeStart",this._onMouseDownHandler),this._onMouseDragHandler_connect=r(s,this._mouse?"onMouseDrag":"onSwipeMove",this._onMouseDragHandler),this._onMouseUpHandler_connect=r(s,this._mouse?"onMouseUp":"onSwipeEnd",this._onMouseUpHandler),o("esri-touch")&&!o("esri-pointer")&&(this._onMouseDownHandler2_connect=r(s,"onMouseDown",this._onMouseDownHandler),this._onMouseDragHandler2_connect=r(s,"onMouseDrag",this._onMouseDragHandler),this._onMouseUpHandler2_connect=r(s,"onMouseUp",this._onMouseUpHandler));break;case a.POLYLINE:case a.POLYGON:case a.MULTI_POINT:s.navigationManager.setImmediateClick(!0),this._onClickHandler_connect=r(s,"onClick",this._onClickHandler),this._onDblClickHandler_connect=r(s,"onDblClick",this._onDblClickHandler),this._dblClickZoom=s.isDoubleClickZoom,s.disableDoubleClickZoom();break;default:return console.error("Unsupported geometry type: "+e),void 0}this._onKeyDown_connect=r(s,"onKeyDown",this._onKeyDownHandler),this._redrawConnect=r(s,"onExtentChange",this._redrawGraphic),this._geometryType=e,this._toggleTooltip(!0),s.snappingManager&&"freehandpolyline"!==this._geometryType&&"freehandpolygon"!==this._geometryType&&this._mouse&&(s.snappingManager._startSelectionLayerQuery(),s.snappingManager._setUpSnapping()),this.onActivate(this._geometryType)},deactivate:function(){var e=this.map;this._clear();var t=n.disconnect;switch(t(this._onMouseMoveHandler_connect),t(this._onMouseDownHandler_connect),t(this._onMouseDragHandler_connect),t(this._onMouseUpHandler_connect),t(this._onMouseDownHandler2_connect),t(this._onMouseDragHandler2_connect),t(this._onMouseUpHandler2_connect),t(this._onClickHandler_connect),t(this._onDblClickHandler_connect),t(this._onKeyDown_connect),t(this._redrawConnect),this._onMouseDownHandler_connect=this._onMouseMoveHandler_connect=this._onMouseDragHandler_connect=this._onMouseUpHandler_connect=this._onMouseDownHandler2_connect=this._onMouseDragHandler2_connect=this._onMouseUpHandler2_connect=this._onClickHandler_connect=this._onDblClickHandler_connect=this._onKeyDown_connect=this._redrawConnect=null,e.snappingManager&&(e.snappingManager._stopSelectionLayerQuery(),e.snappingManager._killOffSnapping()),this._geometryType){case T.CIRCLE:case T.ELLIPSE:case T.TRIANGLE:case T.ARROW:case T.LEFT_ARROW:case T.RIGHT_ARROW:case T.UP_ARROW:case T.DOWN_ARROW:case T.RECTANGLE:case T.LINE:case T.EXTENT:case T.FREEHAND_POLYLINE:case T.FREEHAND_POLYGON:this._activateMapTools(!0,!1,!1,!0);break;case T.POLYLINE:case T.POLYGON:case T.MULTI_POINT:this._dblClickZoom&&e.enableDoubleClickZoom()}t=this._geometryType,this._geometryType=null,e.navigationManager.setImmediateClick(!1),this._toggleTooltip(!1),this.onDeactivate(t)},_clear:function(){this._graphic&&this.map.graphics.remove(this._graphic,!0),this._tGraphic&&this.map.graphics.remove(this._tGraphic,!0),this._graphic=this._tGraphic=null,this.map.snappingManager&&this.map.snappingManager._setGraphic(null),this._points=[]},finishDrawing:function(){var e,t=this._points,s=this.map.spatialReference,r=T,t=t.slice(0,t.length);switch(this._geometryType){case r.POLYLINE:if(!this._graphic||2>t.length)return;e=new v(s),e.addPath([].concat(t));break;case r.POLYGON:if(!this._graphic||3>t.length)return;e=new b(s),t=[].concat(t,[t[0].offset(0,0)]),!b.prototype.isClockwise(t)&&!this.respectDrawingVertexOrder&&(console.debug(this.declaredClass+" :  Polygons drawn in anti-clockwise direction will be reversed to be clockwise."),t.reverse()),e.addRing(t);break;case r.MULTI_POINT:e=new x(s),i.forEach(t,function(t){e.addPoint(t)})}n.disconnect(this._onMouseMoveHandler_connect),this._clear(),this._setTooltipMessage(0),this._drawEnd(e)},_drawEnd:function(e){if(e){var t,i=this.map.spatialReference;this.onDrawEnd(e),i&&(i.isWebMercator()?t=y.webMercatorToGeographic(e,!0):4326===i.wkid&&(t=g.fromJson(e.toJson()))),this.onDrawComplete({geometry:e,geographicGeometry:t})}},_normalizeRect:function(e,t,i){var n=e.x;e=e.y;var s=t.x;t=t.y;var r=Math.abs(n-s),o=Math.abs(e-t);return{x:Math.min(n,s),y:Math.max(e,t),width:r,height:o,spatialReference:i}},_onMouseDownHandler:function(e){this._dragged=!1;var t;this.map.snappingManager&&(t=this.map.snappingManager._snappingPoint);var i=t||e.mapPoint,n=T;t=this.map;var s=t.spatialReference;switch(this._points.push(i.offset(0,0)),this._geometryType){case n.LINE:this._graphic=t.graphics.add(new _(new v({paths:[[[i.x,i.y],[i.x,i.y]]],spatialReference:s}),this.lineSymbol),!0),t.snappingManager&&t.snappingManager._setGraphic(this._graphic);break;case n.FREEHAND_POLYLINE:this._oldPoint=e.screenPoint,i=new v(s),i.addPath(this._points),this._graphic=t.graphics.add(new _(i,this.lineSymbol),!0),t.snappingManager&&t.snappingManager._setGraphic(this._graphic);break;case n.CIRCLE:case n.ELLIPSE:case n.TRIANGLE:case n.ARROW:case n.LEFT_ARROW:case n.RIGHT_ARROW:case n.UP_ARROW:case n.DOWN_ARROW:case n.RECTANGLE:case n.FREEHAND_POLYGON:this._oldPoint=e.screenPoint,i=new b(s),i.addRing(this._points),this._graphic=t.graphics.add(new _(i,this.fillSymbol),!0),t.snappingManager&&t.snappingManager._setGraphic(this._graphic)}o("esri-touch")&&e.preventDefault()},_onMouseMoveHandler:function(e){var t;this.map.snappingManager&&(t=this.map.snappingManager._snappingPoint);var i=this._points[this._points.length-1];e=t||e.mapPoint,t=this._tGraphic;var n=t.geometry;switch(this._geometryType){case T.POLYLINE:case T.POLYGON:n.setPoint(0,0,{x:i.x,y:i.y}),n.setPoint(0,1,{x:e.x,y:e.y}),t.setGeometry(n)}},_onMouseDragHandler:function(e){if(o("esri-touch")&&!this._points.length)e.preventDefault();else{this._dragged=!0;var i;this.map.snappingManager&&(i=this.map.snappingManager._snappingPoint);var n=this._points[0],s=i||e.mapPoint,r=this.map,a=r.spatialReference;i=this._graphic;var l=T,c=r.toScreen(n),h=r.toScreen(s),d=[],d=h.x-c.x,h=h.y-c.y,u=Math.sqrt(d*d+h*h);switch(this._geometryType){case l.CIRCLE:this._hideTooltip(),i.geometry=b.createCircle({center:c,r:u,numberOfPoints:60,map:r}),i.setGeometry(i.geometry);break;case l.ELLIPSE:this._hideTooltip(),i.geometry=b.createEllipse({center:c,longAxis:d,shortAxis:h,numberOfPoints:60,map:r}),i.setGeometry(i.geometry);break;case l.TRIANGLE:this._hideTooltip(),d=[[0,-u],[.8660254037844386*u,.5*u],[-.8660254037844386*u,.5*u],[0,-u]],i.geometry=this._toPolygon(d,c.x,c.y),i.setGeometry(i.geometry);break;case l.ARROW:this._hideTooltip(),n=h/u,r=d/u,s=.25*r*u,a=.25*u/(h/d),u*=.25*n,d=[[d,h],[d-s*(1+24/a),h+24*r-u],[d-s*(1+12/a),h+12*r-u],[-12*n,12*r],[12*n,-12*r],[d-s*(1-12/a),h-12*r-u],[d-s*(1-24/a),h-24*r-u],[d,h]],i.geometry=this._toPolygon(d,c.x,c.y),i.setGeometry(i.geometry);break;case l.LEFT_ARROW:this._hideTooltip(),d=0>=d?[[d,0],[.75*d,h],[.75*d,.5*h],[0,.5*h],[0,-.5*h],[.75*d,-.5*h],[.75*d,-h],[d,0]]:[[0,0],[.25*d,h],[.25*d,.5*h],[d,.5*h],[d,-.5*h],[.25*d,-.5*h],[.25*d,-h],[0,0]],i.geometry=this._toPolygon(d,c.x,c.y),i.setGeometry(i.geometry);
break;case l.RIGHT_ARROW:this._hideTooltip(),d=d>=0?[[d,0],[.75*d,h],[.75*d,.5*h],[0,.5*h],[0,-.5*h],[.75*d,-.5*h],[.75*d,-h],[d,0]]:[[0,0],[.25*d,h],[.25*d,.5*h],[d,.5*h],[d,-.5*h],[.25*d,-.5*h],[.25*d,-h],[0,0]],i.geometry=this._toPolygon(d,c.x,c.y),i.setGeometry(i.geometry);break;case l.UP_ARROW:this._hideTooltip(),d=0>=h?[[0,h],[-d,.75*h],[-.5*d,.75*h],[-.5*d,0],[.5*d,0],[.5*d,.75*h],[d,.75*h],[0,h]]:[[0,0],[-d,.25*h],[-.5*d,.25*h],[-.5*d,h],[.5*d,h],[.5*d,.25*h],[d,.25*h],[0,0]],i.geometry=this._toPolygon(d,c.x,c.y),i.setGeometry(i.geometry);break;case l.DOWN_ARROW:this._hideTooltip(),d=h>=0?[[0,h],[-d,.75*h],[-.5*d,.75*h],[-.5*d,0],[.5*d,0],[.5*d,.75*h],[d,.75*h],[0,h]]:[[0,0],[-d,.25*h],[-.5*d,.25*h],[-.5*d,h],[.5*d,h],[.5*d,.25*h],[d,.25*h],[0,0]],i.geometry=this._toPolygon(d,c.x,c.y),i.setGeometry(i.geometry);break;case l.RECTANGLE:this._hideTooltip(),d=[[0,0],[d,0],[d,h],[0,h],[0,0]],i.geometry=this._toPolygon(d,c.x,c.y),i.setGeometry(i.geometry);break;case l.LINE:i.setGeometry(t.mixin(i.geometry,{paths:[[[n.x,n.y],[s.x,s.y]]]}));break;case l.EXTENT:i&&r.graphics.remove(i,!0),i=new w(this._normalizeRect(n,s,a)),i._originOnly=!0,this._graphic=r.graphics.add(new _(i,this.fillSymbol),!0),r.snappingManager&&r.snappingManager._setGraphic(this._graphic);break;case l.FREEHAND_POLYLINE:if(this._hideTooltip(),!1===this._canDrawFreehandPoint(e))return o("esri-touch")&&e.preventDefault(),void 0;this._points.push(e.mapPoint.offset(0,0)),i.geometry._insertPoints([s.offset(0,0)],0),i.setGeometry(i.geometry);break;case l.FREEHAND_POLYGON:if(this._hideTooltip(),!1===this._canDrawFreehandPoint(e))return o("esri-touch")&&e.preventDefault(),void 0;this._points.push(e.mapPoint.offset(0,0)),i.geometry._insertPoints([s.offset(0,0)],0),i.setGeometry(i.geometry)}o("esri-touch")&&e.preventDefault()}},_canDrawFreehandPoint:function(e){if(!this._oldPoint)return!1;var t=this._oldPoint.x-e.screenPoint.x,i=this._oldPoint.y-e.screenPoint.y,n=this._options.tolerance;return n>(0>t?-1*t:t)&&n>(0>i?-1*i:i)?!1:(t=new Date,t-this._startTime<this._options.drawTime?!1:(this._startTime=t,this._oldPoint=e.screenPoint,!0))},_onMouseUpHandler:function(e){if(this._dragged){0===this._points.length&&this._points.push(e.mapPoint.offset(0,0));var t;this.map.snappingManager&&(t=this.map.snappingManager._snappingPoint);var i=this._points[0];t=t||e.mapPoint;var n,s=this.map.spatialReference,r=T;switch(this._geometryType){case r.CIRCLE:case r.ELLIPSE:case r.TRIANGLE:case r.ARROW:case r.LEFT_ARROW:case r.RIGHT_ARROW:case r.UP_ARROW:case r.DOWN_ARROW:case r.RECTANGLE:n=this._graphic.geometry;break;case r.LINE:n=new v({paths:[[[i.x,i.y],[t.x,t.y]]],spatialReference:s});break;case r.EXTENT:n=new w(this._normalizeRect(i,t,s)).getExtent();break;case r.FREEHAND_POLYLINE:n=new v(s),n.addPath([].concat(this._points,[t.offset(0,0)]));break;case r.FREEHAND_POLYGON:n=new b(s),i=[].concat(this._points,[t.offset(0,0),this._points[0].offset(0,0)]),!b.prototype.isClockwise(i)&&!this.respectDrawingVertexOrder&&(console.debug(this.declaredClass+" :  Polygons drawn in anti-clockwise direction will be reversed to be clockwise."),i.reverse()),n.addRing(i)}o("esri-touch")&&e.preventDefault(),this._clear(),this._drawEnd(n)}else this._clear()},_onClickHandler:function(e){var t;this.map.snappingManager&&(t=this.map.snappingManager._snappingPoint),e=t||e.mapPoint,t=this.map;var i=t.toScreen(e),s=T;switch(this._points.push(e.offset(0,0)),this._geometryType){case s.POINT:this._drawEnd(e.offset(0,0)),this._setTooltipMessage(0);break;case s.POLYLINE:1===this._points.length?(i=new v(t.spatialReference),i.addPath(this._points),this._graphic=t.graphics.add(new _(i,this.lineSymbol),!0),t.snappingManager&&t.snappingManager._setGraphic(this._graphic),this._onMouseMoveHandler_connect=n.connect(t,"onMouseMove",this._onMouseMoveHandler),this._tGraphic=t.graphics.add(new _(new v({paths:[[[e.x,e.y],[e.x,e.y]]],spatialReference:t.spatialReference}),this.lineSymbol),!0)):(this._graphic.geometry._insertPoints([e.offset(0,0)],0),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.lineSymbol),t=this._tGraphic,i=t.geometry,i.setPoint(0,0,e.offset(0,0)),i.setPoint(0,1,e.offset(0,0)),t.setGeometry(i));break;case s.POLYGON:1===this._points.length?(i=new b(t.spatialReference),i.addRing(this._points),this._graphic=t.graphics.add(new _(i,this.fillSymbol),!0),t.snappingManager&&t.snappingManager._setGraphic(this._graphic),this._onMouseMoveHandler_connect=n.connect(t,"onMouseMove",this._onMouseMoveHandler),this._tGraphic=t.graphics.add(new _(new v({paths:[[[e.x,e.y],[e.x,e.y]]],spatialReference:t.spatialReference}),this.fillSymbol),!0)):(this._graphic.geometry._insertPoints([e.offset(0,0)],0),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.fillSymbol),t=this._tGraphic,i=t.geometry,i.setPoint(0,0,e.offset(0,0)),i.setPoint(0,1,e.offset(0,0)),t.setGeometry(i));break;case s.MULTI_POINT:e=this._points,1===e.length?(i=new x(t.spatialReference),i.addPoint(e[e.length-1]),this._graphic=t.graphics.add(new _(i,this.markerSymbol),!0),t.snappingManager&&t.snappingManager._setGraphic(this._graphic)):(this._graphic.geometry.addPoint(e[e.length-1]),this._graphic.setGeometry(this._graphic.geometry).setSymbol(this.markerSymbol));break;case s.ARROW:this._addShape([[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]],i.x,i.y);break;case s.LEFT_ARROW:this._addShape([[0,0],[24,24],[24,12],[96,12],[96,-12],[24,-12],[24,-24],[0,0]],i.x,i.y);break;case s.RIGHT_ARROW:this._addShape([[0,0],[-24,24],[-24,12],[-96,12],[-96,-12],[-24,-12],[-24,-24],[0,0]],i.x,i.y);break;case s.UP_ARROW:this._addShape([[0,0],[-24,24],[-12,24],[-12,96],[12,96],[12,24],[24,24],[0,0]],i.x,i.y);break;case s.DOWN_ARROW:this._addShape([[0,0],[-24,-24],[-12,-24],[-12,-96],[12,-96],[12,-24],[24,-24],[0,0]],i.x,i.y);break;case s.TRIANGLE:this._addShape([[0,-48],[41.56921938165306,24],[-41.56921938165306,24],[0,-48]],i.x,i.y);break;case s.RECTANGLE:this._addShape([[0,-96],[96,-96],[96,0],[0,0],[0,-96]],i.x-48,i.y+48);break;case s.CIRCLE:this._clear(),this._drawEnd(b.createCircle({center:i,r:48,numberOfPoints:60,map:t}));break;case s.ELLIPSE:this._clear(),this._drawEnd(b.createEllipse({center:i,longAxis:48,shortAxis:24,numberOfPoints:60,map:t}))}this._setTooltipMessage(this._points.length)},_addShape:function(e,t,i){this._setTooltipMessage(0),this._clear(),this._drawEnd(this._toPolygon(e,t,i))},_toPolygon:function(e,t,n){var s=this.map,r=new b(s.spatialReference);return r.addRing(i.map(e,function(e){return s.toMap({x:e[0]+t,y:e[1]+n})})),r},_onDblClickHandler:function(e){var t,s=this._points,r=this.map.spatialReference,a=T;switch(o("esri-touch")&&s.push(e.mapPoint),s=s.slice(0,s.length),this._geometryType){case a.POLYLINE:if(!this._graphic||2>s.length)return n.disconnect(this._onMouseMoveHandler_connect),this._clear(),this._onClickHandler(e),void 0;t=new v(r),t.addPath([].concat(s));break;case a.POLYGON:if(!this._graphic||2>s.length)return n.disconnect(this._onMouseMoveHandler_connect),this._clear(),this._onClickHandler(e),void 0;t=new b(r),e=[].concat(s,[s[0].offset(0,0)]),!b.prototype.isClockwise(e)&&!this.respectDrawingVertexOrder&&(console.debug(this.declaredClass+" :  Polygons drawn in anti-clockwise direction will be reversed to be clockwise."),e.reverse()),t.addRing(e);break;case a.MULTI_POINT:t=new x(r),i.forEach(s,function(e){t.addPoint(e)})}n.disconnect(this._onMouseMoveHandler_connect),this._clear(),this._setTooltipMessage(0),this._drawEnd(t)},_onKeyDownHandler:function(e){e.keyCode===a.ESCAPE&&(n.disconnect(this._onMouseMoveHandler_connect),this._clear(),this._setTooltipMessage(0))},_toggleTooltip:function(e){this._options.showTooltips&&(e?this._tooltip||(this._tooltip=l.create("div",{"class":"tooltip"},this.map.container),this._tooltip.style.display="none",this._tooltip.style.position="fixed",this._setTooltipMessage(0),this._onTooltipMouseEnterHandler_connect=n.connect(this.map,"onMouseOver",this._updateTooltip),this._onTooltipMouseLeaveHandler_connect=n.connect(this.map,"onMouseOut",this._hideTooltip),this._onTooltipMouseMoveHandler_connect=n.connect(this.map,"onMouseMove",this._updateTooltip)):this._tooltip&&(n.disconnect(this._onTooltipMouseEnterHandler_connect),n.disconnect(this._onTooltipMouseLeaveHandler_connect),n.disconnect(this._onTooltipMouseMoveHandler_connect),l.destroy(this._tooltip),this._tooltip=null))},_hideTooltip:function(){var e=this._tooltip;e&&(e.style.display="none")},_setTooltipMessage:function(e){var t=this._tooltip;if(t){var i="";switch(this._geometryType){case T.POINT:i=S.toolbars.draw.addPoint;break;case T.ARROW:case T.LEFT_ARROW:case T.RIGHT_ARROW:case T.UP_ARROW:case T.DOWN_ARROW:case T.TRIANGLE:case T.RECTANGLE:case T.CIRCLE:case T.ELLIPSE:i=S.toolbars.draw.addShape;break;case T.LINE:case T.EXTENT:case T.FREEHAND_POLYLINE:case T.FREEHAND_POLYGON:i=S.toolbars.draw.freehand;break;case T.POLYLINE:case T.POLYGON:i=S.toolbars.draw.start,1===e?i=S.toolbars.draw.resume:e>=2&&(i=S.toolbars.draw.complete);break;case T.MULTI_POINT:i=S.toolbars.draw.addMultipoint,e>=1&&(i=S.toolbars.draw.finish)}t.innerHTML=i}},_updateTooltip:function(e){var t=this._tooltip;if(t){var i;e.clientX||e.pageY?(i=e.clientX,e=e.clientY):(i=e.clientX+r.body().scrollLeft-r.body().clientLeft,e=e.clientY+r.body().scrollTop-r.body().clientTop),t.style.display="none",c.set(t,{left:i+this._options.tooltipOffset+"px",top:e+"px"}),t.style.display=""}},_redrawGraphic:function(e,t,i){(i||this.map.wrapAround180)&&((e=this._graphic)&&e.setGeometry(e.geometry),(e=this._tGraphic)&&e.setGeometry(e.geometry))},onActivate:function(){},onDeactivate:function(){},onDrawComplete:function(){},onDrawEnd:function(){}});return t.mixin(T,{POINT:"point",MULTI_POINT:"multipoint",LINE:"line",EXTENT:"extent",POLYLINE:"polyline",POLYGON:"polygon",FREEHAND_POLYLINE:"freehandpolyline",FREEHAND_POLYGON:"freehandpolygon",ARROW:"arrow",LEFT_ARROW:"leftarrow",RIGHT_ARROW:"rightarrow",UP_ARROW:"uparrow",DOWN_ARROW:"downarrow",TRIANGLE:"triangle",CIRCLE:"circle",ELLIPSE:"ellipse",RECTANGLE:"rectangle"}),o("extend-esri")&&t.setObject("toolbars.Draw",T,h),T})},"esri/geometry/Polyline":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has esri/kernel esri/lang esri/SpatialReference esri/geometry/Geometry esri/geometry/Point esri/geometry/Extent".split(" "),function(e,t,i,n,s,r,o,a,l,c){var h={type:"polyline",paths:null};return e=e(a,{declaredClass:"esri.geometry.Polyline",constructor:function(e){i.mixin(this,h),this.paths=[],this._path=0,e&&(i.isArray(e)?this.paths=i.isArray(e[0][0])?e:[e]:e.paths?i.mixin(this,e):this.spatialReference=e,this.spatialReference&&(this.spatialReference=new o(this.spatialReference))),this.verifySR()},_extent:null,addPath:function(e){return this._extent=null,this._path=this.paths.length,this.paths[this._path]=[],i.isArray(e[0])?t.forEach(e,this._addPointArr,this):t.forEach(e,this._addPoint,this),this},_addPointArr:function(e){this.paths[this._path].push(e)},_addPoint:function(e){this.paths[this._path].push([e.x,e.y])},_insertPoints:function(e,i){this._extent=null,this._path=i,this.paths[this._path]||(this.paths[this._path]=[]),t.forEach(e,this._addPoint,this)},_validateInputs:function(e,t){return null!==e&&void 0!==e&&(0>e||e>=this.paths.length)||null!==t&&void 0!==e&&(0>t||t>=this.paths[e].length)?!1:!0},getPoint:function(e,t){return this._validateInputs(e,t)?new l(this.paths[e][t],this.spatialReference):void 0},setPoint:function(e,t,i){return this._validateInputs(e,t)?(this._extent=null,this.paths[e][t]=[i.x,i.y],this):void 0},insertPoint:function(e,t,i){return this._validateInputs(e)&&r.isDefined(t)&&t>=0&&t<=this.paths[e].length?(this._extent=null,this.paths[e].splice(t,0,[i.x,i.y]),this):void 0},removePath:function(e){if(this._validateInputs(e,null)){this._extent=null,e=this.paths.splice(e,1)[0];var t,i=e.length,n=this.spatialReference;for(t=0;i>t;t++)e[t]=new l(e[t],n);return e}},removePoint:function(e,t){return this._validateInputs(e,t)?(this._extent=null,new l(this.paths[e].splice(t,1)[0],this.spatialReference)):void 0},getExtent:function(){var e;if(this._extent)return e=new c(this._extent),e._partwise=this._partwise,e;e=this.paths;var t=e.length;if(t&&e[0].length){var i,n,s,r,o,a,l,h,d,u,f,p,m=r=e[0][0][0],_=o=e[0][0][1],g=Math.min,y=Math.max,v=this.spatialReference,b=[];for(a=0;t>a;a++){for(i=e[a],d=u=i[0]&&i[0][0],f=p=i[0]&&i[0][1],h=i.length,l=0;h>l;l++)n=i[l],s=n[0],n=n[1],m=g(m,s),_=g(_,n),r=y(r,s),o=y(o,n),d=g(d,s),f=g(f,n),u=y(u,s),p=y(p,n);b.push(new c({xmin:d,ymin:f,xmax:u,ymax:p,spatialReference:v?v.toJson():null}))}return this._extent={xmin:m,ymin:_,xmax:r,ymax:o,spatialReference:v?v.toJson():null},this._partwise=1<b.length?b:null,e=new c(this._extent),e._partwise=this._partwise,e}},toJson:function(){var e={paths:i.clone(this.paths)},t=this.spatialReference;return t&&(e.spatialReference=t.toJson()),e}}),e.defaultProps=h,n("extend-esri")&&(i.setObject("geometry.Polyline",e,s),s.geometry.defaultPolyline=h),e})},"esri/layers/agsdynamic":function(){define(["esri/layers/agscommon","esri/layers/ArcGISDynamicMapServiceLayer","esri/_time"],function(){return{}})},"esri/layers/graphics":function(){define(["esri/layers/GraphicsLayer","esri/graphic","esri/renderer"],function(){return{}})},"dojo/date":function(){define(["./has","./_base/lang"],function(e,t){var i={getDaysInMonth:function(e){var t=e.getMonth();return 1==t&&i.isLeapYear(e)?29:[31,28,31,30,31,30,31,31,30,31,30,31][t]},isLeapYear:function(e){return e=e.getFullYear(),!(e%400&&(e%4||!(e%100)))},getTimezoneName:function(e){var t=e.toString(),i="",n=t.indexOf("(");return n>-1?i=t.substring(++n,t.indexOf(")")):(n=/([A-Z\/]+) \d{4}$/,(t=t.match(n))?i=t[1]:(t=e.toLocaleString(),n=/ ([A-Z\/]+)$/,(t=t.match(n))&&(i=t[1]))),"AM"==i||"PM"==i?"":i},compare:function(e,t,i){return e=new Date(+e),t=new Date(+(t||new Date)),"date"==i?(e.setHours(0,0,0,0),t.setHours(0,0,0,0)):"time"==i&&(e.setFullYear(0,0,0),t.setFullYear(0,0,0)),e>t?1:t>e?-1:0},add:function(e,t,i){var n=new Date(+e),s=!1,r="Date";switch(t){case"day":break;case"weekday":var o;(t=i%5)?o=parseInt(i/5):(t=i>0?5:-5,o=i>0?(i-5)/5:(i+5)/5);var a=e.getDay(),l=0;6==a&&i>0?l=1:0==a&&0>i&&(l=-1),a+=t,(0==a||6==a)&&(l=i>0?2:-2),i=7*o+t+l;break;case"year":r="FullYear",s=!0;break;case"week":i*=7;break;case"quarter":i*=3;case"month":s=!0,r="Month";break;default:r="UTC"+t.charAt(0).toUpperCase()+t.substring(1)+"s"}return r&&n["set"+r](n["get"+r]()+i),s&&n.getDate()<e.getDate()&&n.setDate(0),n},difference:function(e,t,n){t=t||new Date,n=n||"day";var s=t.getFullYear()-e.getFullYear(),r=1;switch(n){case"quarter":e=e.getMonth(),t=t.getMonth(),e=Math.floor(e/3)+1,t=Math.floor(t/3)+1,r=t+4*s-e;break;case"weekday":if(s=Math.round(i.difference(e,t,"day")),n=parseInt(i.difference(e,t,"week")),r=s%7,0==r)s=5*n;else{var o=0,a=e.getDay();if(t=t.getDay(),n=parseInt(s/7),r=s%7,e=new Date(e),e.setDate(e.getDate()+7*n),e=e.getDay(),s>0)switch(!0){case 6==a:o=-1;break;case 0==a:o=0;break;case 6==t:o=-1;break;case 0==t:o=-2;break;case e+r>5:o=-2}else if(0>s)switch(!0){case 6==a:o=0;break;case 0==a:o=1;break;case 6==t:o=2;break;case 0==t:o=1;break;case 0>e+r:o=2}s=s+o-2*n}r=s;break;case"year":r=s;break;case"month":r=t.getMonth()-e.getMonth()+12*s;break;case"week":r=parseInt(i.difference(e,t,"day")/7);break;case"day":r/=24;case"hour":r/=60;case"minute":r/=60;case"second":r/=1e3;case"millisecond":r*=t.getTime()-e.getTime()}return Math.round(r)}};return t.mixin(t.getObject("dojo.date",!0),i),i})},"esri/symbols/SimpleLineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base esri/kernel esri/lang esri/symbols/LineSymbol".split(" "),function(e,t,i,n,s,r,o,a){var l={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dashdot",STYLE_DASHDOTDOT:"longdashdotdot",STYLE_NULL:"none",STYLE_SHORTDASH:"shortdash",STYLE_SHORTDOT:"shortdot",STYLE_SHORTDASHDOT:"shortdashdot",STYLE_SHORTDASHDOTDOT:"shortdashdotdot",STYLE_LONGDASH:"longdash",STYLE_LONGDASHDOT:"longdashdot"},c={color:[0,0,0,1],style:l.STYLE_SOLID,width:1};return e=e(a,{declaredClass:"esri.symbol.SimpleLineSymbol",type:"simplelinesymbol",_styles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot",dashdot:"esriSLSDashDot",longdashdotdot:"esriSLSDashDotDot",none:"esriSLSNull",insideframe:"esriSLSInsideFrame",shortdash:"esriSLSShortDash",shortdot:"esriSLSShortDot",shortdashdot:"esriSLSShortDashDot",shortdashdotdot:"esriSLSShortDashDotDot",longdash:"esriSLSLongDash",longdashdot:"esriSLSLongDashDot"},constructor:function(e,n,r){e?t.isString(e)?(this.style=e,n&&(this.color=n),r&&(this.width=r)):this.style=o.valueOf(this._styles,e.style)||l.STYLE_SOLID:(t.mixin(this,c),this.color=new i(this.color),this.width=s.pt2px(this.width))},setStyle:function(e){return this.style=e,this},getStroke:function(){return this.style===l.STYLE_NULL||0===this.width?null:{color:this.color,style:this.style,width:this.width}},getFill:function(){return null},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -15,0 L 15,0 E"},fill:null,stroke:this.getStroke()}},toJson:function(){return o.fixJson(t.mixin(this.inherited("toJson",arguments),{type:"esriSLS",style:this._styles[this.style]}))}}),t.mixin(e,l),e.defaultProps=c,n("extend-esri")&&(t.setObject("symbol.SimpleLineSymbol",e,r),r.symbol.defaultSimpleLineSymbol=c),e})},"esri/layers/OpenStreetMapLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has esri/kernel esri/urlUtils esri/SpatialReference esri/geometry/Extent esri/layers/TiledMapServiceLayer esri/layers/TileInfo".split(" "),function(e,t,i,n,s,r,o,a,l){return e=e(a,{declaredClass:"esri.layers.OpenStreetMapLayer",constructor:function(e){this.spatialReference=new r({wkid:102100}),this.tileInfo=new l({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-20037508.342787,y:20037508.342787},spatialReference:{wkid:102100},lods:[{level:0,scale:591657527.591555,resolution:156543.033928},{level:1,scale:295828763.795777,resolution:78271.5169639999},{level:2,scale:147914381.897889,resolution:39135.7584820001},{level:3,scale:73957190.948944,resolution:19567.8792409999},{level:4,scale:36978595.474472,resolution:9783.93962049996},{level:5,scale:18489297.737236,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:.597164283559817}]}),this.fullExtent=new o({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}}),this.initialExtent=new o({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}}),this.tileServers=e&&e.tileServers||["http://a.tile.openstreetmap.org","http://b.tile.openstreetmap.org","http://c.tile.openstreetmap.org"],this.serversLength=this.tileServers.length,this._displayLevels=e?e.displayLevels:null,this.copyright=e&&e.copyright||"Map data &copy; OpenStreetMap contributors, CC-BY-SA",this.loaded=!0,this.onLoad(this),(e=e&&e.loadCallback)&&e(this)},getTileUrl:function(e,t,i){return e=this.tileServers[t%this.serversLength]+"/"+e+"/"+i+"/"+t+".png",e=this.addTimestampToURL(e),s.addProxy(e)}}),i("extend-esri")&&t.setObject("layers.OpenStreetMapLayer",e,n),e})},"esri/geometry/Rect":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base esri/kernel esri/SpatialReference esri/geometry/Geometry esri/geometry/Point esri/geometry/Extent".split(" "),function(e,t,i,n,s,r,o,a,l){function c(e){return new l(parseFloat(e.x),parseFloat(e.y)-parseFloat(e.height),parseFloat(e.x)+parseFloat(e.width),parseFloat(e.y),e.spatialReference)}var h=e(o,{declaredClass:"esri.geometry.Rect",constructor:function(e,i,s,o,a){t.mixin(this,n.defaultRect),t.isObject(e)&&"extent"===e.type&&(i=e.ymax,s=e.getWidth(),o=e.getHeight(),a=e.spatialReference,e=e.xmin),t.isObject(e)?(t.mixin(this,e),this.spatialReference&&(this.spatialReference=new r(this.spatialReference))):(this.x=e,this.y=i,this.width=s,this.height=o,this.spatialReference=a),this.verifySR()},getCenter:function(){return new a(this.x+this.width/2,this.y+this.height/2,this.spatialReference)},offset:function(e,t){return new h(this.x+e,this.y+t,this.width,this.height,this.spatialReference)},intersects:function(e){return e.x+e.width<=this.x||e.y+e.height<=this.y||e.y>=this.y+this.height||e.x>=this.x+this.width?!1:!0},getExtent:function(){return c(this)},update:function(e,t,i,n,s){return this.x=e,this.y=t,this.width=i,this.height=n,this.spatialReference=s,this}});return i("extend-esri")&&(t.setObject("geometry.Rect",h,s),s.geometry._rectToExtent=c,s.geometry._extentToRect=function(e){return new h(e)}),h})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(e,t,i){return i("dijit.Destroyable",null,{destroy:function(){this._destroyed=!0},own:function(){return e.forEach(arguments,function(e){var i="destroyRecursive"in e?"destroyRecursive":"destroy"in e?"destroy":"remove",n=t.before(this,"destroy",function(t){e[i](t)}),s=t.after(e,i,function(){n.remove(),s.remove()},!0)},this),arguments}})})},"esri/MapNavigationManager":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/event dojo/mouse dojo/keys esri/kernel esri/MouseEvents esri/TouchEvents esri/PointerEvents esri/config esri/sniff esri/lang esri/fx esri/graphic esri/tileUtils esri/geometry/ScreenPoint esri/geometry/Extent esri/geometry/Rect esri/geometry/mathUtils esri/symbols/SimpleFillSymbol".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p,m,_,g,y,v,b,x){var w=n.connect,S=n.disconnect,T=[o.NUMPAD_PLUS,61,o.NUMPAD_MINUS,o.UP_ARROW,o.NUMPAD_8,o.RIGHT_ARROW,o.NUMPAD_6,o.DOWN_ARROW,o.NUMPAD_2,o.LEFT_ARROW,o.NUMPAD_4,o.PAGE_UP,o.NUMPAD_9,o.PAGE_DOWN,o.NUMPAD_3,o.END,o.NUMPAD_1,o.HOME,o.NUMPAD_7];return e=e(null,{declaredClass:"esri.MapNavigationManager",eventModel:"",constructor:function(e,i){this.map=e,t.mixin(this,i);var n=e.__container;u("esri-pointer")?(this.pointerEvents=new h(n,{map:e}),this.eventModel="pointer"):u("esri-touch")?(this.touchEvents=new c(n,{map:e}),this.eventModel="touch",u("ios")||(this.mouseEvents=new l(n,{map:e}))):(this.mouseEvents=new l(n,{map:e}),this.eventModel="mouse"),this._zoomRect=new m(null,new x(d.defaults.map.zoomSymbol)),this._keyDx=this._keyDy=0,this._adjustPinch=t.hitch(this,this._adjustPinch),this._adjustPinchEnd=t.hitch(this,this._adjustPinchEnd)},_panInit:function(e){var i=this.mouseEvents;r.isLeft(e)&&this.map.isPan&&!e.shiftKey&&(this._dragOrigin=new g(0,0),t.mixin(this._dragOrigin,e.screenPoint),this._panStartHandle=w(i,"onMouseDragStart",this,this._panStart),this._panHandle=w(i,"onMouseDrag",this,this._pan),this._panEndHandle=w(i,"onMouseUp",this,this._panEnd),u("chrome")&&e.preventDefault())},_panStart:function(e){this.map.setCursor("move"),this.map.__panStart(e.screenPoint.x,e.screenPoint.y)},_pan:function(e){this.map.__pan(e.screenPoint.x-this._dragOrigin.x,e.screenPoint.y-this._dragOrigin.y)},_panEnd:function(e){S(this._panStartHandle),S(this._panHandle),S(this._panEndHandle),this._panStartHandle=this._panHandle=this._panEndHandle=null;var t=this.map;t.__panning&&(t.__panEnd(e.screenPoint.x-this._dragOrigin.x,e.screenPoint.y-this._dragOrigin.y),t.resetMapCursor())},_zoomInit:function(e){var i=this.map,n=this.pointerEvents||this.mouseEvents;(r.isLeft(e)||e.pointerType)&&i.isRubberBandZoom&&e.shiftKey&&(i.setCursor("crosshair"),this._dragOrigin=t.mixin({},e.screenPoint),this._zoomDir=e.ctrlKey||e.metaKey?-1:1,this.pointerEvents?(this._zoomHandle=w(n,"onSwipeMove",this,this._zoom),this._zoomEndHandle=w(n,"onSwipeEnd",this,this._zoomEnd)):(this._zoomHandle=w(n,"onMouseDrag",this,this._zoom),this._zoomEndHandle=w(n,"onMouseUp",this,this._zoomEnd)),u("chrome")&&e.preventDefault())},_zoom:function(e){var t=this.map,i=this._normalizeRect(e).offset(t.__visibleRect.x,t.__visibleRect.y);e=t.graphics;var n=this._zoomRect;n.geometry||t.setCursor("crosshair"),n.geometry&&e.remove(n,!0);var s=t.toMap(new g(i.x,i.y)),i=t.toMap(new g(i.x+i.width,i.y+i.height)),i=new v(s.x,s.y,i.x-s.x,s.y-i.y,t.spatialReference);i._originOnly=!0,n.setGeometry(i),e.add(n,!0)},_zoomEnd:function(e){var t=this._zoomRect,i=this.map,n=i.extent,s=i.spatialReference;if(S(this._zoomHandle),S(this._zoomEndHandle),this._zoomHandle=this._zoomEndHandle=null,i._canZoom(this._zoomDir)&&t.getDojoShape()){if(i.graphics.remove(t),t.geometry=null,e=this._normalizeRect(e),e.x+=i.__visibleRect.x,e.y+=i.__visibleRect.y,-1===this._zoomDir){var r=n.getWidth();e=(r*i.width/e.width-r)/2,s=new y(n.xmin-e,n.ymin-e,n.xmax+e,n.ymax+e,s)}else n=i.toMap({x:e.x,y:e.y+e.height}),e=i.toMap({x:e.x+e.width,y:e.y}),s=new y(n.x,n.y,e.x,e.y,s);i._extentUtil(null,null,s)}t.getDojoShape()&&i.graphics.remove(t,!0),this._zoomDir=0,i.resetMapCursor()},_wheelZoom:function(e,t){var i=this.map;if(!t){if(i.smartNavigation&&!e.shiftKey&&!i._isPanningOrZooming())return i.disableScrollWheelZoom(),this._setScrollWheelPan(!0),this._wheelPan(e),void 0;var n=e.timeStamp;if((!f.isDefined(n)||0>=n)&&(n=(new Date).getTime()),100>(this._mwts?n-this._mwts:n))return;this._mwts=n}i._canZoom(e.value)&&i._extentUtil({numLevels:e.value,mapAnchor:e.mapPoint,screenAnchor:e.screenPoint})},_wheelPan:function(e){var t=this.map;if(e.shiftKey&&!t._isPanningOrZooming())this._setScrollWheelPan(!1),t.enableScrollWheelZoom(),this._wheelZoom(e);else{var i=0,n=0;u("ff")?e.axis===e.HORIZONTAL_AXIS?i=-e.detail:n=-e.detail:(i=e.wheelDeltaX,n=e.wheelDeltaY),t.translate(i,n)}},_setScrollWheelPan:function(e){this.map.isScrollWheelPan=e,this.mouseEvents.enableMouseWheel(e),S(this._mwMacHandle),this._mwMacHandle=null,e&&(this._mwMacHandle=w(this.mouseEvents,"onMouseWheel",this,this._wheelPan))},_recenter:function(e){e.shiftKey&&!this.map._isPanningOrZooming()&&this.map.centerAt(e.mapPoint)},_recenterZoom:function(e){e.shiftKey&&!this.map._isPanningOrZooming()&&(e.value=e.ctrlKey||e.metaKey?-1:1,this._wheelZoom(e,!0))},_dblClickZoom:function(e){this.map._isPanningOrZooming()||(e.value=1,this._wheelZoom(e,!0))},_twoFingerTap:function(e){this.map._isPanningOrZooming()||(e.value=-1,this._wheelZoom(e,!0))},_keyDown:function(e){var t=e.keyCode,n=this.map;if(-1!==i.indexOf(T,t)){if(t===o.NUMPAD_PLUS||61===t)n._extentUtil({numLevels:1});else if(t===o.NUMPAD_MINUS)n._extentUtil({numLevels:-1});else{switch(n.__panning||n.__panStart(0,0),t){case o.UP_ARROW:case o.NUMPAD_8:this._keyDy+=10;break;case o.RIGHT_ARROW:case o.NUMPAD_6:this._keyDx-=10;break;case o.DOWN_ARROW:case o.NUMPAD_2:this._keyDy-=10;break;case o.LEFT_ARROW:case o.NUMPAD_4:this._keyDx+=10;break;case o.PAGE_UP:case o.NUMPAD_9:this._keyDx-=10,this._keyDy+=10;break;case o.PAGE_DOWN:case o.NUMPAD_3:this._keyDx-=10,this._keyDy-=10;break;case o.END:case o.NUMPAD_1:this._keyDx+=10,this._keyDy-=10;break;case o.HOME:case o.NUMPAD_7:this._keyDx+=10,this._keyDy+=10;break;default:return}n.__pan(this._keyDx,this._keyDy)}s.stop(e)}},_keyEnd:function(e){var t=this.map;t.__panning&&e.keyCode!==o.SHIFT&&(t.__panEnd(this._keyDx,this._keyDy),this._keyDx=this._keyDy=0)},_swipeInit:function(e){var i=this.map,i=i._zoomAnim||i._panAnim;return e.shiftKey?!1:(i&&i._active&&(i.stop(),i._fire("onEnd",[i.node])),this._dragOrigin=new g(0,0),t.mixin(this._dragOrigin,e.screenPoint),S(this._swipeHandle),S(this._swipeEndHandle),this._swipeHandle=w(this.touchEvents||this.pointerEvents,"onSwipeMove",this,this._swipe),this._swipeEndHandle=w(this.touchEvents||this.pointerEvents,"onSwipeEnd",this,this._swipeEnd),void 0)},_swipe:function(e){var t=this.map;t.__panning?(this._panX=e.screenPoint.x,this._panY=e.screenPoint.y,t.__pan(e.screenPoint.x-this._dragOrigin.x,e.screenPoint.y-this._dragOrigin.y)):(t.setCursor("move"),t.__panStart(e.screenPoint.x,e.screenPoint.y))},_swipeEnd:function(e){S(this._swipeHandle),S(this._swipeEndHandle),this._swipeHandle=this._swipeEndHandle=null;var t=this.map;t.__panning&&(t.resetMapCursor(),t.__panEnd(e.screenPoint.x-this._dragOrigin.x,e.screenPoint.y-this._dragOrigin.y))},_pinchInit:function(e){var t=this.map,i=t._zoomAnim||t._panAnim;i&&i._active?(i.stop(),i._fire("onEnd",[i.node])):t.__panning&&(e.screenPoint=new g(this._panX,this._panY),e.mapPoint=t.toMap(e.screenPoint),this._swipeEnd(e)),S(this._pinchHandle),S(this._pinchEndHandle),this._pinchHandle=w(this.touchEvents||this.pointerEvents,"onPinchMove",this,this._pinch),this._pinchEndHandle=w(this.touchEvents||this.pointerEvents,"onPinchEnd",this,this._pinchEnd)},_pinch:function(e){var t=this.map;e.screenPoints&&(this.currLength=b.getLength(e.screenPoints[0],e.screenPoints[1]),t.__zooming?(e=this.currLength/this._length,this._zoomStartExtent=this.__scaleExtent(t.extent,e,this._dragOrigin),t.__zoom(this._zoomStartExtent,e,this._dragOrigin)):(this._dragOrigin=new g((e.screenPoints[0].x+e.screenPoints[1].x)/2,(e.screenPoints[0].y+e.screenPoints[1].y)/2),this._length=this.currLength,t.__zoomStart(t.extent,this._dragOrigin)),t._fireOnScale(this.currLength/this._length,this._dragOrigin,!0))},_pinchEnd:function(e){if(e=this.map,S(this._pinchHandle),S(this._pinchEndHandle),this._pinchHandle=this._pinchEndHandle=null,e.__zooming&&null===e._zoomAnim){var t=this.currLength/this._length,i=e.extent.getWidth();if(this._zoomAnimAnchor=e.toMap(this._dragOrigin),this._zoomStartExtent=this.__scaleExtent(e.extent,1/t,this._zoomAnimAnchor),e.__tileInfo){var n=_.getCandidateTileInfo(e,e.__tileInfo,this._zoomStartExtent),s=e.__getExtentForLevel(n.lod.level,this._zoomAnimAnchor),r=e.getMinZoom(),o=e.getMaxZoom(),a=s.extent,s=s.lod,l=i/a.getWidth(),c=n.lod.level;1>t?l>t&&c--:t>l&&c++,r>c?c=r:c>o&&(c=o),c!==n.lod.level&&(s=e.__getExtentForLevel(c,this._zoomAnimAnchor),a=s.extent,s=s.lod),this._zoomEndExtent=a,this._zoomEndLod=s,e._zoomAnim=p.animateRange({range:{start:i/this._zoomStartExtent.getWidth(),end:l},duration:d.defaults.map.zoomDuration,rate:d.defaults.map.zoomRate,onAnimate:this._adjustPinch,onEnd:this._adjustPinchEnd}),e._zoomAnim.play(),e._fireOnScale(e.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin)}else this._zoomEndExtent=this._zoomStartExtent,e._fireOnScale(e.extent.getWidth()/this._zoomEndExtent.getWidth(),this._dragOrigin),this._adjustPinchEnd()}},_adjustPinch:function(e){var t=this.__scaleExtent(this.map.extent,e,this._zoomAnimAnchor);this.map.__zoom(t,e,this._dragOrigin)},_adjustPinchEnd:function(){var e=this.map,t=e.extent.getWidth()/this._zoomEndExtent.getWidth(),i=this.__scaleExtent(e.extent,1/t,this._zoomAnimAnchor),n=this._dragOrigin,s=this._zoomEndLod;this._zoomStartExtent=this._zoomEndExtent=this._zoomEndLod=this._dragOrigin=e._zoomAnim=this._zoomAnimAnchor=null,e.__zoomEnd(i,t,n,s,!0)},__scaleExtent:function(e,t,i){i=i||e.getCenter(),t=e.expand(t);var n=e.xmin-(t.getWidth()-e.getWidth())*(i.x-e.xmin)/e.getWidth();return i=e.ymax-(t.getHeight()-e.getHeight())*(i.y-e.ymax)/e.getHeight(),new y(n,i-t.getHeight(),n+t.getWidth(),i,e.spatialReference)},_normalizeRect:function(e){e=e.screenPoint;var t=this._dragOrigin.x,i=this._dragOrigin.y;return e=new v((e.x<t?e.x:t)-this.map.__visibleRect.x,(e.y<i?e.y:i)-this.map.__visibleRect.y,Math.abs(e.x-t),Math.abs(e.y-i)),delete e.spatialReference,0===e.width&&(e.width=1),0===e.height&&(e.height=1),e},setImmediateClick:function(e){switch(this.eventModel){case"mouse":this.mouseEvents.setImmediateClick(e);break;case"touch":case"pointer":(this.touchEvents||this.pointerEvents).setImmediateTap(e)
}},enablePan:function(){switch(this.disablePan(),this.eventModel){case"mouse":this._panInitHandle=w(this.mouseEvents,"onMouseDown",this,this._panInit);break;case"touch":this._panInitHandle=w(this.mouseEvents,"onMouseDown",this,this._panInit),this._swipeInitHandle=w(this.touchEvents,"onSwipeStart",this,this._swipeInit);break;case"pointer":this._swipeInitHandle=w(this.pointerEvents,"onSwipeStart",this,this._swipeInit)}},disablePan:function(){S(this._panInitHandle),this._panInitHandle=null,S(this._swipeInitHandle),this._swipeInitHandle=null},enableRubberBandZoom:function(){this.disableRubberBandZoom(),this._zoomInitHandle=this.pointerEvents?w(this.pointerEvents,"onSwipeStart",this,this._zoomInit):w(this.mouseEvents,"onMouseDown",this,this._zoomInit)},disableRubberBandZoom:function(){S(this._zoomInitHandle),this._zoomInitHandle=null},enablePinchZoom:function(){this.disablePinchZoom(),("touch"===this.eventModel||"pointer"===this.eventModel)&&(this._pinchInitHandle=w(this.touchEvents||this.pointerEvents,"onPinchStart",this,this._pinchInit))},disablePinchZoom:function(){S(this._pinchInitHandle),this._pinchInitHandle=null},enableScrollWheelZoom:function(){this.disableScrollWheelZoom(),this._wheelHandle=w(this.mouseEvents||this.pointerEvents,"onMouseWheel",this,this._wheelZoom)},disableScrollWheelZoom:function(){S(this._wheelHandle),this._wheelHandle=null},enableDoubleClickZoom:function(){switch(this.disableDoubleClickZoom(),this.eventModel){case"mouse":this._dblClickHandle=w(this.mouseEvents,"onDblClick",this,this._dblClickZoom);break;case"touch":this._dblClickHandle=w(this.mouseEvents,"onDblClick",this,this._dblClickZoom),this._dblTapHandle=w(this.touchEvents,"onDoubleTap",this,this._dblClickZoom),this._zoomOutHandle=w(this.touchEvents,"onTwoFingerTap",this,this._twoFingerTap);break;case"pointer":this._dblTapHandle=w(this.pointerEvents,"onDoubleTap",this,this._dblClickZoom),this._zoomOutHandle=w(this.pointerEvents,"onTwoFingerTap",this,this._twoFingerTap)}},disableDoubleClickZoom:function(){S(this._dblClickHandle),S(this._zoomOutHandle),this._dblTapHandle&&S(this._dblTapHandle),this._dblClickHandle=this._zoomOutHandle=this._dblTapHandle=null},enableShiftDoubleClickZoom:function(){this.disableShiftDoubleClickZoom(),this._sDblClickHandle=w(this.pointerEvents||this.mouseEvents,"onDblClick",this,this._recenterZoom)},disableShiftDoubleClickZoom:function(){S(this._sDblClickHandle),this._sDblClickHandle=null},enableClickRecenter:function(){this.disableClickRecenter(),this._recenterHandle=w(this.pointerEvents||this.mouseEvents,"onClick",this,this._recenter)},disableClickRecenter:function(){S(this._recenterHandle),this._recenterHandle=null},enableKeyboardNavigation:function(){this.disableKeyboardNavigation(),this._keyHandle=w(this.pointerEvents||this.mouseEvents,"onKeyDown",this,this._keyDown),this._keyEndHandle=w(this.pointerEvents||this.mouseEvents,"onKeyUp",this,this._keyEnd)},disableKeyboardNavigation:function(){S(this._keyHandle),S(this._keyEndHandle),this._keyHandle=this._keyEndHandle=null},enableNavigation:function(){var e=this.map;e&&e.loaded&&(e.enableDoubleClickZoom(),e.enableClickRecenter(),e.enablePan(),e.enableRubberBandZoom(),this.enablePinchZoom(),e.enableKeyboardNavigation(),e.smartNavigation?this._setScrollWheelPan(!0):e.enableScrollWheelZoom())},disableNavigation:function(){var e=this.map;e&&e.loaded&&(e.disableDoubleClickZoom(),e.disableClickRecenter(),e.disablePan(),e.disableRubberBandZoom(),this.disablePinchZoom(),e.disableKeyboardNavigation(),e.disableScrollWheelZoom(),e.smartNavigation&&this._setScrollWheelPan(!1))},destroy:function(){this.touchEvents&&this.touchEvents.destroy(),this.mouseEvents&&this.mouseEvents.destroy(),this.pointerEvents&&this.pointerEvents.destroy();var e,t=[this._panInitHandle,this._panStartHandle,this._panHandle,this._panEndHandle,this._zoomInitHandle,this._zoomHandle,this._zoomEndHandle,this._wheelHandle,this._mwMacHandle,this._dblClickHandle,this._zoomOutHandle,this._recenterHandle,this._sDblClickHandle,this._dblTapHandle,this._keyHandle,this._keyEndHandle,this._swipeInitHandle,this._swipeHandle,this._swipeEndHandle,this._pinchInitHandle,this._pinchHandle,this._pinchEndHandle];for(e=0;e<t.length;e++)S(t[e]);this.map=this.touchEvents=this.mouseEvents=this.eventModel=this.pointerEvents=this._zoomRect=this._dragOrigin=this._panInitHandle=this._panStartHandle=this._panHandle=this._panEndHandle=this._zoomInitHandle=this._zoomHandle=this._zoomEndHandle=this._wheelHandle=this._mwMacHandle=this._dblClickHandle=this._zoomOutHandle=this._recenterHandle=this._sDblClickHandle=this._dblTapHandle=this._keyHandle=this._keyEndHandle=this._swipeInitHandle=this._swipeHandle=this._swipeEndHandle=this._pinchInitHandle=this._pinchHandle=this._pinchEndHandle=null}}),u("extend-esri")&&(a.MapNavigationManager=e),e})},"dijit/WidgetSet":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/_base/kernel","./registry"],function(e,t,i,n){var s=t("dijit.WidgetSet",null,{constructor:function(){this._hash={},this.length=0},add:function(e){if(this._hash[e.id])throw Error("Tried to register widget with id=="+e.id+" but that id is already registered");this._hash[e.id]=e,this.length++},remove:function(e){this._hash[e]&&(delete this._hash[e],this.length--)},forEach:function(e,t){t=t||i.global;var n,s=0;for(n in this._hash)e.call(t,this._hash[n],s++,this._hash);return this},filter:function(e,t){t=t||i.global;var n,r=new s,o=0;for(n in this._hash){var a=this._hash[n];e.call(t,a,o++,this._hash)&&r.add(a)}return r},byId:function(e){return this._hash[e]},byClass:function(e){var t,i,n=new s;for(t in this._hash)i=this._hash[t],i.declaredClass==e&&n.add(i);return n},toArray:function(){var e,t=[];for(e in this._hash)t.push(this._hash[e]);return t},map:function(t,i){return e.map(this.toArray(),t,i)},every:function(e,t){t=t||i.global;var n,s=0;for(n in this._hash)if(!e.call(t,this._hash[n],s++,this._hash))return!1;return!0},some:function(e,t){t=t||i.global;var n,s=0;for(n in this._hash)if(e.call(t,this._hash[n],s++,this._hash))return!0;return!1}});return e.forEach("forEach filter byClass map every some".split(" "),function(e){n[e]=s.prototype[e]}),s})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query dojo/sniff ../registry ../Viewport ./utils".split(" "),function(e,t,i,n,s,r,o,a,l,c,h){return t("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var e=this.getParent();this._childOfLayoutWidget=e&&e.isLayoutContainer,this._needLayout=!this._childOfLayoutWidget,this.inherited(arguments),this._isShown()&&this._onShow(),this._childOfLayoutWidget||this.own(c.on("resize",r.hitch(this,"resize")))}},_checkIfSingleChild:function(){var e=[],t=!1;o("> *",this.containerNode).some(function(i){var n=l.byNode(i);n&&n.resize?e.push(n):!/script|link|style/i.test(i.nodeName)&&i.offsetHeight&&(t=!0)}),this._singleChild=1!=e.length||t?null:e[0],i.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)},resize:function(e,t){this._resizeCalled=!0,this._scheduleLayout(e,t)},_scheduleLayout:function(e,t){this._isShown()?this._layout(e,t):(this._needLayout=!0,this._changeSize=e,this._resultSize=t)},_layout:function(e,t){delete this._needLayout,!this._wasShown&&!1!==this.open&&this._onShow(),e&&n.setMarginBox(this.domNode,e);var i=this.containerNode;if(i===this.domNode){var s=t||{};r.mixin(s,e||{}),"h"in s&&"w"in s||(s=r.mixin(n.getMarginBox(i),s)),this._contentBox=h.marginBox2contentBox(i,s)}else this._contentBox=n.getContentBox(i);this._layoutChildren()},_layoutChildren:function(){if(this.doLayout&&this._checkIfSingleChild(),this._singleChild&&this._singleChild.resize){var e=this._contentBox||n.getContentBox(this.containerNode);this._singleChild.resize({w:e.w,h:e.h})}else for(var t,e=this.getChildren(),i=0;t=e[i++];)t.resize&&t.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var e=this.domNode,t=this.domNode.parentNode;return"none"!=e.style.display&&"hidden"!=e.style.visibility&&!i.contains(e,"dijitHidden")&&t&&t.style&&"none"!=t.style.display},_onShow:function(){this._wasShown=!0,this._needLayout&&this._layout(this._changeSize,this._resultSize),this.inherited(arguments)}})})},"esri/virtualearth/VEGeocoder":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/has esri/kernel esri/urlUtils esri/tasks/Task esri/virtualearth/VEGeocodeResult esri/deferredUtils esri/request".split(" "),function(e,t,i,n,s,r,o,a,l,c,h){return e=e(a,{declaredClass:"esri.virtualearth.VEGeocoder",constructor:function(e){try{e=t.mixin({bingMapsKey:null},e||{});var i=window.location.protocol;if("file:"===i&&(i="http:"),this.url=i+"//serverapi.arcgisonline.com/veadaptor/production/services/geocode/geocode",this._url=o.urlToObject(this.url),this._queue=[],this.bingMapsKey=e.bingMapsKey,this.culture=e.culture||"en-US",this._errorHandler=t.hitch(this,this._errorHandler),this._addressToLocationsHandler=t.hitch(this,this._addressToLocationsHandler),!this.bingMapsKey)throw Error("BingMapsKey must be provided.")}catch(n){throw this.onError(n),n}},addressToLocations:function(e,i,s){if(this.bingMapsKey){var r=t.mixin({},this._url.query,{query:e,token:this.bingMapsKey,culture:this.culture}),o=this._addressToLocationsHandler,a=this._errorHandler,l=new n(c._dfdCanceller);return l._pendingDfd=h({url:this._url.path,content:r,callbackParamName:"callback",load:function(e,t){o(e,t,i,s,l)},error:function(e){a(e,s,l)}}),l}console.debug("Server token not retrieved. Queing request to be executed after server token retrieved."),this._queue.push(arguments)},_addressToLocationsHandler:function(e,t,n,s,r){try{i.forEach(e,function(t,i){e[i]=new l(t)}),this._successHandler([e],"onAddressToLocationsComplete",n,r)}catch(o){this._errorHandler(o,s,r)}},onAddressToLocationsComplete:function(){},setBingMapsKey:function(e){this.bingMapsKey=e},setCulture:function(e){this.culture=e}}),s("extend-esri")&&t.setObject("virtualearth.VEGeocoder",e,r),e})},"esri/tasks/AreasAndLengthsParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has esri/kernel".split(" "),function(e,t,i,n,s,r){return e=e(null,{declaredClass:"esri.tasks.AreasAndLengthsParameters",polygons:null,lengthUnit:null,areaUnit:null,calculationType:null,toJson:function(){var e=i.map(this.polygons,function(e){return e.toJson()}),s={};return s.polygons=n.toJson(e),e=this.polygons[0].spatialReference,s.sr=e.wkid?e.wkid:n.toJson(e.toJson()),this.lengthUnit&&(s.lengthUnit=this.lengthUnit),this.areaUnit&&(s.areaUnit=t.isString(this.areaUnit)?n.toJson({areaUnit:this.areaUnit}):this.areaUnit),this.calculationType&&(s.calculationType=this.calculationType),s}}),s("extend-esri")&&t.setObject("tasks.AreasAndLengthsParameters",e,r),e})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d){return t("dojo.dnd.Moveable",[r],{handle:"",delay:0,skip:!1,constructor:function(e,t){this.node=n.byId(e),t||(t={}),this.handle=t.handle?n.byId(t.handle):null,this.handle||(this.handle=this.node),this.delay=0<t.delay?t.delay:0,this.skip=t.skip,this.mover=t.mover?t.mover:h,this.events=[o(this.handle,l.press,i.hitch(this,"onMouseDown")),o(this.handle,"dragstart",i.hitch(this,"onSelectStart")),o(this.handle,"selectstart",i.hitch(this,"onSelectStart"))]},markupFactory:function(e,t,i){return new i(t,e)},destroy:function(){e.forEach(this.events,function(e){e.remove()}),this.events=this.node=this.handle=null},onMouseDown:function(e){this.skip&&c.isFormElement(e)||(this.delay?(this.events.push(o(this.handle,l.move,i.hitch(this,"onMouseMove")),o(this.handle,l.release,i.hitch(this,"onMouseUp"))),this._lastX=e.pageX,this._lastY=e.pageY):this.onDragDetected(e),e.stopPropagation(),e.preventDefault())},onMouseMove:function(e){(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay)&&(this.onMouseUp(e),this.onDragDetected(e)),e.stopPropagation(),e.preventDefault()},onMouseUp:function(e){for(var t=0;2>t;++t)this.events.pop().remove();e.stopPropagation(),e.preventDefault()},onSelectStart:function(e){this.skip&&c.isFormElement(e)||(e.stopPropagation(),e.preventDefault())},onDragDetected:function(e){new this.mover(this.node,e,this)},onMoveStart:function(e){a.publish("/dnd/move/start",e),s.add(d.body(),"dojoMove"),s.add(this.node,"dojoMoveItem")},onMoveStop:function(e){a.publish("/dnd/move/stop",e),s.remove(d.body(),"dojoMove"),s.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(e,t){this.onMoving(e,t);var i=e.node.style;i.left=t.l+"px",i.top=t.t+"px",this.onMoved(e,t)},onMoving:function(){},onMoved:function(){}})})},"esri/tasks/NATypes":function(){define(["dojo/_base/lang","dojo/has","esri/kernel"],function(e,t,i){var n={esriFeet:"esriNAUFeet",esriKilometers:"esriNAUKilometers",esriMeters:"esriNAUMeters",esriMiles:"esriNAUMiles",esriNauticalMiles:"esriNAUNauticalMiles",esriYards:"esriNAUYards"},s={NONE:"esriNAOutputLineNone",STRAIGHT:"esriNAOutputLineStraight",TRUE_SHAPE:"esriNAOutputLineTrueShape",TRUE_SHAPE_WITH_MEASURE:"esriNAOutputLineTrueShapeWithMeasure"},r={ALLOW_BACKTRACK:"esriNFSBAllowBacktrack",AT_DEAD_ENDS_ONLY:"esriNFSBAtDeadEndsOnly",NO_BACKTRACK:"esriNFSBNoBacktrack",AT_DEAD_ENDS_AND_INTERSECTIONS:"esriNFSBAtDeadEndsAndIntersections"},o={NONE:"esriNAOutputPolygonNone",SIMPLIFIED:"esriNAOutputPolygonSimplified",DETAILED:"esriNAOutputPolygonDetailed"},a={FROM_FACILITY:"esriNATravelDirectionFromFacility",TO_FACILITY:"esriNATravelDirectionToFacility"},l={LengthUnit:n,OutputLine:s,UTurn:r,OutputPolygon:o,TravelDirection:a};return t("extend-esri")&&(e.setObject("tasks._NALengthUnit",n,i),e.setObject("tasks.NAOutputLine",s,i),e.setObject("tasks.NAUTurn",r,i),e.setObject("tasks.NAOutputPolygon",o,i),e.setObject("tasks.NATravelDirection",a,i)),l})},"dijit/TooltipDialog":function(){define("dojo/_base/declare dojo/dom-class dojo/has dojo/keys dojo/_base/lang dojo/on ./focus ./layout/ContentPane ./_DialogMixin ./form/_FormMixin ./_TemplatedMixin dojo/text!./templates/TooltipDialog.html ./main".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d){return e=e("dijit.TooltipDialog",[a,h,c,l],{title:"",doLayout:!1,autofocus:!0,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:d,_setTitleAttr:"containerNode",postCreate:function(){this.inherited(arguments),this.own(r(this.containerNode,"keydown",s.hitch(this,"_onKey")))},orient:function(e,i,n){e={"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft","BR-TL":"dijitTooltipBelow dijitTooltipABLeft","BL-TR":"dijitTooltipBelow dijitTooltipABRight","TL-BR":"dijitTooltipAbove dijitTooltipABRight","TR-BL":"dijitTooltipAbove dijitTooltipABLeft"}[i+"-"+n],t.replace(this.domNode,e,this._currentOrientClass||""),this._currentOrientClass=e},focus:function(){this._getFocusItems(this.containerNode),o.focus(this._firstFocusItem)},onOpen:function(e){this.orient(this.domNode,e.aroundCorner,e.corner);var t=e.aroundNodePos;"M"==e.corner.charAt(0)&&"M"==e.aroundCorner.charAt(0)?(this.connectorNode.style.top=t.y+(t.h-this.connectorNode.offsetHeight>>1)-e.y+"px",this.connectorNode.style.left=""):"M"==e.corner.charAt(1)&&"M"==e.aroundCorner.charAt(1)&&(this.connectorNode.style.left=t.x+(t.w-this.connectorNode.offsetWidth>>1)-e.x+"px"),this._onShow()},onClose:function(){this.onHide()},_onKey:function(e){if(e.keyCode==n.ESCAPE)this.defer("onCancel"),e.stopPropagation(),e.preventDefault();else if(e.keyCode==n.TAB){var t=e.target;this._getFocusItems(this.containerNode),this._firstFocusItem==this._lastFocusItem?(e.stopPropagation(),e.preventDefault()):t==this._firstFocusItem&&e.shiftKey?(o.focus(this._lastFocusItem),e.stopPropagation(),e.preventDefault()):t!=this._lastFocusItem||e.shiftKey?e.stopPropagation():(o.focus(this._firstFocusItem),e.stopPropagation(),e.preventDefault())}}}),i("dojo-bidi")&&e.extend({_setTitleAttr:function(e){this.containerNode.title=this.textDir&&this.enforceTextDirWithUcc?this.enforceTextDirWithUcc(null,e):e,this._set("title",e)},_setTextDirAttr:function(e){this._created&&this.textDir==e||(this._set("textDir",e),this.textDir&&this.title&&(this.containerNode.title=this.enforceTextDirWithUcc(null,this.title)))}}),e})},"esri/renderers/TimeRampAger":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has esri/kernel esri/symbols/jsonUtils esri/renderers/SymbolAger".split(" "),function(e,t,i,n,s,r,o){return e=e(o,{declaredClass:"esri.renderer.TimeRampAger",constructor:function(e,t,i){this.colorRange=e,this.sizeRange=t,this.alphaRange=i},getAgedSymbol:function(e,t){var n=t.getLayer(),s=t.attributes;e=r.fromJson(e.toJson());var o=n._map.timeExtent,a=o.startTime,o=o.endTime;if(!a||!o)return e;if(a=a.getTime(),o=o.getTime(),n=new Date(s[n._startTimeField]),n=n.getTime(),a>n&&(n=a),a=o===a?1:(n-a)/(o-a),(n=this.sizeRange)&&(s=n[0],o=n[1],n=Math.abs(o-s)*a,this._setSymbolSize(e,o>s?s+n:s-n)),n=this.colorRange){var o=n[0],l=n[1],c=Math.round,s=new i,h=o.r,d=l.r,n=Math.abs(d-h)*a;s.r=c(d>h?h+n:h-n),h=o.g,d=l.g,n=Math.abs(d-h)*a,s.g=c(d>h?h+n:h-n),h=o.b,d=l.b,n=Math.abs(d-h)*a,s.b=c(d>h?h+n:h-n),o=o.a,l=l.a,n=Math.abs(l-o)*a,s.a=l>o?o+n:o-n,e.setColor(s)}return s=e.color,(n=this.alphaRange)&&s&&(o=n[0],l=n[1],n=Math.abs(l-o)*a,s.a=l>o?o+n:o-n),e}}),n("extend-esri")&&t.setObject("renderer.TimeRampAger",e,s),e})},"dijit/typematic":function(){define("dojo/_base/array dojo/_base/connect dojo/_base/lang dojo/on dojo/sniff ./main".split(" "),function(e,t,i,n,s,r){var o=r.typematic={_fireEventAndReload:function(){this._timer=null,this._callback(++this._count,this._node,this._evt),this._currentTimeout=Math.max(0>this._currentTimeout?this._initialDelay:1<this._subsequentDelay?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay),this._minDelay),this._timer=setTimeout(i.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(e,t,n,s,r,o,a,l){if(r!=this._obj){this.stop(),this._initialDelay=a||500,this._subsequentDelay=o||.9,this._minDelay=l||10,this._obj=r,this._node=n,this._count=this._currentTimeout=-1,this._callback=i.hitch(t,s),this._evt={faux:!0};for(var c in e)"layerX"!=c&&"layerY"!=c&&(t=e[c],"function"!=typeof t&&"undefined"!=typeof t&&(this._evt[c]=t));this._fireEventAndReload()}},stop:function(){this._timer&&(clearTimeout(this._timer),this._timer=null),this._obj&&(this._callback(-1,this._node,this._evt),this._obj=null)},addKeyListener:function(s,r,a,l,c,h,d){var u="keyCode"in r?"keyCode":"charCode"in r?"charCode":"charOrCode",f=[n(s,"keyCode"in r?"keydown":"charCode"in r?"keypress":t._keypress,i.hitch(this,function(e){e[u]!=r[u]||void 0!==r.ctrlKey&&r.ctrlKey!=e.ctrlKey||void 0!==r.altKey&&r.altKey!=e.altKey||void 0!==r.metaKey&&r.metaKey!=(e.metaKey||!1)||void 0!==r.shiftKey&&r.shiftKey!=e.shiftKey?o._obj==r&&o.stop():(e.stopPropagation(),e.preventDefault(),o.trigger(e,a,s,l,r,c,h,d))})),n(s,"keyup",i.hitch(this,function(){o._obj==r&&o.stop()}))];return{remove:function(){e.forEach(f,function(e){e.remove()})}}},addMouseListener:function(t,r,a,l,c,h){var d=[n(t,"mousedown",i.hitch(this,function(e){e.preventDefault(),o.trigger(e,r,t,a,t,l,c,h)})),n(t,"mouseup",i.hitch(this,function(e){this._obj&&e.preventDefault(),o.stop()})),n(t,"mouseout",i.hitch(this,function(e){this._obj&&e.preventDefault(),o.stop()})),n(t,"dblclick",i.hitch(this,function(e){e.preventDefault(),9>s("ie")&&(o.trigger(e,r,t,a,t,l,c,h),setTimeout(i.hitch(this,o.stop),50))}))];return{remove:function(){e.forEach(d,function(e){e.remove()})}}},addListener:function(t,i,n,s,r,o,a,l){var c=[this.addKeyListener(i,n,s,r,o,a,l),this.addMouseListener(t,s,r,o,a,l)];return{remove:function(){e.forEach(c,function(e){e.remove()})}}}};return o})},"dojox/gfx":function(){define(["dojo/_base/lang","./gfx/_base","./gfx/renderer!"],function(e,t,i){return t.switchTo(i),t})},"esri/WKIDUnitConversion":function(){define(["dojo/has","esri/kernel"],function(e,t){var i={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5e4,15e4],2e3:0,2001:0,2002:0,2003:0,2004:0,2005:0,2006:0,2007:0,2008:0,2009:0,2010:0,2011:0,2012:0,2013:0,2014:0,2015:0,2016:0,2017:0,2018:0,2019:0,2020:0,2021:0,2022:0,2023:0,2024:0,2025:0,2026:0,2027:0,2028:0,2029:0,2030:0,2031:0,2032:0,2033:0,2034:0,2035:0,2036:0,2037:0,2038:0,2039:0,2040:0,2041:0,2042:0,2043:0,2044:0,2045:0,2056:0,2057:0,2058:0,2059:0,2060:0,2061:0,2062:0,2063:0,2064:0,2065:0,2066:5,2067:0,2068:0,2069:0,2070:0,2071:0,2072:0,2073:0,2074:0,2075:0,2076:0,2077:0,2078:0,2079:0,2080:0,2081:0,2082:0,2083:0,2084:0,2085:0,2086:0,2087:0,2088:0,2089:0,2090:0,2091:0,2092:0,2093:0,2094:0,2095:0,2096:0,2097:0,2098:0,2099:0,2100:0,2101:0,2102:0,2103:0,2104:0,2105:0,2106:0,2107:0,2108:0,2109:0,2110:0,2111:0,2112:0,2113:0,2114:0,2115:0,2116:0,2117:0,2118:0,2119:0,2120:0,2121:0,2122:0,2123:0,2124:0,2125:0,2126:0,2127:0,2128:0,2129:0,2130:0,2131:0,2132:0,2133:0,2134:0,2135:0,2136:12,2137:0,2138:0,2139:0,2140:0,2141:0,2142:0,2143:0,2144:0,2145:0,2146:0,2147:0,2148:0,2149:0,2150:0,2151:0,2152:0,2153:0,2154:0,2155:2,2157:0,2158:0,2159:12,2160:12,2161:0,2162:0,2163:0,2164:0,2165:0,2166:0,2167:0,2168:0,2169:0,2170:0,2172:0,2173:0,2174:0,2175:0,2176:0,2177:0,2178:0,2179:0,2180:0,2181:0,2182:0,2183:0,2184:0,2185:0,2186:0,2187:0,2188:0,2189:0,2190:0,2191:0,2192:0,2193:0,2195:0,2196:0,2197:0,2198:0,2200:0,2201:0,2202:0,2203:0,2204:2,2205:0,2206:0,2207:0,2208:0,2209:0,2210:0,2211:0,2212:0,2213:0,2214:0,2215:0,2216:0,2217:0,2219:0,2220:0,2222:1,2223:1,2224:1,2225:2,2226:2,2227:2,2228:2,2229:2,2230:2,2231:2,2232:2,2233:2,2234:2,2235:2,2236:2,2237:2,2238:2,2239:2,2240:2,2241:2,2242:2,2243:2,2244:2,2245:2,2246:2,2247:2,2248:2,2249:2,2250:2,2251:1,2252:1,2253:1,2254:2,2255:2,2256:1,2257:2,2258:2,2259:2,2260:2,2261:2,2262:2,2263:2,2264:2,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2274:2,2275:2,2276:2,2277:2,2278:2,2279:2,2280:1,2281:1,2282:1,2283:2,2284:2,2285:2,2286:2,2287:2,2288:2,2289:2,2290:0,2291:0,2292:0,2294:0,2295:0,2308:0,2309:0,2310:0,2311:0,2312:0,2313:0,2314:3,2315:0,2316:0,2317:0,2318:0,2319:0,2320:0,2321:0,2322:0,2323:0,2324:0,2325:0,2326:0,2327:0,2328:0,2329:0,2330:0,2331:0,2332:0,2333:0,2334:0,2335:0,2336:0,2337:0,2338:0,2339:0,2340:0,2341:0,2342:0,2343:0,2344:0,2345:0,2346:0,2347:0,2348:0,2349:0,2350:0,2351:0,2352:0,2353:0,2354:0,2355:0,2356:0,2357:0,2358:0,2359:0,2360:0,2361:0,2362:0,2363:0,2364:0,2365:0,2366:0,2367:0,2368:0,2369:0,2370:0,2371:0,2372:0,2373:0,2374:0,2375:0,2376:0,2377:0,2378:0,2379:0,2380:0,2381:0,2382:0,2383:0,2384:0,2385:0,2386:0,2387:0,2388:0,2389:0,2390:0,2391:0,2392:0,2393:0,2394:0,2395:0,2396:0,2397:0,2398:0,2399:0,2400:0,2401:0,2402:0,2403:0,2404:0,2405:0,2406:0,2407:0,2408:0,2409:0,2410:0,2411:0,2412:0,2413:0,2414:0,2415:0,2416:0,2417:0,2418:0,2419:0,2420:0,2421:0,2422:0,2423:0,2424:0,2425:0,2426:0,2427:0,2428:0,2429:0,2430:0,2431:0,2432:0,2433:0,2434:0,2435:0,2436:0,2437:0,2438:0,2439:0,2440:0,2441:0,2442:0,2443:0,2444:0,2445:0,2446:0,2447:0,2448:0,2449:0,2450:0,2451:0,2452:0,2453:0,2454:0,2455:0,2456:0,2457:0,2458:0,2459:0,2460:0,2461:0,2462:0,2523:0,2524:0,2525:0,2526:0,2527:0,2528:0,2529:0,2530:0,2531:0,2532:0,2533:0,2534:0,2535:0,2536:0,2537:0,2538:0,2539:0,2540:0,2541:0,2542:0,2543:0,2544:0,2545:0,2546:0,2547:0,2548:0,2549:0,2550:0,2551:0,2552:0,2553:0,2554:0,2555:0,2556:0,2557:0,2558:0,2559:0,2560:0,2561:0,2562:0,2563:0,2564:0,2565:0,2566:0,2567:0,2568:0,2569:0,2570:0,2571:0,2572:0,2573:0,2574:0,2575:0,2576:0,2577:0,2578:0,2579:0,2580:0,2581:0,2582:0,2583:0,2584:0,2585:0,2586:0,2587:0,2588:0,2589:0,2590:0,2591:0,2592:0,2593:0,2594:0,2595:0,2596:0,2597:0,2598:0,2599:0,2600:0,2601:0,2602:0,2603:0,2604:0,2605:0,2606:0,2607:0,2608:0,2609:0,2610:0,2611:0,2612:0,2613:0,2614:0,2615:0,2616:0,2617:0,2618:0,2619:0,2620:0,2621:0,2622:0,2623:0,2624:0,2625:0,2626:0,2627:0,2628:0,2629:0,2630:0,2631:0,2632:0,2633:0,2634:0,2635:0,2636:0,2637:0,2638:0,2639:0,2640:0,2641:0,2642:0,2643:0,2644:0,2645:0,2646:0,2647:0,2648:0,2649:0,2650:0,2651:0,2652:0,2653:0,2654:0,2655:0,2656:0,2657:0,2658:0,2659:0,2660:0,2661:0,2662:0,2663:0,2664:0,2665:0,2666:0,2667:0,2668:0,2669:0,2670:0,2671:0,2672:0,2673:0,2674:0,2675:0,2676:0,2677:0,2678:0,2679:0,2680:0,2681:0,2682:0,2683:0,2684:0,2685:0,2686:0,2687:0,2688:0,2689:0,2690:0,2691:0,2692:0,2693:0,2694:0,2695:0,2696:0,2697:0,2698:0,2699:0,2700:0,2701:0,2702:0,2703:0,2704:0,2705:0,2706:0,2707:0,2708:0,2709:0,2710:0,2711:0,2712:0,2713:0,2714:0,2715:0,2716:0,2717:0,2718:0,2719:0,2720:0,2721:0,2722:0,2723:0,2724:0,2725:0,2726:0,2727:0,2728:0,2729:0,2730:0,2731:0,2732:0,2733:0,2734:0,2735:0,2736:0,2737:0,2738:0,2739:0,2740:0,2741:0,2742:0,2743:0,2744:0,2745:0,2746:0,2747:0,2748:0,2749:0,2750:0,2751:0,2752:0,2753:0,2754:0,2755:0,2756:0,2757:0,2758:0,2759:0,2760:0,2761:0,2762:0,2763:0,2764:0,2765:0,2766:0,2767:0,2768:0,2769:0,2770:0,2771:0,2772:0,2773:0,2774:0,2775:0,2776:0,2777:0,2778:0,2779:0,2780:0,2781:0,2782:0,2783:0,2784:0,2785:0,2786:0,2787:0,2788:0,2789:0,2790:0,2791:0,2792:0,2793:0,2794:0,2795:0,2796:0,2797:0,2798:0,2799:0,2800:0,2801:0,2802:0,2803:0,2804:0,2805:0,2806:0,2807:0,2808:0,2809:0,2810:0,2811:0,2812:0,2813:0,2814:0,2815:0,2816:0,2817:0,2818:0,2819:0,2820:0,2821:0,2822:0,2823:0,2824:0,2825:0,2826:0,2827:0,2828:0,2829:0,2830:0,2831:0,2832:0,2833:0,2834:0,2835:0,2836:0,2837:0,2838:0,2839:0,2840:0,2841:0,2842:0,2843:0,2844:0,2845:0,2846:0,2847:0,2848:0,2849:0,2850:0,2851:0,2852:0,2853:0,2854:0,2855:0,2856:0,2857:0,2858:0,2859:0,2860:0,2861:0,2862:0,2863:0,2864:0,2865:0,2866:0,2867:1,2868:1,2869:1,2870:2,2871:2,2872:2,2873:2,2874:2,2875:2,2876:2,2877:2,2878:2,2879:2,2880:2,2881:2,2882:2,2883:2,2884:2,2885:2,2886:2,2887:2,2888:2,2891:2,2892:2,2893:2,2894:2,2895:2,2896:1,2897:1,2898:1,2899:2,2900:2,2901:1,2902:2,2903:2,2904:2,2905:2,2906:2,2907:2,2908:2,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2915:2,2916:2,2917:2,2918:2,2919:2,2920:2,2921:1,2922:1,2923:1,2924:2,2925:2,2926:2,2927:2,2928:2,2929:2,2930:2,2931:0,2932:0,2933:0,2934:0,2935:0,2936:0,2937:0,2938:0,2939:0,2940:0,2941:0,2942:0,2943:0,2944:0,2945:0,2946:0,2947:0,2948:0,2949:0,2950:0,2951:0,2952:0,2953:0,2954:0,2955:0,2956:0,2957:0,2958:0,2959:0,2960:0,2961:0,2962:0,2964:2,2965:2,2966:2,2967:2,2968:2,2969:0,2970:0,2971:0,2972:0,2973:0,2975:0,2976:0,2977:0,2978:0,2979:0,2980:0,2981:0,2982:0,2983:0,2984:0,2985:0,2986:0,2987:0,2988:0,2989:0,2990:0,2991:0,2992:1,2993:0,2994:1,2995:0,2996:0,2997:0,2998:0,2999:0,3e3:0,3001:0,3002:0,3003:0,3004:0,3005:0,3006:0,3007:0,3008:0,3009:0,3010:0,3011:0,3012:0,3013:0,3014:0,3015:0,3016:0,3017:0,3018:0,3019:0,3020:0,3021:0,3022:0,3023:0,3024:0,3025:0,3026:0,3027:0,3028:0,3029:0,3030:0,3031:0,3032:0,3033:0,3034:0,3035:0,3036:0,3037:0,3038:0,3039:0,3040:0,3041:0,3042:0,3043:0,3044:0,3045:0,3046:0,3047:0,3048:0,3049:0,3050:0,3051:0,3054:0,3055:0,3056:0,3057:0,3058:0,3059:0,3060:0,3061:0,3062:0,3063:0,3064:0,3065:0,3066:0,3067:0,3068:0,3069:0,3070:0,3071:0,3072:0,3073:0,3074:0,3075:0,3076:0,3077:0,3078:0,3079:0,3080:1,3081:0,3082:0,3083:0,3084:0,3085:0,3086:0,3087:0,3088:0,3089:2,3090:0,3091:2,3092:0,3093:0,3094:0,3095:0,3096:0,3097:0,3098:0,3099:0,3100:0,3101:0,3102:2,3106:0,3107:0,3108:0,3109:0,3110:0,3111:0,3112:0,3113:0,3114:0,3115:0,3116:0,3117:0,3118:0,3119:0,3120:0,3121:0,3122:0,3123:0,3124:0,3125:0,3126:0,3127:0,3128:0,3129:0,3130:0,3131:0,3132:0,3133:0,3134:0,3135:0,3136:0,3137:0,3138:0,3141:0,3142:0,3146:0,3147:0,3148:0,3149:0,3150:0,3151:0,3153:0,3154:0,3155:0,3156:0,3157:0,3158:0,3159:0,3160:0,3161:0,3162:0,3163:0,3164:0,3165:0,3166:0,3167:13,3168:0,3169:0,3170:0,3171:0,3172:0,3174:0,3175:0,3176:0,3177:0,3178:0,3179:0,3180:0,3181:0,3182:0,3183:0,3184:0,3185:0,3186:0,3187:0,3188:0,3189:0,3190:0,3191:0,3192:0,3193:0,3194:0,3195:0,3196:0,3197:0,3198:0,3199:0,3200:0,3201:0,3202:0,3203:0,3294:0,3295:0,3296:0,3297:0,3298:0,3299:0,3300:0,3301:0,3302:0,3303:0,3304:0,3305:0,3306:0,3307:0,3308:0,3309:0,3310:0,3311:0,3312:0,3313:0,3314:0,3315:0,3316:0,3317:0,3318:0,3319:0,3320:0,3321:0,3322:0,3323:0,3324:0,3325:0,3326:0,3327:0,3328:0,3329:0,3330:0,3331:0,3332:0,3333:0,3334:0,3335:0,3336:0,3337:0,3338:0,3339:0,3340:0,3341:0,3342:0,3343:0,3344:0,3345:0,3346:0,3347:0,3348:0,3349:0,3350:0,3351:0,3352:0,3353:0,3354:0,3355:0,3356:0,3357:0,3358:0,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3367:0,3368:0,3369:0,3370:0,3371:0,3372:0,3373:0,3374:0,3375:0,3376:0,3377:0,3378:0,3379:0,3380:0,3381:0,3382:0,3383:0,3384:0,3385:0,3386:0,3387:0,3388:0,3389:0,3390:0,3391:0,3392:0,3393:0,3394:0,3395:0,3396:0,3397:0,3398:0,3399:0,3400:0,3401:0,3402:0,3403:0,3404:2,3405:0,3406:0,3407:3,3408:0,3409:0,3410:0,3411:0,3412:0,3413:0,3414:0,3415:0,3416:0,3417:2,3418:2,3419:2,3420:2,3421:2,3422:2,3423:2,3424:2,3425:2,3426:2,3427:2,3428:2,3429:2,3430:2,3431:2,3432:2,3433:2,3434:2,3435:2,3436:2,3437:2,3438:2,3439:0,3440:0,3441:2,3442:2,3443:2,3444:2,3445:2,3446:2,3447:0,3448:0,3449:0,3450:0,3451:2,3452:2,3453:2,3454:2,3455:2,3456:2,3457:2,3458:2,3459:2,3460:0,3461:0,3462:0,3463:0,3464:0,3465:0,3466:0,3467:0,3468:0,3469:0,3470:0,3471:0,3472:0,3473:0,3474:0,3475:0,3476:0,3477:0,3478:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3554:0,3555:0,3556:0,3557:0,3558:0,3559:0,3560:2,3561:2,3562:2,3563:2,3564:2,3565:2,3566:2,3567:2,3568:2,3569:2,3570:2,3571:0,3572:0,3573:0,3574:0,3575:0,3576:0,3577:0,3578:0,3579:0,3580:0,3581:0,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3594:0,3595:0,3596:0,3597:0,3598:2,3599:0,3600:2,3601:0,3602:0,3603:0,3604:0,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3637:0,3638:0,3639:0,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3665:0,3666:0,3667:0,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3693:0,3694:0,3695:0,3696:2,3697:0,3698:2,3699:0,3700:2,3701:0,3702:0,3703:0,3704:0,3705:0,3706:0,3707:0,3708:0,3709:0,3710:0,3711:0,3712:0,3713:0,3714:0,3715:0,3716:0,3717:0,3718:0,3719:0,3720:0,3721:0,3722:0,3723:0,3724:0,3725:0,3726:0,3727:0,3728:2,3729:2,3730:2,3731:2,3732:2,3733:2,3734:2,3735:2,3736:2,3737:2,3738:2,3739:2,3740:0,3741:0,3742:0,3743:0,3744:0,3745:0,3746:0,3747:0,3748:0,3749:0,3750:0,3751:0,3753:2,3754:2,3755:2,3756:2,3757:2,3758:2,3759:2,3760:2,3761:0,3762:0,3763:0,3764:0,3765:0,3766:0,3767:0,3768:0,3769:0,3770:0,3771:0,3772:0,3773:0,3775:0,3776:0,3777:0,3779:0,3780:0,3781:0,3783:0,3784:0,3785:0,3788:0,3789:0,3790:0,3791:0,3793:0,3794:0,3797:0,3798:0,3799:0,3800:0,3801:0,3802:0,3812:0,3814:0,3815:0,3816:0,3825:0,3826:0,3827:0,3828:0,3829:0,3832:0,3833:0,3834:0,3835:0,3836:0,3837:0,3838:0,3839:0,3840:0,3841:0,3844:0,3845:0,3846:0,3847:0,3848:0,3849:0,3850:0,3851:0,3852:0,3854:0,3857:0,3873:0,3874:0,3875:0,3876:0,3877:0,3878:0,3879:0,3880:0,3881:0,3882:0,3883:0,3884:0,3885:0,3890:0,3891:0,3892:0,3893:0,3907:0,3908:0,3909:0,3910:0,3911:0,3912:0,3920:0,3942:0,3943:0,3944:0,3945:0,3946:0,3947:0,3948:0,3949:0,3950:0,3968:0,3969:0,3970:0,3973:0,3974:0,3975:0,3976:0,3978:0,3979:0,3986:0,3987:0,3988:0,3989:0,3991:2,3992:2,3994:0,3995:0,3996:0,3997:0,4026:0,4037:0,4038:0,4048:0,4049:0,4050:0,4051:0,4056:0,4057:0,4058:0,4059:0,4060:0,4061:0,4062:0,4063:0,4071:0,4082:0,4083:0,4093:0,4094:0,4095:0,4096:0,4217:2,4399:2,4400:2,4401:2,4402:2,4403:2,4404:2,4405:2,4406:2,4407:2,4408:2,4409:2,4410:2,4411:2,4412:2,4413:2,4414:0,4415:0,4417:0,4418:2,4419:2,4420:2,4421:2,4422:2,4423:2,4424:2,4425:2,4426:2,4427:2,4428:2,4429:2,4430:2,4431:2,4432:2,4433:2,4434:0,4437:0,4438:2,4439:2,4455:2,4456:2,4457:2,4462:0,4467:0,4471:0,4474:0,4484:0,4485:0,4486:0,4487:0,4488:0,4489:0,4491:0,4492:0,4493:0,4494:0,4495:0,4496:0,4497:0,4498:0,4499:0,4500:0,4501:0,4502:0,4503:0,4504:0,4505:0,4506:0,4507:0,4508:0,4509:0,4510:0,4511:0,4512:0,4513:0,4514:0,4515:0,4516:0,4517:0,4518:0,4519:0,4520:0,4521:0,4522:0,4523:0,4524:0,4525:0,4526:0,4527:0,4528:0,4529:0,4530:0,4531:0,4532:0,4533:0,4534:0,4535:0,4536:0,4537:0,4538:0,4539:0,4540:0,4541:0,4542:0,4543:0,4544:0,4545:0,4546:0,4547:0,4548:0,4549:0,4550:0,4551:0,4552:0,4553:0,4554:0,4559:0,4568:0,4569:0,4570:0,4571:0,4572:0,4573:0,4574:0,4575:0,4576:0,4577:0,4578:0,4579:0,4580:0,4581:0,4582:0,4583:0,4584:0,4585:0,4586:0,4587:0,4588:0,4589:0,4647:0,4652:0,4653:0,4654:0,4655:0,4656:0,4766:0,4767:0,4768:0,4769:0,4770:0,4771:0,4772:0,4773:0,4774:0,4775:0,4776:0,4777:0,4778:0,4779:0,4780:0,4781:0,4782:0,4783:0,4784:0,4785:0,4786:0,4787:0,4788:0,4789:0,4790:0,4791:0,4792:0,4793:0,4794:0,4795:0,4796:0,4797:0,4798:0,4799:0,4800:0,4822:0,4826:0,4839:0,5014:0,5015:0,5016:0,5018:0,5048:0,5069:0,5070:0,5071:0,5072:0,5105:0,5106:0,5107:0,5108:0,5109:0,5110:0,5111:0,5112:0,5113:0,5114:0,5115:0,5116:0,5117:0,5118:0,5119:0,5120:0,5121:0,5122:0,5123:0,5124:0,5125:0,5126:0,5127:0,5128:0,5129:0,5130:0,5167:0,5168:0,5173:0,5174:0,5175:0,5176:0,5177:0,5178:0,5179:0,5180:0,5181:0,5182:0,5183:0,5184:0,5185:0,5186:0,5187:0,5188:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5253:0,5254:0,5255:0,5256:0,5257:0,5258:0,5259:0,5266:0,5269:0,5270:0,5271:0,5272:0,5273:0,5274:0,5275:0,5292:0,5293:0,5294:0,5295:0,5296:0,5297:0,5298:0,5299:0,5300:0,5301:0,5302:0,5303:0,5304:0,5305:0,5306:0,5307:0,5308:0,5309:0,5310:0,5311:0,5316:0,5320:0,5321:0,5325:0,5329:0,5330:0,5331:0,5337:0,5343:0,5344:0,5345:0,5346:0,5347:0,5348:0,5349:0,5355:0,5356:0,5357:0,5361:0,5362:0,5367:0,5382:0,5383:0,5387:0,5388:0,5389:0,5396:0,5456:0,5457:0,5459:0,5460:0,5461:0,5462:0,5463:0,5469:0,5472:4,5479:0,5480:0,5481:0,5482:0,5490:0,5513:0,5514:0,5518:0,5519:0,5520:0,5523:0,5530:0,5531:0,5532:0,5533:0,5534:0,5535:0,5536:0,5537:0,5538:0,5539:0,5550:0,5551:0,5552:0,5559:0,5562:0,5563:0,5564:0,5565:0,5566:0,5567:0,5568:0,5569:0,5570:0,5571:0,5572:0,5573:0,5574:0,5575:0,5576:0,5577:0,5578:0,5579:0,5580:0,5581:0,5582:0,5583:0,5588:1,5589:3,5596:0,5623:2,5624:2,5625:2,5627:0,5629:0,5631:0,5632:0,5633:0,5634:0,5635:0,5636:0,5637:0,5638:0,5639:0,5641:0,5643:0,5644:0,5646:2,5649:0,5650:0,5651:0,5652:0,5653:0,5654:2,5655:2,5659:0,5663:0,5664:0,5665:0,5666:0,5667:0,5668:0,5669:0,5670:0,5671:0,5672:0,5673:0,5674:0,5675:0,5676:0,5677:0,5678:0,5679:0,5680:0,5682:0,5683:0,5684:0,5685:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5875:0,5876:0,5877:0,5879:0,5880:0,5887:0,5890:0,5921:0,5922:0,5923:0,5924:0,5925:0,5926:0,5927:0,5928:0,5929:0,5930:0,5931:0,5932:0,5933:0,5934:0,5935:0,5936:0,5937:0,5938:0,5939:0,5940:0,6050:0,6051:0,6052:0,6053:0,6054:0,6055:0,6056:0,6057:0,6058:0,6059:0,6060:0,6061:0,6062:0,6063:0,6064:0,6065:0,6066:0,6067:0,6068:0,6069:0,6070:0,6071:0,6072:0,6073:0,6074:0,6075:0,6076:0,6077:0,6078:0,6079:0,6080:0,6081:0,6082:0,6083:0,6084:0,6085:0,6086:0,6087:0,6088:0,6089:0,6090:0,6091:0,6092:0,6093:0,6094:0,6095:0,6096:0,6097:0,6098:0,6099:0,6100:0,6101:0,6102:0,6103:0,6104:0,6105:0,6106:0,6107:0,6108:0,6109:0,6110:0,6111:0,6112:0,6113:0,6114:0,6115:0,6116:0,6117:0,6118:0,6119:0,6120:0,6121:0,6122:0,6123:0,6124:0,6125:0,6128:1,6129:1,6141:1,6210:0,6211:0,6244:0,6245:0,6246:0,6247:0,6248:0,6249:0,6250:0,6251:0,6252:0,6253:0,6254:0,6255:0,6256:0,6257:0,6258:0,6259:0,6260:0,6261:0,6262:0,6263:0,6264:0,6265:0,6266:0,6267:0,6268:0,6269:0,6270:0,6271:0,6272:0,6273:0,6274:0,6275:0,6316:0,6328:0,6329:0,6330:0,6331:0,6332:0,6333:0,6334:0,6335:0,6336:0,6337:0,6338:0,6339:0,6340:0,6341:0,6342:0,6343:0,6344:0,6345:0,6346:0,6347:0,6348:0,6350:0,6351:0,6352:0,6353:0,6354:0,6391:1,20002:0,20003:0,20004:0,20005:0,20006:0,20007:0,20008:0,20009:0,20010:0,20011:0,20012:0,20013:0,20014:0,20015:0,20016:0,20017:0,20018:0,20019:0,20020:0,20021:0,20022:0,20023:0,20024:0,20025:0,20026:0,20027:0,20028:0,20029:0,20030:0,20031:0,20032:0,20062:0,20063:0,20064:0,20065:0,20066:0,20067:0,20068:0,20069:0,20070:0,20071:0,20072:0,20073:0,20074:0,20075:0,20076:0,20077:0,20078:0,20079:0,20080:0,20081:0,20082:0,20083:0,20084:0,20085:0,20086:0,20087:0,20088:0,20089:0,20090:0,20091:0,20092:0,20135:0,20136:0,20137:0,20138:0,20248:0,20249:0,20250:0,20251:0,20252:0,20253:0,20254:0,20255:0,20256:0,20257:0,20258:0,20348:0,20349:0,20350:0,20351:0,20352:0,20353:0,20354:0,20355:0,20356:0,20357:0,20358:0,20436:0,20437:0,20438:0,20439:0,20440:0,20499:0,20538:0,20539:0,20790:0,20791:0,20822:0,20823:0,20824:0,20934:0,20935:0,20936:0,21035:0,21036:0,21037:0,21095:0,21096:0,21097:0,21148:0,21149:0,21150:0,21291:0,21292:0,21413:0,21414:0,21415:0,21416:0,21417:0,21418:0,21419:0,21420:0,21421:0,21422:0,21423:0,21473:0,21474:0,21475:0,21476:0,21477:0,21478:0,21479:0,21480:0,21481:0,21482:0,21483:0,21500:0,21780:0,21781:0,21782:0,21817:0,21818:0,21891:0,21892:0,21893:0,21894:0,21896:0,21897:0,21898:0,21899:0,22032:0,22033:0,22091:0,22092:0,22171:0,22172:0,22173:0,22174:0,22175:0,22176:0,22177:0,22181:0,22182:0,22183:0,22184:0,22185:0,22186:0,22187:0,22191:0,22192:0,22193:0,22194:0,22195:0,22196:0,22197:0,22234:0,22235:0,22236:0,22332:0,22391:0,22392:0,22521:0,22522:0,22523:0,22524:0,22525:0,22700:0,22770:0,22780:0,22832:0,22991:0,22992:0,22993:0,22994:0,23028:0,23029:0,23030:0,23031:0,23032:0,23033:0,23034:0,23035:0,23036:0,23037:0,23038:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,23830:0,23831:0,23832:0,23833:0,23834:0,23835:0,23836:0,23837:0,23838:0,23839:0,23840:0,23841:0,23842:0,23843:0,23844:0,23845:0,23846:0,23847:0,23848:0,23849:0,23850:0,23851:0,23852:0,23853:0,23866:0,23867:0,23868:0,23869:0,23870:0,23871:0,23872:0,23877:0,23878:0,23879:0,23880:0,23881:0,23882:0,23883:0,23884:0,23886:0,23887:0,23888:0,23889:0,23890:0,23891:0,23892:0,23893:0,23894:0,23946:0,23947:0,23948:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24311:0,24312:0,24313:0,24342:0,24343:0,24344:0,24345:0,24346:0,24347:0,24370:10,24371:10,24372:10,24373:10,24374:10,24375:0,24376:0,24377:0,24378:0,24379:0,24380:0,24381:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,24718:0,24719:0,24720:0,24721:0,24817:0,24818:0,24819:0,24820:0,24821:0,24877:0,24878:0,24879:0,24880:0,24881:0,24882:0,24891:0,24892:0,24893:0,25e3:0,25231:0,25391:0,25392:0,25393:0,25394:0,25395:0,25828:0,25829:0,25830:0,25831:0,25832:0,25833:0,25834:0,25835:0,25836:0,25837:0,25838:0,25884:0,25932:0,26191:0,26192:0,26193:0,26194:0,26195:0,26237:0,26331:0,26332:0,26391:0,26392:0,26393:0,26432:0,26591:0,26592:0,26632:0,26692:0,26701:0,26702:0,26703:0,26704:0,26705:0,26706:0,26707:0,26708:0,26709:0,26710:0,26711:0,26712:0,26713:0,26714:0,26715:0,26716:0,26717:0,26718:0,26719:0,26720:0,26721:0,26722:0,26729:2,26730:2,26731:2,26732:2,26733:2,26734:2,26735:2,26736:2,26737:2,26738:2,26739:2,26740:2,26741:2,26742:2,26743:2,26744:2,26745:2,26746:2,26747:2,26748:2,26749:2,26750:2,26751:2,26752:2,26753:2,26754:2,26755:2,26756:2,26757:2,26758:2,26759:2,26760:2,26761:2,26762:2,26763:2,26764:2,26765:2,26766:2,26767:2,26768:2,26769:2,26770:2,26771:2,26772:2,26773:2,26774:2,26775:2,26776:2,26777:2,26778:2,26779:2,26780:2,26781:2,26782:2,26783:2,26784:2,26785:2,26786:2,26787:2,26788:2,26789:2,26790:2,26791:2,26792:2,26793:2,26794:2,26795:2,26796:2,26797:2,26798:2,26799:2,26801:2,26802:2,26803:2,26811:2,26812:2,26813:2,26847:2,26848:2,26849:2,26850:2,26851:2,26852:2,26853:2,26854:2,26855:2,26856:2,26857:2,26858:2,26859:2,26860:2,26861:2,26862:2,26863:2,26864:2,26865:2,26866:2,26867:2,26868:2,26869:2,26870:2,26891:0,26892:0,26893:0,26894:0,26895:0,26896:0,26897:0,26898:0,26899:0,26901:0,26902:0,26903:0,26904:0,26905:0,26906:0,26907:0,26908:0,26909:0,26910:0,26911:0,26912:0,26913:0,26914:0,26915:0,26916:0,26917:0,26918:0,26919:0,26920:0,26921:0,26922:0,26923:0,26929:0,26930:0,26931:0,26932:0,26933:0,26934:0,26935:0,26936:0,26937:0,26938:0,26939:0,26940:0,26941:0,26942:0,26943:0,26944:0,26945:0,26946:0,26948:0,26949:0,26950:0,26951:0,26952:0,26953:0,26954:0,26955:0,26956:0,26957:0,26958:0,26959:0,26960:0,26961:0,26962:0,26963:0,26964:0,26965:0,26966:0,26967:0,26968:0,26969:0,26970:0,26971:0,26972:0,26973:0,26974:0,26975:0,26976:0,26977:0,26978:0,26979:0,26980:0,26981:0,26982:0,26983:0,26984:0,26985:0,26986:0,26987:0,26988:0,26989:0,26990:0,26991:0,26992:0,26993:0,26994:0,26995:0,26996:0,26997:0,26998:0,27037:0,27038:0,27039:0,27040:0,27120:0,27200:0,27205:0,27206:0,27207:0,27208:0,27209:0,27210:0,27211:0,27212:0,27213:0,27214:0,27215:0,27216:0,27217:0,27218:0,27219:0,27220:0,27221:0,27222:0,27223:0,27224:0,27225:0,27226:0,27227:0,27228:0,27229:0,27230:0,27231:0,27232:0,27258:0,27259:0,27260:0,27291:6,27292:6,27391:0,27392:0,27393:0,27394:0,27395:0,27396:0,27397:0,27398:0,27429:0,27492:0,27493:0,27500:0,27561:0,27562:0,27563:0,27564:0,27571:0,27572:0,27573:0,27574:0,27581:0,27582:0,27583:0,27584:0,27591:0,27592:0,27593:0,27594:0,27700:0,28191:0,28192:0,28193:0,28232:0,28348:0,28349:0,28350:0,28351:0,28352:0,28353:0,28354:0,28355:0,28356:0,28357:0,28358:0,28402:0,28403:0,28404:0,28405:0,28406:0,28407:0,28408:0,28409:0,28410:0,28411:0,28412:0,28413:0,28414:0,28415:0,28416:0,28417:0,28418:0,28419:0,28420:0,28421:0,28422:0,28423:0,28424:0,28425:0,28426:0,28427:0,28428:0,28429:0,28430:0,28431:0,28432:0,28462:0,28463:0,28464:0,28465:0,28466:0,28467:0,28468:0,28469:0,28470:0,28471:0,28472:0,28473:0,28474:0,28475:0,28476:0,28477:0,28478:0,28479:0,28480:0,28481:0,28482:0,28483:0,28484:0,28485:0,28486:0,28487:0,28488:0,28489:0,28490:0,28491:0,28492:0,28600:0,28991:0,28992:0,29100:0,29101:0,29118:0,29119:0,29120:0,29121:0,29122:0,29168:0,29169:0,29170:0,29171:0,29172:0,29177:0,29178:0,29179:0,29180:0,29181:0,29182:0,29183:0,29184:0,29185:0,29187:0,29188:0,29189:0,29190:0,29191:0,29192:0,29193:0,29194:0,29195:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29900:0,29901:0,29902:0,29903:0,30161:0,30162:0,30163:0,30164:0,30165:0,30166:0,30167:0,30168:0,30169:0,30170:0,30171:0,30172:0,30173:0,30174:0,30175:0,30176:0,30177:0,30178:0,30179:0,30200:5,30339:0,30340:0,30491:0,30492:0,30493:0,30494:0,30591:0,30592:0,30729:0,30730:0,30731:0,30732:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31251:0,31252:0,31253:0,31254:0,31255:0,31256:0,31257:0,31258:0,31259:0,31265:0,31266:0,31267:0,31268:0,31275:0,31276:0,31277:0,31278:0,31279:0,31281:0,31282:0,31283:0,31284:0,31285:0,31286:0,31287:0,31288:0,31289:0,31290:0,31291:0,31292:0,31293:0,31294:0,31295:0,31296:0,31297:0,31370:0,31461:0,31462:0,31463:0,31464:0,31465:0,31466:0,31467:0,31468:0,31469:0,31491:0,31492:0,31493:0,31494:0,31495:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,31917:0,31918:0,31919:0,31920:0,31921:0,31922:0,31965:0,31966:0,31967:0,31968:0,31969:0,31970:0,31971:0,31972:0,31973:0,31974:0,31975:0,31976:0,31977:0,31978:0,31979:0,31980:0,31981:0,31982:0,31983:0,31984:0,31985:0,31986:0,31987:0,31988:0,31989:0,31990:0,31991:0,31992:0,31993:0,31994:0,31995:0,31996:0,31997:0,31998:0,31999:0,32e3:0,32001:2,32002:2,32003:2,32005:2,32006:2,32007:2,32008:2,32009:2,32010:2,32011:2,32012:2,32013:2,32014:2,32015:2,32016:2,32017:2,32018:2,32019:2,32020:2,32021:2,32022:2,32023:2,32024:2,32025:2,32026:2,32027:2,32028:2,32029:2,32030:2,32031:2,32033:2,32034:2,32035:2,32036:2,32037:2,32038:2,32039:2,32040:2,32041:2,32042:2,32043:2,32044:2,32045:2,32046:2,32047:2,32048:2,32049:2,32050:2,32051:2,32052:2,32053:2,32054:2,32055:2,32056:2,32057:2,32058:2,32059:2,32060:2,32061:0,32062:0,32064:2,32065:2,32066:2,32067:2,32074:2,32075:2,32076:2,32077:2,32081:0,32082:0,32083:0,32084:0,32085:0,32086:0,32098:0,32099:2,32100:0,32104:0,32107:0,32108:0,32109:0,32110:0,32111:0,32112:0,32113:0,32114:0,32115:0,32116:0,32117:0,32118:0,32119:0,32120:0,32121:0,32122:0,32123:0,32124:0,32125:0,32126:0,32127:0,32128:0,32129:0,32130:0,32133:0,32134:0,32135:0,32136:0,32137:0,32138:0,32139:0,32140:0,32141:0,32142:0,32143:0,32144:0,32145:0,32146:0,32147:0,32148:0,32149:0,32150:0,32151:0,32152:0,32153:0,32154:0,32155:0,32156:0,32157:0,32158:0,32161:0,32164:2,32165:2,32166:2,32167:2,32180:0,32181:0,32182:0,32183:0,32184:0,32185:0,32186:0,32187:0,32188:0,32189:0,32190:0,32191:0,32192:0,32193:0,32194:0,32195:0,32196:0,32197:0,32198:0,32199:0,32201:0,32202:0,32203:0,32204:0,32205:0,32206:0,32207:0,32208:0,32209:0,32210:0,32211:0,32212:0,32213:0,32214:0,32215:0,32216:0,32217:0,32218:0,32219:0,32220:0,32221:0,32222:0,32223:0,32224:0,32225:0,32226:0,32227:0,32228:0,32229:0,32230:0,32231:0,32232:0,32233:0,32234:0,32235:0,32236:0,32237:0,32238:0,32239:0,32240:0,32241:0,32242:0,32243:0,32244:0,32245:0,32246:0,32247:0,32248:0,32249:0,32250:0,32251:0,32252:0,32253:0,32254:0,32255:0,32256:0,32257:0,32258:0,32259:0,32260:0,32301:0,32302:0,32303:0,32304:0,32305:0,32306:0,32307:0,32308:0,32309:0,32310:0,32311:0,32312:0,32313:0,32314:0,32315:0,32316:0,32317:0,32318:0,32319:0,32320:0,32321:0,32322:0,32323:0,32324:0,32325:0,32326:0,32327:0,32328:0,32329:0,32330:0,32331:0,32332:0,32333:0,32334:0,32335:0,32336:0,32337:0,32338:0,32339:0,32340:0,32341:0,32342:0,32343:0,32344:0,32345:0,32346:0,32347:0,32348:0,32349:0,32350:0,32351:0,32352:0,32353:0,32354:0,32355:0,32356:0,32357:0,32358:0,32359:0,32360:0,32601:0,32602:0,32603:0,32604:0,32605:0,32606:0,32607:0,32608:0,32609:0,32610:0,32611:0,32612:0,32613:0,32614:0,32615:0,32616:0,32617:0,32618:0,32619:0,32620:0,32621:0,32622:0,32623:0,32624:0,32625:0,32626:0,32627:0,32628:0,32629:0,32630:0,32631:0,32632:0,32633:0,32634:0,32635:0,32636:0,32637:0,32638:0,32639:0,32640:0,32641:0,32642:0,32643:0,32644:0,32645:0,32646:0,32647:0,32648:0,32649:0,32650:0,32651:0,32652:0,32653:0,32654:0,32655:0,32656:0,32657:0,32658:0,32659:0,32660:0,32661:0,32662:0,32664:2,32665:2,32666:2,32667:2,32701:0,32702:0,32703:0,32704:0,32705:0,32706:0,32707:0,32708:0,32709:0,32710:0,32711:0,32712:0,32713:0,32714:0,32715:0,32716:0,32717:0,32718:0,32719:0,32720:0,32721:0,32722:0,32723:0,32724:0,32725:0,32726:0,32727:0,32728:0,32729:0,32730:0,32731:0,32732:0,32733:0,32734:0,32735:0,32736:0,32737:0,32738:0,32739:0,32740:0,32741:0,32742:0,32743:0,32744:0,32745:0,32746:0,32747:0,32748:0,32749:0,32750:0,32751:0,32752:0,32753:0,32754:0,32755:0,32756:0,32757:0,32758:0,32759:0,32760:0,32761:0,32766:0,53001:0,53002:0,53003:0,53004:0,53008:0,53009:0,53010:0,53011:0,53012:0,53013:0,53014:0,53015:0,53016:0,53017:0,53018:0,53019:0,53021:0,53022:0,53023:0,53024:0,53025:0,53026:0,53027:0,53028:0,53029:0,53030:0,53031:0,53032:0,53034:0,53042:0,53043:0,53044:0,53045:0,53046:0,53048:0,53049:0,54001:0,54002:0,54003:0,54004:0,54008:0,54009:0,54010:0,54011:0,54012:0,54013:0,54014:0,54015:0,54016:0,54017:0,54018:0,54019:0,54021:0,54022:0,54023:0,54024:0,54025:0,54026:0,54027:0,54028:0,54029:0,54030:0,54031:0,54032:0,54034:0,54042:0,54043:0,54044:0,54045:0,54046:0,54048:0,54049:0,54050:0,54051:0,54052:0,54053:0,65061:2,65062:2,65161:0,65163:0,102001:0,102002:0,102003:0,102004:0,102005:0,102006:0,102007:0,102008:0,102009:0,102010:0,102011:0,102012:0,102013:0,102014:0,102015:0,102016:0,102017:0,102018:0,102019:0,102020:0,102021:0,102022:0,102023:0,102024:0,102025:0,102026:0,102027:0,102028:0,102029:0,102030:0,102031:0,102032:0,102033:0,102034:0,102035:0,102036:0,102037:0,102038:0,102039:0,102040:0,102041:2,102042:0,102043:0,102044:0,102045:0,102046:0,102047:0,102048:0,102049:0,102050:0,102051:0,102052:0,102053:0,102054:0,102055:0,102056:0,102057:0,102058:0,102059:0,102060:0,102061:0,102062:0,102063:0,102064:11,102065:0,102066:0,102067:0,102068:14,102069:15,102070:0,102071:0,102072:0,102073:0,102074:0,102075:0,102076:0,102077:0,102078:0,102079:0,102080:0,102081:0,102082:0,102083:0,102084:0,102085:0,102086:0,102087:0,102088:0,102089:0,102090:0,102091:0,102092:0,102093:0,102094:0,102095:0,102096:0,102097:0,102098:0,102099:0,102100:0,102101:0,102102:0,102103:0,102104:0,102105:0,102106:0,102107:0,102108:0,102109:0,102110:0,102111:0,102112:0,102113:0,102114:0,102115:0,102116:0,102117:0,102118:2,102119:1,102120:2,102121:2,102122:0,102123:0,102124:0,102125:0,102126:0,102127:0,102128:0,102129:0,102130:0,102131:0,102132:0,102133:0,102134:0,102135:0,102136:0,102137:0,102138:0,102139:0,102140:0,102141:0,102142:0,102143:0,102144:0,102145:0,102146:0,102147:0,102148:0,102149:0,102150:0,102151:0,102152:0,102153:0,102154:0,102155:0,102156:0,102157:0,102158:0,102159:0,102160:0,102161:0,102162:0,102163:0,102164:0,102165:0,102166:0,102167:0,102168:0,102169:0,102170:0,102171:0,102172:0,102173:0,102174:0,102175:0,102176:0,102177:0,102178:0,102179:0,102180:0,102181:0,102182:0,102183:0,102184:0,102185:0,102186:0,102187:0,102188:0,102189:0,102190:0,102191:0,102192:0,102193:0,102194:0,102195:0,102196:0,102197:0,102198:0,102199:0,102200:0,102201:0,102202:0,102203:0,102204:0,102205:0,102206:0,102207:0,102208:0,102209:0,102210:0,102211:0,102212:0,102213:0,102214:0,102215:0,102216:0,102217:2,102218:0,102219:2,102220:2,102221:0,102222:0,102223:0,102224:0,102225:0,102226:0,102227:0,102228:0,102229:0,102230:0,102231:0,102232:0,102233:0,102234:0,102235:0,102236:0,102237:0,102238:0,102239:0,102240:0,102241:0,102242:0,102243:0,102244:0,102245:0,102246:0,102247:0,102248:0,102249:0,102250:0,102251:0,102252:0,102253:0,102254:0,102255:0,102256:0,102257:0,102258:0,102259:0,102260:0,102261:0,102262:0,102263:0,102264:0,102265:0,102266:0,102267:0,102268:0,102269:0,102270:0,102271:0,102272:0,102273:0,102274:0,102275:0,102276:0,102277:0,102278:0,102279:0,102280:0,102281:0,102282:0,102283:0,102284:0,102285:0,102286:0,102287:0,102288:0,102289:0,102290:0,102291:0,102292:0,102293:0,102294:0,102295:0,102296:0,102297:0,102298:0,102299:0,102300:0,102301:0,102302:0,102303:0,102304:0,102305:0,102306:0,102307:0,102308:0,102309:0,102310:0,102311:0,102312:0,102313:0,102314:0,102315:0,102316:0,102317:0,102318:0,102319:0,102320:0,102321:0,102322:0,102323:0,102324:0,102325:0,102326:0,102327:0,102328:0,102329:0,102330:0,102331:0,102332:0,102333:0,102334:0,102335:0,102336:0,102337:0,102338:0,102339:0,102340:0,102341:0,102342:0,102343:0,102344:0,102345:0,102346:0,102347:0,102348:0,102349:0,102350:0,102351:0,102352:0,102353:0,102354:0,102355:0,102356:0,102357:0,102358:0,102359:0,102360:0,102361:0,102362:0,102363:0,102364:0,102365:0,102366:0,102367:0,102368:0,102369:0,102370:0,102371:0,102372:0,102373:0,102374:0,102375:0,102376:0,102377:0,102378:1,102379:1,102380:0,102381:1,102382:0,102383:0,102384:0,102385:0,102386:0,102387:0,102388:0,102389:2,102390:2,102391:2,102392:2,102393:2,102394:2,102395:2,102396:2,102397:2,102398:2,102401:0,102402:0,102403:0,102404:0,102405:0,102406:0,102407:0,102408:0,102409:0,102410:0,102411:0,102412:0,102413:0,102414:0,102415:0,102416:0,102417:0,102418:0,102419:0,102420:0,102421:0,102422:0,102423:0,102424:0,102425:0,102426:0,102427:0,102428:0,102429:0,102430:0,102431:0,102432:0,102433:0,102434:0,102435:0,102436:0,102437:0,102438:0,102439:0,102440:0,102441:0,102442:0,102443:0,102444:0,102445:2,102446:2,102447:2,102450:0,102451:0,102452:0,102461:2,102462:2,102463:2,102464:2,102465:2,102466:2,102467:2,102468:2,102469:0,102470:0,102471:0,102472:0,102473:0,102474:0,102475:0,102476:0,102477:0,102478:0,102479:0,102480:0,102481:0,102482:0,102483:0,102484:0,102485:0,102486:0,102487:0,102488:0,102489:0,102490:0,102491:0,102492:0,102493:0,102494:0,102495:0,102496:0,102500:1,102501:1,102502:1,102503:1,102504:1,102505:1,102506:1,102507:1,102508:1,102509:1,102510:1,102511:1,102512:1,102513:1,102514:1,102515:1,102516:1,102517:1,102518:1,102519:1,102520:0,102521:0,102522:0,102523:0,102524:0,102525:2,102526:2,102527:2,102528:2,102529:2,102530:0,102531:0,102532:0,102533:0,102534:0,102535:0,102536:0,102537:0,102538:0,102539:0,102540:0,102541:0,102542:0,102543:0,102544:0,102545:0,102546:0,102547:0,102548:0,102549:0,102570:0,102571:0,102572:0,102573:0,102574:0,102575:0,102576:0,102577:0,102578:0,102579:0,102580:0,102581:0,102582:0,102583:0,102584:0,102585:0,102586:0,102587:0,102588:0,102589:2,102590:0,102591:0,102592:0,102593:0,102594:0,102595:0,102596:0,102597:0,102598:0,102599:2,102600:2,102601:0,102602:0,102603:0,102604:2,102605:0,102606:0,102607:0,102608:0,102609:0,102610:0,102611:0,102612:0,102613:0,102614:0,102615:0,102616:0,102617:0,102618:0,102619:0,102620:0,102621:0,102622:0,102623:0,102624:0,102625:0,102626:0,102627:0,102628:0,102629:2,102630:2,102631:2,102632:2,102633:2,102634:2,102635:2,102636:2,102637:2,102638:2,102639:2,102640:2,102641:2,102642:2,102643:2,102644:2,102645:2,102646:2,102647:0,102648:2,102649:2,102650:2,102651:2,102652:2,102653:2,102654:2,102655:2,102656:2,102657:2,102658:2,102659:2,102660:2,102661:2,102662:2,102663:2,102664:2,102665:2,102666:2,102667:2,102668:2,102669:2,102670:2,102671:2,102672:2,102673:2,102674:2,102675:2,102676:2,102677:2,102678:2,102679:2,102680:2,102681:2,102682:2,102683:2,102684:2,102685:2,102686:2,102687:2,102688:2,102689:2,102690:2,102691:2,102692:2,102693:2,102694:2,102695:2,102696:2,102697:2,102698:2,102699:2,102700:2,102701:0,102702:0,102703:0,102704:2,102705:2,102707:2,102708:2,102709:2,102710:2,102711:2,102712:2,102713:2,102714:2,102715:2,102716:2,102717:2,102718:2,102719:2,102720:2,102721:2,102722:2,102723:2,102724:2,102725:2,102726:2,102727:2,102728:2,102729:2,102730:2,102733:2,102734:2,102735:2,102736:2,102737:2,102738:2,102739:2,102740:2,102741:2,102742:2,102743:2,102744:2,102745:2,102746:2,102747:2,102748:2,102749:2,102750:2,102751:2,102752:2,102753:2,102754:2,102755:2,102756:2,102757:2,102758:2,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102767:0,102768:0,102769:0,102770:0,102771:0,102772:0,102773:0,102774:0,102775:0,102776:0,102777:0,102778:0,102779:0,102780:0,102781:0,102782:0,102783:0,102784:0,102785:0,102786:0,102787:0,102788:0,102789:0,102790:0,102791:0,102792:0,102793:0,102794:0,102795:0,102796:0,102797:0,102798:0,102962:0,102963:0,102964:0,102965:0,102966:0,102967:0,102968:0,102969:0,102970:1,102971:0,102972:0,102973:0,102974:2,102975:0,102976:0,102977:0,102978:0,102979:0,102980:0,102981:0,102982:0,102983:0,102984:0,102985:0,102986:0,102987:0,102988:0,102989:0,102990:1,102991:1,102992:1,102993:0,102994:0,102995:2,102996:2,102997:0,102998:0,102999:0,103e3:0,103001:0,103002:0,103003:2,103004:2,103005:2,103006:2,103007:2,103008:2,103009:0,103010:0,103011:0,103012:2,103013:2,103014:2,103015:0,103016:2,103017:0,103018:2,103019:0,103020:0,103021:0,103022:2,103023:2,103024:2,103025:0,103026:0,103027:2,103028:2,103029:0,103030:0,103031:0,103032:2,103033:2,103034:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103065:0,103066:0,103067:0,103068:0,103069:2,103070:0,103071:0,103072:2,103073:2,103074:0,103075:0,103076:0,103077:1,103078:1,103079:1,103080:0,103081:0,103082:0,103083:2,103084:2,103085:2,103086:0,103087:0,103088:2,103089:2,103090:0,103091:0,103092:0,103093:0,103094:1,103095:0,103096:2,103097:0,103098:0,103099:0,103100:2,103101:2,103102:2,103103:0,103104:2,103105:0,103106:2,103107:0,103108:0,103109:0,103110:2,103111:2,103112:2,103113:0,103114:0,103115:0,103116:0,103117:2,103118:2,103119:2,103120:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103153:0,103154:0,103155:0,103156:0,103157:0,103158:2,103159:2,103160:2,103161:2,103162:2,103163:0,103164:0,103165:0,103166:1,103167:1,103168:1,103169:2,103170:2,103171:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103186:0,103187:0,103188:0,103189:2,103190:2,103191:2,103192:0,103193:0,103194:0,103195:0,103196:2,103197:2,103198:2,103199:2,103200:0,103201:0,103202:0,103203:0,103204:0,103205:0,103206:0,103207:0,103208:0,103209:0,103210:0,103211:0,103212:0,103213:0,103214:0,103215:0,103216:0,103217:0,103218:0,103219:0,103220:0,103221:0,103222:0,103223:0,103224:0,103225:1,103226:1,103227:1,103228:0,103229:0,103230:2,103231:2,103232:0,103233:0,103234:0,103235:0,103236:0,103237:0,103238:2,103239:2,103240:2,103241:2,103242:2,103243:2,103244:0,103245:0,103246:0,103247:2,103248:2,103249:2,103250:0,103251:2,103252:0,103253:2,103254:0,103255:0,103256:0,103257:2,103258:2,103259:2,103260:0,103261:0,103262:2,103263:2,103264:0,103265:0,103266:0,103267:2,103268:2,103269:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103300:0,103301:0,103302:0,103303:0,103304:0,103305:0,103306:0,103307:0,103308:0,103309:0,103310:0,103311:0,103312:0,103313:0,103314:0,103315:0,103316:0,103317:0,103318:0,103319:0,103320:0,103321:0,103322:0,103323:0,103324:0,103325:0,103326:0,103327:0,103328:0,103329:0,103330:0,103331:0,103332:0,103333:0,103334:0,103335:0,103336:0,103337:0,103338:0,103339:0,103340:0,103341:0,103342:0,103343:0,103344:0,103345:0,103346:0,103347:0,103348:0,103349:0,103350:0,103351:0,103352:0,103353:0,103354:0,103355:0,103356:0,103357:0,103358:0,103359:0,103360:0,103361:0,103362:0,103363:0,103364:0,103365:0,103366:0,103367:0,103368:0,103369:0,103370:0,103371:0,103372:0,103373:0,103374:0,103375:0,103376:2,103377:0,103378:0,103379:2,103380:2,103381:0,103382:0,103383:0,103384:1,103385:1,103386:1,103387:0,103388:0,103389:0,103390:2,103391:2,103392:2,103393:0,103394:0,103395:2,103396:2,103397:0,103398:0,103399:0,103400:2,103401:2,103402:2,103403:2,103404:2,103405:2,103406:2,103407:2,103408:2,103409:2,103410:2,103411:2,103412:2,103413:2,103414:2,103415:2,103416:2,103417:2,103418:2,103419:2,103420:2,103421:2,103422:2,103423:2,103424:2,103425:2,103426:2,103427:2,103428:2,103429:2,103430:2,103431:2,103432:2,103433:2,103434:2,103435:2,103436:2,103437:2,103438:2,103439:2,103440:2,103441:2,103442:2,103443:2,103444:2,103445:2,103446:2,103447:2,103448:2,103449:2,103450:2,103451:2,103452:2,103453:2,103454:2,103455:2,103456:2,103457:2,103458:2,103459:2,103460:2,103461:2,103462:2,103463:2,103464:2,103465:2,103466:2,103467:2,103468:2,103469:2,103470:2,103471:2,103472:0,103473:1,103474:0,103475:2,103476:0,103477:0,103478:0,103479:2,103480:2,103481:2,103482:0,103483:2,103484:0,103485:2,103486:0,103487:0,103488:0,103489:2,103490:2,103491:2,103492:0,103493:0,103494:0,103495:0,103496:2,103497:2,103498:2,103499:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103528:0,103529:0,103530:0,103531:0,103532:0,103533:0,103534:0,103535:0,103536:0,103537:0,103538:0,103539:0,103540:0,103541:0,103542:0,103543:0,103544:2,103545:2,103546:2,103547:2,103548:2,103549:0,103550:0,103551:0,103552:1,103553:1,103554:1,103555:2,103556:2,103557:2,103558:0,103559:0,103560:0,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103571:0,103572:0,103573:0,103574:2,103575:2,103576:2,103577:0,103578:0,103579:0,103580:0,103581:2,103582:2,103583:2,103584:0,103585:2,103600:0,103601:0,103602:0,103603:0,103604:0,103605:0,103606:0,103607:0,103608:0,103609:0,103610:0,103611:0,103612:0,103613:0,103614:0,103615:0,103616:0,103617:0,103618:0,103619:0,103620:0,103621:0,103622:0,103623:0,103624:0,103625:0,103626:0,103627:0,103628:0,103629:0,103630:0,103631:0,103632:0,103633:0,103634:0,103635:0,103636:0,103637:0,103638:0,103639:0,103640:0,103641:0,103642:0,103643:0,103644:0,103645:0,103646:0,103647:0,103648:0,103649:0,103650:0,103651:0,103652:0,103653:0,103654:0,103655:0,103656:0,103657:0,103658:0,103659:0,103660:0,103661:0,103662:0,103663:0,103664:0,103665:0,103666:0,103667:0,103668:0,103669:0,103670:0,103671:0,103672:0,103673:0,103674:0,103675:0,103676:0,103677:0,103678:0,103679:0,103680:0,103681:0,103682:0,103683:0,103684:0,103685:0,103686:0,103687:0,103688:0,103689:0,103690:0,103691:0,103692:0,103693:0,103694:0,103695:2,103700:2,103701:2,103702:2,103703:2,103704:2,103705:2,103706:2,103707:2,103708:2,103709:2,103710:2,103711:2,103712:2,103713:2,103714:2,103715:2,103716:2,103717:2,103718:2,103719:2,103720:2,103721:2,103722:2,103723:2,103724:2,103725:2,103726:2,103727:2,103728:2,103729:2,103730:2,103731:2,103732:2,103733:2,103734:2,103735:2,103736:2,103737:2,103738:2,103739:2,103740:2,103741:2,103742:2,103743:2,103744:2,103745:2,103746:2,103747:2,103748:2,103749:2,103750:2,103751:2,103752:2,103753:2,103754:2,103755:2,103756:2,103757:2,103758:2,103759:2,103760:2,103761:2,103762:2,103763:2,103764:2,103765:2,103766:2,103767:2,103768:2,103769:2,103770:2,103771:2,103772:2,103773:2,103774:2,103775:2,103776:2,103777:2,103778:2,103779:2,103780:2,103781:2,103782:2,103783:2,103784:2,103785:2,103786:2,103787:2,103788:2,103789:2,103790:2,103791:2,103792:2,103793:2,103794:0,103795:0,103796:0,103797:0,103798:0,103799:0,103800:0,103801:0,103802:0,103803:0,103804:0,103805:0,103806:0,103807:0,103808:0,103809:0,103810:0,103811:0,103812:0,103813:0,103814:0,103815:0,103816:0,103817:0,103818:0,103819:0,103820:0,103821:0,103822:0,103823:0,103824:0,103825:0,103826:0,103827:0,103828:0,103829:0,103830:0,103831:0,103832:0,103833:0,103834:0,103835:0,103836:0,103837:0,103838:0,103839:0,103840:0,103841:0,103842:0,103843:0,103844:0,103845:0,103846:0,103847:0,103848:0,103849:0,103850:0,103851:0,103852:0,103853:0,103854:0,103855:0,103856:0,103857:0,103858:0,103859:0,103860:0,103861:0,103862:0,103863:0,103864:0,103865:0,103866:0,103867:0,103868:0,103869:0,103870:0,103871:0,103900:2,103901:2,103902:2,103903:2,103904:2,103905:2,103906:2,103907:2,103908:2,103909:2,103910:2,103911:2,103912:2,103913:2,103914:2,103915:2,103916:2,103917:2,103918:2,103919:2,103920:2,103921:2,103922:2,103923:2,103924:2,103925:2,103926:2,103927:2,103928:2,103929:2,103930:2,103931:2,103932:2,103933:2,103934:2,103935:2,103936:2,103937:2,103938:2,103939:2,103940:2,103941:2,103942:2,103943:2,103944:2,103945:2,103946:2,103947:2,103948:2,103949:2,103950:2,103951:2,103952:2,103953:2,103954:2,103955:2,103956:2,103957:2,103958:2,103959:2,103960:2,103961:2,103962:2,103963:2,103964:2,103965:2,103966:2,103967:2,103968:2,103969:2,103970:2,103971:2};
return e("extend-esri")&&(t.WKIDUnitConversion=i),i})},"dojo/cldr/supplemental":function(){define(["../_base/lang","../i18n"],function(e,t){var i={};return e.setObject("dojo.cldr.supplemental",i),i.getFirstDayOfWeek=function(e){return e={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[i._region(e)],void 0===e?1:e},i._region=function(e){e=t.normalizeLocale(e),e=e.split("-");var i=e[1];return i?4==i.length&&(i=e[2]):i={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[e[0]],i},i.getWeekend=function(e){var t=i._region(e);return e={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[t],t={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[t],void 0===e&&(e=6),void 0===t&&(t=0),{start:e,end:t}},i})},"esri/layers/CodedValueDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has esri/kernel esri/lang esri/layers/Domain".split(" "),function(e,t,i,n,s,r){return e=e([r],{declaredClass:"esri.layers.CodedValueDomain",constructor:function(e){e&&t.isObject(e)&&(this.codedValues=e.codedValues)},toJson:function(){var e=this.inherited(arguments);return e.codedValues=t.clone(this.codedValues),s.fixJson(e)}}),i("extend-esri")&&t.setObject("layers.CodedValueDomain",e,n),e})},"esri/layers/TileInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has esri/kernel esri/lang esri/SpatialReference esri/geometry/Point esri/layers/LOD".split(" "),function(e,t,i,n,s,r,o,a,l){return e=e(null,{declaredClass:"esri.layers.TileInfo",constructor:function(e){t.mixin(this,e),this.width=this.cols,this.height=this.rows,e=this.spatialReference;var n=this.origin;e&&(e=this.spatialReference=new o(e.toJson?e.toJson():e)),n&&(this.origin=new a(n.toJson?n.toJson():n),!n.spatialReference&&e&&this.origin.setSpatialReference(new o(e.toJson()))),this.lods=i.map(this.lods,function(e){return new l(e)})},toJson:function(){return r.fixJson({rows:this.rows,cols:this.cols,dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJson(),spatialReference:this.spatialReference&&this.spatialReference.toJson(),lods:this.lods&&i.map(this.lods,function(e){return e.toJson()})})}}),n("extend-esri")&&t.setObject("layers.TileInfo",e,s),e})},"dojo/request/script":function(){define("module ./watch ./util ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(d,l,p,q,h,k,g,f,b,a){function c(e,t){e.canDelete&&n._remove(e.id,t.options.frameDoc,!0)}function e(e){return A&&A.length&&(q.forEach(A,function(e){n._remove(e.id,e.frameDoc),e.frameDoc=null}),A=[]),e.options.jsonp?!e.data:!0}function m(){return!!this.scriptLoaded}function r(a){return(a=a.options.checkString)&&eval("typeof("+a+') !== "undefined"')}function u(e,t){if(this.canDelete){var i=this.response.options;A.push({id:this.id,frameDoc:i.ioArgs?i.ioArgs.frameDoc:i.frameDoc}),i.ioArgs&&(i.ioArgs.frameDoc=null),i.frameDoc=null}t?this.reject(t):this.resolve(e)}function n(t,i,o){var a=p.parseArgs(t,p.deepCopy({},i));t=a.url,i=a.options;var d=p.deferred(a,c,e,i.jsonp?null:i.checkString?r:m,u);if(h.mixin(d,{id:v+s++,canDelete:!1}),i.jsonp&&(RegExp("[?&]"+i.jsonp+"=").test(t)||(t+=(~t.indexOf("?")?"&":"?")+i.jsonp+"="+(i.frameDoc?"parent.":"")+v+"_callbacks."+d.id),d.canDelete=!0,w[d.id]=function(e){a.data=e,d.handleResponse(a)}),p.notify&&p.notify.emit("send",a,d.promise.cancel),!i.canAttach||i.canAttach(d)){var f=n._attach(d.id,t,i.frameDoc);if(!i.jsonp&&!i.checkString)var _=k(f,y,function(e){("load"===e.type||x.test(f.readyState))&&(_.remove(),d.scriptLoaded=e)})}return l(d),o?d:d.promise}b.add("script-readystatechange",function(e,t){return"undefined"!=typeof t.createElement("script").onreadystatechange&&("undefined"==typeof e.opera||"[object Opera]"!==e.opera.toString())});var v=d.id.replace(/[\/\.\-]/g,"_"),s=0,y=b("script-readystatechange")?"readystatechange":"load",x=/complete|loaded/,w=this[v+"_callbacks"]={},A=[];return n.get=n,n._attach=function(e,t,i){i=i||a.doc;var n=i.createElement("script");return n.type="text/javascript",n.src=t,n.id=e,n.async=!0,n.charset="utf-8",i.getElementsByTagName("head")[0].appendChild(n)},n._remove=function(e,t,i){f.destroy(g.byId(e,t)),w[e]&&(i?w[e]=function(){delete w[e]}:delete w[e])},n._callbacksProperty=v+"_callbacks",n})},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(e,t,i,n,s){var r={};return e.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),function(e){r[e]=n[e]}),i.mixin(r,{defaultDuration:t.defaultDuration||200}),i.mixin(s,r),s})},"dijit/popup":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/keys dojo/_base/lang dojo/on ./place ./BackgroundIframe ./Viewport ./main".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p,m){function _(){this._popupWrapper&&(r.destroy(this._popupWrapper),delete this._popupWrapper)}return i=i(null,{_stack:[],_beginZIndex:1e3,_idGen:1,_repositionAll:function(){if(this._firstAroundNode){var e=this._firstAroundPosition,t=o.position(this._firstAroundNode,!0),i=t.x-e.x,e=t.y-e.y;if(i||e)for(this._firstAroundPosition=t,t=0;t<this._stack.length;t++){var n=this._stack[t].wrapper.style;n.top=parseInt(n.top,10)+e+"px","auto"==n.right?n.left=parseInt(n.left,10)+i+"px":n.right=parseInt(n.right,10)-i+"px"}this._aroundMoveListener=setTimeout(h.hitch(this,"_repositionAll"),i||e?10:50)}},_createWrapper:function(e){var i=e._popupWrapper,n=e.domNode;return i||(i=r.create("div",{"class":"dijitPopup",style:{display:"none"},role:"region","aria-label":e["aria-label"]||e.label||e.name||e.id},e.ownerDocumentBody),i.appendChild(n),n=n.style,n.display="",n.visibility="",n.position="",n.top="0px",e._popupWrapper=i,t.after(e,"destroy",_,!0)),i},moveOffScreen:function(e){var t=this._createWrapper(e);e=o.isBodyLtr(e.ownerDocument);var i={visibility:"hidden",top:"-9999px",display:""};return i[e?"left":"right"]="-9999px",i[e?"right":"left"]="auto",a.set(t,i),t},hide:function(e){var t=this._createWrapper(e);a.set(t,{display:"none",height:"auto",overflow:"visible",border:""}),e=e.domNode,"_originalStyle"in e&&(e.style.cssText=e._originalStyle)},getTopPopup:function(){for(var e=this._stack,t=e.length-1;t>0&&e[t].parent===e[t-1].widget;t--);return e[t]},open:function(e){for(var t=this._stack,i=e.popup,r=i.domNode,m=e.orient||["below","below-alt","above","above-alt"],_=e.parent?e.parent.isLeftToRight():o.isBodyLtr(i.ownerDocument),g=e.around,y=e.around&&e.around.id?e.around.id+"_dropdown":"popup_"+this._idGen++;t.length&&(!e.parent||!n.isDescendant(e.parent.domNode,t[t.length-1].widget.domNode));)this.close(t[t.length-1].widget);var v=this.moveOffScreen(i);i.startup&&!i._started&&i.startup();var b,x=o.position(r);if("maxHeight"in e&&-1!=e.maxHeight)b=e.maxHeight||1/0;else{b=p.getEffectiveBox(this.ownerDocument);var w=g?o.position(g,!1):{y:e.y-(e.padding||0),h:2*(e.padding||0)};b=Math.floor(Math.max(w.y,b.h-(w.y+w.h)))}return x.h>b&&(x=a.getComputedStyle(r),a.set(v,{overflowY:"scroll",height:b+"px",border:x.borderLeftWidth+" "+x.borderLeftStyle+" "+x.borderLeftColor}),r._originalStyle=r.style.cssText,r.style.border="none"),s.set(v,{id:y,style:{zIndex:this._beginZIndex+t.length},"class":"dijitPopup "+(i.baseClass||i["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:e.parent?e.parent.id:""}),0==t.length&&g&&(this._firstAroundNode=g,this._firstAroundPosition=o.position(g,!0),this._aroundMoveListener=setTimeout(h.hitch(this,"_repositionAll"),50)),l("config-bgIframe")&&!i.bgIframe&&(i.bgIframe=new f(v)),y=i.orient?h.hitch(i,"orient"):null,m=g?u.around(v,g,m,_,y):u.at(v,e,"R"==m?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],e.padding,y),v.style.visibility="visible",r.style.visibility="visible",r=[],r.push(d(v,"keydown",h.hitch(this,function(t){t.keyCode==c.ESCAPE&&e.onCancel?(t.stopPropagation(),t.preventDefault(),e.onCancel()):t.keyCode==c.TAB&&(t.stopPropagation(),t.preventDefault(),(t=this.getTopPopup())&&t.onCancel)&&t.onCancel()}))),i.onCancel&&e.onCancel&&r.push(i.on("cancel",e.onCancel)),r.push(i.on(i.onExecute?"execute":"change",h.hitch(this,function(){var e=this.getTopPopup();e&&e.onExecute&&e.onExecute()}))),t.push({widget:i,wrapper:v,parent:e.parent,onExecute:e.onExecute,onCancel:e.onCancel,onClose:e.onClose,handlers:r}),i.onOpen&&i.onOpen(m),m},close:function(t){for(var i=this._stack;t&&e.some(i,function(e){return e.widget==t})||!t&&i.length;){var n=i.pop(),s=n.widget,r=n.onClose;s.onClose&&s.onClose();for(var o;o=n.handlers.pop();)o.remove();s&&s.domNode&&this.hide(s),r&&r()}0==i.length&&this._aroundMoveListener&&(clearTimeout(this._aroundMoveListener),this._firstAroundNode=this._firstAroundPosition=this._aroundMoveListener=null)}}),m.popup=new i})},"esri/symbols/TextSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base esri/kernel esri/lang esri/symbols/Symbol esri/symbols/Font".split(" "),function(e,t,i,n,s,r,o,a,l){var c={type:"textsymbol",x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:s.defaultFont,angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},h={start:"left",middle:"center",end:"right"},d={left:"start",center:"middle",right:"end",justify:"start"},u={top:"text-before-edge",middle:"central",baseline:"alphabetic",bottom:"text-after-edge"};return e=e(a,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(e,n,r){t.mixin(this,c),this.font=new l(this.font),this.color=new i(this.color),e&&(t.isObject(e)?(t.mixin(this,e),this.color&&o.isDefined(this.color[0])&&(this.color=a.toDojoColor(this.color)),this.type="textsymbol",this.font=new l(this.font),this.xoffset=s.pt2px(this.xoffset),this.yoffset=s.pt2px(this.yoffset),this.angle&&(this.angle*=-1)):(this.text=e,n&&(this.font=n),r&&(this.color=r))),this.setAlign(this.align||this.getSVGAlign())},setFont:function(e){return this.font=e,this},setAngle:function(e){return this.angle=e,this},setOffset:function(e,t){return this.xoffset=e,this.yoffset=t,this},setAlign:function(e){return this.align=e,this.setHorizontalAlignment(e&&h[e.toLowerCase()]||"center"),this},setHorizontalAlignment:function(e){return this.horizontalAlignment=e,this},getSVGAlign:function(){var e=this.horizontalAlignment;return e=e&&d[e.toLowerCase()]||"middle"},setVerticalAlignment:function(e){return this.verticalAlignment=e,this},getSVGBaseline:function(){var e=this.verticalAlignment;return e&&u[e.toLowerCase()]||"alphabetic"},getSVGBaselineShift:function(){return"bottom"===this.verticalAlignment?"super":null},setDecoration:function(e){return this.decoration=e,this.font||this.setFont(new l),this.font.setDecoration(e),this},setRotated:function(e){return this.rotated=e,this},setKerning:function(e){return this.kerning=e,this},setText:function(e){return this.text=e,this},getStroke:function(){return null},getFill:function(){return this.color},getWidth:function(){var e,t,i=this.getHeight(),n=0;for(e=0;e<this.text.length;e++)t=this.text.charAt(e),n=t==t.toUpperCase()?n+.7*i:n+.5*i;return n},getHeight:function(){return s.normalizedLength(this.font.size)},toJson:function(){var e=s.px2pt(this.xoffset),i=s.px2pt(this.yoffset),e=isNaN(e)?void 0:e,i=isNaN(i)?void 0:i;return o.fixJson(t.mixin(this.inherited("toJson",arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,haloSize:this.haloSize,haloColor:this.haloColor,verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle&&-1*this.angle,xoffset:e,yoffset:i,text:this.text,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}))}}),t.mixin(e,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"}),e.defaultProps=c,n("extend-esri")&&(t.setObject("symbol.TextSymbol",e,r),r.symbol.defaultTextSymbol=c),e})},"esri/tasks/RouteResult":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has esri/kernel esri/graphic esri/tasks/DirectionsFeatureSet".split(" "),function(e,t,i,n,s,r,o){return e=e(null,{declaredClass:"esri.tasks.RouteResult",constructor:function(e){var t=e.spatialReference,n=e.route;if(e.directions){var s=[],a=[];i.forEach(e.directions.features,function(e,t){a[t]=e.compressedGeometry,s[t]=e.strings}),e.directions.strings=s,this.directions=new o(e.directions,a)}if(this.routeName=e.routeName,n&&(n.geometry&&(n.geometry.spatialReference=t),this.route=new r(n)),e.stops){var l=this.stops=[];i.forEach(e.stops,function(e){e.geometry&&(e.geometry.spatialReference=t),l[e.attributes.Sequence-1]=new r(e)})}},routeName:null,directions:null,route:null,stops:null}),n("extend-esri")&&t.setObject("tasks.RouteResult",e,s),e})},"esri/tasks/RouteParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has esri/kernel esri/lang esri/graphicsUtils esri/tasks/NATypes".split(" "),function(e,t,i,n,s,r,o,a){return e=e(null,{declaredClass:"esri.tasks.RouteParameters",accumulateAttributes:null,attributeParameterValues:null,barriers:null,directionsLanguage:null,directionsLengthUnits:null,directionsOutputType:null,directionsStyleName:null,directionsTimeAttribute:null,doNotLocateOnRestrictedElements:!0,findBestSequence:null,ignoreInvalidLocations:null,impedanceAttribute:null,outputLines:"esriNAOutputLineTrueShape",outputGeometryPrecision:null,outputGeometryPrecisionUnits:null,outSpatialReference:null,polygonBarriers:null,polylineBarriers:null,preserveFirstStop:null,preserveLastStop:null,restrictionAttributes:null,restrictUTurns:null,returnBarriers:!1,returnDirections:!1,returnPolygonBarriers:!1,returnPolylineBarriers:!1,returnRoutes:!0,returnStops:!1,startTime:null,startTimeIsUTC:null,stops:null,useHierarchy:null,useTimeWindows:null,toJson:function(e){var t={returnDirections:this.returnDirections,returnRoutes:this.returnRoutes,returnStops:this.returnStops,returnBarriers:this.returnBarriers,returnPolygonBarriers:this.returnPolygonBarriers,returnPolylineBarriers:this.returnPolylineBarriers,attributeParameterValues:this.attributeParameterValues&&i.toJson(this.attributeParameterValues),outSR:this.outSpatialReference?this.outSpatialReference.wkid||i.toJson(this.outSpatialReference.toJson()):null,outputLines:this.outputLines,findBestSequence:this.findBestSequence,preserveFirstStop:this.preserveFirstStop,preserveLastStop:this.preserveLastStop,useTimeWindows:this.useTimeWindows,startTime:this.startTime?this.startTime.getTime():null,startTimeIsUTC:this.startTimeIsUTC,accumulateAttributeNames:this.accumulateAttributes?this.accumulateAttributes.join(","):null,ignoreInvalidLocations:this.ignoreInvalidLocations,impedanceAttributeName:this.impedanceAttribute,restrictionAttributeNames:this.restrictionAttributes?this.restrictionAttributes.join(","):null,restrictUTurns:this.restrictUTurns,useHierarchy:this.useHierarchy,directionsLanguage:this.directionsLanguage,outputGeometryPrecision:this.outputGeometryPrecision,outputGeometryPrecisionUnits:this.outputGeometryPrecisionUnits,directionsLengthUnits:a.LengthUnit[this.directionsLengthUnits],directionsTimeAttributeName:this.directionsTimeAttribute,directionsStyleName:this.directionsStyleName},n=this.stops;if("esri.tasks.FeatureSet"===n.declaredClass&&0<n.features.length?t.stops=i.toJson({type:"features",features:o._encodeGraphics(n.features,e&&e["stops.features"]),doNotLocateOnRestrictedElements:this.doNotLocateOnRestrictedElements}):"esri.tasks.DataLayer"===n.declaredClass?t.stops=n:"esri.tasks.DataFile"===n.declaredClass&&(t.stops=i.toJson({type:"features",url:n.url,doNotLocateOnRestrictedElements:this.doNotLocateOnRestrictedElements})),this.directionsOutputType)switch(this.directionsOutputType.toLowerCase()){case"complete":t.directionsOutputType="esriDOTComplete";break;case"complete-no-events":t.directionsOutputType="esriDOTCompleteNoEvents";break;case"instructions-only":t.directionsOutputType="esriDOTInstructionsOnly";break;case"standard":t.directionsOutputType="esriDOTStandard";break;case"summary-only":t.directionsOutputType="esriDOTSummaryOnly";break;default:t.directionsOutputType=this.directionsOutputType}return n=function(t,n){return t?"esri.tasks.FeatureSet"===t.declaredClass?0<t.features.length?i.toJson({type:"features",features:o._encodeGraphics(t.features,e&&e[n])}):null:"esri.tasks.DataLayer"===t.declaredClass?t:"esri.tasks.DataFile"===t.declaredClass?i.toJson({type:"features",url:t.url}):i.toJson(t):null},this.barriers&&(t.barriers=n(this.barriers,"barriers.features")),this.polygonBarriers&&(t.polygonBarriers=n(this.polygonBarriers,"polygonBarriers.features")),this.polylineBarriers&&(t.polylineBarriers=n(this.polylineBarriers,"polylineBarriers.features")),r.filter(t,function(e){return null!==e?!0:void 0})}}),n("extend-esri")&&t.setObject("tasks.RouteParameters",e,s),e})},"esri/tasks/StatisticDefinition":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(e,t,i,n){return e=e(null,{declaredClass:"esri.tasks.StatisticDefinition",statisticType:null,onStatisticField:null,outStatisticFieldName:null,toJson:function(){var e={statisticType:this.statisticType,onStatisticField:this.onStatisticField};return this.outStatisticFieldName&&(e.outStatisticFieldName=this.outStatisticFieldName),e}}),i("extend-esri")&&t.setObject("tasks.StatisticDefinition",e,n),e})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u){return t("dojo.dnd.Mover",[l],{constructor:function(e,t,n){function s(e){e.preventDefault(),e.stopPropagation()}this.node=r.byId(e),this.marginBox={l:t.pageX,t:t.pageY},this.mouseButton=t.button,t=this.host=n,e=e.ownerDocument,this.events=[c(e,h.move,i.hitch(this,"onFirstMove")),c(e,h.move,i.hitch(this,"onMouseMove")),c(e,h.release,i.hitch(this,"onMouseUp")),c(e,"dragstart",s),c(e.body,"selectstart",s)],u.autoScrollStart(e),t&&t.onMoveStart&&t.onMoveStart(this)},onMouseMove:function(e){u.autoScroll(e);var t=this.marginBox;this.host.onMove(this,{l:t.l+e.pageX,t:t.t+e.pageY},e),e.preventDefault(),e.stopPropagation()},onMouseUp:function(e){(n("webkit")&&n("mac")&&2==this.mouseButton?0==e.button:this.mouseButton==e.button)&&this.destroy(),e.preventDefault(),e.stopPropagation()},onFirstMove:function(e){var t,i=this.node.style,n=this.host;switch(i.position){case"relative":case"absolute":t=Math.round(parseFloat(i.left))||0,i=Math.round(parseFloat(i.top))||0;break;default:i.position="absolute",i=o.getMarginBox(this.node),t=s.doc.body;var r=a.getComputedStyle(t),l=o.getMarginBox(t,r),r=o.getContentBox(t,r);t=i.l-(r.l-l.l),i=i.t-(r.t-l.t)}this.marginBox.l=t-this.marginBox.l,this.marginBox.t=i-this.marginBox.t,n&&n.onFirstMove&&n.onFirstMove(this,e),this.events.shift().remove()},destroy:function(){e.forEach(this.events,function(e){e.remove()});var t=this.host;t&&t.onMoveStop&&t.onMoveStop(this),this.events=this.node=this.host=null}})})},"esri/fx":function(){define("dojo/_base/connect dojo/_base/fx dojo/_base/lang dojo/dom dojo/dom-geometry dojo/dom-style dojo/fx dojo/has esri/kernel".split(" "),function(e,t,i,n,s,r,o,a,l){var c={animateRange:function(e){var n=e.range;return new t.Animation(i.mixin({curve:new t._Line(n.start,n.end)},e))},resize:function(e){var r=e.node=n.byId(e.node),o=e.start,a=e.end;return o||(o=s.getMarginBox(r),r=s.getPadBorderExtents(r),o=e.start={left:o.l+r.l,top:o.t+r.t,width:o.w-r.w,height:o.h-r.h}),a||(a=e.anchor?e.anchor:{x:o.left,y:o.top},r=e.size,a=e.end={left:o.left-(r.width-o.width)*(a.x-o.left)/o.width,top:o.top-(r.height-o.height)*(a.y-o.top)/o.height,width:r.width,height:r.height}),t.animateProperty(i.mixin({properties:{left:{start:o.left,end:a.left},top:{start:o.top,end:a.top},width:{start:o.width,end:a.width},height:{start:o.height,end:a.height}}},e))},slideTo:function(o){var a=o.node=n.byId(o.node),l=r.getComputedStyle,c=null,h=null,d=function(){return function(){var e="absolute"==a.style.position?"absolute":"relative";c="absolute"==e?a.offsetTop:parseInt(l(a).top)||0,h="absolute"==e?a.offsetLeft:parseInt(l(a).left)||0,"absolute"!=e&&"relative"!=e&&(e=s.position(a,!0),c=e.y,h=e.x,a.style.position="absolute",a.style.top=c+"px",a.style.left=h+"px")}}();return d(),o=t.animateProperty(i.mixin({properties:{top:{start:c,end:o.top||0},left:{start:h,end:o.left||0}}},o)),e.connect(o,"beforeBegin",o,d),o},flash:function(e){e=i.mixin({end:"#f00",duration:500,count:1},e),e.duration/=2*e.count;var s=n.byId(e.node),a=e.start;a||(a=r.getComputedStyle(s).backgroundColor);var l=e.end,c=[],h=e.count,s={node:s,duration:e.duration};for(e=0;h>e;e++)c.push(t.animateProperty(i.mixin({properties:{backgroundColor:{start:a,end:l}}},s))),c.push(t.animateProperty(i.mixin({properties:{backgroundColor:{start:l,end:a}}},s)));return o.chain(c)}};return a("extend-esri")&&i.mixin(i.getObject("fx",!0,l),c),c})},"esri/renderer":function(){define("esri/renderers/Renderer esri/renderers/SimpleRenderer esri/renderers/UniqueValueRenderer esri/renderers/ClassBreaksRenderer esri/renderers/TemporalRenderer esri/renderers/SymbolAger esri/renderers/TimeClassBreaksAger esri/renderers/TimeRampAger esri/renderers/jsonUtils".split(" "),function(e,t,i,n,s,r,o,a,l){return{Renderer:e,SimpleRenderer:t,UniqueValueRenderer:i,ClassBreaksRenderer:n,TemporalRenderer:s,SymbolAger:r,TimeClassBreaksAger:o,TimeRampAger:a,jsonUtils:l}})},"esri/tasks/gp":function(){define("esri/tasks/Geoprocessor esri/tasks/JobInfo esri/tasks/GPMessage esri/tasks/LinearUnit esri/tasks/DataFile esri/tasks/RasterData esri/tasks/Date esri/tasks/ParameterValue esri/tasks/GPResultImageLayer".split(" "),function(){return{}})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(e,t,i,n,s,r,o,a){a.add("config-bgIframe",!a("touch"));var l=new function(){var t=[];this.pop=function(){var r;return t.length?(r=t.pop(),r.style.display=""):(9>a("ie")?(r="<iframe src='"+(i.dojoBlankHtmlUrl||e.toUrl("dojo/resources/blank.html")||'javascript:""')+"' role='presentation' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>",r=document.createElement(r)):(r=n.create("iframe"),r.src='javascript:""',r.className="dijitBackgroundIframe",r.setAttribute("role","presentation"),s.set(r,"opacity",.1)),r.tabIndex=-1),r},this.push=function(e){e.style.display="none",t.push(e)}};return t.BackgroundIframe=function(e){if(!e.id)throw Error("no id");if(a("config-bgIframe")){var t=this.iframe=l.pop();e.appendChild(t),7>a("ie")||a("quirks")?(this.resize(e),this._conn=o(e,"resize",r.hitch(this,"resize",e))):s.set(t,{width:"100%",height:"100%"})}},r.extend(t.BackgroundIframe,{resize:function(e){this.iframe&&s.set(this.iframe,{width:e.offsetWidth+"px",height:e.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null),this.iframe&&(l.push(this.iframe),delete this.iframe)}}),t.BackgroundIframe})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html".split(" "),function(e,t,i,n,s,r,o,a,l,c){return n("dijit-legacy-requires")&&o(0,function(){e(["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"])}),o=t("dijit.form.Button"+(n("dojo-bidi")?"_NoBidi":""),[a,l],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:c,_setValueAttr:"valueNode",_setNameAttr:function(e){this.valueNode&&this.valueNode.setAttribute("name",e)},_fillContent:function(e){!e||this.params&&"label"in this.params||(e=r.trim(e.innerHTML))&&(this.label=e)},_setShowLabelAttr:function(e){this.containerNode&&i.toggle(this.containerNode,"dijitDisplayNone",!e),this._set("showLabel",e)},setLabel:function(e){s.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0"),this.set("label",e)},_setLabelAttr:function(){this.inherited(arguments),!this.showLabel&&!("title"in this.params)&&(this.titleNode.title=r.trim(this.containerNode.innerText||this.containerNode.textContent||""))}}),n("dojo-bidi")&&(o=t("dijit.form.Button",o,{_setLabelAttr:function(){this.inherited(arguments),this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(e){this._created&&this.textDir!=e&&(this._set("textDir",e),this._setLabelAttr(this.label))}})),o})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p,m,_,g,y,v,b,x,w){function S(e){return function(t){a[t?"set":"remove"](this.domNode,e,t),this._set(e,t)}}u.add("dijit-legacy-requires",!f.isAsync),u.add("dojo-bidi",!1),u("dijit-legacy-requires")&&_(0,function(){e(["dijit/_base/manager"])});var T={};return n=r("dijit._WidgetBase",[g,b],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:S("lang"),dir:"",_setDirAttr:S("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(e){this._set("ownerDocument",e)},attributeMap:{},_blankGif:n.blankGif||e.toUrl("dojo/resources/blank.gif"),_introspect:function(){var e=this.constructor;if(!e._setterAttrs){var t,i=e.prototype,n=e._setterAttrs=[],e=e._onMap={};for(t in i.attributeMap)n.push(t);for(t in i)/^on/.test(t)&&(e[t.substring(2).toLowerCase()]=t),/^_set[A-Z](.*)Attr$/.test(t)&&(t=t.charAt(4).toLowerCase()+t.substr(5,t.length-9),!(i.attributeMap&&t in i.attributeMap||!n.push(t)))}},postscript:function(e,t){this.create(e,t)},create:function(e,t){this._introspect(),this.srcNodeRef=o.byId(t),this._connects=[],this._supportingWidgets=[],this.srcNodeRef&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id),e&&(this.params=e,p.mixin(this,e)),this.postMixInProperties(),this.id||(this.id=w.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id),this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document),this.ownerDocumentBody=v.body(this.ownerDocument),w.add(this),this.buildRendering();var i;if(this.domNode){this._applyAttributes();var n=this.srcNodeRef;n&&n.parentNode&&this.domNode!==n&&(n.parentNode.replaceChild(this.domNode,n),i=!0),this.domNode.setAttribute("widgetId",this.id)}this.postCreate(),i&&delete this.srcNodeRef,this._created=!0},_applyAttributes:function(){var e,i={};for(e in this.params||{})i[e]=this._get(e);t.forEach(this.constructor._setterAttrs,function(e){if(!(e in i)){var t=this._get(e);t&&this.set(e,t)}},this);for(e in i)this.set(e,i[e])},postMixInProperties:function(){},buildRendering:function(){if(this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div")),this.baseClass){var e=this.baseClass.split(" ");this.isLeftToRight()||(e=e.concat(t.map(e,function(e){return e+"Rtl"}))),l.add(this.domNode,e)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,t.forEach(this.getChildren(),function(e){!e._started&&!e._destroyed&&p.isFunction(e.startup)&&(e.startup(),e._started=!0)}))},destroyRecursive:function(e){this._beingDestroyed=!0,this.destroyDescendants(e),this.destroy(e)},destroy:function(e){function i(t){t.destroyRecursive?t.destroyRecursive(e):t.destroy&&t.destroy(e)
}this._beingDestroyed=!0,this.uninitialize(),t.forEach(this._connects,p.hitch(this,"disconnect")),t.forEach(this._supportingWidgets,i),this.domNode&&t.forEach(w.findWidgets(this.domNode,this.containerNode),i),this.destroyRendering(e),w.remove(this.id),this._destroyed=!0},destroyRendering:function(e){this.bgIframe&&(this.bgIframe.destroy(e),delete this.bgIframe),this.domNode&&(e?a.remove(this.domNode,"widgetId"):c.destroy(this.domNode),delete this.domNode),this.srcNodeRef&&(e||c.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(e){t.forEach(this.getChildren(),function(t){t.destroyRecursive&&t.destroyRecursive(e)})},uninitialize:function(){return!1},_setStyleAttr:function(e){var t=this.domNode;p.isObject(e)?d.set(t,e):t.style.cssText=t.style.cssText?t.style.cssText+("; "+e):e,this._set("style",e)},_attrToDom:function(e,i,n){n=3<=arguments.length?n:this.attributeMap[e],t.forEach(p.isArray(n)?n:[n],function(t){var n=this[t.node||t||"domNode"];switch(t.type||"attribute"){case"attribute":p.isFunction(i)&&(i=p.hitch(this,i)),t=t.attribute?t.attribute:/^on[A-Z][a-zA-Z]*$/.test(e)?e.toLowerCase():e,n.tagName?a.set(n,t,i):n.set(t,i);break;case"innerText":n.innerHTML="",n.appendChild(this.ownerDocument.createTextNode(i));break;case"innerHTML":n.innerHTML=i;break;case"class":l.replace(n,i,this[e])}},this)},get:function(e){var t=this._getAttrNames(e);return this[t.g]?this[t.g]():this._get(e)},set:function(e,t){if("object"==typeof e){for(var i in e)this.set(i,e[i]);return this}i=this._getAttrNames(e);var n=this[i.s];if(p.isFunction(n))var s=n.apply(this,Array.prototype.slice.call(arguments,1));else{var r,n=this.focusNode&&!p.isFunction(this.focusNode)?"focusNode":"domNode",o=this[n]&&this[n].tagName;if((r=o)&&!(r=T[o])){r=this[n];var a,l={};for(a in r)l[a.toLowerCase()]=!0;r=T[o]=l}a=r,i=e in this.attributeMap?this.attributeMap[e]:i.s in this?this[i.s]:a&&i.l in a&&"function"!=typeof t||/^aria-|^data-|^role$/.test(e)?n:null,null!=i&&this._attrToDom(e,t,i),this._set(e,t)}return s||this},_attrPairNames:{},_getAttrNames:function(e){var t=this._attrPairNames;if(t[e])return t[e];var i=e.replace(/^[a-z]|-[a-zA-Z]/g,function(e){return e.charAt(e.length-1).toUpperCase()});return t[e]={n:e+"Node",s:"_set"+i+"Attr",g:"_get"+i+"Attr",l:i.toLowerCase()}},_set:function(e,t){var i=this[e];this[e]=t,this._created&&t!==i&&(this._watchCallbacks&&this._watchCallbacks(e,i,t),this.emit("attrmodified-"+e,{detail:{prevValue:i,newValue:t}}))},_get:function(e){return this[e]},emit:function(e,t,i){t=t||{},void 0===t.bubbles&&(t.bubbles=!0),void 0===t.cancelable&&(t.cancelable=!0),t.detail||(t.detail={}),t.detail.widget=this;var n,s=this["on"+e];return s&&(n=s.apply(this,i?i:[t])),this._started&&!this._beingDestroyed&&m.emit(this.domNode,e.toLowerCase(),t),n},on:function(e,t){var n=this._onMap(e);return n?i.after(this,n,t,!0):this.own(m(this.domNode,e,t))[0]},_onMap:function(e){var t=this.constructor,i=t._onMap;if(!i){var n,i=t._onMap={};for(n in t.prototype)/^on/.test(n)&&(i[n.replace(/^on/,"").toLowerCase()]=n)}return i["string"==typeof e&&e.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?w.findWidgets(this.containerNode):[]},getParent:function(){return w.getEnclosingWidget(this.domNode.parentNode)},connect:function(e,t,i){return this.own(s.connect(e,t,this,i))[0]},disconnect:function(e){e.remove()},subscribe:function(e,t){return this.own(y.subscribe(e,p.hitch(this,t)))[0]},unsubscribe:function(e){e.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir:h.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=d.get(this.domNode,"display")},placeAt:function(e,t){var i=!e.tagName&&w.byId(e);return!i||!i.addChild||t&&"number"!=typeof t?(i=i?i.containerNode&&!/after|before|replace/.test(t||"")?i.containerNode:i.domNode:o.byId(e,this.ownerDocument),c.place(this.domNode,i,t),!this._started&&(this.getParent()||{})._started&&this.startup()):i.addChild(this,t),this},defer:function(e,t){var i=setTimeout(p.hitch(this,function(){i&&(i=null,this._destroyed||p.hitch(this,e)())}),t||0);return{remove:function(){return i&&(clearTimeout(i),i=null),null}}}}),u("dojo-bidi")&&n.extend(x),n})},"esri/geometry/ScreenPoint":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/geometry/Point"],function(e,t,i,n,s){return e=e(s,{declaredClass:"esri.geometry.ScreenPoint",verifySR:function(){}}),i("extend-esri")&&t.setObject("geometry.ScreenPoint",e,n),e})},"esri/layers/LayerTimeOptions":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(e,t,i,n,s){return e=e(null,{declaredClass:"esri.layers.LayerTimeOptions",constructor:function(e){e&&t.mixin(this,e)},toJson:function(){return s.fixJson({timeDataCumulative:this.timeDataCumulative,timeOffset:this.timeOffset,timeOffsetUnits:this.timeOffsetUnits,useTime:this.useTime})}}),i("extend-esri")&&t.setObject("layers.LayerTimeOptions",e,n),e})},"esri/tasks/RelationParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has esri/kernel esri/geometry/jsonUtils".split(" "),function(e,t,i,n,s,r,o){return e=e(null,{declaredClass:"esri.tasks.RelationParameters",geometries1:null,geometries2:null,relation:null,relationParam:null,toJson:function(){var e=i.map(this.geometries1,function(e){return e.toJson()}),t=i.map(this.geometries2,function(e){return e.toJson()}),s={},r=this.geometries1;return r&&0<r.length&&(s.geometries1=n.toJson({geometryType:o.getJsonType(r[0]),geometries:e}),e=this.geometries1[0].spatialReference,s.sr=e.wkid?e.wkid:n.toJson(e.toJson())),(e=this.geometries2)&&0<e.length&&(s.geometries2=n.toJson({geometryType:o.getJsonType(e[0]),geometries:t})),this.relation&&(s.relation=this.relation),this.relationParam&&(s.relationParam=n.toJson(this.relationParam)),s}}),t.mixin(e,{SPATIAL_REL_CROSS:"esriGeometryRelationCross",SPATIAL_REL_DISJOINT:"esriGeometryRelationDisjoint",SPATIAL_REL_IN:"esriGeometryRelationIn",SPATIAL_REL_INTERIORINTERSECTION:"esriGeometryRelationInteriorIntersection",SPATIAL_REL_INTERSECTION:"esriGeometryRelationIntersection",SPATIAL_REL_COINCIDENCE:"esriGeometryRelationLineCoincidence",SPATIAL_REL_LINETOUCH:"esriGeometryRelationLineTouch",SPATIAL_REL_OVERLAP:"esriGeometryRelationOverlap",SPATIAL_REL_POINTTOUCH:"esriGeometryRelationPointTouch",SPATIAL_REL_TOUCH:"esriGeometryRelationTouch",SPATIAL_REL_WITHIN:"esriGeometryRelationWithin",SPATIAL_REL_RELATION:"esriGeometryRelationRelation"}),s("extend-esri")&&t.setObject("tasks.RelationParameters",e,r),e})},"esri/tasks/locator":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has esri/kernel esri/request esri/deferredUtils esri/tasks/Task esri/tasks/AddressCandidate".split(" "),function(e,t,i,n,s,r,o,a,l,c,h){return e=e(c,{declaredClass:"esri.tasks.Locator",_eventMap:{"address-to-locations-complete":["addresses"],"addresses-to-locations-complete":["addresses"],"location-to-address-complete":["address"]},constructor:function(){this._geocodeHandler=t.hitch(this,this._geocodeHandler),this._geocodeAddressesHandler=t.hitch(this,this._geocodeAddressesHandler),this._reverseGeocodeHandler=t.hitch(this,this._reverseGeocodeHandler),this.registerConnectEvents()},outSpatialReference:null,setOutSpatialReference:function(e){this.outSpatialReference=e},_geocodeHandler:function(e,t,i,n,s){try{var r,o=e.candidates;t=[];var a,l,c=o.length,d=e.spatialReference;for(a=0;c>a;a++)r=o[a],(l=r.location)&&(l.spatialReference=d),t[a]=new h(r);this._successHandler([t],"onAddressToLocationsComplete",i,s)}catch(u){this._errorHandler(u,n,s)}},_geocodeAddressesHandler:function(e,t,i,n,s){try{var r=e.locations;t=[];var o,a,l=r.length,c=e.spatialReference;for(o=0;l>o;o++)(a=r[o].location)&&(a.spatialReference=c),t[o]=new h(r[o]);this._successHandler([t],"onAddressesToLocationsComplete",i,s)}catch(d){this._errorHandler(d,n,s)}},addressToLocations:function(e,i,r,o,c){var h;e.address&&(o=r,r=i,i=e.outFields,c=e.searchExtent,e=e.address,h=e.magicKey),c&&(c=c._normalize(!0));var d=this.outSpatialReference;e=this._encode(t.mixin({},this._url.query,e,{f:"json",outSR:d&&s.toJson(d.toJson()),outFields:i&&i.join(",")||null,searchExtent:c&&s.toJson(c.toJson()),magicKey:h||null}));var u=this._geocodeHandler,f=this._errorHandler,p=new n(l._dfdCanceller);return p._pendingDfd=a({url:this._url.path+"/findAddressCandidates",content:e,callbackParamName:"callback",load:function(e,t){u(e,t,r,o,p)},error:function(e){f(e,o,p)}}),p},addressesToLocations:function(e,r,o){var c=this.outSpatialReference,h=[];i.forEach(e.addresses,function(e){h.push({attributes:e})}),e=this._encode(t.mixin({},this._url.query,{addresses:s.toJson({records:h})},{f:"json",outSR:c&&s.toJson(c.toJson())}));var d=this._geocodeAddressesHandler,u=this._errorHandler,f=new n(l._dfdCanceller);return f._pendingDfd=a({url:this._url.path+"/geocodeAddresses",content:e,callbackParamName:"callback",load:function(e,t){d(e,t,r,o,f)},error:function(e){u(e,o,f)}}),f},_reverseGeocodeHandler:function(e,t,i,n,s){try{var r=new h({address:e.address,location:e.location,score:100});this._successHandler([r],"onLocationToAddressComplete",i,s)}catch(o){this._errorHandler(o,n,s)}},locationToAddress:function(e,i,r,o){e&&this.normalization&&(e=e.normalize());var c=this.outSpatialReference;e=this._encode(t.mixin({},this._url.query,{outSR:c&&s.toJson(c.toJson()),location:e&&s.toJson(e.toJson()),distance:i,f:"json"}));var h=this._reverseGeocodeHandler,d=this._errorHandler,u=new n(l._dfdCanceller);return u._pendingDfd=a({url:this._url.path+"/reverseGeocode",content:e,callbackParamName:"callback",load:function(e,t){h(e,t,r,o,u)},error:function(e){d(e,o,u)}}),u},onAddressToLocationsComplete:function(){},onAddressesToLocationsComplete:function(){},onLocationToAddressComplete:function(){}}),r("extend-esri")&&t.setObject("tasks.Locator",e,o),e})},"esri/IdentityManagerDialog":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/config dojo/_base/Deferred dojo/_base/lang dojo/has dojo/dom-attr dojo/keys dojo/i18n dijit/registry dijit/Dialog esri/kernel esri/lang esri/domUtils esri/IdentityManagerBase dojo/i18n!esri/nls/jsapi dojo/query dijit/form/Button dijit/form/ValidationTextBox".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p){return t=t([p],{declaredClass:"esri.IdentityManager",_eventMap:{"dialog-cancel":["info"]},constructor:function(e){s.mixin(this,e),this.registerConnectEvents()},_dialogContent:"<div class='dijitDialogPaneContentArea'><div style='padding-bottom: 5px; word-wrap: break-word;'>${info}</div><div style='margin: 0px; padding: 0px; height: 10px;'></div><div class='esriErrorMsg' style='display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'>${invalidUser}</div><div style='margin: 0px; padding: 0px; height: 10px;'></div><table style='width: 100%;'><tr><td><label>${lblUser}</label><br/><input data-dojo-type='dijit.form.ValidationTextBox' data-dojo-props='type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\"' /></td></tr><tr><td><label>${lblPwd}</label><br/><input data-dojo-type='dijit.form.ValidationTextBox' data-dojo-props='type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /></td></tr></table></div><div class='dijitDialogPaneActionBar'><button data-dojo-type='dijit.form.Button' data-dojo-props='type:\"button\", \"class\":\"esriIdSubmit\"'>${lblOk}</button><button data-dojo-type='dijit.form.Button' data-dojo-props='type:\"button\", \"class\":\"esriIdCancel\"'>${lblCancel}</button></div>",onDialogCreate:function(){},onDialogCancel:function(){},signIn:function(e,t,s){this._nls||(this._nls=l.getLocalization("esri","jsapi").identity),this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.onDialogCreate());var r=this._loginDialog,a=s&&s.error,c=s&&s.token,h=new n(function(){r.onCancel()});return r.open?(e=Error("BUSY"),e.code="IdentityManager.1",e.log=i.isDebug,h.errback(e),h):(f.hide(r.errMsg_),a&&403==a.code&&c&&(o.set(r.errMsg_,"innerHTML",this._nls.forbidden),f.show(r.errMsg_)),r.dfd_=h,r.serverInfo_=t,r.resUrl_=e,r.admin_=s&&s.isAdmin,o.set(r.resLink_,{title:e,innerHTML:"("+(this.getResourceName(e)||this._nls.lblItem)+")"}),o.set(r.serverLink_,{title:t.server,innerHTML:(-1!==t.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":t.server)+" "}),r.txtPwd_.set("value",""),r.show(),h)},_createLoginDialog:function(){var t=this._nls,n=u.substitute(t,this._dialogContent),n=u.substitute({resource:"<span class='resLink' style='word-wrap: break-word;'></span>",server:"<span class='serverLink' style='word-wrap: break-word;'></span>"},n),s=new h({title:t.title,content:n,"class":"esriSignInDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(e){e.charOrCode===a.ENTER&&this.execute_()},execute_:function(){var e=this.txtUser_.get("value"),i=this.txtPwd_.get("value"),n=this.dfd_,s=this;if(e&&i){this.btnSubmit_.set("label",t.lblSigning);var r=d.id.findCredential(s.resUrl_,e),a=function(i){s.btnSubmit_.set("label",t.lblOk),s.btnSubmit_.set("disabled",!1),f.hide(s.errMsg_),s.hide(),h._DialogLevelManager.hide(s);var o=s.serverInfo_;s.dfd_=s.serverInfo_=s.generateDfd_=s.resUrl_=null;var a,l,c,d=r;i&&(a=i.token,l=u.isDefined(i.expires)?Number(i.expires):null,c=!!i.ssl,d?(d.userId=e,d.token=a,d.expires=l,d.validity=i.validity,d.ssl=c,d.creationTime=(new Date).getTime()):d=new p.Credential({userId:e,server:o.server,token:a,expires:l,ssl:c,isAdmin:s.admin_,validity:i.validity})),n.callback(d)};r&&!r._enqueued?a():(s.btnSubmit_.set("disabled",!0),s.generateDfd_=d.id.generateToken(this.serverInfo_,{username:e,password:i},{isAdmin:this.admin_}).addCallback(a).addErrback(function(e){s.btnSubmit_.set("disabled",!1),s.generateDfd_=null,s.btnSubmit_.set("label",t.lblOk),o.set(s.errMsg_,"innerHTML",e&&e.code?t.invalidUser:t.noAuthService),f.show(s.errMsg_)}))}},cancel_:function(){s.generateDfd_&&s.generateDfd_.cancel();var e=s.dfd_,t=s.resUrl_,n=s.serverInfo_;s.btnSubmit_.set("disabled",!1),s.dfd_=s.serverInfo_=s.generateDfd_=s.resUrl_=null,f.hide(s.errMsg_),h._DialogLevelManager.hide(s),s.esriIdMgr_.onDialogCancel({resourceUrl:t,serverInfo:n}),t=Error("ABORTED"),t.code="IdentityManager.2",t.log=i.isDebug,e.errback(t)}}),n=s.domNode;return s.txtUser_=c.byNode(e.query(".esriIdUser",n)[0]),s.txtPwd_=c.byNode(e.query(".esriIdPwd",n)[0]),s.btnSubmit_=c.byNode(e.query(".esriIdSubmit",n)[0]),s.btnCancel_=c.byNode(e.query(".esriIdCancel",n)[0]),s.resLink_=e.query(".resLink",n)[0],s.serverLink_=e.query(".serverLink",n)[0],s.errMsg_=e.query(".esriErrorMsg",n)[0],s.connect(s.txtUser_,"onKeyPress",s.keypressed_),s.connect(s.txtPwd_,"onKeyPress",s.keypressed_),s.connect(s.btnSubmit_,"onClick",s.execute_),s.connect(s.btnCancel_,"onClick",s.onCancel),s.connect(s,"onCancel",s.cancel_),s}}),r("extend-esri")&&(d.IdentityManagerDialog=d.IdentityManager=t),t})},"esri/renderers/TemporalRenderer":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/renderers/Renderer"],function(e,t,i,n,s){return e=e(s,{declaredClass:"esri.renderer.TemporalRenderer",constructor:function(e,t,i,n){this.observationRenderer=e,this.latestObservationRenderer=t,this.trackRenderer=i,this.observationAger=n},getSymbol:function(e){var t=e.getLayer(),i=this.getObservationRenderer(e),n=i&&i.getSymbol(e),s=this.observationAger;return t.timeInfo&&t._map.timeExtent&&i===this.observationRenderer&&s&&n&&(n=s.getAgedSymbol(n,e)),n},getObservationRenderer:function(e){return 0===e.getLayer()._getKind(e)?this.observationRenderer:this.latestObservationRenderer||this.observationRenderer}}),i("extend-esri")&&t.setObject("renderer.TemporalRenderer",e,n),e})},"dijit/_base/sniff":function(){define(["dojo/uacss"],function(){})},"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d){function u(){return!this.isFulfilled()}function f(){return!!this._finished}function p(e,t){if(!t)try{var i=e.options,n=_.doc(_._frame),o=i.handleAs;if("html"!==o){if("xml"===o)if("html"===n.documentElement.tagName.toLowerCase()){a("a",n.documentElement).orphan();var l=n.documentElement.innerText,l=l.replace(/>\s+</g,"><");e.text=r.trim(l)}else e.data=n;else e.text=n.getElementsByTagName("textarea")[0].value;s(e)}else e.data=n}catch(c){t=c}t?this.reject(t):this._finished?this.resolve(e):this.reject(Error("Invalid dojo/request/iframe request state"))}function m(){this._callNext()}function _(e,t,s){var r=n.parseArgs(e,n.deepCreate(v,t),!0);if(e=r.url,t=r.options,"GET"!==t.method&&"POST"!==t.method)throw Error(t.method+" not supported by dojo/request/iframe");return _._frame||(_._frame=_.create(_._iframeName,y+"();")),e=n.deferred(r,null,u,f,p,m),e._callNext=function(){this._calledNext||(this._calledNext=!0,_._currentDfd=null,_._fireNextRequest())},e._legacy=s,_._dfdQueue.push(e),_._fireNextRequest(),i(e),s?e:e.promise}var g=e.id.replace(/[\/\.\-]/g,"_"),y=g+"_onload";d.global[y]||(d.global[y]=function(){var e=_._currentDfd;if(e){var t=c.byId(e.response.options.form)||e._tmpForm;if(t){for(var i=e._contentToClean,n=0;n<i.length;n++)for(var s=i[n],r=0;r<t.childNodes.length;r++){var o=t.childNodes[r];if(o.name===s){h.destroy(o);break}}e._originalAction&&t.setAttribute("action",e._originalAction),e._originalMethod&&(t.setAttribute("method",e._originalMethod),t.method=e._originalMethod),e._originalTarget&&(t.setAttribute("target",e._originalTarget),t.target=e._originalTarget)}e._tmpForm&&(h.destroy(e._tmpForm),delete e._tmpForm),e._finished=!0}else _._fireNextRequest()});var v={method:"POST"};return _.create=function(e,i,n){return d.global[e]?d.global[e]:d.global.frames[e]?d.global.frames[e]:(n||(l("config-useXDomain")&&!l("config-dojoBlankHtmlUrl")&&console.warn("dojo/request/iframe: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl to the path on your domain to blank.html"),n=l("config-dojoBlankHtmlUrl")||t.toUrl("dojo/resources/blank.html")),i=h.place('<iframe id="'+e+'" name="'+e+'" src="'+n+'" onload="'+i+'" style="position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden">',d.body()),d.global[e]=i)},_.doc=function(e){if(e.contentDocument)return e.contentDocument;var t=e.name;if(t){var i=d.doc.getElementsByTagName("iframe");if(e.document&&i[t].contentWindow&&i[t].contentWindow.document)return i[t].contentWindow.document;if(d.doc.frames[t]&&d.doc.frames[t].document)return d.doc.frames[t].document}return null},_.setSrc=function(e,t,i){e=d.global.frames[e.name],e.contentWindow&&(e=e.contentWindow);try{i?e.location.replace(t):e.location=t}catch(n){console.log("dojo/request/iframe.setSrc: ",n)}},_._iframeName=g+"_IoIframe",_._notifyStart=function(){},_._dfdQueue=[],_._currentDfd=null,_._fireNextRequest=function(){var e;try{if(!_._currentDfd&&_._dfdQueue.length){do e=_._currentDfd=_._dfdQueue.shift();while(e&&(e.canceled||e.isCanceled&&e.isCanceled())&&_._dfdQueue.length);if(!e||e.canceled||e.isCanceled&&e.isCanceled())_._currentDfd=null;else{var t,i=e.response,s=i.options,a=e._contentToClean=[],l=c.byId(s.form),u=n.notify,f=s.data||null;if(e._legacy||"POST"!==s.method||l?"GET"===s.method&&l&&-1<i.url.indexOf("?")&&(t=i.url.slice(i.url.indexOf("?")+1),f=r.mixin(o.queryToObject(t),f)):l=e._tmpForm=h.create("form",{name:g+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},d.body()),l){if(!e._legacy){var p=l;do p=p.parentNode;while(p!==d.doc.documentElement);p||(l.style.position="absolute",l.style.left="-1000px",l.style.top="-1000px",d.body().appendChild(l)),l.name||(l.name=g+"_form")}if(f){var m,p=function(e,t){h.create("input",{type:"hidden",name:e,value:t},l),a.push(e)};for(m in f){var y=f[m];if(r.isArray(y)&&1<y.length)for(t=0;t<y.length;t++)p(m,y[t]);else l[m]?l[m].value=y:p(m,y)}}var v=l.getAttributeNode("action"),b=l.getAttributeNode("method"),x=l.getAttributeNode("target");i.url&&(e._originalAction=v?v.value:null,v?v.value=i.url:l.setAttribute("action",i.url)),e._legacy?b&&b.value||(b?b.value=s.method:l.setAttribute("method",s.method)):(e._originalMethod=b?b.value:null,b?b.value=s.method:l.setAttribute("method",s.method)),e._originalTarget=x?x.value:null,x?x.value=_._iframeName:l.setAttribute("target",_._iframeName),l.target=_._iframeName,u&&u.emit("send",i,e.promise.cancel),_._notifyStart(i),l.submit()}else s="",i.options.data&&(s=i.options.data,"string"!=typeof s&&(s=o.objectToQuery(s))),p=i.url+(-1<i.url.indexOf("?")?"&":"?")+s,u&&u.emit("send",i,e.promise.cancel),_._notifyStart(i),_.setSrc(_._frame,p,!0)}}}catch(w){e.reject(w)}},n.addCommonMethods(_,["GET","POST"]),_})},"esri/tasks/ProjectParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has esri/kernel esri/lang esri/geometry/jsonUtils".split(" "),function(e,t,i,n,s,r,o,a){return e=e(null,{declaredClass:"esri.tasks.ProjectParameters",geometries:null,outSR:null,transformation:null,transformForward:null,toJson:function(){var e=i.map(this.geometries,function(e){return e.toJson()}),t={};return t.outSR=this.outSR.wkid||n.toJson(this.outSR.toJson()),t.inSR=this.geometries[0].spatialReference.wkid||n.toJson(this.geometries[0].spatialReference.toJson()),t.geometries=n.toJson({geometryType:a.getJsonType(this.geometries[0]),geometries:e}),this.transformation&&(t.transformation=this.transformation.wkid||n.toJson(this.transformation)),o.isDefined(this.transformForward)&&(t.transformForward=this.transformForward),t}}),s("extend-esri")&&t.setObject("tasks.ProjectParameters",e,r),e})},"dojox/collections/_base":function(){define(["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(e,t,i){return e=t.getObject("dojox.collections",!0),e.DictionaryEntry=function(e,t){this.key=e,this.value=t,this.valueOf=function(){return this.value},this.toString=function(){return String(this.value)}},e.Iterator=function(e){var t=0;this.element=e[t]||null,this.atEnd=function(){return t>=e.length},this.get=function(){return this.atEnd()?null:this.element=e[t++]},this.map=function(t,n){return i.map(e,t,n)},this.reset=function(){t=0,this.element=e[t]}},e.DictionaryIterator=function(e){var t,n=[],s={};for(t in e)s[t]||n.push(e[t]);var r=0;this.element=n[r]||null,this.atEnd=function(){return r>=n.length},this.get=function(){return this.atEnd()?null:this.element=n[r++]},this.map=function(e,t){return i.map(n,e,t)},this.reset=function(){r=0,this.element=n[r]}},e})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(e,t){var i={};return t.setObject("dojo.regexp",i),i.escapeString=function(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(e){return t&&-1!=t.indexOf(e)?e:"\\"+e})},i.buildGroupRE=function(e,t,n){if(!(e instanceof Array))return t(e);for(var s=[],r=0;r<e.length;r++)s.push(t(e[r]));return i.group(s.join("|"),n)},i.group=function(e,t){return"("+(t?"?:":"")+e+")"},i})},"esri/_time":function(){define(["esri/TimeExtent"],function(){return{}})},"esri/layers/LayerDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has esri/kernel esri/lang esri/layers/LayerSource esri/layers/TableDataSource esri/layers/QueryDataSource esri/layers/JoinDataSource esri/layers/RasterDataSource".split(" "),function(e,t,i,n,s,r,o,a,l,c){return e=e(r,{declaredClass:"esri.layers.LayerDataSource",type:"dataLayer",constructor:function(e){if(e&&e.dataSource){switch(e.dataSource.type){case"table":e=new o(e.dataSource);break;case"queryTable":e=new a(e.dataSource);break;case"joinTable":e=new l(e.dataSource);break;case"raster":e=new c(e.dataSource);break;default:e=e.dataSource}this.dataSource=e}},toJson:function(){var e={type:"dataLayer",dataSource:this.dataSource&&this.dataSource.toJson()};return s.fixJson(e)}}),i("extend-esri")&&t.setObject("layers.LayerDataSource",e,n),e})},"esri/layers/LayerDrawingOptions":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has esri/kernel esri/lang esri/renderers/jsonUtils esri/layers/LabelClass".split(" "),function(e,t,i,n,s,r,o,a){return e=e(null,{declaredClass:"esri.layers.LayerDrawingOptions",constructor:function(e){if(e&&(t.mixin(this,e),e.renderer&&(this.renderer=o.fromJson(e.renderer)),e.labelingInfo&&0<e.labelingInfo.length)){this.labelingInfo=[];var n;i.forEach(e.labelingInfo,function(e){n=new a(e),this.labelingInfo.push(n)},this)}},toJson:function(){var e={renderer:this.renderer&&this.renderer.toJson(),transparency:this.transparency,scaleSymbols:this.scaleSymbols,showLabels:this.showLabels};return this.labelingInfo&&0<this.labelingInfo.length&&(e.labelingInfo=[],i.forEach(this.labelingInfo,function(t){e.labelingInfo.push(t.toJson())})),r.fixJson(e)}}),n("extend-esri")&&t.setObject("layers.LayerDrawingOptions",e,s),e})},"esri/renderers/UniqueValueRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has esri/kernel esri/lang esri/symbols/jsonUtils esri/renderers/Renderer".split(" "),function(e,t,i,n,s,r,o,a){return e=e(a,{declaredClass:"esri.renderer.UniqueValueRenderer",constructor:function(e,i,n,s,r){this.values=[],this._symbols={},this.infos=[],e&&!e.declaredClass?(i=e,this.defaultSymbol=(e=i.defaultSymbol)&&(e.declaredClass?e:o.fromJson(e)),this.attributeField=i.field1,this.attributeField2=i.field2,this.attributeField3=i.field3,this.fieldDelimiter=i.fieldDelimiter,this.defaultLabel=i.defaultLabel,t.forEach(i.uniqueValueInfos,this._addValueInfo,this)):(this.defaultSymbol=e,this.attributeField=i,this.attributeField2=n,this.attributeField3=s,this.fieldDelimiter=r),this._multiple=!!this.attributeField2},addValue:function(e,t){var n=i.isObject(e)?e:{value:e,symbol:t};this._addValueInfo(n)},removeValue:function(e){var i=t.indexOf(this.values,e);-1!==i&&(this.values.splice(i,1),delete this._symbols[e],this.infos.splice(i,1))},getUniqueValueInfo:function(e){var t,n,s=this.attributeField,r=e.attributes;return this._multiple?(e=this.attributeField2,t=this.attributeField3,n=[],s&&n.push(r[s]),e&&n.push(r[e]),t&&n.push(r[t]),s=n.join(this.fieldDelimiter||"")):s=i.isFunction(s)?s(e):r[s],this._symbols[s]},getSymbol:function(e){return(e=this.getUniqueValueInfo(e))&&e.symbol||this.defaultSymbol},_addValueInfo:function(e){var t=e.value;this.values.push(t),this.infos.push(e);var i=e.symbol;i&&!i.declaredClass&&(e.symbol=o.fromJson(i)),this._symbols[t]=e},toJson:function(){var e=r.fixJson,n=i.mixin(this.inherited(arguments),{type:"uniqueValue",field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,fieldDelimiter:this.fieldDelimiter,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,uniqueValueInfos:t.map(this.infos||[],function(t){return t=i.mixin({},t),t.symbol=t.symbol&&t.symbol.toJson(),t.value+="",e(t)})});return e(n)}}),n("extend-esri")&&i.setObject("renderer.UniqueValueRenderer",e,s),e})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),function(e,t,i,n,s,r){return t("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(t){var i=[];return e.forEach(t||this.getChildren(),function(e){"value"in e?i.push(e):i=i.concat(this._getDescendantFormWidgets(e.getChildren()))},this),i},reset:function(){e.forEach(this._getDescendantFormWidgets(),function(e){e.reset&&e.reset()})},validate:function(){var t=!1;return e.every(e.map(this._getDescendantFormWidgets(),function(e){e._hasBeenBlurred=!0;var i=e.disabled||!e.validate||e.validate();return!i&&!t&&(r.scrollIntoView(e.containerNode||e.domNode),e.focus(),t=!0),i}),function(e){return e})},setValues:function(e){return i.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0"),this.set("value",e)},_setValueAttr:function(t){var i={};e.forEach(this._getDescendantFormWidgets(),function(e){e.name&&(i[e.name]||(i[e.name]=[])).push(e)});for(var s in i)if(i.hasOwnProperty(s)){var r=i[s],o=n.getObject(s,!1,t);void 0!==o&&(o=[].concat(o),"boolean"==typeof r[0].checked?e.forEach(r,function(t){t.set("value",-1!=e.indexOf(o,t._get("value")))}):r[0].multiple?r[0].set("value",o):e.forEach(r,function(e,t){e.set("value",o[t])}))}},getValues:function(){return i.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0"),this.get("value")},_getValueAttr:function(){var t={};return e.forEach(this._getDescendantFormWidgets(),function(e){var i=e.name;if(i&&!e.disabled){var s=e.get("value");"boolean"==typeof e.checked?/Radio/.test(e.declaredClass)?!1!==s?n.setObject(i,s,t):(s=n.getObject(i,!1,t),void 0===s&&n.setObject(i,null,t)):(e=n.getObject(i,!1,t),e||(e=[],n.setObject(i,e,t)),!1!==s&&e.push(s)):(e=n.getObject(i,!1,t),"undefined"!=typeof e?n.isArray(e)?e.push(s):n.setObject(i,[e,s],t):n.setObject(i,s,t))}}),t},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var t=e.map(this._descendants,function(e){return e.get("state")||""});return 0<=e.indexOf(t,"Error")?"Error":0<=e.indexOf(t,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(t){this._descendants=this._getDescendantFormWidgets(),e.forEach(this._descendants,function(e){e._started||e.startup()}),t||this._onChildChange()},_onChildChange:function(e){(!e||"state"==e||"disabled"==e)&&this._set("state",this._getState()),e&&"value"!=e&&"disabled"!=e&&"checked"!=e||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer,this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments),this._descendants=this._getDescendantFormWidgets(),this.value=this.get("value"),this.state=this._getState();var e=this;this.own(s(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(t){t.target!=e.domNode&&e._onChildChange(t.type.replace("attrmodified-",""))})),this.watch("state",function(e,t,i){this.onValidStateChange(""==i)})},destroy:function(){this.inherited(arguments)}})})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(e,t,i,n,s,r,o,a,l){var c,h=s.delegate(a,{mouseenter:r.enter,mouseleave:r.leave,keypress:i._keypress});return i=n("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[],this._attachEvents=[]},buildRendering:function(){this.inherited(arguments),this._attachTemplateNodes(this.domNode),this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(e){for(var t=e;;)if(1==t.nodeType&&(this._processTemplateNode(t,function(e,t){return e.getAttribute(t)},this._attach)||this.searchContainerNode)&&t.firstChild)t=t.firstChild;else{if(t==e)break;for(;!t.nextSibling;)if(t=t.parentNode,t==e)return;t=t.nextSibling}},_processTemplateNode:function(e,t,i){var n=!0,r=this.attachScope||this,o=t(e,"dojoAttachPoint")||t(e,"data-dojo-attach-point");if(o)for(var a=o.split(/\s*,\s*/);o=a.shift();)s.isArray(r[o])?r[o].push(e):r[o]=e,n="containerNode"!=o,this._attachPoints.push(o);if(t=t(e,"dojoAttachEvent")||t(e,"data-dojo-attach-event"))for(o=t.split(/\s*,\s*/),a=s.trim;t=o.shift();)if(t){var l=null;-1!=t.indexOf(":")?(l=t.split(":"),t=a(l[0]),l=a(l[1])):t=a(t),l||(l=t),this._attachEvents.push(i(e,t,s.hitch(r,l)))}return n},_attach:function(t,i,n){return i=i.replace(/^on/,"").toLowerCase(),i="dijitclick"==i?c||(c=e("./a11yclick")):h[i]||i,o(t,i,n)},_detachTemplateNodes:function(){var e=this.attachScope||this;t.forEach(this._attachPoints,function(t){delete e[t]}),this._attachPoints=[],t.forEach(this._attachEvents,function(e){e.remove()
}),this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes(),this.inherited(arguments)}}),s.extend(l,{dojoAttachEvent:"",dojoAttachPoint:""}),i})},"esri/ServerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(e,t,i,n,s){return e=e(null,{declaredClass:"esri.ServerInfo",constructor:function(e){t.mixin(this,e)},toJson:function(){return s.fixJson({server:this.server,tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,shortLivedTokenValidity:this.shortLivedTokenValidity,owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion,hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}}),i("extend-esri")&&(n.ServerInfo=e),e})},"esri/tasks/FindTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/has esri/kernel esri/request esri/deferredUtils esri/tasks/Task esri/tasks/FindResult".split(" "),function(e,t,i,n,s,r,o,a,l,c){return e=e(l,{declaredClass:"esri.tasks.FindTask",constructor:function(e,i){this._url.path+="/find",this._handler=t.hitch(this,this._handler),this.gdbVersion=i&&i.gdbVersion},_handler:function(e,t,n,s,r){try{var o=[];i.forEach(e.results,function(e,t){o[t]=new c(e)}),this._successHandler([o],"onComplete",n,r)}catch(a){this._errorHandler(a,s,r)}},execute:function(e,i,s){e=this._encode(t.mixin({},this._url.query,{f:"json"},e.toJson()));var r=this._handler,l=this._errorHandler;this.gdbVersion&&(e.gdbVersion=this.gdbVersion);var c=new n(a._dfdCanceller);return c._pendingDfd=o({url:this._url.path,content:e,callbackParamName:"callback",load:function(e,t){r(e,t,i,s,c)},error:function(e){l(e,s,c)}}),c},onComplete:function(){}}),s("extend-esri")&&t.setObject("tasks.FindTask",e,r),e})},"esri/Evented":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/Evented dojo/on dojo/has esri/kernel".split(" "),function(e,t,i,n,s,r,o){return e=e([n],{declaredClass:"esri.Evented",registerConnectEvents:function(){var e,i,n=this.constructor,s=this.constructor._meta.parents,r=[{}],o={},a=function(e,i){t.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var s=e[n];s._meta&&s._meta.parents&&a(s._meta.parents,i),s.prototype._eventMap&&i.push(t.mixin({},s.prototype._eventMap))}return i};if(!n._onMap){a(s,r),r.push(this._eventMap),s=t.mixin.apply(this,r);for(e in this)/^on\w/.test(e)&&t.isFunction(this[e])&&(r=this._hyphenLower(e).toLowerCase(),s[r]||(o[r]={method:e}));for(i in s)e=this._onCamelCase(i),o[i]={method:e,argKeys:s[i]};return n._onMap=o,n._onMap}},on:function(e,n){var s=this.constructor._onMap||this.registerConnectEvents(),r="string"==typeof e&&e.toLowerCase(),o=this._onCamelCase(r),a=s&&s[r];return(o=a&&a.method||this[o]&&t.isFunction(this[o])&&o)?a&&t.isArray(a.argKeys)?(s=this._onArr2Obj(n,s[r].argKeys),i.after(this,o,s,!0)):i.after(this,o,n,!0):this.inherited(arguments)},emit:function(e,i){var n,s,r,o,a=e.toLowerCase();o=this._onCamelCase(e);var l=this.constructor._onMap||this.registerConnectEvents();return o=(r=l&&l[a]&&l[a].method||t.isFunction(this[o])&&o)&&this[r],r&&l&&l[a]&&this._onObj2Arr(function(){s=Array.prototype.slice.call(arguments)},l[a].argKeys)(i),i=i||{},i.target||(i.target=this),o&&(n=s&&s.length?s:[i],n=o.apply(this,n)),this.inherited(arguments,[e,i]),n},_onObj2Arr:function(e,t){if(t){var i=this;return function(n){var s,r=[],o=t.length;for(s=0;o>s;s++)r[s]=n[t[s]];e.apply(i,r)}}return e},_onArr2Obj:function(e,t){if(t){var i=this;return function(){var n,s={},r=arguments.length;for(n=0;r>n;n++)s[t[n]]=arguments[n];s.target||(s.target=i),e(s)}}return e},_hyphenLower:function(e){return e.replace(/^on/,"").replace(/[A-Z](?=[a-z])/g,function(e,t){return(t?"-":"")+e.toLowerCase()})},_onCamelCase:function(e){return"on"+e.substr(0,1).toUpperCase()+e.substr(1).replace(/\-([a-z])/g,function(e,t){return t.toUpperCase()})}}),r("extend-esri")&&(o.Evented=e),e})},"esri/toolbars/_toolbar":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/Evented"],function(e,t,i,n,s){return e=e([s],{declaredClass:"esri.toolbars._Toolbar",constructor:function(e){this.map=e},_cursors:{move:"pointer","move-v":"pointer","move-gv":"pointer",box0:"nw-resize",box1:"n-resize",box2:"ne-resize",box3:"e-resize",box4:"se-resize",box5:"s-resize",box6:"sw-resize",box7:"w-resize",box8:"pointer"},_deactivateMapTools:function(e,t,i,n){var s=this.map;e&&(this._mapNavState={isDoubleClickZoom:s.isDoubleClickZoom,isClickRecenter:s.isClickRecenter,isPan:s.isPan,isRubberBandZoom:s.isRubberBandZoom,isKeyboardNavigation:s.isKeyboardNavigation,isScrollWheelZoom:s.isScrollWheelZoom},s.disableDoubleClickZoom(),s.disableClickRecenter(),s.disablePan(),s.disableRubberBandZoom(),s.disableKeyboardNavigation()),t&&s.hideZoomSlider(),i&&s.hidePanArrows(),n&&s.graphics.disableMouseEvents()},_activateMapTools:function(e,t,i,n){var s=this.map,r=this._mapNavState;e&&r&&(r.isDoubleClickZoom&&s.enableDoubleClickZoom(),r.isClickRecenter&&s.enableClickRecenter(),r.isPan&&s.enablePan(),r.isRubberBandZoom&&s.enableRubberBandZoom(),r.isKeyboardNavigation&&s.enableKeyboardNavigation(),r.isScrollWheelZoom&&s.enableScrollWheelZoom()),t&&s.showZoomSlider(),i&&s.showPanArrows(),n&&s.graphics.enableMouseEvents()}}),i("extend-esri")&&t.setObject("toolbars._Toolbar",e,n),e})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/i18n!../nls/loading dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p,m,_){return c("dijit.layout.ContentPane",[i,n,s],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:e._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"<span class='dijitContentPaneLoading'><span class='dijitInline dijitIconLoading'></span>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'><span class='dijitInline dijitIconError'></span>${errorState}</span>",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(e,t,i){var n=new i(e,t);return!n.href&&n._contentSetter&&n._contentSetter.parseDeferred&&!n._contentSetter.parseDeferred.isFulfilled()?n._contentSetter.parseDeferred.then(function(){return n}):n},create:function(e,i){if(!(e&&e.template||!i||"href"in e||"content"in e)){i=d.byId(i);for(var n=i.ownerDocument.createDocumentFragment();i.firstChild;)n.appendChild(i.firstChild);e=t.delegate(e,{content:n})}this.inherited(arguments,[e,i])},postMixInProperties:function(){this.inherited(arguments);var e=m.getLocalization("dijit","loading",this.lang);this.loadingMessage=r.substitute(this.loadingMessage,e),this.errorMessage=r.substitute(this.errorMessage,e)},buildRendering:function(){this.inherited(arguments),this.containerNode||(this.containerNode=this.domNode),this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments),this._contentSetter&&l.forEach(this._contentSetter.parseResults,function(e){!e._started&&!e._destroyed&&t.isFunction(e.startup)&&(e.startup(),e._started=!0)},this)},_startChildren:function(){l.forEach(this.getChildren(),function(e){!e._started&&!e._destroyed&&t.isFunction(e.startup)&&(e.startup(),e._started=!0)}),this._contentSetter&&l.forEach(this._contentSetter.parseResults,function(e){!e._started&&!e._destroyed&&t.isFunction(e.startup)&&(e.startup(),e._started=!0)},this)},setHref:function(t){return e.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0"),this.set("href",t)},_setHrefAttr:function(e){return this.cancel(),this.onLoadDeferred=new h(t.hitch(this,"cancel")),this.onLoadDeferred.then(t.hitch(this,"onLoad")),this._set("href",e),this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0,this.onLoadDeferred},setContent:function(t){e.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0"),this.set("content",t)},_setContentAttr:function(e){return this._set("href",""),this.cancel(),this.onLoadDeferred=new h(t.hitch(this,"cancel")),this._created&&this.onLoadDeferred.then(t.hitch(this,"onLoad")),this._setContent(e||""),this._isDownloaded=!1,this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel(),delete this._xhrDfd,this.onLoadDeferred=null},destroy:function(){this.cancel(),this.inherited(arguments)},destroyRecursive:function(){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){return this.inherited(arguments),!this.href||this._xhrDfd||this.isLoaded&&!this._hrefChanged&&!this.refreshOnShow?void 0:this.refresh()},refresh:function(){return this.cancel(),this.onLoadDeferred=new h(t.hitch(this,"cancel")),this.onLoadDeferred.then(t.hitch(this,"onLoad")),this._load(),this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var e=this,i={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};t.isObject(this.ioArgs)&&t.mixin(i,this.ioArgs);var n,s=this._xhrDfd=(this.ioMethod||p.get)(i);s.then(function(t){n=t;try{return e._isDownloaded=!0,e._setContent(t,!1)}catch(i){e._onError("Content",i)}},function(t){return s.canceled||e._onError("Download",t),delete e._xhrDfd,t}).then(function(){return e.onDownloadEnd(),delete e._xhrDfd,n}),delete this._hrefChanged},_onLoadHandler:function(e){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(e)}catch(t){console.error("Error "+this.widgetId+" running custom onLoad code: "+t.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(e){console.error("Error "+this.widgetId+" running custom onUnload code: "+e.message)}},destroyDescendants:function(e){this.isLoaded&&this._onUnloadHandler();var t=this._contentSetter;l.forEach(this.getChildren(),function(t){t.destroyRecursive?t.destroyRecursive(e):t.destroy&&t.destroy(e),t._destroyed=!0}),t&&(l.forEach(t.parseResults,function(t){t._destroyed||(t.destroyRecursive?t.destroyRecursive(e):t.destroy&&t.destroy(e),t._destroyed=!0)}),delete t.parseResults),e||f.empty(this.containerNode),delete this._singleChild},_setContent:function(e,i){this.destroyDescendants();var n=this._contentSetter;n&&n instanceof o._ContentSetter||(n=this._contentSetter=new o._ContentSetter({node:this.containerNode,_onError:t.hitch(this,this._onError),onContentError:t.hitch(this,function(e){e=this.onContentError(e);try{this.containerNode.innerHTML=e}catch(t){console.error("Fatal "+this.id+" could not change content due to "+t.message,t)}})}));var s=t.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!e.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),s=n.set(t.isObject(e)&&e.domNode?e.domNode:e,s),r=this;return _(s&&s.then?s:n.parseDeferred,function(){delete r._contentSetterParams,i||(r._started&&(r._startChildren(),r._scheduleLayout()),r._onLoadHandler(e))})},_onError:function(e,t,i){this.onLoadDeferred.reject(t),e=this["on"+e+"Error"].call(this,t),i?console.error(i,t):e&&this._setContent(e,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"esri/PopupBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Color dojo/_base/Deferred dojo/has esri/kernel esri/graphic esri/geometry/Point esri/geometry/jsonUtils esri/geometry/mathUtils esri/geometry/webMercatorUtils esri/symbols/SimpleMarkerSymbol esri/symbols/SimpleLineSymbol esri/symbols/CartographicLineSymbol esri/symbols/SimpleFillSymbol esri/Evented dojo/has!extend-esri?esri/PopupInfo".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p,m,_){return e=e(_,{declaredClass:"esri.PopupBase",_evtMap:{"set-features":!0,"clear-features":!0,"selection-change":!0,"dfd-complete":!0},onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){},initialize:function(){this.count=0,this.selectedIndex=-1},cleanup:function(){this.features=this.deferreds=null},setFeatures:function(e){if(e&&e.length){this.clearFeatures();var n,r;e[0]instanceof s?r=e:n=e,n?this._updateFeatures(null,n):(this.deferreds=r,r=r.slice(0),i.forEach(r,function(e){e.addBoth(t.hitch(this,this._updateFeatures,e))},this))}},clearFeatures:function(){this.features=this.deferreds=this._marked=null,this.count=0;var e=this.selectedIndex;this.selectedIndex=-1,e>-1&&this.onSelectionChange(),this.onClearFeatures()},getSelectedFeature:function(){var e=this.features;return e?e[this.selectedIndex]:void 0},select:function(e){0>e||e>=this.count||(this.selectedIndex=e,this.onSelectionChange())},enableHighlight:function(e){this._highlighted=e.graphics.add(new a(new l(0,0,e.spatialReference))),this._highlighted.hide(),this.markerSymbol||(e=this.markerSymbol=new u,e.setStyle(u.STYLE_TARGET),e._setDim(16,16,7),e.setOutline(new p(f.STYLE_SOLID,new n([0,255,255]),2,p.CAP_ROUND,p.JOIN_ROUND)),e.setColor(new n([0,0,0,0]))),this.lineSymbol||(this.lineSymbol=new f(f.STYLE_SOLID,new n([0,255,255]),2)),this.fillSymbol||(this.fillSymbol=new m(m.STYLE_NULL,new f(f.STYLE_SOLID,new n([0,255,255]),2),new n([0,0,0,0])))},disableHighlight:function(e){var t=this._highlighted;t&&(t.hide(),e.graphics.remove(t),delete this._highlighted),this.markerSymbol=this.lineSymbol=this.fillSymbol=null},showHighlight:function(){var e=this.features&&this.features[this.selectedIndex];this._highlighted&&e&&e.geometry&&this._highlighted.show()},hideHighlight:function(){this._highlighted&&this._highlighted.hide()},updateHighlight:function(e,t){var i=t.geometry,n=this._highlighted;if(i&&n){n.hide(),!n.getLayer()&&e&&e.graphics.add(n),n.setGeometry(c.fromJson(i.toJson()));var s;switch(i.type){case"point":case"multipoint":s=this.markerSymbol,s.setOffset(0,0),s.setAngle(0);var r=t.getLayer();if(r){var o,a,i=r._getSymbol(t),l=0,h=0,d=0;if(i){if((r=t.symbol?null:r._getRenderer(t))&&r.proportionalSymbolInfo)o=a=r.getSize(t,{shape:i.style});else switch(i.type){case"simplemarkersymbol":o=a=i.size||0;break;case"picturemarkersymbol":o=i.width||0,a=i.height||0}l=i.xoffset||0,h=i.yoffset||0,d=i.angle||0}o&&a&&s._setDim(o+1,a+1,7),s.setOffset(l,h),s.setAngle(d)}break;case"polyline":s=this.lineSymbol;break;case"polygon":s=this.fillSymbol}n.setSymbol(s)}else n&&n.hide()},showClosestFirst:function(e){var t=this.features;if(t&&t.length){if(1<t.length){var i,n,s,r,o,a=1/0,l=-1,c=h.getLength,u=e.spatialReference;for(e=e.normalize(),i=t.length-1;i>=0;i--)if(n=t[i].geometry){r=n.spatialReference,s=0;try{o="point"===n.type?n:n.getExtent().getCenter(),o=o.normalize(),u&&r&&!u.equals(r)&&u._canProject(r)&&(o=u.isWebMercator()?d.geographicToWebMercator(o):d.webMercatorToGeographic(o)),s=c(e,o)}catch(f){}s>0&&a>s&&(a=s,l=i)}l>0&&(t.splice(0,0,t.splice(l,1)[0]),this.select(0))}}else this.deferreds&&(this._marked=e)},_unbind:function(e){return e=i.indexOf(this.deferreds,e),-1!==e?(this.deferreds.splice(e,1),this.deferreds.length?1:(this.deferreds=null,2)):void 0},_fireComplete:function(e){var t=this._marked;t&&(this._marked=null,this.showClosestFirst(t)),this.onDfdComplete(e)},_updateFeatures:function(e,t){if(e){if(this.deferreds){var n=this._unbind(e);if(n)if(t&&t instanceof Error)this._fireComplete(t),2===n&&this.onSetFeatures();else if(t&&t.length)if(this.features){var s=i.filter(t,function(e){return-1===i.indexOf(this.features,e)},this);this.features=this.features.concat(s),this.count=this.features.length,this._fireComplete(),2===n&&this.onSetFeatures()}else this.features=t,this.count=t.length,this.selectedIndex=0,this._fireComplete(),2===n&&this.onSetFeatures(),this.select(0);else this._fireComplete(),2===n&&this.onSetFeatures()}}else this.features=t,this.count=t.length,this.selectedIndex=0,this.onSetFeatures(),this.select(0)}}),r("extend-esri")&&(o.PopupBase=e),e})},"esri/TouchEvents":function(){define("dojo/_base/declare dojo/_base/html dojo/_base/lang dojo/_base/sniff dojo/dom esri/kernel esri/Evented esri/geometry/Point esri/geometry/ScreenPoint".split(" "),function(e,t,i,n,s,r,o,a,l){return e=e([o],{declaredClass:"esri.TouchEvents",tapRadius:8,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,map:null,constructor:function(e,n){this.node=e,i.mixin(this,n),t.setSelectable(e,!1),this._touchStart=i.hitch(this,this._touchStart),this._touchMove=i.hitch(this,this._touchMove),this._touchEnd=i.hitch(this,this._touchEnd),this._touchCancel=i.hitch(this,this._touchCancel),e.addEventListener("touchstart",this._touchStart,!1),e.addEventListener("touchmove",this._touchMove,!1),e.addEventListener("touchend",this._touchEnd,!1),e.addEventListener("touchcancel",this._touchCancel,!1),this.map&&(this._mouseOver=i.hitch(this,this._mouseOver),this._mouseOut=i.hitch(this,this._mouseOut),this._mouseDown=i.hitch(this,this._mouseDown),this._mouseUp=i.hitch(this,this._mouseUp),this._mouseClick=i.hitch(this,this._mouseClick),e.addEventListener("mouseover",this._mouseOver,!1),e.addEventListener("mouseout",this._mouseOut,!1),e.addEventListener("mousedown",this._mouseDown,!1),e.addEventListener("mouseup",this._mouseUp,!1),e.addEventListener("click",this._mouseClick,!1)),this._numTouches=0,this._nodeTouches=[],this._touches={},this._touchIds=[],this._taps=[],this._immediate=!1},_touchStart:function(e){var t,i,s,r,o,a=this._touches,l=e.changedTouches.length,c=(new Date).getTime();if(!n("android")||!n("safari")||1!==e.targetTouches.length||e.touches.length!==e.targetTouches.length||e.targetTouches.length!==e.changedTouches.length||0!==e.changedTouches[0].identifier||!a[e.changedTouches[0].identifier]){for(this._addTouch(e),t=0;l>t;t++)i=e.changedTouches[t],s=a[i.identifier]={},s.startX=i.pageX,s.startY=i.pageY,s.startTS=c,-1===this._touchIds.indexOf(i.identifier)&&this._touchIds.push(i.identifier);this._swipeActive&&(r=this._nodeTouches[0]),this._pinchActive&&(o=this._nodeTouches[1]),1===this._numTouches?this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(e,r))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(e,[r,o]))):2===this._numTouches?this._swipeActive&&(r&&(s=a[this._touchIds[0]],s.startX=r.pageX,s.startY=r.pageY,s.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(e,r))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(e,r))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(e,[r,o])))}},_touchMove:function(e){e.preventDefault(),this._updateTouch(e);var t,i,s,r,o,a=this._touches,l=e.changedTouches.length;if(!(n("android")&&n("safari")&&1===e.targetTouches.length&&e.touches.length===e.targetTouches.length&&e.targetTouches.length===e.changedTouches.length&&0===e.changedTouches[0].identifier&&a[e.changedTouches[0].identifier]&&1<this._touchIds.length)){for(t=0;l>t;t++)i=e.changedTouches[t],(s=a[i.identifier])&&(r=Math.abs(i.pageX-s.startX),i=Math.abs(i.pageY-s.startY),!s.moved&&(r>=this.tapRadius||i>=this.tapRadius)&&(s.moved=s.absMoved=!0),o=o?o:s.moved);1===this._numTouches?(t=e.changedTouches[0],this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(e,t)):o&&(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(e,t)))):2===this._numTouches&&(t=this._nodeTouches[0],l=this._nodeTouches[1],this._pinchActive?this._fire("onPinchMove",this._processTouchEvent(e,[t,l])):o&&(o=a[t.identifier],s=a[l.identifier],a=Math.abs(o.startX-s.startX),o=Math.abs(o.startY-s.startY),a=Math.sqrt(a*a+o*o),o=Math.abs(t.pageX-l.pageX),s=Math.abs(t.pageY-l.pageY),o=Math.sqrt(o*o+s*s),Math.abs(o-a)>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(e,[t,l])))))}},_touchEnd:function(e){this._removeTouch(e);var t,i,n,s=this._touches,r=e.changedTouches,o=r.length,a=(new Date).getTime(),l=this._touchIds;for(t=0;o>t;t++)(n=s[r[t].identifier])&&(n.absMoved&&(i=!0),n.pageX=r[t].pageX,n.pageY=r[t].pageY,n.endTS=a);if(0===this._numTouches){if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(e,r[0]));else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(e,r));else if(!i){o=1/0,i=-1/0;var a=1/0,c=-1/0,h=this.tapStartTolerance,d=[],u=!0;for(t=0;t<l.length;t++)n=s[l[t]],d.push(n),n.startTS<o&&(o=n.startTS),n.startTS>i&&(i=n.startTS),n.endTS<a&&(a=n.endTS),n.endTS>c&&(c=n.endTS),delete s[l[t]];1===d.length&&r[0]&&(s=Math.abs(r[0].pageX-d[0].startX),r=Math.abs(r[0].pageY-d[0].startY),s>=this.tapRadius||r>=this.tapRadius)&&(u=!1),u&&Math.abs(i-o)<=h&&Math.abs(c-a)<=h&&this._basicTap(e,d)}}else 1===this._numTouches&&this._pinchActive&&(t=this._nodeTouches[0],n=s[t.identifier],n.startX=t.pageX,n.startY=t.pageY,this._pinchActive=n.moved=!1,this._fire("onPinchEnd",this._processTouchEvent(e,[r[0],t])))},_touchCancel:function(e){this._numTouches&&this._touchEnd(e)},_basicTap:function(e,t){var i=(new Date).getTime(),n=this;e=this._processTouchEvent(e,t),this._taps.push({touchInfos:t,ts:i,event:e}),2<this._taps.length&&this._taps.shift(),this._fire("onBasicTap",e),clearTimeout(this._tapTimer),this._immediate?this._analyzeTap(!0):this._tapTimer=setTimeout(function(){var e=n;n=null,clearTimeout(e._tapTimer),e._analyzeTap()},2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration)},_analyzeTap:function(e){var t=this._taps,i=t[0],n=t[1],s=i.touchInfos,r=n&&n.touchInfos;t.length&&(e||(this._taps=[]),i&&n?s.length===r.length?n.ts-i.ts<=this.doubleTapDuration?(1===s.length?(e=Math.abs(s[0].startX-r[0].startX),s=Math.abs(s[0].startY-r[0].startY),s=e<=this.doubleTapRadius&&s<=this.doubleTapRadius):s=!0,s?this._processedDoubleTap(t):this._processedTap(n)):this._processedTap(n):this._processedTap(n):this._processedTap(i||n))},_processedTap:function(e){var t=e.event;this._fire("onProcessedTap",t),1===e.touchInfos.length?this._fire("onTap",this._fixEvent(t)):2===e.touchInfos.length&&this._fire("onTwoFingerTap",t)},_processedDoubleTap:function(e){var t,i=1===e[1].touchInfos.length;i&&(t=[this._fixEvent(e[0].event),this._fixEvent(e[1].event)],t[1].relatedEvents=t),e=[e[0].event,e[1].event],e[1].relatedEvents=e,this._fire("onProcessedDoubleTap",e[1]),i&&(this._fire("onDoubleTap",t[1]),this._fire("onDblClick",t[1]))},_addTouch:function(e){var t,i,n,r=e.changedTouches,o=this._nodeTouches;for(this._numTouches+=r.length,e=0;e<r.length;e++){for(i=o.length,n=!1,t=0;i>t&&!(n=o[t].identifier===r[e].identifier);t++);n?this._numTouches--:o.push(r[e])}for(e=o.length-1;e>=0;e--)s.isDescendant(o[e].target,document.body)||(o.splice(e,1),this._numTouches--);0>this._numTouches&&(this._numTouches=0)},_removeTouch:function(e){var t=[],i=[],n=e.changedTouches,s=this._nodeTouches;for(this._numTouches-=n.length,0>this._numTouches&&(this._numTouches=0),e=0;e<n.length;e++)t.push(n[e].identifier);for(e=s.length-1;e>=0;e--)-1!==t.indexOf(s[e].identifier)&&i.push(s.splice(e,1)[0]);return i},_updateTouch:function(e){var t,i=[],n=e.changedTouches,s=this._nodeTouches;for(e=0;e<n.length;e++)i.push(n[e].identifier);for(e=0;e<s.length;e++)t=i.indexOf(s[e].identifier),-1!==t&&s.splice(e,1,n[t])},_mouseOver:function(e){this._fire("onMouseOver",this._processMouseEvent(e))},_mouseOut:function(e){this._fire("onMouseOut",this._processMouseEvent(e))},_mouseDown:function(e){this._fire("onMouseDown",this._processMouseEvent(e))},_mouseUp:function(e){this._fire("onMouseUp",this._processMouseEvent(e))},_mouseClick:function(e){this._fire("onClick",this._processMouseEvent(e))},_fire:function(e,t){this[e]&&this[e](t),this.map&&this.map[e]&&this.map[e](t)},_fixEvent:function(e){var t,i={};for(t in e)i[t]=e[t];return this.map&&(i.screenPoint=i.screenPoints[0],i.mapPoint=i.mapPoints[0]),i},_processTouchEvent:function(e,t){var n=this.map,s=n&&n.position,r=0;if(s&&t)if(i.isArray(t)){var o,c;for(e.screenPoints=[],e.mapPoints=[],o=0;o<t.length;o++)t[o]?(c=new l(t[o].pageX-s.x,t[o].pageY-s.y),e.screenPoints.push(c),e.mapPoints.push(n.extent?n.toMap(c):new a)):r++}else e.screenPoint=new l(t.pageX-s.x,t.pageY-s.y),e.mapPoint=n.extent?n.toMap(e.screenPoint):new a;return e.numPoints=t?i.isArray(t)?t.length-r:1:0,e},_processMouseEvent:function(e){var t=this.map,i=t&&t.position;return i&&(e.screenPoint=new l(e.pageX-i.x,e.pageY-i.y),e.mapPoint=t.extent?t.toMap(e.screenPoint):new a),e},setImmediateTap:function(e){this._immediate=e},destroy:function(){var e=this.node;e.removeEventListener("touchstart",this._touchStart,!1),e.removeEventListener("touchmove",this._touchMove,!1),e.removeEventListener("touchend",this._touchEnd,!1),e.removeEventListener("touchcancel",this._touchCancel,!1),this.map&&(e.removeEventListener("mouseover",this._mouseOver,!1),e.removeEventListener("mouseout",this._mouseOut,!1),e.removeEventListener("mousedown",this._mouseDown,!1),e.removeEventListener("mouseup",this._mouseUp,!1),e.removeEventListener("click",this._mouseClick,!1)),t.setSelectable(e,!0),clearTimeout(this._tapTimer),this.node=this.map=this._numTouches=this._nodeTouches=this._touches=this._touchIds=this._taps=null}}),n("extend-esri")&&(r.TouchEvents=e),e})},"esri/tasks/GeneralizeParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has esri/kernel esri/geometry/jsonUtils".split(" "),function(e,t,i,n,s,r,o){return e=e(null,{declaredClass:"esri.tasks.GeneralizeParameters",geometries:null,deviationUnit:null,maxDeviation:null,toJson:function(){var e=i.map(this.geometries,function(e){return e.toJson()}),t={};return this.geometries&&0<this.geometries.length&&(t.geometries=n.toJson({geometryType:o.getJsonType(this.geometries[0]),geometries:e}),t.sr=n.toJson(this.geometries[0].spatialReference.toJson())),this.deviationUnit&&(t.deviationUnit=this.deviationUnit),this.maxDeviation&&(t.maxDeviation=this.maxDeviation),t}}),s("extend-esri")&&t.setObject("tasks.GeneralizeParameters",e,r),e})},"esri/tasks/GeometryService":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/_base/Deferred dojo/has esri/kernel esri/request esri/deferredUtils esri/tasks/Task esri/geometry/Extent esri/geometry/Polyline esri/geometry/Polygon esri/geometry/Multipoint esri/geometry/jsonUtils".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p){return e=e(c,{declaredClass:"esri.tasks.GeometryService",_eventMap:{"areas-and-lengths-complete":["result"],"auto-complete-complete":["geometries"],"buffer-complete":["geometries"],"convex-hull-complete":["geometry"],"cut-complete":["result"],"difference-complete":["geometries"],"distance-complete":["distance"],"generalize-complete":["geometries"],"intersect-complete":["geometries"],"label-points-complete":["geometries"],"lengths-complete":["result"],"offset-complete":["geometries"],"project-complete":["geometries"],"relation-complete":["relations"],"reshape-complete":["geometry"],"simplify-complete":["geometries"],"trim-extend-complete":["geometries"],"union-complete":["geometry"]},constructor:function(e){e=t.hitch,this._projectHandler=e(this,this._projectHandler),this._simplifyHandler=e(this,this._simplifyHandler),this._bufferHandler=e(this,this._bufferHandler),this._areasAndLengthsHandler=e(this,this._areasAndLengthsHandler),this._lengthsHandler=e(this,this._lengthsHandler),this._labelPointsHandler=e(this,this._labelPointsHandler),this._relationHandler=e(this,this._relationHandler),this._convexHullHandler=e(this,this._convexHullHandler),this._unionHandler=e(this,this._unionHandler),this._autoCompleteHandler=e(this,this._autoCompleteHandler),this._reshapeHandler=e(this,this._reshapeHandler),this._cutHandler=e(this,this._cutHandler),this._intersectHandler=e(this,this._intersectHandler),this._differenceHandler=e(this,this._differenceHandler),this._trimExtendHandler=e(this,this._trimExtendHandler),this._densifyHandler=e(this,this._densifyHandler),this._generalizeHandler=e(this,this._densifyHandler),this._offsetHandler=e(this,this._offsetHandler),this._distanceHandler=e(this,this._distanceHandler),this.registerConnectEvents()},_encodeGeometries:function(e){var t,i=[],n=e.length;for(t=0;n>t;t++)i.push(e[t].toJson());return{geometryType:p.getJsonType(e[0]),geometries:i}},_decodeGeometries:function(e,n,s){var r=p.getGeometryType(n);e=e.geometries;var o=[],a={spatialReference:s.toJson()},l=t.mixin;return i.forEach(e,function(e,t){o[t]=new r(l(e,a))}),o},_toProjectGeometry:function(e){var t=e.spatialReference.toJson();return e instanceof h?new u({rings:[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]],spatialReference:t}):new d({paths:[[].concat(e.points)],spatialReference:t})},_fromProjectedGeometry:function(e,t,i){return"esriGeometryEnvelope"===t?(e=e.rings[0],new h(e[0][0],e[0][1],e[2][0],e[2][1],i)):new f({points:e.paths[0],spatialReference:i.toJson()})},project:function(e,i,r,o){var c,h=t.mixin({},this._url.query,{f:"json"});e.geometries?(o=r,r=i,i=e.outSR,c=e.geometries[0],h=t.mixin(h,e.toJson())):(c=e[0],h=t.mixin(h,{outSR:i.wkid||n.toJson(i.toJson()),inSR:c.spatialReference.wkid||n.toJson(c.spatialReference.toJson()),geometries:n.toJson(this._encodeGeometries(e))}));var d=p.getJsonType(c),u=this._projectHandler,f=this._errorHandler,m=new s(l._dfdCanceller);return m._pendingDfd=a({url:this._url.path+"/project",content:h,callbackParamName:"callback",load:function(e,t){u(e,t,d,i,r,o,m)},error:function(e){f(e,o,m)}}),m},_projectHandler:function(e,t,i,n,s,r,o){try{var a=this._decodeGeometries(e,i,n);this._successHandler([a],"onProjectComplete",s,o)}catch(l){this._errorHandler(l,r,o)}},onProjectComplete:function(){},simplify:function(e,i,r){var o=e[0].spatialReference,c=t.mixin({},this._url.query,{f:"json",sr:o.wkid?o.wkid:n.toJson(o.toJson()),geometries:n.toJson(this._encodeGeometries(e))}),h=p.getJsonType(e[0]),d=this._simplifyHandler,u=this._errorHandler,f=new s(l._dfdCanceller);return f._pendingDfd=a({url:this._url.path+"/simplify",content:c,callbackParamName:"callback",load:function(e,t){d(e,t,h,o,i,r,f)},error:function(e){u(e,r,f)}}),f},_simplifyHandler:function(e,t,i,n,s,r,o){try{var a=this._decodeGeometries(e,i,n);this._successHandler([a],"onSimplifyComplete",s,o)}catch(l){this._errorHandler(l,r,o)}},onSimplifyComplete:function(){},convexHull:function(e,i,r){var o=e[0].spatialReference;e=t.mixin({},this._url.query,{f:"json",sr:n.toJson(o.toJson()),geometries:n.toJson(this._encodeGeometries(e))});var c=this._convexHullHandler,h=this._errorHandler,d=new s(l._dfdCanceller);return d._pendingDfd=a({url:this._url.path+"/convexHull",content:e,callbackParamName:"callback",load:function(e,t){c(e,t,o,i,r,d)},error:function(e){h(e,r,d)}}),d},_convexHullHandler:function(e,t,i,n,s,r){try{var o=p.fromJson(e.geometry).setSpatialReference(i);this._successHandler([o],"onConvexHullComplete",n,r)}catch(a){this._errorHandler(a,s,r)}},onConvexHullComplete:function(){},union:function(e,i,r){var o=e[0].spatialReference;e=t.mixin({},this._url.query,{f:"json",sr:n.toJson(o.toJson()),geometries:n.toJson(this._encodeGeometries(e))});var c=this._unionHandler,h=this._errorHandler,d=new s(l._dfdCanceller);return d._pendingDfd=a({url:this._url.path+"/union",content:e,callbackParamName:"callback",load:function(e,t){c(e,t,o,i,r,d)},error:function(e){h(e,r,d)}}),d},_unionHandler:function(e,t,i,n,s,r){try{var o=p.fromJson(e.geometry).setSpatialReference(i);this._successHandler([o],"onUnionComplete",n,r)}catch(a){this._errorHandler(a,s,r)}},onUnionComplete:function(){},autoComplete:function(e,i,r,o){var c=e[0].spatialReference;e=t.mixin({},this._url.query,{f:"json",sr:n.toJson(c.toJson()),polygons:n.toJson(this._encodeGeometries(e).geometries),polylines:n.toJson(this._encodeGeometries(i).geometries)});
var h=this._autoCompleteHandler,d=this._errorHandler,u=new s(l._dfdCanceller);return u._pendingDfd=a({url:this._url.path+"/autoComplete",content:e,callbackParamName:"callback",load:function(e,t){h(e,t,c,r,o,u)},error:function(e){d(e,o,u)}}),u},_autoCompleteHandler:function(e,t,i,n,s,r){try{var o=e.geometries;e=[];var a,l=o.length;for(a=0;l>a;a++)e[a]=new u({spatialReference:i,rings:o[a].rings});this._successHandler([e],"onAutoCompleteComplete",n,r)}catch(c){this._errorHandler(c,s,r)}},onAutoCompleteComplete:function(){},reshape:function(e,i,r,o){var c=e.spatialReference;e=t.mixin({},this._url.query,{f:"json",sr:n.toJson(c.toJson()),target:n.toJson({geometryType:p.getJsonType(e),geometry:e.toJson()}),reshaper:n.toJson(i.toJson())});var h=this._reshapeHandler,d=this._errorHandler,u=new s(l._dfdCanceller);return u._pendingDfd=a({url:this._url.path+"/reshape",content:e,callbackParamName:"callback",load:function(e,t){h(e,t,c,r,o,u)},error:function(e){d(e,o,u)}}),u},_reshapeHandler:function(e,t,i,n,s,r){try{var o=p.fromJson(e.geometry).setSpatialReference(i);this._successHandler([o],"onReshapeComplete",n,r)}catch(a){this._errorHandler(a,s,r)}},onReshapeComplete:function(){},cut:function(e,r,o,c){var h=e[0].spatialReference,d=i.map(e,function(e){return e.toJson()});e=t.mixin({},this._url.query,{f:"json",sr:n.toJson(h.toJson()),target:n.toJson({geometryType:p.getJsonType(e[0]),geometries:d}),cutter:n.toJson(r.toJson())});var u=this._cutHandler,f=this._errorHandler,m=new s(l._dfdCanceller);return m._pendingDfd=a({url:this._url.path+"/cut",content:e,callbackParamName:"callback",load:function(e,t){u(e,t,h,o,c,m)},error:function(e){f(e,c,m)}}),m},_cutHandler:function(e,t,n,s,r,o){try{var a=e.geometries,l={};l.cutIndexes=e.cutIndexes,l.geometries=[],i.forEach(a,function(e){l.geometries.push(p.fromJson(e).setSpatialReference(n))}),this._successHandler([l],"onCutComplete",s,o)}catch(c){this._errorHandler(c,r,o)}},onCutComplete:function(){},intersect:function(e,i,r,o){var c=e[0].spatialReference;e=t.mixin({},this._url.query,{f:"json",sr:n.toJson(c.toJson()),geometries:n.toJson(this._encodeGeometries(e)),geometry:n.toJson({geometryType:p.getJsonType(i),geometry:i.toJson()})});var h=this._intersectHandler,d=this._errorHandler,u=new s(l._dfdCanceller);return u._pendingDfd=a({url:this._url.path+"/intersect",content:e,callbackParamName:"callback",load:function(e,t){h(e,t,c,r,o,u)},error:function(e){d(e,o,u)}}),u},_intersectHandler:function(e,t,n,s,r,o){try{var a=[];i.forEach(e.geometries,function(e){a.push(p.fromJson(e).setSpatialReference(n))}),this._successHandler([a],"onIntersectComplete",s,o)}catch(l){this._errorHandler(l,r,o)}},onIntersectComplete:function(){},difference:function(e,i,r,o){var c=e[0].spatialReference;e=t.mixin({},this._url.query,{f:"json",sr:n.toJson(c.toJson()),geometries:n.toJson(this._encodeGeometries(e)),geometry:n.toJson({geometryType:p.getJsonType(i),geometry:i.toJson()})});var h=this._differenceHandler,d=this._errorHandler,u=new s(l._dfdCanceller);return u._pendingDfd=a({url:this._url.path+"/difference",content:e,callbackParamName:"callback",load:function(e,t){h(e,t,c,r,o,u)},error:function(e){d(e,o,u)}}),u},_differenceHandler:function(e,t,n,s,r,o){try{var a=[];i.forEach(e.geometries,function(e){a.push(p.fromJson(e).setSpatialReference(n))}),this._successHandler([a],"onDifferenceComplete",s,o)}catch(l){this._errorHandler(l,r,o)}},onDifferenceComplete:function(){},buffer:function(e,i,n){var r=t.mixin({},this._url.query,{f:"json"},e.toJson()),o=e.outSpatialReference||e.geometries[0].spatialReference,c=this._bufferHandler,h=this._errorHandler,d=new s(l._dfdCanceller);return d._pendingDfd=a({url:this._url.path+"/buffer",content:r,callbackParamName:"callback",load:function(e,t){c(e,t,o,i,n,d)},error:function(e){h(e,n,d)}}),d},_bufferHandler:function(e,t,i,n,s,r){try{var o=e.geometries;e=[];var a,l=o.length;for(a=0;l>a;a++)e[a]=new u({spatialReference:i,rings:o[a].rings});this._successHandler([e],"onBufferComplete",n,r)}catch(c){this._errorHandler(c,s,r)}},onBufferComplete:function(){},areasAndLengths:function(e,i,n){e=t.mixin({},this._url.query,{f:"json"},e.toJson());var r=this._areasAndLengthsHandler,o=this._errorHandler,c=new s(l._dfdCanceller);return c._pendingDfd=a({url:this._url.path+"/areasAndLengths",content:e,callbackParamName:"callback",load:function(e,t){r(e,t,i,n,c)},error:function(e){o(e,n,c)}}),c},_areasAndLengthsHandler:function(e,t,i,n,s){try{this._successHandler([e],"onAreasAndLengthsComplete",i,s)}catch(r){this._errorHandler(r,n,s)}},onAreasAndLengthsComplete:function(){},lengths:function(e,i,n){e=t.mixin({},this._url.query,{f:"json"},e.toJson());var r=this._lengthsHandler,o=this._errorHandler,c=new s(l._dfdCanceller);return c._pendingDfd=a({url:this._url.path+"/lengths",content:e,callbackParamName:"callback",load:function(e,t){r(e,t,i,n,c)},error:function(e){o(e,n,c)}}),c},_lengthsHandler:function(e,t,i,n,s){try{this._successHandler([e],"onLengthsComplete",i,s)}catch(r){this._errorHandler(r,n,s)}},onLengthsComplete:function(){},labelPoints:function(e,r,o){var c=i.map(e,function(e){return e.toJson()}),h=e[0].spatialReference,c=t.mixin({},this._url.query,{f:"json",sr:h.wkid?h.wkid:n.toJson(h.toJson()),polygons:n.toJson(c)}),d=this._labelPointsHandler,u=this._errorHandler,f=new s(l._dfdCanceller);return f._pendingDfd=a({url:this._url.path+"/labelPoints",content:c,callbackParamName:"callback",load:function(t,i){d(t,i,e,h,r,o,f)},error:function(e){u(e,o,f)}}),f},_labelPointsHandler:function(e,t,n,s,r,o,a){try{var l=[];i.forEach(e.labelPoints,function(e){l.push(p.fromJson(e).setSpatialReference(s))}),this._successHandler([l],"onLabelPointsComplete",r,a)}catch(c){this._errorHandler(c,o,a)}},onLabelPointsComplete:function(){},relation:function(e,i,n){e=t.mixin({},this._url.query,{f:"json"},e.toJson());var r=this._relationHandler,o=this._errorHandler,c=new s(l._dfdCanceller);return c._pendingDfd=a({url:this._url.path+"/relation",content:e,callbackParamName:"callback",load:function(e,t){r(e,t,i,n,c)},error:function(e){o(e,n,c)}}),c},_relationHandler:function(e,t,i,n,s){try{this._successHandler([e.relations],"onRelationComplete",i,s)}catch(r){this._errorHandler(r,n,s)}},onRelationComplete:function(){},trimExtend:function(e,i,n){var r=t.mixin({},this._url.query,{f:"json"},e.toJson()),o=e.sr,c=this._trimExtendHandler,h=this._errorHandler,d=new s(l._dfdCanceller);return d._pendingDfd=a({url:this._url.path+"/trimExtend",content:r,callbackParamName:"callback",load:function(e,t){c(e,t,o,i,n,d)},error:function(e){h(e,n,d)}}),d},_trimExtendHandler:function(e,t,i,n,s,r){try{var o=e.geometries;e=[];var a,l=o.length;for(a=0;l>a;a++)e[a]=new d({spatialReference:i,paths:o[a].paths});this._successHandler([e],"onTrimExtendComplete",n,r)}catch(c){this._errorHandler(c,s,r)}},onTrimExtendComplete:function(){},densify:function(e,i,n){var r=t.mixin({},this._url.query,{f:"json"},e.toJson()),o=e.geometries[0].spatialReference,c=this._densifyHandler,h=this._errorHandler,d=new s(l._dfdCanceller);return d._pendingDfd=a({url:this._url.path+"/densify",content:r,callbackParamName:"callback",load:function(e,t){c(e,t,o,i,n,d)},error:function(e){h(e,n,d)}}),d},_densifyHandler:function(e,t,n,s,r,o){try{var a=[];i.forEach(e.geometries,function(e){a.push(p.fromJson(e).setSpatialReference(n))}),this._successHandler([a],"onDensifyComplete",s,o)}catch(l){this._errorHandler(l,r,o)}},onDensifyComplete:function(){},generalize:function(e,i,n){var r=t.mixin({},this._url.query,{f:"json"},e.toJson()),o=e.geometries[0].spatialReference,c=this._generalizeHandler,h=this._errorHandler,d=new s(l._dfdCanceller);return d._pendingDfd=a({url:this._url.path+"/generalize",content:r,callbackParamName:"callback",load:function(e,t){c(e,t,o,i,n,d)},error:function(e){h(e,n,d)}}),d},_generalizeHandler:function(e,t,n,s,r,o){try{var a=[];i.forEach(e.geometries,function(e){a.push(p.fromJson(e).setSpatialReference(n))}),this._successHandler([a],"onGeneralizeComplete",s,o)}catch(l){this._errorHandler(l,r,o)}},onGeneralizeComplete:function(){},offset:function(e,i,n){var r=t.mixin({},this._url.query,{f:"json"},e.toJson()),o=e.geometries[0].spatialReference,c=this._offsetHandler,h=this._errorHandler,d=new s(l._dfdCanceller);return d._pendingDfd=a({url:this._url.path+"/offset",content:r,callbackParamName:"callback",load:function(e,t){c(e,t,o,i,n,d)},error:function(e){h(e,n,d)}}),d},_offsetHandler:function(e,t,n,s,r,o){try{var a=[];i.forEach(e.geometries,function(e){a.push(p.fromJson(e).setSpatialReference(n))}),this._successHandler([a],"onOffsetComplete",s,o)}catch(l){this._errorHandler(l,r,o)}},onOffsetComplete:function(){},distance:function(e,i,n){var r=t.mixin({},this._url.query,{f:"json"},e.toJson()),o=e.geometry1.spatialReference,c=this._distanceHandler,h=this._errorHandler,d=new s(l._dfdCanceller);return d._pendingDfd=a({url:this._url.path+"/distance",content:r,callbackParamName:"callback",load:function(e,t){c(e,t,o,i,n,d)},error:function(e){h(e,n,d)}}),d},_distanceHandler:function(e,t,i,n,s,r){try{e=e&&e.distance,this._successHandler([e],"onDistanceComplete",n,r)}catch(o){this._errorHandler(o,s,r)}},onDistanceComplete:function(){}}),t.mixin(e,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"}),r("extend-esri")&&t.setObject("tasks.GeometryService",e,o),e})},"dijit/layout/utils":function(){define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(e,t,i,n,s){function r(e,t){var n=e.resize?e.resize(t):i.setMarginBox(e.domNode,t);n?s.mixin(e,n):(s.mixin(e,i.getMarginBox(e.domNode)),s.mixin(e,t))}var o={marginBox2contentBox:function(e,t){var s=n.getComputedStyle(e),r=i.getMarginExtents(e,s),o=i.getPadBorderExtents(e,s);return{l:n.toPixelValue(e,s.paddingLeft),t:n.toPixelValue(e,s.paddingTop),w:t.w-(r.w+o.w),h:t.h-(r.h+o.h)}},layoutChildren:function(i,n,o,a,l){n=s.mixin({},n),t.add(i,"dijitLayoutContainer"),o=e.filter(o,function(e){return"center"!=e.region&&"client"!=e.layoutAlign}).concat(e.filter(o,function(e){return"center"==e.region||"client"==e.layoutAlign})),e.forEach(o,function(e){var i=e.domNode,s=e.region||e.layoutAlign;if(!s)throw Error("No region setting for "+e.id);var o=i.style;o.left=n.l+"px",o.top=n.t+"px",o.position="absolute",t.add(i,"dijitAlign"+(s.substring(0,1).toUpperCase()+s.substring(1))),i={},a&&a==e.id&&(i["top"==e.region||"bottom"==e.region?"h":"w"]=l),"leading"==s&&(s=e.isLeftToRight()?"left":"right"),"trailing"==s&&(s=e.isLeftToRight()?"right":"left"),"top"==s||"bottom"==s?(i.w=n.w,r(e,i),n.h-=e.h,"top"==s?n.t+=e.h:o.top=n.t+n.h+"px"):"left"==s||"right"==s?(i.h=n.h,r(e,i),n.w-=e.w,"left"==s?n.l+=e.w:o.left=n.l+n.w+"px"):("client"==s||"center"==s)&&r(e,n)})}};return s.setObject("dijit.layout.utils",o),o})},"esri/tasks/RasterData":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(e,t,i,n){return e=e(null,{declaredClass:"esri.tasks.RasterData",constructor:function(e){e&&t.mixin(this,e)},url:null,format:null,itemID:null,toJson:function(){var e={};return this.url&&(e.url=this.url),this.format&&(e.format=this.format),this.itemID&&(e.itemID=this.itemID),e}}),i("extend-esri")&&t.setObject("tasks.RasterData",e,n),e})},"esri/symbols/SimpleMarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base esri/kernel esri/lang esri/symbols/MarkerSymbol esri/symbols/SimpleLineSymbol".split(" "),function(e,t,i,n,s,r,o,a,l){var c={STYLE_CIRCLE:"circle",STYLE_SQUARE:"square",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"},h={style:c.STYLE_CIRCLE,color:[255,255,255,.25],size:12,angle:0,xoffset:0,yoffset:0};return e=e(a,{declaredClass:"esri.symbol.SimpleMarkerSymbol",type:"simplemarkersymbol",_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},constructor:function(e,n,r,a){e?t.isString(e)?(this.style=e,n&&(this.size=n),r&&(this.outline=r),a&&(this.color=a)):(this.style=o.valueOf(this._styles,this.style),e.outline&&(this.outline=new l(e.outline))):(t.mixin(this,h),this.size=s.pt2px(this.size),this.outline=new l(this.outline),this.color=new i(this.color)),this.style||(this.style=c.STYLE_CIRCLE)},setStyle:function(e){return this.style=e,this},setPath:function(e){return this.path=e,this.setStyle(c.STYLE_PATH),this},setOutline:function(e){return this.outline=e,this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return this.color},_setDim:function(e,t,i){this._targetWidth=e,this._targetHeight=t,this._spikeSize=i},getShapeDescriptors:function(){var e,t,i,n=this.style,r=(this.size||s.pt2px(h.size))/2,o=0-r,a=0+r,l=0-r,d=0+r;switch(n){case c.STYLE_CIRCLE:e={type:"circle",cx:0,cy:0,r:r},t=this.getFill(),(i=this.getStroke())&&(i.style=i.style||"Solid");break;case c.STYLE_CROSS:e={type:"path",path:"M "+o+",0 L "+a+",0 M 0,"+l+" L 0,"+d+" E"},t=null,i=this.getStroke();break;case c.STYLE_DIAMOND:e={type:"path",path:"M "+o+",0 L 0,"+l+" L "+a+",0 L 0,"+d+" L "+o+",0 E"},t=this.getFill(),i=this.getStroke();break;case c.STYLE_SQUARE:e={type:"path",path:"M "+o+","+d+" L "+o+","+l+" L "+a+","+l+" L "+a+","+d+" L "+o+","+d+" E"},t=this.getFill(),i=this.getStroke();break;case c.STYLE_X:e={type:"path",path:"M "+o+","+d+" L "+a+","+l+" M "+o+","+l+" L "+a+","+d+" E"},t=null,i=this.getStroke();break;case c.STYLE_PATH:e={type:"path",path:this.path||""},t=this.getFill(),i=this.getStroke()}return{defaultShape:e,fill:t,stroke:i}},toJson:function(){var e=t.mixin(this.inherited("toJson",arguments),{type:"esriSMS",style:this._styles[this.style]}),i=this.outline;return i&&(e.outline=i.toJson()),e.path=this.path,o.fixJson(e)}}),t.mixin(e,c),e.defaultProps=h,n("extend-esri")&&(t.setObject("symbol.SimpleMarkerSymbol",e,r),r.symbol.defaultSimpleMarkerSymbol=h),e})},"esri/tasks/Task":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has esri/kernel esri/deferredUtils esri/urlUtils esri/Evented".split(" "),function(e,t,i,n,s,r,o,a){return e=e(a,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],complete:["result"]},constructor:function(e,i){e&&t.isString(e)&&(this._url=o.urlToObject(this.url=e)),i&&i.requestOptions&&(this.requestOptions=i.requestOptions),this.normalization=!0,this._errorHandler=t.hitch(this,this._errorHandler),this.registerConnectEvents()},_useSSL:function(){var e=this._url,t=/^http:/i;this.url&&(this.url=this.url.replace(t,"https:")),e&&e.path&&(e.path=e.path.replace(t,"https:"))},_encode:function(e,n,s){var r,o,a,l,c={};for(a in e)if("declaredClass"!==a&&(r=e[a],o=typeof r,null!==r&&void 0!==r&&"function"!==o))if(t.isArray(r))for(c[a]=[],l=r.length,o=0;l>o;o++)c[a][o]=this._encode(r[o]);else"object"===o?r.toJson&&(o=r.toJson(s&&s[a]),"esri.tasks.FeatureSet"===r.declaredClass&&o.spatialReference&&(o.sr=o.spatialReference,delete o.spatialReference),c[a]=n?o:i.toJson(o)):c[a]=r;return c},_successHandler:function(e,t,i,n){t&&this[t].apply(this,e),i&&i.apply(null,e),n&&r._resDfd(n,e)},_errorHandler:function(e,t,i){this.onError(e),t&&t(e),i&&i.errback(e)},setNormalization:function(e){this.normalization=e},onError:function(){}}),n("extend-esri")&&(s.Task=e),e})},"esri/tasks/RelationshipQuery":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(e,t,i,n){return e=e(null,{declaredClass:"esri.tasks.RelationshipQuery",definitionExpression:"",relationshipId:null,returnGeometry:!1,objectIds:null,outSpatialReference:null,outFields:null,toJson:function(){var e={definitionExpression:this.definitionExpression,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},t=this.objectIds,i=this.outFields,n=this.outSpatialReference;return t&&(e.objectIds=t.join(",")),i&&(e.outFields=i.join(",")),n&&(e.outSR=n.toJson()),e._ts=this._ts,e}}),i("extend-esri")&&t.setObject("tasks.RelationshipQuery",e,n),e})},"esri/symbols/LineSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base esri/kernel esri/symbols/Symbol".split(" "),function(e,t,i,n,s,r){return e=e(r,{declaredClass:"esri.symbol.LineSymbol",constructor:function(e){this.width=t.isObject(e)?n.pt2px(this.width):12},setWidth:function(e){return this.width=e,this},toJson:function(){var e=n.px2pt(this.width),e=isNaN(e)?void 0:e;return t.mixin(this.inherited("toJson",arguments),{width:e})}}),i("extend-esri")&&t.setObject("symbol.LineSymbol",e,s),e})},"esri/dijit/PopupRenderer":function(){define("require dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/kernel dojo/has dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dijit/_Widget dijit/_Templated esri/kernel esri/dijit/_EventedWidget dojo/i18n!esri/nls/jsapi dojo/NodeList-dom".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p,m,_,g){var y=0;return t=t([_,f,p],{declaredClass:"esri.dijit._PopupRenderer",constructor:function(){this._nls=n.mixin({},g.widgets.popup)},templateString:"<div class='esriViewPopup'><div class='mainSection'><div class='header' dojoAttachPoint='_title'></div><div class='hzLine'></div><div dojoAttachPoint='_description'></div><div class='break'></div></div><div class='attachmentsSection hidden'><div>${_nls.NLS_attach}:</div><ul dojoAttachPoint='_attachmentsList'></ul><div class='break'></div></div><div class='mediaSection hidden'><div class='header' dojoAttachPoint='_mediaTitle'></div><div class='hzLine'></div><div class='caption' dojoAttachPoint='_mediaCaption'></div><div class='gallery' dojoAttachPoint='_gallery'><div class='mediaHandle prev' dojoAttachPoint='_prevMedia' dojoAttachEvent='onclick: _goToPrevMedia'></div><div class='mediaHandle next' dojoAttachPoint='_nextMedia' dojoAttachEvent='onclick: _goToNextMedia'></div><ul class='summary'><li class='image mediaCount hidden' dojoAttachPoint='_imageCount'>0</li><li class='image mediaIcon hidden'></li><li class='chart mediaCount hidden' dojoAttachPoint='_chartCount'>0</li><li class='chart mediaIcon hidden'></li></ul><div class='frame' dojoAttachPoint='_mediaFrame'></div></div></div><div class='editSummarySection hidden' dojoAttachPoint='_editSummarySection'><div class='break'></div><div class='break hidden' dojoAttachPoint='_mediaBreak'></div><div class='editSummary' dojoAttachPoint='_editSummary'></div></div></div>",showTitle:!0,startup:function(){this.inherited(arguments);var e=this.template,t=this.graphic,i=e.getComponents(t),o=this.showTitle?i.title:"",a=i.description,d=i.fields,u=i.mediaInfos,f=this.domNode,p=this._nls;this._prevMedia.title=p.NLS_prevMedia,this._nextMedia.title=p.NLS_nextMedia,c.set(this._title,"innerHTML",o),o||h.add(this._title,"hidden"),!a&&d&&(a="",s.forEach(d,function(e){a+="<tr valign='top'>",a+="<td class='attrName'>"+e[0]+"</td>",a+="<td class='attrValue'>"+e[1].replace(/^\s*(https?:\/\/[^\s]+)\s*$/i,"<a target='_blank' href='$1' title='$1'>"+p.NLS_moreInfo+"</a>")+"</td>",a+="</tr>"}),a&&(a="<table class='attrTable' cellpadding='0px' cellspacing='0px'>"+a+"</table>")),c.set(this._description,"innerHTML",a),a||h.add(this._description,"hidden"),r.query("a",this._description).forEach(function(e){c.set(e,"target","_blank")}),o&&a?r.query(".mainSection .hzLine",f).removeClass("hidden"):o||a?r.query(".mainSection .hzLine",f).addClass("hidden"):r.query(".mainSection",f).addClass("hidden"),(e=this._dfd=e.getAttachments(t))&&(e.addBoth(n.hitch(this,this._attListHandler,e)),c.set(this._attachmentsList,"innerHTML","<li>"+p.NLS_searching+"...</li>"),r.query(".attachmentsSection",f).removeClass("hidden")),u&&u.length&&(r.query(".mediaSection",f).removeClass("hidden"),l.setSelectable(this._mediaFrame,!1),this._mediaInfos=u,this._mediaPtr=0,this._updateUI(),this._displayMedia()),i.editSummary&&(c.set(this._editSummary,"innerHTML",i.editSummary),u&&u.length&&h.remove(this._mediaBreak,"hidden"),h.remove(this._editSummarySection,"hidden"))},destroy:function(){this._dfd&&this._dfd.cancel(),this._destroyFrame(),this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._dfd=null,this.inherited(arguments)},_goToPrevMedia:function(){0>this._mediaPtr-1||(this._mediaPtr--,this._updateUI(),this._displayMedia())},_goToNextMedia:function(){this._mediaPtr+1!==this._mediaInfos.length&&(this._mediaPtr++,this._updateUI(),this._displayMedia())},_updateUI:function(){var e=this._mediaInfos,t=e.length,i=this.domNode,n=this._prevMedia,o=this._nextMedia;if(t>1){var a=0,l=0;s.forEach(e,function(e){"image"===e.type?a++:-1!==e.type.indexOf("chart")&&l++}),a&&(c.set(this._imageCount,"innerHTML",a),r.query(".summary .image",i).removeClass("hidden")),l&&(c.set(this._chartCount,"innerHTML",l),r.query(".summary .chart",i).removeClass("hidden"))}else r.query(".summary",i).addClass("hidden"),h.add(n,"hidden"),h.add(o,"hidden");e=this._mediaPtr,0===e?h.add(n,"hidden"):h.remove(n,"hidden"),e===t-1?h.add(o,"hidden"):h.remove(o,"hidden"),this._destroyFrame()},_displayMedia:function(){var t=this._mediaInfos[this._mediaPtr],i=t.title,s=t.caption,o=r.query(".mediaSection .hzLine",this.domNode)[0];if(c.set(this._mediaTitle,"innerHTML",i),h[i?"remove":"add"](this._mediaTitle,"hidden"),c.set(this._mediaCaption,"innerHTML",s),h[s?"remove":"add"](this._mediaCaption,"hidden"),h[i&&s?"remove":"add"](o,"hidden"),this._rid=null,"image"===t.type)this._showImage(t.value);else{var a=this,i=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"],s=t.value.theme||this.chartTheme||"esri/dijit/Rainbow";n.isString(s)&&(s=s.replace(/\./gi,"/"),-1===s.indexOf("/")&&(s="dojox/charting/themes/"+s),i.push(s));try{var l=this._rid=y++;e(i,function(e,i,n){l===a._rid&&(a._rid=null,a._showChart(t.type,t.value,e,i,n))})}catch(d){console.log("PopupRenderer: error loading modules")}}},_showImage:function(e){h.add(this._mediaFrame,"image");var t=u.get(this._gallery,"height"),n="<img class='esriPopupMediaImage' src='"+e.sourceURL+"' />";e.linkURL&&(n="<a target='_blank' href='"+e.linkURL+"'>"+n+"</a>"),c.set(this._mediaFrame,"innerHTML",n);var s,o=r.query(".esriPopupMediaImage",this._mediaFrame)[0],a=this;s=i.connect(o,"onload",function(){i.disconnect(s),s=null,a._imageLoaded(o,t)})},_showChart:function(e,t,i,n,r){switch(h.remove(this._mediaFrame,"image"),i=this._chart=new i(d.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}}),r&&i.setTheme(r),e){case"piechart":i.addPlot("default",{type:"Pie",labels:!1}),i.addSeries("Series A",t.fields);break;case"linechart":i.addPlot("default",{type:"Markers"}),i.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),i.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"}),s.forEach(t.fields,function(e,t){e.x=t+1}),i.addSeries("Series A",t.fields);break;case"columnchart":i.addPlot("default",{type:"Columns",gap:3}),i.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"}),i.addSeries("Series A",t.fields);break;case"barchart":i.addPlot("default",{type:"Bars",gap:3}),i.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),i.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),i.addSeries("Series A",t.fields)}this._action=new n(i),i.render()},_destroyFrame:function(){this._rid=null,this._chart&&(this._chart.destroy(),this._chart=null),this._action&&(this._action.destroy(),this._action=null),c.set(this._mediaFrame,"innerHTML","")},_imageLoaded:function(e,t){var i=e.height;t>i&&(i=Math.round((t-i)/2),u.set(e,"marginTop",i+"px"))},_attListHandler:function(e,t){if(e===this._dfd){this._dfd=null;var i="";!(t instanceof Error)&&t&&t.length&&s.forEach(t,function(e){i+="<li>",i+="<a href='"+e.url+"' target='_blank'>"+(e.name||"[No name]")+"</a>",i+="</li>"}),c.set(this._attachmentsList,"innerHTML",i||"<li>"+this._nls.NLS_noAttach+"</li>")}}}),o("extend-esri")&&n.setObject("dijit._PopupRenderer",t,m),t})},"esri/graphicsUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/geometry/Extent"],function(e,t,i,n,s){var r={graphicsExtent:function(e){var t,i,n=e[0].geometry,r=n.getExtent(),o=e.length;for(null===r&&(r=new s(n.x,n.y,n.x,n.y,n.spatialReference)),i=1;o>i;i++)t=(n=e[i].geometry).getExtent(),null===t&&(t=new s(n.x,n.y,n.x,n.y,n.spatialReference)),r=r.union(t);return 0>=r.getWidth()&&0>=r.getHeight()?null:r},getGeometries:function(e){return t.map(e,function(e){return e.geometry})},_encodeGraphics:function(e,i){var n,s,r,o=[];return t.forEach(e,function(e,t){n=e.toJson(),s={},n.geometry&&(r=i&&i[t],s.geometry=r&&r.toJson()||n.geometry),n.attributes&&(s.attributes=n.attributes),o[t]=s}),o}};return i("extend-esri")&&e.mixin(n,r),r})},"esri/IdentityManager":function(){define(["esri/kernel","esri/IdentityManagerDialog"],function(e,t){return e.id=new t,e.id})},"dojox/gfx/matrix":function(){define(["./_base","dojo/_base/lang"],function(e,t){var i=e.matrix={},n={};return i._degToRad=function(e){return n[e]||(n[e]=Math.PI*e/180)},i._radToDeg=function(e){return 180*(e/Math.PI)},i.Matrix2D=function(e){if(e)if("number"==typeof e)this.xx=this.yy=e;else if(e instanceof Array){if(0<e.length){for(var n=i.normalize(e[0]),s=1;s<e.length;++s){var r=n,o=i.normalize(e[s]),n=new i.Matrix2D;n.xx=r.xx*o.xx+r.xy*o.yx,n.xy=r.xx*o.xy+r.xy*o.yy,n.yx=r.yx*o.xx+r.yy*o.yx,n.yy=r.yx*o.xy+r.yy*o.yy,n.dx=r.xx*o.dx+r.xy*o.dy+r.dx,n.dy=r.yx*o.dx+r.yy*o.dy+r.dy}t.mixin(this,n)}}else t.mixin(this,e)},t.extend(i.Matrix2D,{xx:1,xy:0,yx:0,yy:1,dx:0,dy:0}),t.mixin(i,{identity:new i.Matrix2D,flipX:new i.Matrix2D({xx:-1}),flipY:new i.Matrix2D({yy:-1}),flipXY:new i.Matrix2D({xx:-1,yy:-1}),translate:function(e,t){return 1<arguments.length?new i.Matrix2D({dx:e,dy:t}):new i.Matrix2D({dx:e.x,dy:e.y})},scale:function(e,t){return 1<arguments.length?new i.Matrix2D({xx:e,yy:t}):"number"==typeof e?new i.Matrix2D({xx:e,yy:e}):new i.Matrix2D({xx:e.x,yy:e.y})},rotate:function(e){var t=Math.cos(e);return e=Math.sin(e),new i.Matrix2D({xx:t,xy:-e,yx:e,yy:t})},rotateg:function(e){return i.rotate(i._degToRad(e))},skewX:function(e){return new i.Matrix2D({xy:Math.tan(e)})},skewXg:function(e){return i.skewX(i._degToRad(e))},skewY:function(e){return new i.Matrix2D({yx:Math.tan(e)})},skewYg:function(e){return i.skewY(i._degToRad(e))},reflect:function(e,t){1==arguments.length&&(t=e.y,e=e.x);var n=e*e,s=t*t,r=n+s,o=2*e*t/r;return new i.Matrix2D({xx:2*n/r-1,xy:o,yx:o,yy:2*s/r-1})},project:function(e,t){1==arguments.length&&(t=e.y,e=e.x);var n=e*e,s=t*t,r=n+s,o=e*t/r;return new i.Matrix2D({xx:n/r,xy:o,yx:o,yy:s/r})},normalize:function(e){return e instanceof i.Matrix2D?e:new i.Matrix2D(e)},isIdentity:function(e){return 1==e.xx&&0==e.xy&&0==e.yx&&1==e.yy&&0==e.dx&&0==e.dy},clone:function(e){var t,n=new i.Matrix2D;for(t in e)"number"==typeof e[t]&&"number"==typeof n[t]&&n[t]!=e[t]&&(n[t]=e[t]);return n},invert:function(e){e=i.normalize(e);var t=e.xx*e.yy-e.xy*e.yx;return e=new i.Matrix2D({xx:e.yy/t,xy:-e.xy/t,yx:-e.yx/t,yy:e.xx/t,dx:(e.xy*e.dy-e.yy*e.dx)/t,dy:(e.yx*e.dx-e.xx*e.dy)/t})},_multiplyPoint:function(e,t,i){return{x:e.xx*t+e.xy*i+e.dx,y:e.yx*t+e.yy*i+e.dy}},multiplyPoint:function(e,t,n){return e=i.normalize(e),"number"==typeof t&&"number"==typeof n?i._multiplyPoint(e,t,n):i._multiplyPoint(e,t.x,t.y)},multiplyRectangle:function(e,t){var n=i.normalize(e);if(t=t||{x:0,y:0,width:0,height:0},i.isIdentity(n))return{x:t.x,y:t.y,width:t.width,height:t.height};var s=i.multiplyPoint(n,t.x,t.y),r=i.multiplyPoint(n,t.x,t.y+t.height),o=i.multiplyPoint(n,t.x+t.width,t.y),a=i.multiplyPoint(n,t.x+t.width,t.y+t.height),n=Math.min(s.x,r.x,o.x,a.x),l=Math.min(s.y,r.y,o.y,a.y),c=Math.max(s.x,r.x,o.x,a.x),s=Math.max(s.y,r.y,o.y,a.y);return{x:n,y:l,width:c-n,height:s-l}},multiply:function(e){for(var t=i.normalize(e),n=1;n<arguments.length;++n){var s=t,r=i.normalize(arguments[n]),t=new i.Matrix2D;t.xx=s.xx*r.xx+s.xy*r.yx,t.xy=s.xx*r.xy+s.xy*r.yy,t.yx=s.yx*r.xx+s.yy*r.yx,t.yy=s.yx*r.xy+s.yy*r.yy,t.dx=s.xx*r.dx+s.xy*r.dy+s.dx,t.dy=s.yx*r.dx+s.yy*r.dy+s.dy}return t},_sandwich:function(e,t,n){return i.multiply(i.translate(t,n),e,i.translate(-t,-n))},scaleAt:function(e,t,n,s){switch(arguments.length){case 4:return i._sandwich(i.scale(e,t),n,s);case 3:return"number"==typeof n?i._sandwich(i.scale(e),t,n):i._sandwich(i.scale(e,t),n.x,n.y)}return i._sandwich(i.scale(e),t.x,t.y)},rotateAt:function(e,t,n){return 2<arguments.length?i._sandwich(i.rotate(e),t,n):i._sandwich(i.rotate(e),t.x,t.y)},rotategAt:function(e,t,n){return 2<arguments.length?i._sandwich(i.rotateg(e),t,n):i._sandwich(i.rotateg(e),t.x,t.y)},skewXAt:function(e,t,n){return 2<arguments.length?i._sandwich(i.skewX(e),t,n):i._sandwich(i.skewX(e),t.x,t.y)},skewXgAt:function(e,t,n){return 2<arguments.length?i._sandwich(i.skewXg(e),t,n):i._sandwich(i.skewXg(e),t.x,t.y)},skewYAt:function(e,t,n){return 2<arguments.length?i._sandwich(i.skewY(e),t,n):i._sandwich(i.skewY(e),t.x,t.y)},skewYgAt:function(e,t,n){return 2<arguments.length?i._sandwich(i.skewYg(e),t,n):i._sandwich(i.skewYg(e),t.x,t.y)}}),e.Matrix2D=i.Matrix2D,i})},"esri/layers/QueryDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has esri/kernel esri/lang esri/layers/DataSource esri/SpatialReference".split(" "),function(e,t,i,n,s,r,o){return e=e(r,{declaredClass:"esri.layers.QueryDataSource",constructor:function(e){e&&(e.oidFields&&t.isString(e.oidFields)&&(this.oidFields=e.oidFields.split(",")),e.spatialReference&&(this.spatialReference=new o(e.spatialReference)))},toJson:function(){var e={type:"queryTable",workspaceId:this.workspaceId,query:this.query,oidFields:this.oidFields&&this.oidFields.join(),spatialReference:this.spatialReference&&this.spatialReference.toJson()};if(this.geometryType){var t;t="point"===this.geometryType.toLowerCase()?"esriGeometryPoint":"multipoint"===this.geometryType.toLowerCase()?"esriGeometryMultipoint":"polyline"===this.geometryType.toLowerCase()?"esriGeometryPolyline":"polygon"===this.geometryType.toLowerCase()?"esriGeometryPolygon":this.geometryType,e.geometryType=t}return s.fixJson(e)}}),i("extend-esri")&&t.setObject("layers.QueryDataSource",e,n),e})},"esri/tasks/SpatialRelationship":function(){define(["dojo/_base/lang","dojo/has","esri/kernel"],function(e,t,i){var n={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};
return t("extend-esri")&&e.setObject("tasks._SpatialRelationship",n,i),n})},"esri/tasks/RouteTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has esri/kernel esri/graphic esri/request esri/geometry/normalizeUtils esri/tasks/Task esri/tasks/RouteResult esri/tasks/NAMessage".split(" "),function(e,t,i,n,s,r,o,a,l,c,h){return e=e(l,{declaredClass:"esri.tasks.RouteTask",_eventMap:{"solve-complete":["result"]},constructor:function(){this._url.path+="/solve",this._handler=t.hitch(this,this._handler),this.registerConnectEvents()},__msigns:[{n:"solve",c:3,a:[{i:0,p:["stops.features","barriers.features","polylineBarriers.features","polygonBarriers.features"]}],e:2}],_handler:function(e,t,n,s,o){try{var a,l,d=[],u=[],f=e.routes?e.routes.features:[],p=e.stops?e.stops.features:[],m=e.barriers?e.barriers.features:[],_=e.polygonBarriers?e.polygonBarriers.features:[],g=e.polylineBarriers?e.polylineBarriers.features:[],y=e.messages,v=i.forEach,b=i.indexOf,x=!0,w=e.routes&&e.routes.spatialReference||e.stops&&e.stops.spatialReference||e.barriers&&e.barriers.spatialReference||e.polygonBarriers&&e.polygonBarriers.spatialReference||e.polylineBarriers&&e.polylineBarriers.spatialReference;v(e.directions||[],function(e){d.push(a=e.routeName),u[a]={directions:e}}),v(f,function(e){-1===b(d,a=e.attributes.Name)&&(d.push(a),u[a]={}),u[a].route=e}),v(p,function(e){l=e.attributes,-1===b(d,a=l.RouteName||"esri.tasks.RouteTask.NULL_ROUTE_NAME")&&(d.push(a),u[a]={}),"esri.tasks.RouteTask.NULL_ROUTE_NAME"!==a&&(x=!1),void 0===u[a].stops&&(u[a].stops=[]),u[a].stops.push(e)}),0<p.length&&!0===x&&(u[d[0]].stops=u["esri.tasks.RouteTask.NULL_ROUTE_NAME"].stops,delete u["esri.tasks.RouteTask.NULL_ROUTE_NAME"],d.splice(i.indexOf(d,"esri.tasks.RouteTask.NULL_ROUTE_NAME"),1));var S=[];v(d,function(e){u[e].routeName="esri.tasks.RouteTask.NULL_ROUTE_NAME"===e?null:e,u[e].spatialReference=w,S.push(new c(u[e]))}),e=function(e){return v(e,function(t,i){t.geometry&&(t.geometry.spatialReference=w),e[i]=new r(t)}),e},v(y,function(e,t){y[t]=new h(e)});var T={routeResults:S,barriers:e(m),polygonBarriers:e(_),polylineBarriers:e(g),messages:y};this._successHandler([T],"onSolveComplete",n,o)}catch(j){this._errorHandler(j,s,o)}},solve:function(e,n,s,r){var a=e.stops;if(a&&"esri.tasks.FeatureSet"===a.declaredClass){var l,c=[],h=!1;if(i.forEach(a.features,function(e){l=e.attributes,l&&l.RouteName||h?-1===i.indexOf(c,l?l.RouteName:"")&&c.push(l?l.RouteName:""):h=!0}),1<c.length&&h)throw h=Error("'RouteName' not specified for atleast 1 stop in stops FeatureSet."),this.onError(h),s&&s(h),h}a=r.assembly,e=this._encode(t.mixin({},this._url.query,{f:"json"},e.toJson(a&&a[0])));var d=this._handler,u=this._errorHandler;return o({url:this._url.path,content:e,callbackParamName:"callback",load:function(e,t){d(e,t,n,s,r.dfd)},error:function(e){u(e,s,r.dfd)}})},onSolveComplete:function(){}}),a._createWrappers(e),n("extend-esri")&&t.setObject("tasks.RouteTask",e,s),e})},"esri/PointerEvents":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has esri/kernel esri/Evented esri/geometry/Point esri/geometry/ScreenPoint".split(" "),function(e,t,i,n,s,r,o,a){return e=e([r],{declaredClass:"esri.PointerEvents",tapRadius:8,clickRadius:2,doubleTapRadius:10,tapStartTolerance:50,doubleTapDuration:300,minWheelValue:1,maxWheelValue:1,mozWheelDivisor:-1!==n("mac")?1:3,wheelDivisor:120,preventPageScroll:!0,constructor:function(e,i){this.node=e,t.mixin(this,i),void 0!==e.style.msTouchAction?e.style.msTouchAction="none":void 0!==e.style.touchAction&&(e.style.touchAction="none");var n=navigator.msPointerEnabled,s=function(e){e.preventDefault()};e.addEventListener("selectstart",s,!1),e.addEventListener("dragstart",s,!1),this._pointerDown=t.hitch(this,this._pointerDown),this._pointerMove=t.hitch(this,this._pointerMove),this._pointerUp=t.hitch(this,this._pointerUp),this._pointerCancel=t.hitch(this,this._pointerCancel),e.addEventListener(n?"MSPointerDown":"pointerdown",this._pointerDown,!1),e.addEventListener(n?"MSPointerMove":"pointermove",this._pointerMove,!1),e.addEventListener(n?"MSPointerUp":"pointerup",this._pointerUp,!1),e.addEventListener(n?"MSPointerCancel":"pointercancel",this._pointerCancel,!1),this.map&&(this._mouseOver=t.hitch(this,this._mouseOver),this._mouseOut=t.hitch(this,this._mouseOut),this._mouseDown=t.hitch(this,this._mouseDown),this._mouseUp=t.hitch(this,this._mouseUp),this._mouseClick=t.hitch(this,this._mouseClick),this._mouseWheel=t.hitch(this,this._mouseWheel),this._mouseMove=t.hitch(this,this._mouseMove),e.addEventListener("mouseover",this._mouseOver,!1),e.addEventListener("mouseout",this._mouseOut,!1),e.addEventListener("mousedown",this._mouseDown,!1),e.addEventListener("mouseup",this._mouseUp,!1),e.addEventListener("click",this._mouseClick,!1),e.addEventListener("mousewheel",this._mouseWheel,!1),e.addEventListener("mousemove",this._mouseMove,!1)),this._numTouches=0,this._touches={},this._touchIds=[],this._taps=[],this._immediate=!1},_pointerDown:function(e){var t,i=this._touches,n=e.target,s=e.pointerId,r=this._touchIds,o=(new Date).getTime();t=i[s]={},t.pointerId=s,t.startX=t.pageX=e.pageX,t.startY=t.pageY=e.pageY,t.startTS=o,r.push(s),this._numTouches++,n.setPointerCapture?n.setPointerCapture(s):n.msSetPointerCapture&&n.msSetPointerCapture(s),n=i[r[0]],i=i[r[1]],1!==this._numTouches&&(2===this._numTouches?this._swipeActive&&(n&&(n.startX=n.pageX,n.startY=n.pageY,n.moved=!1),this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(e,n))):this._swipeActive?(this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(e,n))):this._pinchActive&&(this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(e,[n,i]))))},_pointerMove:function(e){var t,i,n,s=this._touches,r=this._touchIds;!(t=s[e.pointerId])||t.pageX===e.pageX&&t.pageY===e.pageY||(t.pageX=e.pageX,t.pageY=e.pageY,i=Math.abs(t.pageX-t.startX),n=Math.abs(t.pageY-t.startY),!t.moved&&(i>=this.tapRadius||n>=this.tapRadius)&&(t.moved=t.absMoved=!0),1===this._numTouches?this._swipeActive?this._fire("onSwipeMove",this._processTouchEvent(e,e)):t.moved&&(this._swipeActive=!0,this._fire("onSwipeStart",this._processTouchEvent(e,e))):2===this._numTouches&&(t=s[r[0]],s=s[r[1]],this._pinchActive?this._fire("onPinchMove",this._processTouchEvent(e,[t,s])):(t.moved||s.moved)&&(r=Math.abs(t.startX-s.startX),i=Math.abs(t.startY-s.startY),r=Math.sqrt(r*r+i*i),i=Math.abs(t.pageX-s.pageX),n=Math.abs(t.pageY-s.pageY),i=Math.sqrt(i*i+n*n),Math.abs(i-r)>=2*this.tapRadius&&(this._pinchActive=!0,this._fire("onPinchStart",this._processTouchEvent(e,[t,s]))))))},_pointerUp:function(e){var t,n=this._touches,s=this.node,r=e.target,o=e.pointerId,a=this._touchIds,l=a.slice(0),c=i.map(l,function(e){return n[e]}),h=(new Date).getTime();if(t=n[o])if(t.pageX=e.pageX,t.pageY=e.pageY,t.endTS=h,this._numTouches--,r.releasePointerCapture?r.releasePointerCapture(o):r.msReleasePointerCapture&&r.msReleasePointerCapture(o),0===this._numTouches){if(this._touches={},this._touchIds=[],this._swipeActive)this._swipeActive=!1,this._fire("onSwipeEnd",this._processTouchEvent(e,e));else if(this._pinchActive)this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(e,e));else if(!t.absMoved){var d,r=1/0,o=-1/0,a=1/0,h=-1/0,u=this.tapStartTolerance;for(d=0;d<l.length;d++)t=c[d],t.startTS<r&&(r=t.startTS),t.startTS>o&&(o=t.startTS),t.endTS<a&&(a=t.endTS),t.endTS>h&&(h=t.endTS);Math.abs(o-r)<=u&&Math.abs(h-a)<=u&&this._basicTap(e,c)}}else 1===this._numTouches&&this._pinchActive&&(a.splice(i.indexOf(a,e.pointerId),1),delete n[e.pointerId],t=n[a[0]],t.startX=t.pageX,t.startY=t.pageY,t.moved=!1,document.msElementsFromPoint&&(l=document.msElementsFromPoint(t.pageX,t.pageY),i.some(l,function(e){return e===s})||(this._touches={},this._touchIds=[],this._numTouches=0)),this._pinchActive=!1,this._fire("onPinchEnd",this._processTouchEvent(e,[e,t])))},_pointerCancel:function(e){this._numTouches&&this._pointerUp(e)},_basicTap:function(e,t){var i=(new Date).getTime(),n=this,s=this._immediate;e=this._processTouchEvent(e,t),this._taps.push({touchInfos:t,ts:i,event:e}),2<this._taps.length&&this._taps.shift(),this._fire("onBasicTap",e),clearTimeout(this._tapTimer),i=2===this._taps.length?this.doubleTapDuration/2:this.doubleTapDuration,this._tapTimer=setTimeout(function(){var e=n;n=null,clearTimeout(e._tapTimer),e._analyzeTap(s)},s?0:i)},_analyzeTap:function(e){var t=this._taps,i=t[0],n=t[1],s=i.touchInfos,r=n&&n.touchInfos;t.length&&(e||(this._taps=[]),i&&n?s.length===r.length?n.ts-i.ts<=this.doubleTapDuration?(1===s.length?(e=Math.abs(s[0].startX-r[0].startX),s=Math.abs(s[0].startY-r[0].startY),s=e<=this.doubleTapRadius&&s<=this.doubleTapRadius):s=!0,s?this._processedDoubleTap(t):this._processedTap(n)):this._processedTap(n):this._processedTap(n):this._processedTap(i||n))},_processedTap:function(e){var t=e.event;this._fire("onProcessedTap",t),1===e.touchInfos.length?this._fire("onTap",this._fixEvent(t)):2===e.touchInfos.length&&this._fire("onTwoFingerTap",t)},_processedDoubleTap:function(e){var t,i=1===e[1].touchInfos.length;i&&(t=[this._fixEvent(e[0].event),this._fixEvent(e[1].event)],t[1].relatedEvents=t),e=[e[0].event,e[1].event],e[1].relatedEvents=e,this._fire("onProcessedDoubleTap",e[1]),i&&(this._fire("onDoubleTap",t[1]),this._fire("onDblClick",t[1]))},_mouseOver:function(e){this._fire("onMouseOver",this._processMouseEvent(e))},_mouseMove:function(e){this._fire("onMouseMove",this._processMouseEvent(e))},_mouseOut:function(e){this._fire("onMouseOut",this._processMouseEvent(e))},_mouseDown:function(e){this._downX=e.pageX,this._downY=e.pageY,this._fire("onMouseDown",this._processMouseEvent(e))},_mouseUp:function(e){this._fire("onMouseUp",this._processMouseEvent(e))},_mouseClick:function(e){Math.abs(e.pageX-this._downX)<=this.clickRadius&&Math.abs(e.pageY-this._downY)<=this.clickRadius&&this._fire("onClick",this._processMouseEvent(e))},_mouseWheel:function(e){var t=this.map;(t?t.isScrollWheelZoom||t.isScrollWheelPan:this.preventPageScroll)&&e.preventDefault();var t=e.wheelDelta?e.wheelDelta/this.wheelDivisor:-e.detail/this.mozWheelDivisor,i=Math.abs(t),i=i<=this.minWheelValue?this.minWheelValue:this.maxWheelValue;e.value=0>t?-i:i,this._fire("onMouseWheel",this._processMouseEvent(e))},_fire:function(e,t){this[e]&&this[e](t),this.map&&this.map[e]&&this.map[e](t)},_fixEvent:function(e){var t,i={};for(t in e)i[t]=e[t];return this.map&&(i.screenPoint=i.screenPoints[0],i.mapPoint=i.mapPoints[0]),i},_processTouchEvent:function(e,i){var n=this.map,s=n&&n.position,r=0;if(s&&i)if(t.isArray(i)){var l,c;for(e.screenPoints=[],e.mapPoints=[],l=0;l<i.length;l++)i[l]?(c=new a(i[l].pageX-s.x,i[l].pageY-s.y),e.screenPoints.push(c),e.mapPoints.push(n.extent?n.toMap(c):new o)):r++}else e.screenPoint=new a(i.pageX-s.x,i.pageY-s.y),e.mapPoint=n.extent?n.toMap(e.screenPoint):new o;return e.numPoints=i?t.isArray(i)?i.length-r:1:0,e},_processMouseEvent:function(e){var t=this.map,i=t&&t.position;return i&&(e.screenPoint=new a(e.pageX-i.x,e.pageY-i.y),e.mapPoint=t.extent?t.toMap(e.screenPoint):new o),e},setImmediateTap:function(e){this._immediate=e},destroy:function(){var e=this.node;e.removeEventListener("MSPointerDown",this._pointerDown,!1),e.removeEventListener("MSPointerMove",this._pointerMove,!1),e.removeEventListener("MSPointerUp",this._pointerUp,!1),e.removeEventListener("MSPointerCancel",this._pointerCancel,!1),this.map&&(e.removeEventListener("mouseover",this._mouseOver,!1),e.removeEventListener("mousemove",this._mouseMove,!1),e.removeEventListener("mouseout",this._mouseOut,!1),e.removeEventListener("mousedown",this._mouseDown,!1),e.removeEventListener("mouseup",this._mouseUp,!1),e.removeEventListener("click",this._mouseClick,!1)),clearTimeout(this._tapTimer),this.node=this.map=this._numTouches=this._touches=this._touchIds=this._taps=null}}),n("extend-esri")&&(s.PointerEvents=e),e})},"esri/layers/JoinDataSource":function(){define("dojo/_base/declare dojo/_base/lang dojo/has esri/kernel esri/lang esri/layers/DataSource esri/layers/LayerMapSource esri/layers/TableDataSource esri/layers/QueryDataSource esri/layers/RasterDataSource".split(" "),function(e,t,i,n,s,r,o,a,l,c){var h=e(r,{declaredClass:"esri.layers.JoinDataSource",constructor:function(e){e&&(e.leftTableSource&&(this.leftTableSource=this._createLayerSource(e.leftTableSource)),e.rightTableSource&&(this.rightTableSource=this._createLayerSource(e.rightTableSource)))},_createLayerSource:function(e){var t;if("mapLayer"===e.type)t=new o(e);else{t={type:"dataLayer"};var i;switch(e.dataSource.type){case"table":i=new a(e.dataSource);break;case"queryTable":i=new l(e.dataSource);break;case"joinTable":i=new h(e.dataSource);break;case"raster":i=new c(e.dataSource);break;default:i=e.dataSource}t.dataSource=i,t.toJson=function(){var e={type:"dataLayer",dataSource:i.toJson()};return s.fixJson(e)}}return t},toJson:function(){var e,t={type:"joinTable",leftTableSource:this.leftTableSource&&this.leftTableSource.toJson(),rightTableSource:this.rightTableSource&&this.rightTableSource.toJson(),leftTableKey:this.leftTableKey,rightTableKey:this.rightTableKey};return e="left-outer-join"===this.joinType.toLowerCase()?"esriLeftOuterJoin":"left-inner-join"===this.joinType.toLowerCase()?"esriLeftInnerJoin":this.joinType,t.joinType=e,s.fixJson(t)}});return i("extend-esri")&&t.setObject("layers.JoinDataSource",h,n),h})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(e,t,i,n){return t("dijit._Container",null,{buildRendering:function(){this.inherited(arguments),this.containerNode||(this.containerNode=this.domNode)},addChild:function(e,t){var n=this.containerNode;if(t>0){for(n=n.firstChild;t>0;)1==n.nodeType&&t--,n=n.nextSibling;n?t="before":(n=this.containerNode,t="last")}i.place(e.domNode,n,t),this._started&&!e._started&&e.startup()},removeChild:function(e){"number"==typeof e&&(e=this.getChildren()[e]),e&&(e=e.domNode)&&e.parentNode&&e.parentNode.removeChild(e)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(t,i){n.deprecated(this.declaredClass+"::_getSiblingOfChild() is deprecated. Use _KeyNavMixin::_getNext() instead.","","2.0");var s=this.getChildren(),r=e.indexOf(s,t);return s[r+i]},getIndexOfChild:function(t){return e.indexOf(this.getChildren(),t)}})})},"esri/layers/LayerInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(e,t,i,n,s){return e=e(null,{declaredClass:"esri.layers.LayerInfo",constructor:function(e){t.mixin(this,e)},toJson:function(){return s.fixJson({defaultVisibility:this.defaultVisibility,id:this.id,maxScale:this.maxScale,minScale:this.minScale,name:this.name,parentLayerId:this.parentLayerId,subLayerIds:this.subLayerIds})}}),i("extend-esri")&&t.setObject("layers.LayerInfo",e,n),e})},"esri/symbols/PictureFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/sniff dojox/gfx/_base esri/kernel esri/lang esri/urlUtils esri/symbols/FillSymbol".split(" "),function(e,t,i,n,s,r,o,a){var l={xoffset:0,yoffset:0,width:12,height:12};return e=e(a,{declaredClass:"esri.symbol.PictureFillSymbol",type:"picturefillsymbol",xscale:1,yscale:1,xoffset:0,yoffset:0,constructor:function(e,s,r,o){e?t.isString(e)?(this.url=e,void 0!==s&&(this.outline=s),void 0!==r&&(this.width=r),void 0!==o&&(this.height=o)):(this.xoffset=n.pt2px(e.xoffset),this.yoffset=n.pt2px(e.yoffset),this.width=n.pt2px(e.width),this.height=n.pt2px(e.height),s=e.imageData,!(9>i("ie"))&&s&&(r=this.url,this.url="data:"+(e.contentType||"image")+";base64,"+s,this.imageData=r)):(t.mixin(this,l),this.width=n.pt2px(this.width),this.height=n.pt2px(this.height))},setWidth:function(e){return this.width=e,this},setHeight:function(e){return this.height=e,this},setOffset:function(e,t){return this.xoffset=e,this.yoffset=t,this},setUrl:function(e){return e!==this.url&&(delete this.imageData,delete this.contentType),this.url=e,this},setXScale:function(e){return this.xscale=e,this},setYScale:function(e){return this.yscale=e,this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){return t.mixin({},n.defaultPattern,{src:this.url,width:this.width*this.xscale,height:this.height*this.yscale,x:this.xoffset,y:this.yoffset})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 E"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var e=this.url,i=this.imageData;if(0===e.indexOf("data:"))var s=e,e=i,i=s.indexOf(";base64,")+8,i=s.substr(i);!t.isString(e)||0!==e.indexOf("/")&&0!==e.indexOf("//")&&0!==e.indexOf("./")&&0!==e.indexOf("../")||(e=o.getAbsoluteUrl(e));var s=n.px2pt(this.width),s=isNaN(s)?void 0:s,a=n.px2pt(this.height),a=isNaN(a)?void 0:a,l=n.px2pt(this.xoffset),l=isNaN(l)?void 0:l,c=n.px2pt(this.yoffset),c=isNaN(c)?void 0:c,e=r.fixJson(t.mixin(this.inherited("toJson",arguments),{type:"esriPFS",url:e,imageData:i,contentType:this.contentType,width:s,height:a,xoffset:l,yoffset:c,xscale:this.xscale,yscale:this.yscale}));return e.imageData||delete e.imageData,e}}),e.defaultProps=l,i("extend-esri")&&(t.setObject("symbol.PictureFillSymbol",e,s),s.symbol.defaultPictureFillSymbol=l),e})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),function(e,t,i,n,s,r,o){var a={};t.setObject("dojo.html",a);var l=0;return a._secureForInnerHtml=function(e){return e.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/gi,"")},a._emptyNode=r.empty,a._setNodeContent=function(e,i){if(r.empty(e),i)if("string"==typeof i&&(i=r.toDom(i,e.ownerDocument)),!i.nodeType&&t.isArrayLike(i))for(var n=i.length,s=0;s<i.length;s=n==i.length?s+1:0)r.place(i[s],e,"last");else r.place(i,e,"last");return e},a._ContentSetter=n("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:e._scopeName,startup:!0,constructor:function(e,i){t.mixin(this,e||{}),i=this.node=s.byId(this.node||i),this.id||(this.id=["Setter",i?i.id||i.tagName:"",l++].join("_"))},set:function(e,t){void 0!==e&&(this.content=e),t&&this._mixin(t),this.onBegin(),this.setContent();var i=this.onEnd();return i&&i.then?i:this.node},setContent:function(){var e=this.node;if(!e)throw Error(this.declaredClass+": setContent given no node");try{e=a._setNodeContent(e,this.content)}catch(t){var i=this.onContentError(t);try{e.innerHTML=i}catch(n){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+n.message,n)}}this.node=e},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred),this.parseResults&&this.parseResults.length&&(i.forEach(this.parseResults,function(e){e.destroy&&e.destroy()}),delete this.parseResults),r.empty(this.node)},onBegin:function(){var e=this.content;if(t.isString(e)&&(this.cleanContent&&(e=a._secureForInnerHtml(e)),this.extractContent)){var i=e.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);i&&(e=i[1])}return this.empty(),this.content=e,this.node},onEnd:function(){return this.parseContent&&this._parse(),this.node},tearDown:function(){delete this.parseResults,delete this.parseDeferred,delete this.node,delete this.content},onContentError:function(e){return"Error occurred setting content: "+e},onExecError:function(e){return"Error occurred executing scripts: "+e},_mixin:function(e){var t,i={};for(t in e)t in i||(this[t]=e[t])},_parse:function(){var e=this.node;try{var t={};i.forEach(["dir","lang","textDir"],function(e){this[e]&&(t[e]=this[e])},this);var n=this;this.parseDeferred=o.parse({rootNode:e,noStart:!this.startup,inherited:t,scope:this.parserScope}).then(function(e){return n.parseResults=e},function(e){n._onError("Content",e,"Error parsing in _ContentSetter#"+this.id)})}catch(s){this._onError("Content",s,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(e,t,i){e=this["on"+e+"Error"].call(this,t),i?console.error(i,t):e&&a._setNodeContent(this.node,e,!0)}}),a.set=function(e,i,n){return void 0==i&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),i=""),n?new a._ContentSetter(t.mixin(n,{content:i,node:e})).set():a._setNodeContent(e,i,!0)},a})},"esri/layers/DataSource":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(e,t,i,n){return e=e(null,{declaredClass:"esri.layers.DataSource",constructor:function(e){e&&t.mixin(this,e)},toJson:function(){}}),i("extend-esri")&&t.setObject("layers.DataSource",e,n),e})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare dojo/_base/kernel dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "),function(e,t,i,n,s,r){var o;return o=e("dijit.form.ValidationTextBox",n,{templateString:r,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(e,i){i!=o.prototype[e]&&(t.deprecated("ValidationTextBox id="+this.id+", set('"+e+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",i))},_setRegExpGenAttr:function(e){this._deprecateRegExp("regExpGen",e),this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(e){this._deprecateRegExp("regExp",e)},_setValueAttr:function(){this.inherited(arguments),this._refreshState()},validator:function(e,t){return!(!RegExp("^(?:"+this._computeRegexp(t)+")"+(this.required?"":"?")+"$").test(e)||this.required&&this._isEmpty(e)||!this._isEmpty(e)&&void 0===this.parse(e,t))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,this.get("constraints"))},_isEmpty:function(e){return(this.trim?/^\s*$/:/^$/).test(e)},getErrorMessage:function(){var e="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:this.invalidMessage?this.invalidMessage:this.promptMessage,t="$_unset_$"==this.missingMessage?this.messages.missingMessage:this.missingMessage?this.missingMessage:e;return this.required&&this._isEmpty(this.textbox.value)?t:e},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(e){var t="",i=this.disabled||this.isValid(e);i&&(this._maskValidSubsetError=!0);var n=this._isEmpty(this.textbox.value),s=!i&&e&&this._isValidSubset();return this._set("state",i?"":((!this._hasBeenBlurred||e)&&n||s)&&(this._maskValidSubsetError||s&&!this._hasBeenBlurred&&e)?"Incomplete":"Error"),this.focusNode.setAttribute("aria-invalid",i?"false":"true"),"Error"==this.state?(this._maskValidSubsetError=e&&s,t=this.getErrorMessage(e)):"Incomplete"==this.state?(t=this.getPromptMessage(e),this._maskValidSubsetError=!this._hasBeenBlurred||e):n&&(t=this.getPromptMessage(e)),this.set("message",t),i},displayMessage:function(e){e&&this.focused?s.show(e,this.domNode,this.tooltipPosition,!this.isLeftToRight()):s.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused),this.inherited(arguments)},constructor:function(){this.constraints={},this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments),this._refreshState()},_setConstraintsAttr:function(e){!e.locale&&this.lang&&(e.locale=this.lang),this._set("constraints",e),this._refreshState()},_setPatternAttr:function(e){this._set("pattern",e)},_computeRegexp:function(e){var t=this.pattern;if("function"==typeof t&&(t=t.call(this,e)),t!=this._lastRegExp){var i="";this._lastRegExp=t,".*"!=t&&t.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(e){switch(e.charAt(0)){case"{":case"+":case"?":case"*":case"^":case"$":case"|":case"(":i+=e;break;case")":i+="|$)";break;default:i+="(?:"+e+"|$)"}});try{"".search(i)}catch(n){i=this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+i+")$"}return t},postMixInProperties:function(){this.inherited(arguments),this.messages=i.getLocalization("dijit.form","validate",this.lang),this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(){this.inherited(arguments),this._refreshState()},_setRequiredAttr:function(e){this._set("required",e),this.focusNode.setAttribute("aria-required",e),this._refreshState()},_setMessageAttr:function(e){this._set("message",e),this.displayMessage(e)},reset:function(){this._maskValidSubsetError=!0,this.inherited(arguments)},_onBlur:function(){this.displayMessage(""),this.inherited(arguments)}})})},"dijit/selection":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/sniff dojo/_base/window dijit/focus".split(" "),function(e,t,i,n,s,r){var o=function(o){var a=o.document;this.getType=function(){if(a.getSelection){var e,t="text";try{e=o.getSelection()}catch(i){}return e&&1==e.rangeCount&&(e=e.getRangeAt(0),e.startContainer==e.endContainer&&1==e.endOffset-e.startOffset&&3!=e.startContainer.nodeType&&(t="control")),t}return a.selection.type.toLowerCase()},this.getSelectedText=function(){if(a.getSelection){var e=o.getSelection();return e?e.toString():""}return"control"==this.getType()?null:a.selection.createRange().text},this.getSelectedHtml=function(){if(a.getSelection){var e=o.getSelection();if(e&&e.rangeCount){var t,i="";for(t=0;t<e.rangeCount;t++){var n=e.getRangeAt(t).cloneContents(),s=a.createElement("div");s.appendChild(n),i+=s.innerHTML}return i}return null}return"control"==this.getType()?null:a.selection.createRange().htmlText},this.getSelectedElement=function(){if("control"==this.getType()){if(a.getSelection){var e=o.getSelection();return e.anchorNode.childNodes[e.anchorOffset]}if((e=a.selection.createRange())&&e.item)return a.selection.createRange().item(0)}return null},this.getParentElement=function(){if("control"==this.getType()){var e=this.getSelectedElement();if(e)return e.parentNode}else{if(!a.getSelection)return e=a.selection.createRange(),e.collapse(!0),e.parentElement();if(e=a.getSelection()){for(e=e.anchorNode;e&&1!=e.nodeType;)e=e.parentNode;return e}}return null},this.hasAncestorElement=function(){return null!=this.getAncestorElement.apply(this,arguments)},this.getAncestorElement=function(){var e=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(e,arguments)},this.isTag=function(e,t){if(e&&e.tagName)for(var i=e.tagName.toLowerCase(),n=0;n<t.length;n++){var s=String(t[n]).toLowerCase();if(i==s)return s}return""},this.getParentOfType=function(e,t){for(;e;){if(this.isTag(e,t).length)return e;e=e.parentNode}return null},this.collapse=function(e){if(a.getSelection){var t=o.getSelection();t.removeAllRanges?e?t.collapseToStart():t.collapseToEnd():t.collapse(e)}else t=a.selection.createRange(),t.collapse(e),t.select()},this.remove=function(){var e=a.selection;return a.getSelection?(e=o.getSelection(),e.deleteFromDocument()):"none"!=e.type.toLowerCase()&&e.clear(),e},this.selectElementChildren=function(e,i){var s;if(e=t.byId(e),a.getSelection){var r=o.getSelection();n("opera")?(s=r.rangeCount?r.getRangeAt(0):a.createRange(),s.setStart(e,0),s.setEnd(e,3==e.nodeType?e.length:e.childNodes.length),r.addRange(s)):r.selectAllChildren(e)}else if(s=e.ownerDocument.body.createTextRange(),s.moveToElementText(e),!i)try{s.select()}catch(l){}},this.selectElement=function(e,i){var r;if(e=t.byId(e),a.getSelection){var o=a.getSelection();r=a.createRange(),o.removeAllRanges&&(n("opera")&&o.getRangeAt(0)&&(r=o.getRangeAt(0)),r.selectNode(e),o.removeAllRanges(),o.addRange(r))}else try{o=e.tagName?e.tagName.toLowerCase():"",r="img"===o||"table"===o?s.body(a).createControlRange():s.body(a).createRange(),r.addElement(e),i||r.select()}catch(l){this.selectElementChildren(e,i)}},this.inSelection=function(e){if(e){var t,i;if(a.getSelection){var n=o.getSelection();if(n&&0<n.rangeCount&&(i=n.getRangeAt(0)),i&&i.compareBoundaryPoints&&a.createRange)try{if(t=a.createRange(),t.setStart(e,0),1===i.compareBoundaryPoints(i.START_TO_END,t))return!0}catch(s){}}else{i=a.selection.createRange();try{t=e.ownerDocument.body.createTextRange(),t.moveToElementText(e)}catch(r){}if(i&&t&&1===i.compareEndPoints("EndToStart",t))return!0}}return!1},this.getBookmark=function(){var e,t,i=a.selection,n=r.curNode;if(a.getSelection){if(i=o.getSelection())if(i.isCollapsed){if((e=n?n.tagName:"")&&(e=e.toLowerCase(),"textarea"==e||"input"==e&&(!n.type||"text"==n.type.toLowerCase())))return i={start:n.selectionStart,end:n.selectionEnd,node:n,pRange:!0},{isCollapsed:i.end<=i.start,mark:i};e={isCollapsed:!0},i.rangeCount&&(e.mark=i.getRangeAt(0).cloneRange())}else t=i.getRangeAt(0),e={isCollapsed:!1,mark:t.cloneRange()}}else if(i){if(e=n?n.tagName:"",e=e.toLowerCase(),n&&e&&("button"==e||"textarea"==e||"input"==e))return i.type&&"none"==i.type.toLowerCase()?{isCollapsed:!0,mark:null}:(t=i.createRange(),{isCollapsed:t.text&&t.text.length?!1:!0,mark:{range:t,pRange:!0}});e={};try{t=i.createRange(),e.isCollapsed=!("Text"==i.type?t.htmlText.length:t.length)}catch(s){return e.isCollapsed=!0,e}if("CONTROL"==i.type.toUpperCase())if(t.length)for(e.mark=[],i=0,n=t.length;n>i;)e.mark.push(t.item(i++));else e.isCollapsed=!0,e.mark=null;else e.mark=t.getBookmark()}else console.warn("No idea how to store the current selection for this browser!");return e},this.moveToBookmark=function(t){if(t=t.mark)if(a.getSelection){var n=o.getSelection();n&&n.removeAllRanges?t.pRange?(n=t.node,n.selectionStart=t.start,n.selectionEnd=t.end):(n.removeAllRanges(),n.addRange(t)):console.warn("No idea how to restore selection for this browser!")}else if(a.selection&&t){var s;t.pRange?s=t.range:i.isArray(t)?(s=a.body.createControlRange(),e.forEach(t,function(e){s.addElement(e)})):(s=a.body.createTextRange(),s.moveToBookmark(t)),s.select()}},this.isCollapsed=function(){return this.getBookmark().isCollapsed}},a=new o(window);return a.SelectionManager=o,a})},"dijit/_base":function(){define("./main ./a11y ./WidgetSet ./_base/focus ./_base/manager ./_base/place ./_base/popup ./_base/scroll ./_base/sniff ./_base/typematic ./_base/wai ./_base/window".split(" "),function(e){return e._base})},"dijit/_base/typematic":function(){define(["../typematic"],function(){})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),function(e,t,i,n,s,r,o){t.add("rtl-adjust-position-for-verticalScrollBar",function(e,t){var n=i.body(t),r=o.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},n,"last"),a=o.create("div",{style:{overflow:"hidden",direction:"ltr"}},r,"last"),l=0!=s.position(a).x;return r.removeChild(a),n.removeChild(r),l}),t.add("position-fixed-support",function(e,t){var n=i.body(t),r=o.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},n,"last"),a=o.create("span",{style:{position:"fixed",left:"0",top:"0"}},r,"last"),l=s.position(a).x!=s.position(r).x;return r.removeChild(a),n.removeChild(r),l});var a={getBox:function(e){e=e||i.doc;var n="BackCompat"==e.compatMode?i.body(e):e.documentElement,r=s.docScroll(e);if(t("touch")){var o=a.get(e);e=o.innerWidth||n.clientWidth,n=o.innerHeight||n.clientHeight}else e=n.clientWidth,n=n.clientHeight;return{l:r.x,t:r.y,w:e,h:n}},get:function(e){if(9>t("ie")&&a!==document.parentWindow){e.parentWindow.execScript("document._parentWindow = window;","Javascript");var i=e._parentWindow;return e._parentWindow=null,i}return e.parentWindow||e.defaultView},scrollIntoView:function(e,o){try{e=n.byId(e);var a=e.ownerDocument||i.doc,l=i.body(a),c=a.documentElement||l.parentNode,h=t("ie"),d=t("webkit");if(e!=l&&e!=c)if(t("mozilla")||h||d||t("opera")||!("scrollIntoView"in e)){var u="BackCompat"==a.compatMode,f=Math.min(l.clientWidth||c.clientWidth,c.clientWidth||l.clientWidth),p=Math.min(l.clientHeight||c.clientHeight,c.clientHeight||l.clientHeight),a=d||u?l:c,m=o||s.position(e),_=e.parentNode,d=function(e){return 6>=h||7==h&&u?!1:t("position-fixed-support")&&"fixed"==r.get(e,"position").toLowerCase()
};if(!d(e))for(;_;){_==l&&(_=a);var g=s.position(_),y=d(_),v="rtl"==r.getComputedStyle(_).direction.toLowerCase();if(_==a)g.w=f,g.h=p,a==c&&h&&v&&(g.x+=a.offsetWidth-g.w),(0>g.x||!h||h>=9)&&(g.x=0),(0>g.y||!h||h>=9)&&(g.y=0);else{var b=s.getPadBorderExtents(_);g.w-=b.w,g.h-=b.h,g.x+=b.l,g.y+=b.t;var x=_.clientWidth,w=g.w-x;x>0&&w>0&&(v&&t("rtl-adjust-position-for-verticalScrollBar")&&(g.x+=w),g.w=x),x=_.clientHeight,w=g.h-x,x>0&&w>0&&(g.h=x)}y&&(0>g.y&&(g.h+=g.y,g.y=0),0>g.x&&(g.w+=g.x,g.x=0),g.y+g.h>p&&(g.h=p-g.y),g.x+g.w>f&&(g.w=f-g.x));var S,T,j=m.x-g.x,E=m.y-g.y,k=j+m.w-g.w,C=E+m.h-g.h;k*j>0&&(_.scrollLeft||_==a||_.scrollWidth>_.offsetHeight)&&(S=Math[0>j?"max":"min"](j,k),v&&(8==h&&!u||h>=9)&&(S=-S),T=_.scrollLeft,_.scrollLeft+=S,S=_.scrollLeft-T,m.x-=S),C*E>0&&(_.scrollTop||_==a||_.scrollHeight>_.offsetHeight)&&(S=Math.ceil(Math[0>E?"max":"min"](E,C)),T=_.scrollTop,_.scrollTop+=S,S=_.scrollTop-T,m.y-=S),_=_!=a&&!y&&_.parentNode}}else e.scrollIntoView(!1)}catch(M){console.error("scrollIntoView: "+M),e.scrollIntoView(!1)}}};return e.setObject("dojo.window",a),a})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(e,t,i,n,s){var r={};if(e.setObject("dojo.number",r),r.format=function(i,n){n=e.mixin({},n||{});var s=t.normalizeLocale(n.locale),s=t.getLocalization("dojo.cldr","number",s);return n.customs=s,s=n.pattern||s[(n.type||"decimal")+"Format"],isNaN(i)||1/0==Math.abs(i)?null:r._applyPattern(i,s,n)},r._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/,r._applyPattern=function(e,t,i){i=i||{};var n=i.customs.group,s=i.customs.decimal;t=t.split(";");var o=t[0];if(t=t[0>e?1:0]||"-"+o,-1!=t.indexOf("%"))e*=100;else if(-1!=t.indexOf(""))e*=1e3;else if(-1!=t.indexOf(""))n=i.customs.currencyGroup||n,s=i.customs.currencyDecimal||s,t=t.replace(/\u00a4{1,3}/,function(e){return i[["symbol","currency","displayName"][e.length-1]]||i.currency||""});else if(-1!=t.indexOf("E"))throw Error("exponential notation not supported");var a=r._numberPatternRE,o=o.match(a);if(!o)throw Error("unable to find a number expression in pattern: "+t);return!1===i.fractional&&(i.places=0),t.replace(a,r._formatAbsolute(e,o[0],{decimal:s,group:n,places:i.places,round:i.round}))},r.round=function(e,t,i){return i=10/(i||10),(i*+e).toFixed(t)/i},0==.9.toFixed()){var o=r.round;r.round=function(e,t,i){var n=Math.pow(10,-t||0),s=Math.abs(e);return!e||s>=n?n=0:(s/=n,(.5>s||s>=.95)&&(n=0)),o(e,t,i)+(e>0?n:-n)}}return r._formatAbsolute=function(e,t,i){i=i||{},!0===i.places&&(i.places=0),1/0===i.places&&(i.places=6),t=t.split(".");var s="string"==typeof i.places&&i.places.indexOf(","),o=i.places;s?o=i.places.substring(s+1):o>=0||(o=(t[1]||[]).length),0>i.round||(e=r.round(e,o,i.round)),e=String(Math.abs(e)).split(".");var a=e[1]||"";t[1]||i.places?(s&&(i.places=i.places.substring(0,s)),s=void 0!==i.places?i.places:t[1]&&t[1].lastIndexOf("0")+1,s>a.length&&(e[1]=n.pad(a,s,"0",!0)),o<a.length&&(e[1]=a.substr(0,o))):e[1]&&e.pop(),o=t[0].replace(",",""),s=o.indexOf("0"),-1!=s&&(s=o.length-s,s>e[0].length&&(e[0]=n.pad(e[0],s)),-1==o.indexOf("#")&&(e[0]=e[0].substr(e[0].length-s)));var l,c,o=t[0].lastIndexOf(",");for(-1!=o&&(l=t[0].length-o-1,t=t[0].substr(0,o),o=t.lastIndexOf(","),-1!=o&&(c=t.length-o-1)),t=[],o=e[0];o;)s=o.length-l,t.push(s>0?o.substr(s):o),o=s>0?o.slice(0,s):"",c&&(l=c,delete c);return e[0]=t.reverse().join(i.group||","),e.join(i.decimal||".")},r.regexp=function(e){return r._parseInfo(e).regexp},r._parseInfo=function(e){e=e||{};var i=t.normalizeLocale(e.locale),i=t.getLocalization("dojo.cldr","number",i),n=e.pattern||i[(e.type||"decimal")+"Format"],o=i.group,a=i.decimal,l=1;if(-1!=n.indexOf("%"))l/=100;else if(-1!=n.indexOf(""))l/=1e3;else{var c=-1!=n.indexOf("");c&&(o=i.currencyGroup||o,a=i.currencyDecimal||a)}return i=n.split(";"),1==i.length&&i.push("-"+i[0]),i=s.buildGroupRE(i,function(t){return t="(?:"+s.escapeString(t,".")+")",t.replace(r._numberPatternRE,function(t){var i={signed:!1,separator:e.strict?o:[o,""],fractional:e.fractional,decimal:a,exponent:!1};t=t.split(".");var n=e.places;return 1==t.length&&1!=l&&(t[1]="###"),1==t.length||0===n?i.fractional=!1:(void 0===n&&(n=e.pattern?t[1].lastIndexOf("0")+1:1/0),n&&void 0==e.fractional&&(i.fractional=!0),!e.places&&n<t[1].length&&(n+=","+t[1].length),i.places=n),t=t[0].split(","),1<t.length&&(i.groupSize=t.pop().length,1<t.length&&(i.groupSize2=t.pop().length)),"("+r._realNumberRegexp(i)+")"})},!0),c&&(i=i.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(t,i,n,r){return t=s.escapeString(e[["symbol","currency","displayName"][n.length-1]]||e.currency||""),i=i?"[\\s\\xa0]":"",r=r?"[\\s\\xa0]":"",e.strict?i+t+r:(i&&(i+="*"),r&&(r+="*"),"(?:"+i+t+r+")?")})),{regexp:i.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:o,decimal:a,factor:l}},r.parse=function(e,t){var i=r._parseInfo(t),n=RegExp("^"+i.regexp+"$").exec(e);if(!n)return 0/0;var s=n[1];if(!n[1]){if(!n[2])return 0/0;s=n[2],i.factor*=-1}return s=s.replace(RegExp("["+i.group+"\\s\\xa0]","g"),"").replace(i.decimal,"."),s*i.factor},r._realNumberRegexp=function(e){e=e||{},"places"in e||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!/^0/.test(e.places)||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);var t=r._integerRegexp(e),i=s.buildGroupRE(e.fractional,function(t){var i="";return t&&0!==e.places&&(i="\\"+e.decimal,i=1/0==e.places?"(?:"+i+"\\d+)?":i+("\\d{"+e.places+"}")),i},!0),n=s.buildGroupRE(e.exponent,function(t){return t?"([eE]"+r._integerRegexp({signed:e.eSigned})+")":""}),t=t+i;return i&&(t="(?:(?:"+t+")|(?:"+i+"))"),t+n},r._integerRegexp=function(e){e=e||{},"signed"in e||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="";var t=s.buildGroupRE(e.signed,function(e){return e?"[-+]":""},!0),i=s.buildGroupRE(e.separator,function(t){if(!t)return"(?:\\d+)";t=s.escapeString(t)," "==t?t="\\s":""==t&&(t="\\s\\xa0");var i=e.groupSize,n=e.groupSize2;return n?(t="(?:0|[1-9]\\d{0,"+(n-1)+"}(?:["+t+"]\\d{"+n+"})*["+t+"]\\d{"+i+"})",i-n>0?"(?:"+t+"|(?:0|[1-9]\\d{0,"+(i-1)+"}))":t):"(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*)"},!0);return t+i},r})},"esri/geometry/Polygon":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has esri/kernel esri/lang esri/SpatialReference esri/geometry/Geometry esri/geometry/Point esri/geometry/Extent esri/geometry/mathUtils".split(" "),function(e,t,i,n,s,r,o,a,l,c,h){var d={type:"polygon",rings:null},u=e(a,{declaredClass:"esri.geometry.Polygon",constructor:function(e){i.mixin(this,d),this.rings=[],this._ring=0,e&&(i.isArray(e)?this.rings=i.isArray(e[0][0])?e:[e]:e.rings?i.mixin(this,e):this.spatialReference=e,this.spatialReference&&(this.spatialReference=new o(this.spatialReference))),this.verifySR()},_extent:null,addRing:function(e){return this._extent=this._centroid=null,this._ring=this.rings.length,this.rings[this._ring]=[],i.isArray(e[0])?t.forEach(e,this._addPointArr,this):t.forEach(e,this._addPoint,this),this},_addPointArr:function(e){this.rings[this._ring].push(e)},_addPoint:function(e){this.rings[this._ring].push([e.x,e.y])},_insertPoints:function(e,i){this._extent=this._centroid=null,this._ring=i,this.rings[this._ring]||(this.rings[this._ring]=[]),t.forEach(e,this._addPoint,this)},_validateInputs:function(e,t){return null!==e&&void 0!==e&&(0>e||e>=this.rings.length)||null!==t&&void 0!==e&&(0>t||t>=this.rings[e].length)?!1:!0},getPoint:function(e,t){return this._validateInputs(e,t)?new l(this.rings[e][t],this.spatialReference):void 0},setPoint:function(e,t,i){return this._validateInputs(e,t)?(this._extent=this._centroid=null,this.rings[e][t]=[i.x,i.y],this):void 0},insertPoint:function(e,t,i){return this._validateInputs(e)&&r.isDefined(t)&&t>=0&&t<=this.rings[e].length?(this._extent=this._centroid=null,this.rings[e].splice(t,0,[i.x,i.y]),this):void 0},removeRing:function(e){if(this._validateInputs(e,null)){this._extent=this._centroid=null,e=this.rings.splice(e,1)[0];var t,i=e.length,n=this.spatialReference;for(t=0;i>t;t++)e[t]=new l(e[t],n);return e}},removePoint:function(e,t){return this._validateInputs(e,t)?(this._extent=this._centroid=null,new l(this.rings[e].splice(t,1)[0],this.spatialReference)):void 0},getExtent:function(){var e;if(this._extent)return e=new c(this._extent),e._partwise=this._partwise,e;e=this.rings;var t=e.length;if(t&&e[0].length){var i,n,s,r,o,a,l,h,d,u,f,p,m=r=e[0][0][0],_=o=e[0][0][1],g=Math.min,y=Math.max,v=this.spatialReference,b=[];for(a=0;t>a;a++){for(i=e[a],d=u=i[0]&&i[0][0],f=p=i[0]&&i[0][1],h=i.length,l=0;h>l;l++)n=i[l],s=n[0],n=n[1],m=g(m,s),_=g(_,n),r=y(r,s),o=y(o,n),d=g(d,s),f=g(f,n),u=y(u,s),p=y(p,n);b.push(new c({xmin:d,ymin:f,xmax:u,ymax:p,spatialReference:v?v.toJson():null}))}return this._extent={xmin:m,ymin:_,xmax:r,ymax:o,spatialReference:v?v.toJson():null},this._partwise=1<b.length?b:null,e=new c(this._extent),e._partwise=this._partwise,e}},contains:function(e){var t,i,n,s,r,o,a,c=this.rings,h=!1,d=c.length;t=this.spatialReference,i=e.spatialReference;var u=e.x;for(e=e.y,t&&i&&!t.equals(i)&&t._canProject(i)&&(e=t.isWebMercator()?l.lngLatToXY(u,e):l.xyToLngLat(u,e,!0),u=e[0],e=e[1]),a=0;d>a;a++)for(t=c[a],s=t.length,o=r=0;s>o;o++)r++,r===s&&(r=0),i=t[o],n=t[r],(i[1]<e&&n[1]>=e||n[1]<e&&i[1]>=e)&&i[0]+(e-i[1])/(n[1]-i[1])*(n[0]-i[0])<u&&(h=!h);return h},getCentroid:function(){if(null!=this._centroid)return this._centroid;var e,i,n,s,r,o,a=[];return t.forEach(this.rings,function(s){e=i=n=0,t.forEach(s,function(t,a){a<s.length-1&&(r=s[a+1],o=t[0]*r[1]-r[0]*t[1],e+=(t[0]+r[0])*o,i+=(t[1]+r[1])*o,n+=o)}),n>0&&(n*=-1),a.push([e,i,n/2])}),a.sort(function(e,t){return e[2]-t[2]}),s=6*a[0][2],this._centroid=new l(a[0][0]/s,a[0][1]/s,this.spatialReference)},isClockwise:function(e){var t,n=0,s=e.length,r=i.isArray(e[0])?function(e,t){return e[0]*t[1]-t[0]*e[1]}:function(e,t){return e.x*t.y-t.x*e.y};for(t=0;s>t;t++)n+=r(e[t],e[(t+1)%s]);return 0>=n/2},isSelfIntersecting:function(e){e=e||this;var t,i,n,s,r,o,a,l,c=e.rings.length;for(n=0;c>n;n++){for(t=0;t<e.rings[n].length-1;t++)for(r=[[e.rings[n][t][0],e.rings[n][t][1]],[e.rings[n][t+1][0],e.rings[n][t+1][1]]],i=n+1;c>i;i++)for(s=0;s<e.rings[i].length-1;s++)if(o=[[e.rings[i][s][0],e.rings[i][s][1]],[e.rings[i][s+1][0],e.rings[i][s+1][1]]],(a=h._getLineIntersection2(r,o))&&!(a[0]===r[0][0]&&a[1]===r[0][1]||a[0]===o[0][0]&&a[1]===o[0][1]||a[0]===r[1][0]&&a[1]===r[1][1]||a[0]===o[1][0]&&a[1]===o[1][1]))return!0;if(s=e.rings[n].length,!(4>=s))for(t=0;s-3>t;t++)for(l=s-1,0===t&&(l=s-2),r=[[e.rings[n][t][0],e.rings[n][t][1]],[e.rings[n][t+1][0],e.rings[n][t+1][1]]],i=t+2;l>i;i++)if(o=[[e.rings[n][i][0],e.rings[n][i][1]],[e.rings[n][i+1][0],e.rings[n][i+1][1]]],(a=h._getLineIntersection2(r,o))&&!(a[0]===r[0][0]&&a[1]===r[0][1]||a[0]===o[0][0]&&a[1]===o[0][1]||a[0]===r[1][0]&&a[1]===r[1][1]||a[0]===o[1][0]&&a[1]===o[1][1]))return!0}return!1},toJson:function(){var e={rings:i.clone(this.rings)},t=this.spatialReference;return t&&(e.spatialReference=t.toJson()),e}});return u.defaultProps=d,u.createEllipse=function(e){var t,i,n,s=e.center.x,r=e.center.y,o=e.longAxis,a=e.shortAxis,l=e.numberOfPoints,c=e.map;e=[];var h=2*Math.PI/l;for(i=0;l>i;i++)t=Math.cos(i*h),n=Math.sin(i*h),t=c.toMap({x:o*t+s,y:a*n+r}),e.push(t);return e.push(e[0]),s=new u(c.spatialReference),s.addRing(e),s},u.createCircle=function(e){return u.createEllipse({center:e.center,longAxis:e.r,shortAxis:e.r,numberOfPoints:e.numberOfPoints,map:e.map})},n("extend-esri")&&(i.setObject("geometry.Polygon",u,s),s.geometry.defaultPolygon=d,s.geometry.createEllipse=u.createEllipse,s.geometry.createCircle=u.createCircle,s.geometry.isClockwise=u.prototype.isClockwise,s.geometry.polygonSelfIntersecting=u.prototype.isSelfIntersecting),u})},"esri/tasks/OffsetParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has esri/kernel esri/geometry/jsonUtils".split(" "),function(e,t,i,n,s,r,o){return e=e(null,{declaredClass:"esri.tasks.OffsetParameters",geometries:null,bevelRatio:null,offsetDistance:null,offsetHow:null,offsetUnit:null,toJson:function(){var e=i.map(this.geometries,function(e){return e.toJson()}),t={};return this.geometries&&0<this.geometries.length&&(t.geometries=n.toJson({geometryType:o.getJsonType(this.geometries[0]),geometries:e}),t.sr=n.toJson(this.geometries[0].spatialReference.toJson())),this.bevelRatio&&(t.bevelRatio=this.bevelRatio),this.offsetDistance&&(t.offsetDistance=this.offsetDistance),this.offsetHow&&(t.offsetHow=this.offsetHow),this.offsetUnit&&(t.offsetUnit=this.offsetUnit),t}}),t.mixin(e,{OFFSET_BEVELLED:"esriGeometryOffsetBevelled",OFFSET_MITERED:"esriGeometryOffsetMitered",OFFSET_ROUNDED:"esriGeometryOffsetRounded"}),s("extend-esri")&&t.setObject("tasks.OffsetParameters",e,r),e})},"esri/PopupInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/i18n dojo/has esri/kernel esri/lang dojo/i18n!dojo/cldr/nls/number".split(" "),function(e,t,i,n,s,r,o,a){return e=e(null,{declaredClass:"esri.PopupInfo",initialize:function(e,n){if(e){t.mixin(this,n),this.info=e,this.title=this.getTitle,this.content=this.getContent;var s=this._fieldLabels={},r=this._fieldsMap={};e.fieldInfos&&i.forEach(e.fieldInfos,function(e){s[e.fieldName]=e.label,r[e.fieldName]=e})}},toJson:function(){return n.fromJson(n.toJson(this.info))},getTitle:function(){},getContent:function(){},getComponents:function(e){var n,s,r,o=this.info,l=e.getLayer(),c=t.clone(e.attributes)||{},h=t.clone(c),d=o.fieldInfos,u="",f="",p=l&&l._getDateOpts&&l._getDateOpts().properties,m={dateFormat:{properties:p,formatter:"DateFormat"+this._insertOffset(this._dateFormats.shortDateShortTime)}};if(d&&i.forEach(d,function(e){var t=e.fieldName;h[t]=this._formatValue(h[t],t,m),p&&e.format&&e.format.dateFormat&&(e=i.indexOf(p,t),e>-1&&p.splice(e,1))},this),l){var _=l.types,g=l.typeIdField,y=g&&c[g];for(s in c)if(r=c[s],a.isDefined(r)){var v=this._getDomainName(l,_,y,s,r);a.isDefined(v)?h[s]=v:s===g&&(v=this._getTypeName(l,r),a.isDefined(v)&&(h[s]=v))}}o.title&&(u=t.trim(a.substitute(h,this._fixTokens(o.title),m)||"")),o.description&&(f=t.trim(a.substitute(h,this._fixTokens(o.description),m)||"")),d&&(n=[],i.forEach(d,function(e){(s=e.fieldName)&&e.visible&&n.push([e.label||s,a.substitute(h,"${"+s+"}",m)||""])}));var b,x;return o.mediaInfos&&(b=[],i.forEach(o.mediaInfos,function(e){switch(x=0,r=e.value,e.type){case"image":var n=r.sourceURL,n=n&&t.trim(a.substitute(c,this._fixTokens(n)));x=!!n;break;case"piechart":case"linechart":case"columnchart":case"barchart":x=i.some(r.fields,function(e){return a.isDefined(c[e])});break;default:return}if(x){if(e=t.clone(e),r=e.value,e.title=e.title?t.trim(a.substitute(h,this._fixTokens(e.title),m)||""):"",e.caption=e.caption?t.trim(a.substitute(h,this._fixTokens(e.caption),m)||""):"","image"===e.type)r.sourceURL=a.substitute(c,this._fixTokens(r.sourceURL)),r.linkURL&&(r.linkURL=t.trim(a.substitute(c,this._fixTokens(r.linkURL))||""));else{var s=c[r.normalizeField]||0;r.fields=i.map(r.fields,function(e){var t=c[e];return(t=void 0===t?null:t)&&s&&(t/=s),{y:t,tooltip:(this._fieldLabels[e]||e)+":<br/>"+this._formatValue(t,e,m,!!s)}},this)}b.push(e)}},this)),{title:u,description:f,fields:n&&n.length?n:null,mediaInfos:b&&b.length?b:null,formatted:h,editSummary:l&&l.getEditSummary?l.getEditSummary(e):""}},getAttachments:function(e){var t=e.getLayer();return e=e.attributes,this.info.showAttachments&&t&&t.hasAttachments&&t.objectIdField&&(e=e&&e[t.objectIdField])?t.queryAttachmentInfos(e):void 0},_dateFormats:{shortDate:"(datePattern: 'M/d/y', selector: 'date')",longMonthDayYear:"(datePattern: 'MMMM d, y', selector: 'date')",dayShortMonthYear:"(datePattern: 'd MMM y', selector: 'date')",longDate:"(datePattern: 'EEEE, MMMM d, y', selector: 'date')",shortDateShortTime:"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')",shortDateShortTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')",shortDateLongTime:"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')",shortDateLongTime24:"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",longMonthYear:"(datePattern: 'MMMM y', selector: 'date')",shortMonthYear:"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"},_fixTokens:function(e){return e.replace(/(\{[^\{\r\n]+\})/g,"$$$1")},_formatValue:function(e,t,i,n){var r=this._fieldsMap[t];if(t=r&&r.format,!a.isDefined(e)||!r||!a.isDefined(t))return e;var o="",l=[],r=t.hasOwnProperty("places")||t.hasOwnProperty("digitSeparator"),c=t.hasOwnProperty("digitSeparator")?t.digitSeparator:!0;if(r)o="NumberFormat",l.push("places: "+(a.isDefined(t.places)&&(!n||0<t.places)?Number(t.places):"Infinity")),l.length&&(o+="("+l.join(",")+")");else{if(!t.dateFormat)return e;o="DateFormat"+this._insertOffset(this._dateFormats[t.dateFormat]||this._dateFormats.shortDateShortTime)}return e=a.substitute({myKey:e},"${myKey:"+o+"}",i)||"",r&&!c&&(i=s.getLocalization("dojo.cldr","number"),i.group&&(e=e.replace(RegExp("\\"+i.group,"g"),""))),e},_insertOffset:function(e){return e&&(e=a.isDefined(this.utcOffset)?e.replace(/\)\s*$/,", utcOffset:"+this.utcOffset+")"):e),e},_getDomainName:function(e,t,n,s,r){var o,l;if(t&&a.isDefined(n)&&i.some(t,function(t){return t.id==n?((o=t.domains&&t.domains[s])&&"inherited"===o.type&&(o=this._getLayerDomain(e,s),l=!0),!0):!1},this),!l&&!o&&(o=this._getLayerDomain(e,s)),o&&o.codedValues){var c;return i.some(o.codedValues,function(e){return e.code==r?(c=e.name,!0):!1}),c}},_getLayerDomain:function(e,t){var n=e.fields;if(n){var s;return i.some(n,function(e){return e.name===t?(s=e.domain,!0):!1}),s}},_getTypeName:function(e,t){var n=e.types;if(n){var s;return i.some(n,function(e){return e.id==t?(s=e.name,!0):!1}),s}}}),r("extend-esri")&&(o.PopupInfo=o.PopupInfoTemplate=e),e})},"dijit/_WidgetsInTemplateMixin":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare","dojo/_base/lang","dojo/parser"],function(e,t,i,n,s){return i("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:!1,widgetsInTemplate:!0,contextRequire:null,_beforeFillContent:function(){if(this.widgetsInTemplate){var e=this.domNode;if(this.containerNode&&!this.searchContainerNode&&(this.containerNode.stopParser=!0),s.parse(e,{noStart:!this._earlyTemplatedStartup,template:!0,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,contextRequire:this.contextRequire,scope:"dojo"}).then(n.hitch(this,function(e){this._startupWidgets=e;for(var t=0;t<e.length;t++)this._processTemplateNode(e[t],function(e,t){return e[t]},function(e,t,i){return t in e?e.connect(e,t,i):e.on(t,i,!0)});this.containerNode&&this.containerNode.stopParser&&delete this.containerNode.stopParser})),!this._startupWidgets)throw Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.")}},_processTemplateNode:function(e,t){return t(e,"dojoType")||t(e,"data-dojo-type")?!0:this.inherited(arguments)},startup:function(){e.forEach(this._startupWidgets,function(e){e&&!e._started&&e.startup&&e.startup()}),this._startupWidgets=null,this.inherited(arguments)}})})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(e,t,i,n){return n.extend(t,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}}),i("dijit._FocusMixin",null,{_focusManager:e})})},"esri/InfoWindowBase":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/Deferred dojo/dom-construct dojo/has dijit/registry esri/kernel esri/lang esri/geometry/ScreenPoint".split(" "),function(e,t,i,n,s,r,o,a,l,c,h){return e=e(null,{declaredClass:"esri.InfoWindowBase",constructor:function(){var e=t.hitch;this.__set_title=e(this,this.__set_title),this.__err_title=e(this,this.__err_title),this.__set_content=e(this,this.__set_content),this.__err_content=e(this,this.__err_content)},setMap:function(e){this.map=e},unsetMap:function(){delete this.map},setTitle:function(){},setContent:function(){},show:function(){},hide:function(){},resize:function(){},onShow:function(){},onHide:function(){},place:function(e,i){c.isDefined(e)?t.isObject(e)?r.place(e,i,"only"):i.innerHTML=e:i.innerHTML=""},startupDijits:function(e){this._processDijits(e)},destroyDijits:function(e){this._processDijits(e,!0)},_processDijits:function(e,t){if(e&&1===e.children.length){var n=e.children[0];if(n){var s=a.byNode(n),n=s?[s]:a.findWidgets(n);i.forEach(n,function(e){if(t){if(e._started&&!e._destroyed)try{e.destroyRecursive?e.destroyRecursive():e.destroy&&e.destroy()}catch(i){console.debug("An error occurred when destroying a widget embedded within InfoWindow: "+i.message)}}else if(!e._started)try{e.startup()}catch(n){console.debug("An error occurred when starting a widget embedded within InfoWindow: "+n.message)}})}}},__registerMapListeners:function(){this.__unregisterMapListeners();var e=this.map;this.__handles=[n.connect(e,"onPan",this,this.__onMapPan),n.connect(e,"onZoomStart",this,this.__onMapZmStart),n.connect(e,"onExtentChange",this,this.__onMapExtChg)]},__unregisterMapListeners:function(){var e=this.__handles;e&&(i.forEach(e,n.disconnect,n),this.__handles=null)},__onMapPan:function(e,t){this.move(t,!0)},__onMapZmStart:function(){this.__mcoords=this.mapCoords||this.map.toMap(new h(this.coords)),this.hide(null,!0)},__onMapExtChg:function(e,t,i){e=this.map;var n=this.mapCoords;n?this.show(n,null,!0):(t=i?e.toScreen(this.__mcoords):this.coords.offset(t&&t.x||0,t&&t.y||0),this.show(t,null,!0))},__setValue:function(e,t){this[e].innerHTML="";var i="_dfd"+e,n=this[i];n&&-1===n.fired&&(n.cancel(),this[i]=null),c.isDefined(t)&&(t instanceof s?(this[i]=t,t.addCallbacks(this["__set"+e],this["__err"+e])):this.__render(e,t))},__set_title:function(e){this._dfd_title=null,this.__render("_title",e)},__err_title:function(){this._dfd_title=null},__set_content:function(e){this._dfd_content=null,this.__render("_content",e)},__err_content:function(){this._dfd_content=null},__render:function(e,t){var i=this[e];this.place(t,i),this.isShowing&&(this.startupDijits(i),"_title"===e&&this._adjustContentArea&&this._adjustContentArea())}}),o("extend-esri")&&(l.InfoWindowBase=e),e})},"dojox/collections/ArrayList":function(){define(["dojo/_base/kernel","dojo/_base/array","./_base"],function(e,t,i){return i.ArrayList=function(t){var n=[];t&&(n=n.concat(t)),this.count=n.length,this.add=function(e){n.push(e),this.count=n.length},this.addRange=function(e){if(e.getIterator)for(e=e.getIterator();!e.atEnd();)this.add(e.get());else for(var t=0;t<e.length;t++)n.push(e[t]);this.count=n.length},this.clear=function(){n.splice(0,n.length),this.count=0},this.clone=function(){return new i.ArrayList(n)},this.contains=function(e){for(var t=0;t<n.length;t++)if(n[t]==e)return!0;return!1},this.forEach=function(t,i){e.forEach(n,t,i)},this.getIterator=function(){return new i.Iterator(n)},this.indexOf=function(e){for(var t=0;t<n.length;t++)if(n[t]==e)return t;return-1},this.insert=function(e,t){n.splice(e,0,t),this.count=n.length},this.item=function(e){return n[e]},this.remove=function(e){e=this.indexOf(e),e>=0&&n.splice(e,1),this.count=n.length},this.removeAt=function(e){n.splice(e,1),this.count=n.length},this.reverse=function(){n.reverse()},this.sort=function(e){e?n.sort(e):n.sort()},this.setByIndex=function(e,t){n[e]=t,this.count=n.length},this.toArray=function(){return[].concat(n)},this.toString=function(e){return n.join(e||",")}},i.ArrayList})},"dojo/fx/Toggler":function(){define(["../_base/lang","../_base/declare","../_base/fx","../aspect"],function(e,t,i,n){return t("dojo.fx.Toggler",null,{node:null,showFunc:i.fadeIn,hideFunc:i.fadeOut,showDuration:200,hideDuration:200,constructor:function(t){e.mixin(this,t),this.node=t.node,this._showArgs=e.mixin({},t),this._showArgs.node=this.node,this._showArgs.duration=this.showDuration,this.showAnim=this.showFunc(this._showArgs),this._hideArgs=e.mixin({},t),this._hideArgs.node=this.node,this._hideArgs.duration=this.hideDuration,this.hideAnim=this.hideFunc(this._hideArgs),n.after(this.showAnim,"beforeBegin",e.hitch(this.hideAnim,"stop",!0),!0),n.after(this.hideAnim,"beforeBegin",e.hitch(this.showAnim,"stop",!0),!0)},show:function(e){return this.showAnim.play(e||0)},hide:function(e){return this.hideAnim.play(e||0)}})})},"esri/units":function(){define(["dojo/has","esri/kernel"],function(e,t){var i={CENTIMETERS:"esriCentimeters",DECIMAL_DEGREES:"esriDecimalDegrees",DEGREE_MINUTE_SECONDS:"esriDegreeMinuteSeconds",DECIMETERS:"esriDecimeters",FEET:"esriFeet",INCHES:"esriInches",KILOMETERS:"esriKilometers",METERS:"esriMeters",MILES:"esriMiles",MILLIMETERS:"esriMillimeters",NAUTICAL_MILES:"esriNauticalMiles",POINTS:"esriPoints",UNKNOWN:"esriUnknownUnits",YARDS:"esriYards",ACRES:"esriAcres",ARES:"esriAres",SQUARE_KILOMETERS:"esriSquareKilometers",SQUARE_MILES:"esriSquareMiles",SQUARE_FEET:"esriSquareFeet",SQUARE_METERS:"esriSquareMeters",HECTARES:"esriHectares",SQUARE_YARDS:"esriSquareYards",SQUARE_INCHES:"esriSquareInches",SQUARE_MILLIMETERS:"esriSquareMillimeters",SQUARE_CENTIMETERS:"esriSquareCentimeters",SQUARE_DECIMETERS:"esriSquareDecimeters",SQUARE_NAUTICAL_MILES:"esriSquareNauticalMiles"};return e("extend-esri")&&(t.Units=i),i})},"esri/renderers/ClassBreaksRenderer":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has esri/kernel esri/lang esri/symbols/jsonUtils esri/renderers/Renderer".split(" "),function(e,t,i,n,s,r,o,a){return e=e(a,{declaredClass:"esri.renderer.ClassBreaksRenderer",constructor:function(e,i){if(this.breaks=[],this._symbols={},this.infos=[],e&&!e.declaredClass){var n=e;this.attributeField=n.field,this.defaultSymbol=(e=n.defaultSymbol)&&(e.declaredClass?e:o.fromJson(e)),this.backgroundFillSymbol=(e=n.backgroundFillSymbol)&&(e.declaredClass?e:o.fromJson(e)),this._copy(["defaultLabel","classificationMethod:rest","normalizationType:rest","normalizationField","normalizationTotal"],n,this);var s=n.minValue;(n=n.classBreakInfos)&&n[0]&&r.isDefined(n[0].classMaxValue)&&t.forEach(n,function(e){var t=e.classMaxValue;e.minValue=s,s=e.maxValue=t},this),t.forEach(n,this._addBreakInfo,this)}else this.defaultSymbol=e,this.attributeField=i},addBreak:function(e,t,n){e=i.isObject(e)?e:{minValue:e,maxValue:t,symbol:n},this._addBreakInfo(e)},removeBreak:function(e,t){var i,n,s=this.breaks,r=s.length,o=this._symbols;for(n=0;r>n;n++)if(i=s[n],i[0]==e&&i[1]==t){s.splice(n,1),delete o[e+"-"+t],this.infos.splice(n,1);break}},clearBreaks:function(){this.breaks=[],this._symbols={},this.infos=[]},getBreakIndex:function(e){var t=this.attributeField,n=e.attributes,s=this.breaks,r=s.length,o=this.isMaxInclusive;if(i.isFunction(t))e=t(e);else{e=parseFloat(n[t]);var a,t=this.normalizationType;t&&(a=parseFloat(this.normalizationTotal),n=parseFloat(n[this.normalizationField]),"log"===t?e=Math.log(e)*Math.LOG10E:"percent-of-total"!==t||isNaN(a)?"field"===t&&!isNaN(n)&&(e/=n):e=100*(e/a))}for(n=0;r>n;n++)if(t=s[n],t[0]<=e&&(o?e<=t[1]:e<t[1]))return n;return-1},getBreakInfo:function(e){return e=this.getBreakIndex(e),-1!==e?this.infos[e]:null},getSymbol:function(e){return(e=this.breaks[this.getBreakIndex(e)])?this._symbols[e[0]+"-"+e[1]]:this.defaultSymbol},setMaxInclusive:function(e){this.isMaxInclusive=e},_normalizationTypeEnums:[["field","esriNormalizeByField"],["log","esriNormalizeByLog"],["percent-of-total","esriNormalizeByPercentOfTotal"]],_classificationMethodEnums:[["natural-breaks","esriClassifyNaturalBreaks"],["equal-interval","esriClassifyEqualInterval"],["quantile","esriClassifyQuantile"],["standard-deviation","esriClassifyStandardDeviation"],["geometrical-interval","esriClassifyGeometricalInterval"]],_copy:function(e,i,n){t.forEach(e,function(e){var t,s,r,o=e.split(":");if(1<o.length&&(e=o[0],t=this["_"+e+"Enums"],"rest"===o[1]?(s="1",r="0"):"sdk"===o[1]&&(s="0",r="1")),o=i[e],void 0!==o&&(n[e]=o,t&&s)){var a,l=t.length;for(a=0;l>a;a++)if(t[a][s]===o){n[e]=t[a][r];break}}},this)},_addBreakInfo:function(e){var t=e.minValue,i=e.maxValue;this.breaks.push([t,i]),this.infos.push(e);var n=e.symbol;n&&!n.declaredClass&&(e.symbol=o.fromJson(n)),this._symbols[t+"-"+i]=e.symbol},toJson:function(){var e=this.infos||[],n=r.fixJson,s=e[0]&&e[0].minValue,o=this.backgroundFillSymbol,e=i.mixin(this.inherited(arguments),{type:"classBreaks",field:this.attributeField,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),backgroundFillSymbol:o&&o.toJson(),minValue:-1/0===s?-Number.MAX_VALUE:s,classBreakInfos:t.map(e,function(e){return e=i.mixin({},e),e.symbol=e.symbol&&e.symbol.toJson(),e.classMaxValue=1/0===e.maxValue?Number.MAX_VALUE:e.maxValue,delete e.minValue,delete e.maxValue,n(e)})});return this._copy(["defaultLabel","classificationMethod:sdk","normalizationType:sdk","normalizationField","normalizationTotal"],this,e),n(e)}}),n("extend-esri")&&i.setObject("renderer.ClassBreaksRenderer",e,s),e})},"esri/renderers/TimeClassBreaksAger":function(){define("dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has dojo/date esri/kernel esri/lang esri/symbols/jsonUtils esri/renderers/SymbolAger".split(" "),function(e,t,i,n,s,r,o,a,l){return e=e(l,{declaredClass:"esri.renderer.TimeClassBreaksAger",constructor:function(e,t){this.infos=e,this.timeUnits=t||"day",e.sort(function(e,t){return e.minAge<t.minAge?-1:e.minAge>t.minAge?1:0})},getAgedSymbol:function(e,i){var n=i.getLayer(),r=i.attributes,l=o.isDefined;e=a.fromJson(e.toJson());var c=n._map.timeExtent.endTime;if(!c)return e;var h=s.difference(new Date(r[n._startTimeField]),c,this.timeUnits);return t.some(this.infos,function(t){if(h>=t.minAge&&h<=t.maxAge){var i=t.color,n=t.size;return t=t.alpha,i&&e.setColor(i),l(n)&&this._setSymbolSize(e,n),l(t)&&e.color&&(e.color.a=t),!0}},this),e}}),i.mixin(e,{UNIT_DAYS:"day",UNIT_HOURS:"hour",UNIT_MILLISECONDS:"millisecond",UNIT_MINUTES:"minute",UNIT_MONTHS:"month",UNIT_SECONDS:"second",UNIT_WEEKS:"week",UNIT_YEARS:"year"}),n("extend-esri")&&i.setObject("renderer.TimeClassBreaksAger",e,r),e})},"esri/layers/ImageParameters":function(){define("dojo/_base/kernel dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has esri/kernel esri/lang esri/layerUtils".split(" "),function(e,t,i,n,s,r,o,a){return t=t(null,{declaredClass:"esri.layers.ImageParameters",constructor:function(){this.layerDefinitions=[]},bbox:null,extent:null,width:null,height:null,dpi:null,format:null,imageSpatialReference:null,layerOption:null,layerIds:null,transparent:null,timeExtent:null,layerTimeOptions:null,toJson:function(t){this.bbox&&e.deprecated(this.declaredClass+" : Property 'bbox' deprecated. Use property 'extent'.");var i=this.bbox||this.extent,i=i&&t&&i._normalize(!0);t=this.layerOption;var s=i?i.spatialReference.wkid||n.toJson(i.spatialReference.toJson()):null,r=this.imageSpatialReference,i={dpi:this.dpi,format:this.format,transparent:this.transparent,size:null!==this.width&&null!==this.height?this.width+","+this.height:null,bbox:i?i.xmin+","+i.ymin+","+i.xmax+","+i.ymax:null,bboxSR:s,layers:t?t+":"+this.layerIds.join(","):null,imageSR:r?r.wkid||n.toJson(r.toJson()):s};return i.layerDefs=a._serializeLayerDefinitions(this.layerDefinitions),t=this.timeExtent,i.time=t?t.toJson().join(","):null,i.layerTimeOptions=a._serializeTimeOptions(this.layerTimeOptions),o.filter(i,function(e){return null!==e?!0:void 0})}}),i.mixin(t,{LAYER_OPTION_SHOW:"show",LAYER_OPTION_HIDE:"hide",LAYER_OPTION_INCLUDE:"include",LAYER_OPTION_EXCLUDE:"exclude"}),s("extend-esri")&&i.setObject("layers.ImageParameters",t,r),t})},"dojox/gfx/renderer":function(){define(["./_base","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/_base/config"],function(e,t,i,n,s){var r=null;return i.add("vml",function(e,t,i){return i.innerHTML='<v:shape adj="1"/>',e="adj"in i.firstChild,i.innerHTML="",e
}),{load:function(o,a,l){function c(){a(["dojox/gfx/"+h],function(t){e.renderer=h,r=t,l(t)})}if(r&&"force"!=o)l(r);else{var h=s.forceGfxRenderer;o=!h&&(t.isString(s.gfxRenderer)?s.gfxRenderer:"svg,vml,canvas,silverlight").split(",");for(var d,u;!h&&o.length;)switch(o.shift()){case"svg":"SVGAngle"in n.global&&(h="svg");break;case"vml":i("vml")&&(h="vml");break;case"silverlight":try{i("ie")?(d=new ActiveXObject("AgControl.AgControl"))&&d.IsVersionSupported("1.0")&&(u=!0):navigator.plugins["Silverlight Plug-In"]&&(u=!0)}catch(f){u=!1}finally{d=null}u&&(h="silverlight");break;case"canvas":n.global.CanvasRenderingContext2D&&(h="canvas")}"canvas"===h&&!1!==s.canvasEvents&&(h="canvasWithEvents"),s.isDebug&&console.log("gfx renderer = "+h),"svg"==h&&"undefined"!=typeof window.svgweb?window.svgweb.addOnLoad(c):c()}}}})},"esri/OperationBase":function(){define(["dojo/_base/declare","dojo/has","esri/kernel"],function(e,t,i){return e=e(null,{declaredClass:"esri.OperationBase",type:"not implemented",label:"not implemented",constructor:function(e){e=e||{},e.label&&(this.label=e.label)},performUndo:function(){console.log("performUndo has not been implemented")},performRedo:function(){console.log("performRedo has not been implemented")}}),t("extend-esri")&&(i.OperationBase=e),e})},"esri/dijit/PopupTemplate":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojo/dom-construct esri/kernel esri/InfoTemplate esri/PopupInfo esri/dijit/PopupRenderer".split(" "),function(e,t,i,n,s,r,o,a){return e=e([r,o],{declaredClass:"esri.dijit.PopupTemplate","-chains-":{constructor:"manual"},chartTheme:null,constructor:function(e,i){t.mixin(this,i),this.initialize(e,i)},getTitle:function(e){return this.info?this.getComponents(e).title:""},getContent:function(e){return this.info?new a({template:this,graphic:e,chartTheme:this.chartTheme},n.create("div")).domNode:""}}),i("extend-esri")&&t.setObject("dijit.PopupTemplate",e,s),e})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(e,t,i,n){var s=e("dijit.form._ButtonMixin"+(i("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(e){return e.stopPropagation(),e.preventDefault(),this.disabled||this.valueNode.click(e),!1},_onClick:function(e){if(this.disabled)return e.stopPropagation(),e.preventDefault(),!1;if(!1===this.onClick(e)&&e.preventDefault(),cancelled=e.defaultPrevented,!cancelled&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var t=this.domNode;t.parentNode;t=t.parentNode){var i=n.byNode(t);if(i&&"function"==typeof i._onSubmit){i._onSubmit(e),e.preventDefault(),cancelled=!0;break}}return!cancelled},postCreate:function(){this.inherited(arguments),t.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(e){this._set("label",e),(this.containerNode||this.focusNode).innerHTML=e}});return i("dojo-bidi")&&(s=e("dijit.form._ButtonMixin",s,{_setLabelAttr:function(){this.inherited(arguments),this.applyTextDir(this.containerNode||this.focusNode)}})),s})},"esri/domUtils":function(){define(["dojo/_base/connect","dojo/_base/lang","dojo/dom-style","dojo/has","esri/kernel"],function(e,t,i,n,s){var r={show:function(e){e&&(e.style.display="block")},hide:function(e){e&&(e.style.display="none")},toggle:function(e){e.style.display="none"===e.style.display?"block":"none"},documentBox:n("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(t){var n=0,s=0,r=0,o=0,a=0,l=0;return[e.connect(t,"ontouchstart",function(e){n=e.touches[0].screenX,s=e.touches[0].screenY,r=t.scrollWidth,o=t.scrollHeight,a=t.clientWidth,l=t.clientHeight}),e.connect(t,"ontouchmove",function(e){e.preventDefault();var c=t.firstChild;c instanceof Text&&(c=t.childNodes[1]);var h=c._currentX||0,d=c._currentY||0,h=h+(e.touches[0].screenX-n);h>0?h=0:0>h&&Math.abs(h)+a>r&&(h=-1*(r-a)),c._currentX=h,d+=e.touches[0].screenY-s,d>0?d=0:0>d&&Math.abs(d)+l>o&&(d=-1*(o-l)),c._currentY=d,i.set(c,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+h+"px, "+d+"px)"}),n=e.touches[0].screenX,s=e.touches[0].screenY})]}};return n("extend-esri")&&t.mixin(s,r),r})},"dijit/registry":function(){define(["dojo/_base/array","dojo/sniff","dojo/_base/window","./main"],function(e,t,i,n){var s={},r={},o={length:0,add:function(e){if(r[e.id])throw Error("Tried to register widget with id=="+e.id+" but that id is already registered");r[e.id]=e,this.length++},remove:function(e){r[e]&&(delete r[e],this.length--)},byId:function(e){return"string"==typeof e?r[e]:e},byNode:function(e){return r[e.getAttribute("widgetId")]},toArray:function(){var e,t=[];for(e in r)t.push(r[e]);return t},getUniqueId:function(e){var t;do t=e+"_"+(e in s?++s[e]:s[e]=0);while(r[t]);return"dijit"==n._scopeName?t:n._scopeName+"_"+t},findWidgets:function(e,t){function i(e){for(e=e.firstChild;e;e=e.nextSibling)if(1==e.nodeType){var s=e.getAttribute("widgetId");s?(s=r[s])&&n.push(s):e!==t&&i(e)}}var n=[];return i(e),n},_destroyAll:function(){n._curFocus=null,n._prevFocus=null,n._activeStack=[],e.forEach(o.findWidgets(i.body()),function(e){e._destroyed||(e.destroyRecursive?e.destroyRecursive():e.destroy&&e.destroy())})},getEnclosingWidget:function(e){for(;e;){var t=1==e.nodeType&&e.getAttribute("widgetId");if(t)return r[t];e=e.parentNode}return null},_hash:r};return n.registry=o})},"esri/main":function(){define(["esri/kernel","dojo/i18n!esri/nls/jsapi","esri/config","esri/sniff"],function(e,t){return e.bundle=t,e})},"esri/tasks/GPMessage":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(e,t,i,n){return e=e(null,{declaredClass:"esri.tasks.GPMessage",constructor:function(e){t.mixin(this,e)}}),t.mixin(e,{TYPE_INFORMATIVE:"esriJobMessageTypeInformative",TYPE_PROCESS_DEFINITION:"esriJobMessageTypeProcessDefinition",TYPE_PROCESS_START:"esriJobMessageTypeProcessStart",TYPE_PROCESS_STOP:"esriJobMessageTypeProcessStop",TYPE_WARNING:"esriJobMessageTypeWarning",TYPE_ERROR:"esriJobMessageTypeError",TYPE_EMPTY:"esriJobMessageTypeEmpty",TYPE_ABORT:"esriJobMessageTypeAbort"}),i("extend-esri")&&t.setObject("tasks.GPMessage",e,n),e})},"dojo/io/script":function(){define("../_base/connect ../_base/kernel ../_base/lang ../sniff ../_base/window ../_base/xhr ../dom ../dom-construct ../request/script ../aspect".split(" "),function(d,l,p,q,h,k,g,f,b,a){l.deprecated("dojo/io/script","Use dojo/request/script.","2.0");var c={get:function(e){var t,i=this._makeScriptDeferred(e,function(){t&&t.cancel()}),n=i.ioArgs;return k._ioAddQueryToUrl(n),k._ioNotifyStart(i),t=b.get(n.url,{timeout:e.timeout,jsonp:n.jsonp,checkString:e.checkString,ioArgs:n,frameDoc:e.frameDoc,canAttach:function(e){return n.requestId=e.id,n.scriptId=e.scriptId,n.canDelete=e.canDelete,c._canAttach(n)}},!0),a.around(t,"isValid",function(e){return function(t){return c._validCheck(i),e.call(this,t)}}),t.then(function(){i.resolve(i)}).otherwise(function(e){i.ioArgs.error=e,i.reject(e)}),i},attach:b._attach,remove:b._remove,_makeScriptDeferred:function(e,t){var i=k._ioSetArgs(e,t||this._deferredCancel,this._deferredOk,this._deferredError),n=i.ioArgs;return n.id=l._scopeName+"IoScript"+(e.callbackSuffix||this._counter++),n.canDelete=!1,n.jsonp=e.callbackParamName||e.jsonp,n.jsonp&&(n.query=n.query||"",0<n.query.length&&(n.query+="&"),n.query+=n.jsonp+"="+(e.frameDoc?"parent.":"")+l._scopeName+".io.script.jsonp_"+n.id+"._jsonpCallback",n.frameDoc=e.frameDoc,n.canDelete=!0,i._jsonpCallback=this._jsonpCallback,this["jsonp_"+n.id]=i),i.addBoth(function(e){n.canDelete&&(e instanceof Error?c["jsonp_"+n.id]._jsonpCallback=function(){delete c["jsonp_"+n.id],n.requestId&&l.global[b._callbacksProperty][n.requestId]()}:c._addDeadScript(n))}),i},_deferredCancel:function(e){e.canceled=!0},_deferredOk:function(e){return e=e.ioArgs,e.json||e.scriptLoaded||e},_deferredError:function(e){return console.log("dojo.io.script error",e),e},_deadScripts:[],_counter:1,_addDeadScript:function(e){c._deadScripts.push({id:e.id,frameDoc:e.frameDoc}),e.frameDoc=null},_validCheck:function(e){if((e=c._deadScripts)&&0<e.length){for(var t=0;t<e.length;t++)c.remove(e[t].id,e[t].frameDoc),delete c["jsonp_"+e[t].id],e[t].frameDoc=null;c._deadScripts=[]}return!0},_ioCheck:function(a){return a=a.ioArgs,a.json||a.scriptLoaded&&!a.args.checkString?!0:(a=a.args.checkString)&&eval("typeof("+a+") != 'undefined'")},_resHandle:function(e){c._ioCheck(e)?e.callback(e):e.errback(Error("inconceivable dojo.io.script._resHandle error"))},_canAttach:function(){return!0},_jsonpCallback:function(e){this.ioArgs.json=e,this.ioArgs.requestId&&l.global[b._callbacksProperty][this.ioArgs.requestId](e)}};return p.setObject("dojo.io.script",c),c})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),function(e,t,i,n,s,r,o,a,l){function c(e,t,i,s){return s.replace(/([a-z])\1*/gi,function(r){var a,l,c=r.charAt(0);r=r.length;var h=["abbr","wide","narrow"];switch(c){case"G":a=t[4>r?"eraAbbr":"eraNames"][0>e.getFullYear()?0:1];break;case"y":switch(a=e.getFullYear(),r){case 1:break;case 2:if(!i.fullYear){a=String(a),a=a.substr(a.length-2);break}default:l=!0}break;case"Q":case"q":a=Math.ceil((e.getMonth()+1)/3),l=!0;break;case"M":case"L":a=e.getMonth(),3>r?(a+=1,l=!0):(c=["months","L"==c?"standAlone":"format",h[r-3]].join("-"),a=t[c][a]);break;case"w":a=u._getWeekOfYear(e,0),l=!0;break;case"d":a=e.getDate(),l=!0;break;case"D":a=u._getDayOfYear(e),l=!0;break;case"e":case"c":if(a=e.getDay(),2>r){a=(a-n.getFirstDayOfWeek(i.locale)+8)%7;break}case"E":a=e.getDay(),3>r?(a+=1,l=!0):(c=["days","c"==c?"standAlone":"format",h[r-3]].join("-"),a=t[c][a]);break;case"a":c=12>e.getHours()?"am":"pm",a=i[c]||t["dayPeriods-format-wide-"+c];break;case"h":case"H":case"K":case"k":switch(l=e.getHours(),c){case"h":a=l%12||12;break;case"H":a=l;break;case"K":a=l%12;break;case"k":a=l||24}l=!0;break;case"m":a=e.getMinutes(),l=!0;break;case"s":a=e.getSeconds(),l=!0;break;case"S":a=Math.round(e.getMilliseconds()*Math.pow(10,r-3)),l=!0;break;case"v":case"z":if(a=u._getZone(e,!0,i))break;r=4;case"Z":c=u._getZone(e,!1,i),c=[0>=c?"+":"-",o.pad(Math.floor(Math.abs(c)/60),2),o.pad(Math.abs(c)%60,2)],4==r&&(c.splice(0,0,"GMT"),c.splice(3,0,":")),a=c.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+s)}return l&&(a=o.pad(a,r)),a})}function h(e,i,n,s){var r=function(e){return e};i=i||r,n=n||r,s=s||r;var o=e.match(/(''|[^'])+/g),a="'"==e.charAt(0);return t.forEach(o,function(e,t){e?(o[t]=(a?n:i)(e.replace(/''/g,"'")),a=!a):o[t]=""}),s(o.join(""))}function d(e,t,i,n){return n=r.escapeString(n),i.strict||(n=n.replace(" a"," ?a")),n.replace(/([a-z])\1*/gi,function(n){var s;s=n.charAt(0);var r=n.length,o="",a="";switch(i.strict?(r>1&&(o="0{"+(r-1)+"}"),r>2&&(a="0{"+(r-2)+"}")):(o="0?",a="0{0,2}"),s){case"y":s="\\d{2,4}";break;case"M":case"L":s=r>2?"\\S+?":"1[0-2]|"+o+"[1-9]";break;case"D":s="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+o+"[1-9][0-9]|"+a+"[1-9]";break;case"d":s="3[01]|[12]\\d|"+o+"[1-9]";break;case"w":s="[1-4][0-9]|5[0-3]|"+o+"[1-9]";break;case"E":case"e":case"c":s=".+?";break;case"h":s="1[0-2]|"+o+"[1-9]";break;case"k":s="1[01]|"+o+"\\d";break;case"H":s="1\\d|2[0-3]|"+o+"\\d";break;case"K":s="1\\d|2[0-4]|"+o+"[1-9]";break;case"m":case"s":s="[0-5]\\d";break;case"S":s="\\d{"+r+"}";break;case"a":r=i.am||t["dayPeriods-format-wide-am"],o=i.pm||t["dayPeriods-format-wide-pm"],s=r+"|"+o,i.strict||(r!=r.toLowerCase()&&(s+="|"+r.toLowerCase()),o!=o.toLowerCase()&&(s+="|"+o.toLowerCase()),-1!=s.indexOf(".")&&(s+="|"+s.replace(/\./g,""))),s=s.replace(/\./g,"\\.");break;default:s=".*"}return e&&e.push(n),"("+s+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var u={};e.setObject(l.id.replace(/\//g,"."),u),u._getZone=function(e,t){return t?i.getTimezoneName(e):e.getTimezoneOffset()},u.format=function(t,i){i=i||{};var n=s.normalizeLocale(i.locale),r=i.formatLength||"short",n=u._getGregorianBundle(n),o=[],a=e.hitch(this,c,t,n,i);if("year"==i.selector)return h(n["dateFormatItem-yyyy"]||"yyyy",a);var l;return"date"!=i.selector&&(l=i.timePattern||n["timeFormat-"+r])&&o.push(h(l,a)),"time"!=i.selector&&(l=i.datePattern||n["dateFormat-"+r])&&o.push(h(l,a)),1==o.length?o[0]:n["dateTimeFormat-"+r].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(e,t){return o[t]})},u.regexp=function(e){return u._parseInfo(e).regexp},u._parseInfo=function(t){t=t||{};var i=s.normalizeLocale(t.locale),i=u._getGregorianBundle(i),n=t.formatLength||"short",r=t.datePattern||i["dateFormat-"+n],o=t.timePattern||i["timeFormat-"+n],n="date"==t.selector?r:"time"==t.selector?o:i["dateTimeFormat-"+n].replace(/\{(\d+)\}/g,function(e,t){return[o,r][t]}),a=[];return{regexp:h(n,e.hitch(this,d,a,i,t)),tokens:a,bundle:i}},u.parse=function(e,n){var s=/[\u200E\u200F\u202A\u202E]/g,r=u._parseInfo(n),o=r.tokens,a=r.bundle,s=RegExp("^"+r.regexp.replace(s,"")+"$",r.strict?"":"i").exec(e&&e.replace(s,""));if(!s)return null;var l=["abbr","wide","narrow"],c=[1970,0,1,0,0,0,0],h="",s=t.every(s,function(e,i){if(!i)return!0;var s=o[i-1],r=s.length,s=s.charAt(0);switch(s){case"y":if(2!=r&&n.strict)c[0]=e;else if(100>e)e=Number(e),s=""+(new Date).getFullYear(),r=100*s.substring(0,2),s=Math.min(Number(s.substring(2,4))+20,99),c[0]=s>e?r+e:r-100+e;else{if(n.strict)return!1;c[0]=e}break;case"M":case"L":if(r>2){if(r=a["months-"+("L"==s?"standAlone":"format")+"-"+l[r-3]].concat(),n.strict||(e=e.replace(".","").toLowerCase(),r=t.map(r,function(e){return e.replace(".","").toLowerCase()})),e=t.indexOf(r,e),-1==e)return!1}else e--;c[1]=e;break;case"E":case"e":case"c":if(r=a["days-"+("c"==s?"standAlone":"format")+"-"+l[r-3]].concat(),n.strict||(e=e.toLowerCase(),r=t.map(r,function(e){return e.toLowerCase()})),e=t.indexOf(r,e),-1==e)return!1;break;case"D":c[1]=0;case"d":c[2]=e;break;case"a":if(r=n.am||a["dayPeriods-format-wide-am"],s=n.pm||a["dayPeriods-format-wide-pm"],!n.strict){var d=/\./g;e=e.replace(d,"").toLowerCase(),r=r.replace(d,"").toLowerCase(),s=s.replace(d,"").toLowerCase()}if(n.strict&&e!=r&&e!=s)return!1;h=e==s?"p":e==r?"a":"";break;case"K":24==e&&(e=0);case"h":case"H":case"k":if(e>23)return!1;c[3]=e;break;case"m":c[4]=e;break;case"s":c[5]=e;break;case"S":c[6]=e}return!0}),r=+c[3];"p"===h&&12>r?c[3]=r+12:"a"===h&&12==r&&(c[3]=0),r=new Date(c[0],c[1],c[2],c[3],c[4],c[5],c[6]),n.strict&&r.setFullYear(c[0]);var d=o.join(""),f=-1!=d.indexOf("d"),d=-1!=d.indexOf("M");return!s||d&&r.getMonth()>c[1]||f&&r.getDate()>c[2]?null:((d&&r.getMonth()<c[1]||f&&r.getDate()<c[2])&&(r=i.add(r,"hour",1)),r)};var f=[];return u.addCustomFormats=function(e,t){f.push({pkg:e,name:t})},u._getGregorianBundle=function(i){var n={};return t.forEach(f,function(t){t=s.getLocalization(t.pkg,t.name,i),n=e.mixin(n,t)},this),n},u.addCustomFormats(l.id.replace(/\/date\/locale$/,".cldr"),"gregorian"),u.getNames=function(e,t,i,n){var s;return n=u._getGregorianBundle(n),e=[e,i,t],"standAlone"==i&&(i=e.join("-"),s=n[i],1==s[0]&&(s=void 0)),e[1]="format",(s||n[e.join("-")]).concat()},u.isWeekend=function(e,t){var i=n.getWeekend(t),s=(e||new Date).getDay();return i.end<i.start&&(i.end+=7,s<i.start&&(s+=7)),s>=i.start&&s<=i.end},u._getDayOfYear=function(e){return i.difference(new Date(e.getFullYear(),0,1,e.getHours()),e)+1},u._getWeekOfYear=function(e,t){1==arguments.length&&(t=0);var i=new Date(e.getFullYear(),0,1).getDay(),n=Math.floor((u._getDayOfYear(e)+(i-t+7)%7-1)/7);return i==t&&n++,n},u})},"esri/renderers/SymbolAger":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(e,t,i,n){return e=e(null,{declaredClass:"esri.renderer.SymbolAger",getAgedSymbol:function(){},_setSymbolSize:function(e,t){switch(e.type){case"simplemarkersymbol":e.setSize(t);break;case"picturemarkersymbol":e.setWidth(t),e.setHeight(t);break;case"simplelinesymbol":case"cartographiclinesymbol":e.setWidth(t);break;case"simplefillsymbol":case"picturefillsymbol":e.outline&&e.outline.setWidth(t)}}}),i("extend-esri")&&t.setObject("renderer.SymbolAger",e,n),e})},"dijit/_base/wai":function(){define(["dojo/dom-attr","dojo/_base/lang","../main","../hccss"],function(e,t,i){return t.mixin(i,{hasWaiRole:function(e,t){var i=this.getWaiRole(e);return t?-1<i.indexOf(t):0<i.length},getWaiRole:function(i){return t.trim((e.get(i,"role")||"").replace("wairole:",""))},setWaiRole:function(t,i){e.set(t,"role",i)},removeWaiRole:function(i,n){var s=e.get(i,"role");s&&(n?(s=t.trim((" "+s+" ").replace(" "+n+" "," ")),e.set(i,"role",s)):i.removeAttribute("role"))},hasWaiState:function(e,t){return e.hasAttribute?e.hasAttribute("aria-"+t):!!e.getAttribute("aria-"+t)},getWaiState:function(e,t){return e.getAttribute("aria-"+t)||""},setWaiState:function(e,t,i){e.setAttribute("aria-"+t,i)},removeWaiState:function(e,t){e.removeAttribute("aria-"+t)}}),i})},"esri/config":function(){define(["dojo/_base/config","dojo/topic","dojo/has","esri/kernel"],function(e,t,i,n){var s={defaults:{screenDPI:96,geometryService:null,kmlService:null,map:{width:400,height:400,layerNamePrefix:"layer",graphicsLayerNamePrefix:"graphicsLayer",slider:{left:"30px",top:"30px",width:null,height:"200px"},sliderLabel:{tick:5,labels:null,style:"width:2em; font-family:Verdana; font-size:75%;"},sliderChangeImmediate:!0,zoomSymbol:{color:[0,0,0,64],outline:{color:[255,0,0,255],width:1.25,style:"esriSLSSolid"},style:"esriSFSSolid"},zoomDuration:500,zoomRate:25,panDuration:350,panRate:25,logoLink:"http://www.esri.com",basemaps:{streets:{title:"Streets",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer"}]},satellite:{title:"Satellite",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"}]},hybrid:{title:"Imagery with Labels",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",isReference:!0}]},topo:{title:"Topographic",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer"}]},gray:{title:"Light Gray Canvas",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer"},{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",isReference:!0}]},oceans:{title:"Oceans",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/Ocean_Basemap/MapServer"}]},"national-geographic":{title:"National Geographic",baseMapLayers:[{url:"http://services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer"}]},osm:{title:"OpenStreetMap",baseMapLayers:[{type:"OpenStreetMap"}]}}},io:{errorHandler:function(e){t.publish("esri.Error",[e])},proxyUrl:null,alwaysUseProxy:!1,useCors:!0,corsEnabledServers:"www.arcgis.com tiles.arcgis.com services.arcgis.com services1.arcgis.com services2.arcgis.com services3.arcgis.com static.arcgis.com utility.arcgisonline.com geocode.arcgis.com geoenrich.arcgis.com qaext.arcgis.com tilesqa.arcgis.com servicesqa.arcgis.com servicesqa1.arcgis.com servicesqa2.arcgis.com servicesqa3.arcgis.com geocodeqa.arcgis.com geoenrichqa.arcgis.com dev.arcgis.com devext.arcgis.com tilesdevext.arcgis.com servicesdev.arcgis.com servicesdev1.arcgis.com servicesdev2.arcgis.com servicesdev3.arcgis.com geocodedev.arcgis.com geoenrichdev.arcgis.com".split(" "),corsDetection:!0,_processedCorsServers:{},webTierAuthServers:[],proxyRules:[],postLength:2e3,timeout:6e4,useWorkers:"on-request",maxRequestWorkers:5}}};return i("extend-esri")&&(n.config=s),e.noGlobals||(window.esriConfig=s),s})},"esri/utils":function(){define("esri/domUtils esri/lang esri/urlUtils esri/request esri/tileUtils esri/graphicsUtils esri/deferredUtils esri/layerUtils esri/geometry/normalizeUtils".split(" "),function(){return{}})},"esri/kernel":function(){define(["dojo/_base/kernel","dojo/_base/config","dojo/has"],function(e,t,i){var n=window.location,s=n.pathname,s={version:3.8,_appBaseUrl:n.protocol+"//"+n.host+s.substring(0,s.lastIndexOf(s.split("/")[s.split("/").length-1]))};return t.noGlobals||(window.esri=s),e.isAsync||i.add("extend-esri",1),(s.dijit=s.dijit||{})._arcgisUrl=n.protocol+"//www.arcgis.com/sharing/rest",s})},"esri/tasks/ImageServiceIdentifyParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has esri/kernel esri/lang esri/geometry/jsonUtils".split(" "),function(e,t,i,n,s,r,o){return e=e(null,{declaredClass:"esri.tasks.ImageServiceIdentifyParameters",geometry:null,mosaicRule:null,renderingRule:null,pixelSizeX:null,pixelSizeY:null,pixelSize:null,returnGeometry:!1,returnCatalogItems:!0,timeExtent:null,toJson:function(e){var t=e&&e.geometry||this.geometry;return e={geometry:t,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,mosaicRule:this.mosaicRule?i.toJson(this.mosaicRule.toJson()):null,renderingRule:this.renderingRule?i.toJson(this.renderingRule.toJson()):null},t&&(e.geometryType=o.getJsonType(t)),t=this.timeExtent,e.time=t?t.toJson().join(","):null,r.isDefined(this.pixelSizeX)&&r.isDefined(this.pixelSizeY)?e.pixelSize=i.toJson({x:parseFloat(this.pixelSizeX),y:parseFloat(this.pixelSizeY)}):this.pixelSize&&(e.pixelSize=this.pixelSize?i.toJson(this.pixelSize.toJson()):null),e}}),n("extend-esri")&&t.setObject("tasks.ImageServiceIdentifyParameters",e,s),e})},"esri/layers/RasterFunction":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(e,t,i,n,s){return e=e(null,{declaredClass:"esri.layers.RasterFunction",functionName:null,arguments:null,functionArguments:null,variableName:null,outputPixelType:null,constructor:function(e){t.isObject(e)&&(t.mixin(this,e),e.rasterFunction&&(this.functionName=e.rasterFunction),e.rasterFunctionArguments?this.functionArguments=e.rasterFunctionArguments:e.arguments&&(this.functionArguments=e.arguments))},toJson:function(){return s.filter({rasterFunction:this.functionName,rasterFunctionArguments:this.functionArguments||this.arguments,variableName:this.variableName,outputPixelType:this.outputPixelType?this.outputPixelType:null},function(e){return null!==e&&void 0!==e?!0:void 0})}}),i("extend-esri")&&t.setObject("layers.RasterFunction",e,n),e})},"esri/tasks/ParameterValue":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(e,t,i,n){return e=e(null,{declaredClass:"esri.tasks.ParameterValue",constructor:function(e){t.mixin(this,e)}}),i("extend-esri")&&t.setObject("tasks.ParameterValue",e,n),e})},"esri/symbols/SimpleFillSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Color dojo/has dojox/gfx/_base esri/kernel esri/lang esri/symbols/FillSymbol esri/symbols/SimpleLineSymbol require".split(" "),function(e,t,i,n,s,r,o,a,l,c){var h={STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forwarddiagonal",STYLE_BACKWARD_DIAGONAL:"backwarddiagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonalcross",STYLE_FORWARDDIAGONAL:"forwarddiagonal",STYLE_BACKWARDDIAGONAL:"backwarddiagonal",STYLE_DIAGONALCROSS:"diagonalcross"},d={style:h.STYLE_SOLID,color:[0,0,0,.25]};return e=e(a,{declaredClass:"esri.symbol.SimpleFillSymbol",type:"simplefillsymbol",patternUrlPrefix:c.toUrl("esri")+"/images/symbol/sfs/",_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical",forwarddiagonal:"esriSFSForwardDiagonal",backwarddiagonal:"esriSFSBackwardDiagonal",cross:"esriSFSCross",diagonalcross:"esriSFSDiagonalCross"},constructor:function(e,n,s){e?t.isString(e)?(this.style=e,void 0!==n&&(this.outline=n),void 0!==s&&(this.color=s)):this.style=o.valueOf(this._styles,e.style):(t.mixin(this,d),this.outline=new l(this.outline),this.color=new i(this.color))},setStyle:function(e){return this.style=e,this},getStroke:function(){return this.outline&&this.outline.getStroke()},getFill:function(){var e=this.style;return e===h.STYLE_NULL?null:e===h.STYLE_SOLID?this.color:t.mixin({},s.defaultPattern,{src:this.patternUrlPrefix+e+".png",width:10,height:10})},getShapeDescriptors:function(){return{defaultShape:{type:"path",path:"M -10,-10 L 10,0 L 10,10 L -10,10 L -10,-10 E"},fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){return o.fixJson(t.mixin(this.inherited("toJson",arguments),{type:"esriSFS",style:this._styles[this.style]}))}}),t.mixin(e,h),e.defaultProps=d,n("extend-esri")&&(t.setObject("symbol.SimpleFillSymbol",e,r),r.symbol.defaultSimpleFillSymbol=d),e})},"esri/layers/DynamicLayerInfo":function(){define("dojo/_base/declare dojo/_base/lang dojo/has esri/kernel esri/lang esri/layers/LayerInfo esri/layers/LayerMapSource esri/layers/LayerDataSource".split(" "),function(e,t,i,n,s,r,o,a){return e=e(r,{declaredClass:"esri.layers.DynamicLayerInfo",defaultVisibility:!0,parentLayerId:-1,maxScale:0,minScale:0,constructor:function(e){e&&(e.source?e="mapLayer"===e.source.type?new o(e.source):new a(e.source):(e=new o,e.mapLayerId=this.id),this.source=e)},toJson:function(){var e=this.inherited(arguments);return e.source=this.source&&this.source.toJson(),s.fixJson(e)}}),i("extend-esri")&&t.setObject("layers.DynamicLayerInfo",e,n),e})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),function(e,t,i,n,s,r,o,a){return t("dijit-legacy-requires")&&n(0,function(){require(["dijit/form/_FormValueWidget"])}),e("dijit.form._FormWidget",[s,o,r,a],{setDisabled:function(e){i.deprecated("setDisabled("+e+") is deprecated. Use set('disabled',"+e+") instead.","","2.0"),this.set("disabled",e)},setValue:function(e){i.deprecated("dijit.form._FormWidget:setValue("+e+") is deprecated.  Use set('value',"+e+") instead.","","2.0"),this.set("value",e)},getValue:function(){return i.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0"),this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!t("msapp")?'name="'+this.name.replace(/"/g,"&quot;")+'"':"",this.inherited(arguments)},_setTypeAttr:null})})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(e,t,i,n){var s=i.getObject("dojo.dnd",!0);return s.getCopyKeyState=function(t){return t[e("mac")?"metaKey":"ctrlKey"]},s._uniqueId=0,s.getUniqueId=function(){var e;do e=t._scopeName+"Unique"+ ++s._uniqueId;while(n.byId(e));return e},s._empty={},s.isFormElement=function(e){return e=e.target,3==e.nodeType&&(e=e.parentNode),0<=" button textarea input select option ".indexOf(" "+e.tagName.toLowerCase()+" ")},s})},"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(e,t,i,n,s){var r,o=new e;return i(function(){var e=s.getBox();if(o._rlh=t(window,"resize",function(){var t=s.getBox();e.h==t.h&&e.w==t.w||(e=t,o.emit("resize"))}),8==n("ie")){var i=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=i&&(i=screen.deviceXDPI,o.emit("resize"))},500)}n("ios")&&(t(document,"focusin",function(e){r=e.target}),t(document,"focusout",function(){r=null}))}),o.getEffectiveBox=function(e){e=s.getBox(e);var t=r&&r.tagName&&r.tagName.toLowerCase();return n("ios")&&r&&!r.readOnly&&("textarea"==t||"input"==t&&/^(color|email|number|password|search|tel|text|url)$/.test(r.type))&&(e.h*=0==orientation||180==orientation?.66:.4,t=r.getBoundingClientRect(),e.h=Math.max(e.h,t.top+t.height)),e},o})},"esri/geometry/scaleUtils":function(){define("dojo/_base/lang dojo/has esri/kernel esri/config esri/lang esri/WKIDUnitConversion".split(" "),function(e,t,i,n,s,r){function o(e,t,i){return e&&t?e.getWidth()/t*(i||c)*l*h.screenDPI:0}function a(e,t,i,n,s){return e.expand(n*t/(((s?i:d.values[d[i]])||c)*l*h.screenDPI)/e.getWidth())}var l=39.37,c=20015077/180,h=n.defaults,d=r,u={getUnitValue:function(e){var t,i,n;return e&&("object"==typeof e?(t=e.wkid,i=e.wkt):"number"==typeof e?t=e:"string"==typeof e&&(i=e)),t?n=d.values[d[t]]:i&&-1!==i.search(/^PROJCS/i)&&(e=/UNIT\[([^\]]+)\]\]$/i.exec(i))&&e[1]&&(n=parseFloat(e[1].split(",")[1])),n},getScale:function(e,t,i){var n,r,a;return 1<arguments.length&&s.isDefined(t)&&!t.declaredClass?(n=e,r=t,t=null,a=u.getUnitValue(i)):(n=e.extent,r=e.width,a=u.getUnitValue(e.spatialReference)),o(t||n,r,a)},getExtentForScale:function(e,t,i){return a(i||e.extent,e.width,u.getUnitValue(e.spatialReference),t,!0)}};return t("extend-esri")&&(e.mixin(e.getObject("geometry",!0,i),u),i.geometry._getScale=o,i.geometry._getExtentForScale=a),u})},"esri/tasks/geometry":function(){define("esri/tasks/GeometryService esri/tasks/TrimExtendParameters esri/tasks/BufferParameters esri/tasks/AreasAndLengthsParameters esri/tasks/LengthsParameters esri/tasks/RelationParameters esri/tasks/DensifyParameters esri/tasks/GeneralizeParameters esri/tasks/OffsetParameters esri/tasks/DistanceParameters esri/tasks/ProjectParameters".split(" "),function(){return{}})},"dojo/io/iframe":function(){define("../_base/config ../_base/json ../_base/kernel ../_base/lang ../_base/xhr ../sniff ../_base/window ../dom ../dom-construct ../query require ../aspect ../request/iframe".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u){i.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0"),r=u._iframeName,r=r.substring(0,r.lastIndexOf("_"));var f=n.delegate(u,{create:function(){return f._frame=u.create.apply(u,arguments)},get:null,post:null,send:function(n){var r,o=s._ioSetArgs(n,function(){r&&r.cancel()},function(e){var n=null;e=e.ioArgs;try{var s=e.handleAs;"xml"===s||"html"===s?n=r.response.data:(n=r.response.text,"json"===s?n=t.fromJson(n):"javascript"===s&&(n=i.eval(n)))}catch(o){n=o}return n},function(e,t){return t.ioArgs._hasError=!0,e}),l=o.ioArgs,c="GET",h=a.byId(n.form);if(n.method&&"POST"===n.method.toUpperCase()&&h&&(c="POST"),n={method:c,handleAs:"json"===n.handleAs||"javascript"===n.handleAs?"text":n.handleAs,form:n.form,query:h?null:n.content,data:h?n.content:null,timeout:n.timeout,ioArgs:l},n.method&&(n.method=n.method.toUpperCase()),e.ioPublish&&i.publish&&!1!==l.args.ioPublish)var f=d.after(u,"_notifyStart",function(e){e.options.ioArgs===l&&(f.remove(),s._ioNotifyStart(o))},!0);return r=u(l.url,n,!0),l._callNext=r._callNext,r.then(function(){o.resolve(o)}).otherwise(function(e){o.ioArgs.error=e,o.reject(e)}),o},_iframeOnload:o.global[r+"_onload"]});return n.setObject("dojo.io.iframe",f),f})},"esri/tileUtils":function(){define(["dojo/_base/array","dojo/has","esri/kernel","esri/geometry/Point","esri/geometry/Extent"],function(e,t,i,n,s){var r={_addFrameInfo:function(t,i){var n,s,r,o=2*i.origin[1],a=i.origin[0],l=t.origin.x,c=t.width;e.forEach(t.lods,function(e){n=Math.round(o/e.resolution),s=Math.ceil(n/c),r=Math.floor((a-l)/(c*e.resolution)),e._frameInfo||(e._frameInfo=[s,r,r+s-1,n])})},getContainingTileCoords:function(e,t,i){var n=e.origin;return i=i.resolution,{row:Math.floor((n.y-t.y)/(e.height*i)),col:Math.floor((t.x-n.x)/(e.width*i))}},getCandidateTileInfo:function(e,t,i){var r;r=e.width;for(var o,a,l,c=e.height,h=i.xmax-i.xmin,d=i.ymax-i.ymin,u=e.__tileInfo===t,f=u?e.getMinZoom():-1,u=u?e.getMaxZoom():-1,p=-1,m=t.lods,_=Math.abs,u=u>-1?u:m.length-1,f=f>-1?f:0;u>=f;f++)if(a=m[f]){if(l=h>d?_(d-c*a.resolution):_(h-r*a.resolution),!(0>p||p>=l))break;o=a,p=l}return r=o,o=r.resolution,c=(i.xmin+i.xmax)/2,h=(i.ymin+i.ymax)/2,d=e.width/2*o,o*=e.height/2,c=new s(c-d,h-o,c+d,h+o,i.spatialReference),i=new n(c.xmin,c.ymax,i.spatialReference),u=r.resolution,d=t.width,h=t.height,t=t.origin,e=e.__visibleDelta,o=Math.floor,m=d*u,_=h*u,u=o((t.y-i.y)/_),p=o((i.x-t.x)/m),f=t.y-u*_,t=o(Math.abs((i.x-(t.x+p*m))*d/m))+e.x,e=o(Math.abs((i.y-f)*h/_))+e.y,{tile:{point:i,coords:{row:u,col:p},offsets:{x:t,y:e}},lod:r,extent:c}},getTileExtent:function(e,t,i,n){var r=e.origin;
t=e.lods[t].resolution;var o=e.width,a=e.height;return new s(n*t*o+r.x,r.y-(i+1)*t*a,(n+1)*t*o+r.x,r.y-i*t*a,e.spatialReference)}};return t("extend-esri")&&(i.TileUtils=r),r})},"esri/tasks/ImageServiceIdentifyTask":function(){define("dojo/_base/declare dojo/_base/lang dojo/has esri/kernel esri/request esri/geometry/normalizeUtils esri/tasks/Task esri/tasks/ImageServiceIdentifyResult".split(" "),function(e,t,i,n,s,r,o,a){return e=e(o,{declaredClass:"esri.tasks.ImageServiceIdentifyTask",constructor:function(){this._url.path+="/identify",this._handler=t.hitch(this,this._handler)},__msigns:[{n:"execute",c:3,a:[{i:0,p:["geometry"]}],e:2}],_handler:function(e,t,i,n,s){try{var r=new a(e);this._successHandler([r],"onComplete",i,s)}catch(o){this._errorHandler(o,n,s)}},execute:function(e,i,n,r){var o=r.assembly;e=this._encode(t.mixin({},this._url.query,{f:"json"},e.toJson(o&&o[0])));var a=this._handler,l=this._errorHandler;return s({url:this._url.path,content:e,callbackParamName:"callback",load:function(e,t){a(e,t,i,n,r.dfd)},error:function(e){l(e,n,r.dfd)}})},onComplete:function(){}}),r._createWrappers(e),i("extend-esri")&&t.setObject("tasks.ImageServiceIdentifyTask",e,n),e})},"esri/layers/ArcGISImageServiceLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/Deferred dojo/_base/array dojo/_base/json dojo/_base/config dojo/has dojo/io-query esri/kernel esri/config esri/lang esri/request esri/deferredUtils esri/urlUtils esri/geometry/Extent esri/geometry/Point esri/SpatialReference esri/layers/MosaicRule esri/layers/DynamicMapServiceLayer esri/layers/TimeInfo esri/layers/Field esri/graphic esri/tasks/ImageServiceIdentifyTask esri/tasks/ImageServiceIdentifyParameters".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p,m,_,g,y,v,b,x,w,S){return e=e(y,{declaredClass:"esri.layers.ArcGISImageServiceLayer",_eventMap:{"rendering-change":!0,"mosaic-rule-change":!0},constructor:function(e,i){this._url=f.urlToObject(e);var n=i&&i.imageServiceParameters;this.format=n&&n.format,this.interpolation=n?n.interpolation:null,this.compressionQuality=n?n.compressionQuality:null,this.bandIds=n?n.bandIds:null,this.mosaicRule=n?n.mosaicRule:null,this.renderingRule=n?n.renderingRule:null,this._params=t.mixin({},this._url.query,{f:"image",interpolation:this.interpolation,format:this.format,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null},n?n.toJson():{}),this._initLayer=t.hitch(this,this._initLayer),this._queryVisibleRastersHandler=t.hitch(this,this._queryVisibleRastersHandler),this._visibleRasters=[],this.useMapImage=i&&i.useMapImage||!1,this.infoTemplate=i&&i.infoTemplate,this._rasterAttributeTableFields=[],this._rasterAttributeTableFeatures=[],this._loadCallback=i&&i.loadCallback,(n=i&&i.resourceInfo)?this._initLayer(n):d({url:this._url.path,content:t.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler}),this.registerConnectEvents()},disableClientCaching:!1,_initLayer:function(e){this._findCredential(),(this.credential&&this.credential.ssl||e&&e._ssl)&&this._useSSL();var i=this.minScale,n=this.maxScale;t.mixin(this,e),this.minScale=i,this.maxScale=n,this.initialExtent=this.fullExtent=this.extent=new p(e.extent),this.spatialReference=this.initialExtent.spatialReference,this.pixelSizeX=parseFloat(this.pixelSizeX),this.pixelSizeY=parseFloat(this.pixelSizeY);for(var s=this.minValues,r=this.maxValues,o=this.meanValues,a=this.stdvValues,l=this.bands=[],i=0,n=this.bandCount;n>i;i++)l[i]={min:s[i],max:r[i],mean:o[i],stddev:a[i]};if(this.timeInfo=(i=this.timeInfo)&&i.timeExtent?new v(i):null,n=this.fields=[],s=e.fields)for(i=0;i<s.length;i++)n.push(new b(s[i]));this.version=e.currentVersion,this.version||(this.version="fields"in e||"objectIdField"in e||"timeInfo"in e?10:9.3),h.isDefined(e.minScale)&&!this._hasMin&&this.setMinScale(e.minScale),h.isDefined(e.maxScale)&&!this._hasMax&&this.setMaxScale(e.maxScale),i={},e.defaultMosaicMethod?(i.method=e.defaultMosaicMethod,i.operation=e.mosaicOperator,i.sortField=e.sortField,i.sortValue=e.sortValue):i.method=g.METHOD_NONE,this.defaultMosaicRule=new g(i),this.defaultMosaicRule.ascending=!0,10<this.version&&this.hasRasterAttributeTable&&this.getRasterAttributeTable().then(t.hitch(this,function(e){e&&e.features&&0<e.features.length&&(this._rasterAttributeTableFeatures=t.clone(e.features)),e&&e.fields&&0<e.fields.length&&(this._rasterAttributeTableFields=t.clone(e.fields))})),this.loaded=!0,this.onLoad(this),(i=this._loadCallback)&&(delete this._loadCallback,i(this))},getKeyProperties:function(){var e=this._url.path+"/keyProperties",t=new i(u._dfdCanceller);return 10<this.version?(t._pendingDfd=d({url:e,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),t._pendingDfd.then(function(e){t.callback(e)},function(e){t.errback(e)})):(e=Error("Layer does not have key properties"),e.log=r.isDebug,t.errback(e)),t},getRasterAttributeTable:function(){var e=this._url.path+"/rasterAttributeTable",t=new i(u._dfdCanceller);return 10<this.version&&this.hasRasterAttributeTable?(t._pendingDfd=d({url:e,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),t._pendingDfd.then(function(e){t.callback(e)},function(e){t.errback(e)})):(e=Error("Layer does not support raster attribute table"),e.log=r.isDebug,t.errback(e)),t},_getRasterAttributeTableFeatures:function(){var e=new i;return this._rasterAttributeTableFeatures&&0<this._rasterAttributeTableFeatures.length?(e.resolve(this._rasterAttributeTableFeatures),e):10<this.version&&this.hasRasterAttributeTable?(e=this.getRasterAttributeTable(),e.then(t.hitch(this,function(e){e&&e.features&&0<e.features.length&&(this._rasterAttributeTableFeatures=t.clone(e.features))})),e):(e.resolve(this._rasterAttributeTableFeatures),e)},getCustomRasterFields:function(e){var i=e?e.rasterAttributeTableFieldPrefix:"",s={name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"esriFieldTypeString"};e=this.fields?t.clone(this.fields):[];var r=e.length;return e[r]={name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"esriFieldTypeString"},this.capabilities&&-1<this.capabilities.toLowerCase().indexOf("catalog")&&(e[r+1]=s),this._rasterAttributeTableFields&&0<this._rasterAttributeTableFields.length&&(s=n.filter(this._rasterAttributeTableFields,function(e){return"esriFieldTypeOID"!==e.type&&"value"!==e.name.toLowerCase()}),s=n.map(s,function(e){var n=t.clone(e);return n.name=i+e.name,n}),e=e.concat(s)),e},getImageUrl:function(e,i,n,r){var o=e.spatialReference.wkid||s.toJson(e.spatialReference.toJson());delete this._params._ts;var l=this._url.path+"/exportImage?";t.mixin(this._params,{bbox:e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,imageSR:o,bboxSR:o,size:i+","+n},this.disableClientCaching?{_ts:(new Date).getTime()}:{});var h=this._params.token=this._getToken();e=f.addProxy(l+a.objectToQuery(t.mixin(this._params,{f:"image"}))),e.length>c.defaults.io.postLength||this.useMapImage?this._jsonRequest=d({url:l,content:t.mixin(this._params,{f:"json"}),callbackParamName:"callback",load:function(e){var t=e.href;h&&(t+=-1===t.indexOf("?")?"?token="+h:"&token="+h),r(f.addProxy(t))},error:this._errorHandler}):r(e)},onRenderingChange:function(){},onMosaicRuleChange:function(){},setInterpolation:function(e,t){this.interpolation=this._params.interpolation=e,t||this.refresh(!0)},setCompressionQuality:function(e,t){this.compressionQuality=this._params.compressionQuality=e,t||this.refresh(!0)},setBandIds:function(e,t){var i=!1;this.bandIds!==e&&(i=!0),this.bandIds=e,this._params.bandIds=e.join(","),i&&!t&&this.onRenderingChange(),t||this.refresh(!0)},setDefaultBandIds:function(e){this.bandIds=this._params.bandIds=null,e||this.refresh(!0)},setDisableClientCaching:function(e){this.disableClientCaching=e},setMosaicRule:function(e,t){var i=!1;this.mosaicRule!==e&&(i=!0),this.mosaicRule=e,this._params.mosaicRule=s.toJson(e.toJson()),i&&!t&&this.onMosaicRuleChange(),t||this.refresh(!0)},setRenderingRule:function(e,t){var i=!1;this.renderingRule!==e&&(i=!0),this.renderingRule=e,this._params.renderingRule=e?s.toJson(e.toJson()):null,i&&!t&&this.onRenderingChange(),t||this.refresh(!0)},setImageFormat:function(e,t){this.format=this._params.format=e,t||this.refresh(!0)},setInfoTemplate:function(e){this.infoTemplate=e},setDefinitionExpression:function(e,t){var i=this.mosaicRule?this.mosaicRule.toJson():{};return this.mosaicRule||(this.defaultMosaicRule?i=this.defaultMosaicRule.toJson():i.method=g.METHOD_NONE),i.where=e,i=new g(i),this.setMosaicRule(i,t),this},getDefinitionExpression:function(){return this.mosaicRule?this.mosaicRule.where:null},refresh:function(e){if(e)this.inherited(arguments);else{var t=this.disableClientCaching;this.disableClientCaching=!0,this.inherited(arguments),this.disableClientCaching=t}},exportMapImage:function(e,i){var n=c.defaults.map,n=t.mixin({size:n.width+","+n.height},this._params,e?e.toJson(this.normalization):{},{f:"json"});delete n._ts,this._exportMapImage(this._url.path+"/exportImage",n,i)},queryVisibleRasters:function(e,t,n,s){var r=this._map,o=u._fixDfd(new i(u._dfdCanceller));this._visibleRasters=[];var a,l,c=!0;if(this.infoTemplate&&this.infoTemplate.info.fieldInfos&&0<this.infoTemplate.info.fieldInfos.length)for(c=!1,a=0;a<this.infoTemplate.info.fieldInfos.length;a++)(l=this.infoTemplate.info.fieldInfos[a])&&l.visible&&"raster.servicepixelvalue"!==l.fieldName.toLowerCase()&&(c=!0);a=new S,a.geometry=e.geometry.getCenter(),a.returnGeometry=!0,a.returnCatalogItems=c,a.timeExtent=e.timeExtent,a.mosaicRule=this.mosaicRule?this.mosaicRule:null,a.renderingRule=this.renderingRule?this.renderingRule:null,r&&(e=new m((r.extent.xmax-r.extent.xmin)/(2*r.width),(r.extent.ymax-r.extent.ymin)/(2*r.height),r.extent.spatialReference),a.pixelSize=e);var h=this;return e=new w(this.url),(o._pendingDfd=e.execute(a)).addCallbacks(function(e){h._queryVisibleRastersHandler(e,t,n,s,o)},function(e){h._resolve([e],null,s,o,!0)}),o},_queryVisibleRastersHandler:function(e,i,s,r,o){var a,l=e.features,c=e.value;e.catalogItems&&(l=e.catalogItems.features,a=e.properties.Values),this._visibleRasters=[];var d;e=-1<c.toLowerCase().indexOf("nodata"),c&&!l&&!e&&(l=[],d=new x(new p(this.fullExtent),null,{ObjectId:0}),l.push(d));var u=[];if(l){e=this.getCustomRasterFields(i);var f,m,_,g,y,v,b,w,S=this._getDomainFields(e),T=i?i.returnDomainValues:!1,j=i&&i.rasterAttributeTableFieldPrefix;this._getRasterAttributeTableFeatures().then(t.hitch(this,function(e){for(f=0;f<l.length;f++){if(d=l[f],d.setInfoTemplate(this.infoTemplate),c&&(m=c,a&&a.length>=f&&(_=a[f],m=_.replace(/ /gi,", ")),d.attributes["Raster.ItemPixelValue"]=m,d.attributes["Raster.ServicePixelValue"]=c,e&&0<e.length&&(g=n.filter(e,function(e){return e&&e.attributes?e.attributes.hasOwnProperty("Value")?e.attributes.Value==m:e.attributes.VALUE==m:void 0}),0<g.length&&(y=t.clone(g[0]),j&&y)))){w={};for(v in y.attributes)y.attributes.hasOwnProperty(v)&&(b=j+v,w[b]=y.attributes[v]);y.attributes=w,d.attributes=t.mixin(d.attributes,y.attributes)}T&&S&&0<S.length&&n.forEach(S,function(e){if(e){var t=d.attributes[e.name];h.isDefined(t)&&(t=this._getDomainValue(e.domain,t),h.isDefined(t)&&(d.attributes[e.name]=t))}},this),u.push(d),this._visibleRasters.push(d)}this._resolve([u,null,!0],null,s,o)}))}else this._resolve([u,null,null],null,s,o)},getVisibleRasters:function(){var e,t=this._visibleRasters,i=[];for(e in t)t.hasOwnProperty(e)&&i.push(t[e]);return i},_getDomainFields:function(e){if(e){var t=[];return n.forEach(e,function(e){if(e.domain){var i={};i.name=e.name,i.domain=e.domain,t.push(i)}}),t}},_getDomainValue:function(e,t){if(e&&e.codedValues){var i;return n.some(e.codedValues,function(e){return e.code===t?(i=e.name,!0):!1}),i}},_resolve:function(e,t,i,n,s){t&&this[t].apply(this,e),i&&i.apply(null,e),n&&u._resDfd(n,e,s)}}),o("extend-esri")&&t.setObject("layers.ArcGISImageServiceLayer",e,l),e})},"esri/renderers/SimpleRenderer":function(){define("dojo/_base/declare dojo/_base/lang dojo/has esri/kernel esri/lang esri/symbols/jsonUtils esri/renderers/Renderer".split(" "),function(e,t,i,n,s,r,o){return e=e(o,{declaredClass:"esri.renderer.SimpleRenderer",constructor:function(e){if(e&&!e.declaredClass){var t=e;this.symbol=(e=t.symbol)&&(e.declaredClass?e:r.fromJson(e)),this.label=t.label,this.description=t.description}else this.symbol=e},getSymbol:function(){return this.symbol},toJson:function(){var e=t.mixin(this.inherited(arguments),{type:"simple",label:this.label,description:this.description,symbol:this.symbol&&this.symbol.toJson()});return s.fixJson(e)}}),i("extend-esri")&&t.setObject("renderer.SimpleRenderer",e,n),e})},"esri/symbols/MarkerSymbol":function(){define("dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base esri/kernel esri/symbols/Symbol".split(" "),function(e,t,i,n,s,r){return e=e(r,{declaredClass:"esri.symbol.MarkerSymbol",angle:0,xoffset:0,yoffset:0,size:12,constructor:function(e){e&&t.isObject(e)&&(this.size="auto"===this.size?this.size:n.pt2px(this.size),this.xoffset=n.pt2px(this.xoffset),this.yoffset=n.pt2px(this.yoffset),this.angle&&(this.angle*=-1))},setAngle:function(e){return this.angle=e,this},setSize:function(e){return this.size=e,this},setOffset:function(e,t){return this.xoffset=e,this.yoffset=t,this},toJson:function(){var e=n.px2pt(this.size),e=isNaN(e)?void 0:e,i=n.px2pt(this.xoffset),i=isNaN(i)?void 0:i,s=n.px2pt(this.yoffset),s=isNaN(s)?void 0:s;return t.mixin(this.inherited("toJson",arguments),{size:"auto"===this.size?this.size:e,angle:this.angle&&-1*this.angle,xoffset:i,yoffset:s})}}),i("extend-esri")&&t.setObject("symbol.MarkerSymbol",e,s),e})},"esri/tasks/DistanceParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has esri/kernel esri/geometry/jsonUtils".split(" "),function(e,t,i,n,s,r){return e=e(null,{declaredClass:"esri.tasks.DistanceParameters",geometry1:null,geometry2:null,distanceUnit:null,geodesic:null,toJson:function(){var e={},t=this.geometry1;return t&&(e.geometry1=i.toJson({geometryType:r.getJsonType(t),geometry:t})),(t=this.geometry2)&&(e.geometry2=i.toJson({geometryType:r.getJsonType(t),geometry:t})),e.sr=i.toJson(this.geometry1.spatialReference.toJson()),this.distanceUnit&&(e.distanceUnit=this.distanceUnit),this.geodesic&&(e.geodesic=this.geodesic),e}}),n("extend-esri")&&t.setObject("tasks.DistanceParameters",e,s),e})},"dijit/_base/place":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/window","../place","../main"],function(e,t,i,n,s){var r={getViewport:function(){return i.getBox()}};return r.placeOnScreen=n.at,r.placeOnScreenAroundElement=function(e,i,s,r){var o;if(t.isArray(s))o=s;else{o=[];for(var a in s)o.push({aroundCorner:a,corner:s[a]})}return n.around(e,i,o,!0,r)},r.placeOnScreenAroundNode=r.placeOnScreenAroundElement,r.placeOnScreenAroundRectangle=r.placeOnScreenAroundElement,r.getPopupAroundAlignment=function(t,i){var n={};return e.forEach(t,function(e){var t=i;switch(e){case"after":n[i?"BR":"BL"]=i?"BL":"BR";break;case"before":n[i?"BL":"BR"]=i?"BR":"BL";break;case"below-alt":t=!t;case"below":n[t?"BL":"BR"]=t?"TL":"TR",n[t?"BR":"BL"]=t?"TR":"TL";break;case"above-alt":t=!t;default:n[t?"TL":"TR"]=t?"BL":"BR",n[t?"TR":"TL"]=t?"BR":"BL"}}),n},t.mixin(s,r),s})},"esri/layers/RangeDomain":function(){define("dojo/_base/declare dojo/_base/lang dojo/has esri/kernel esri/lang esri/layers/Domain".split(" "),function(e,t,i,n,s,r){return e=e([r],{declaredClass:"esri.layers.RangeDomain",constructor:function(e){e&&t.isObject(e)&&(this.minValue=e.range[0],this.maxValue=e.range[1])},toJson:function(){var e=this.inherited(arguments);return e.range=[this.minValue,this.maxValue],s.fixJson(e)}}),i("extend-esri")&&t.setObject("layers.RangeDomain",e,n),e})},"esri/layers/Field":function(){define("dojo/_base/declare dojo/_base/lang dojo/has esri/kernel esri/layers/RangeDomain esri/layers/CodedValueDomain".split(" "),function(e,t,i,n,s,r){return e=e(null,{declaredClass:"esri.layers.Field",constructor:function(e){if(e&&t.isObject(e)&&(this.name=e.name,this.type=e.type,this.alias=e.alias,this.length=e.length,this.editable=e.editable,this.nullable=e.nullable,(e=e.domain)&&t.isObject(e)))switch(e.type){case"range":this.domain=new s(e);break;case"codedValue":this.domain=new r(e)}}}),i("extend-esri")&&t.setObject("layers.Field",e,n),e})},"esri/geometry/Point":function(){define("dojo/_base/declare dojo/_base/lang dojo/has esri/kernel esri/lang esri/SpatialReference esri/geometry/Geometry".split(" "),function(e,t,i,n,s,r,o){function a(e,t){t>89.99999?t=89.99999:-89.99999>t&&(t=-89.99999);var i=t*u;return[e*u*c,c/2*Math.log((1+Math.sin(i))/(1-Math.sin(i)))]}function l(e,t,i){return e=e/c*d,i?(t=h/2-2*Math.atan(Math.exp(-1*t/c)),[e,t*d]):(i=e-360*Math.floor((e+180)/360),t=h/2-2*Math.atan(Math.exp(-1*t/c)),[i,t*d])}var c=6378137,h=3.141592653589793,d=57.29577951308232,u=.017453292519943,f={type:"point",x:0,y:0};return e=e(o,{declaredClass:"esri.geometry.Point",constructor:function(e,i,n){t.mixin(this,f),t.isArray(e)?(this.x=e[0],this.y=e[1],this.spatialReference=i):t.isObject(e)?(t.mixin(this,e),s.isDefined(this.latitude)&&(this.y=this.latitude),s.isDefined(this.longitude)&&(this.x=this.longitude),this.spatialReference&&(this.spatialReference=new r(this.spatialReference))):(this.x=e,this.y=i,this.spatialReference=n),this.verifySR()},offset:function(e,t){return new this.constructor(this.x+e,this.y+t,this.spatialReference)},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setLongitude:function(e){var t=this.spatialReference;return t&&(t._isWebMercator()?this.x=a(e,this.y)[0]:4326===t.wkid&&(this.x=e)),this},setLatitude:function(e){var t=this.spatialReference;return t&&(t._isWebMercator()?this.y=a(this.x,e)[1]:4326===t.wkid&&(this.y=e)),this},getLongitude:function(){var e,t=this.spatialReference;return t&&(t._isWebMercator()?e=l(this.x,this.y)[0]:4326===t.wkid&&(e=this.x)),e},getLatitude:function(){var e,t=this.spatialReference;return t&&(t._isWebMercator()?e=l(this.x,this.y)[1]:4326===t.wkid&&(e=this.y)),e},update:function(e,t){return this.x=e,this.y=t,this},normalize:function(){var e=this.x,t=this.spatialReference;if(t){var i=t._getInfo();if(i){var n=i.valid[0],s=i.valid[1],i=2*s;e>s?(n=Math.ceil(Math.abs(e-s)/i),e-=n*i):n>e&&(n=Math.ceil(Math.abs(e-n)/i),e+=n*i)}}return new this.constructor(e,this.y,t)},toJson:function(){var e={x:this.x,y:this.y},t=this.spatialReference;return t&&(e.spatialReference=t.toJson()),e}}),e.lngLatToXY=a,e.xyToLngLat=l,e.defaultProps=f,i("extend-esri")&&(t.setObject("geometry.Point",e,n),n.geometry.defaultPoint=f),e})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane dojo/text!./templates/Dialog.html dojo/i18n!./nls/common".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p,m,_,g,y,v,b,x,w,S,T,j,E,k,C){b=n("dijit._DialogBase"+(m("dojo-bidi")?"_NoBidi":""),[w,T,j,S],{templateString:C,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:b.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,doLayout:!1,draggable:!0,_setDraggableAttr:function(e){this._set("draggable",e)},maxRatio:.9,closable:!0,_setClosableAttr:function(e){this.closeButtonNode.style.display=e?"":"none",this._set("closable",e)},postMixInProperties:function(){var e=h.getLocalization("dijit","common");u.mixin(this,e),this.inherited(arguments)},postCreate:function(){l.set(this.domNode,{display:"none",position:"absolute"}),this.ownerDocumentBody.appendChild(this.domNode),this.inherited(arguments),i.after(this,"onExecute",u.hitch(this,"hide"),!0),i.after(this,"onCancel",u.hitch(this,"hide"),!0),this._modalconnects=[]},onLoad:function(){this._size(),this._position(),this.autofocus&&D.isTop(this)&&(this._getFocusItems(this.domNode),v.focus(this._firstFocusItem)),this.inherited(arguments)},focus:function(){this._getFocusItems(this.domNode),v.focus(this._firstFocusItem)},_endDrag:function(){var e=a.position(this.domNode),t=_.getBox(this.ownerDocument);e.y=Math.min(Math.max(e.y,0),t.h-e.h),e.x=Math.min(Math.max(e.x,0),t.w-e.w),this._relativePosition=e,this._position()},_setup:function(){var e=this.domNode;this.titleBar&&this.draggable?(this._moveable=new(6==m("ie")?y:g)(e,{handle:this.titleBar}),i.after(this._moveable,"onMoveStop",u.hitch(this,"_endDrag"),!0)):o.add(e,"dijitDialogFixed"),this.underlayAttrs={dialogId:this.id,"class":t.map(this["class"].split(/\s/),function(e){return e+"_underlay"}).join(" "),_onKeyDown:u.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this._checkIfSingleChild(),this._singleChild?"undefined"!=typeof this._singleChildOriginalStyle&&(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle):l.set(this.containerNode,{width:"auto",height:"auto"});var e=a.position(this.domNode),t=_.getBox(this.ownerDocument);if(t.w*=this.maxRatio,t.h*=this.maxRatio,e.w>=t.w||e.h>=t.h){var i=a.position(this.containerNode),n=Math.min(e.w,t.w)-(e.w-i.w),e=Math.min(e.h,t.h)-(e.h-i.h);this._singleChild&&this._singleChild.resize?("undefined"==typeof this._singleChildOriginalStyle&&(this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText),this._singleChild.resize({w:n,h:e})):l.set(this.containerNode,{width:n+"px",height:e+"px",overflow:"auto",position:"relative"})}else this._singleChild&&this._singleChild.resize&&this._singleChild.resize()},_position:function(){if(!o.contains(this.ownerDocumentBody,"dojoMove")){var e=this.domNode,t=_.getBox(this.ownerDocument),i=this._relativePosition,n=i?null:a.position(e);l.set(e,{left:Math.floor(t.l+(i?i.x:(t.w-n.w)/2))+"px",top:Math.floor(t.t+(i?i.y:(t.h-n.h)/2))+"px"})}},_onKey:function(e){if(e.keyCode==d.TAB){this._getFocusItems(this.domNode);var t=e.target;this._firstFocusItem==this._lastFocusItem?(e.stopPropagation(),e.preventDefault()):t==this._firstFocusItem&&e.shiftKey?(v.focus(this._lastFocusItem),e.stopPropagation(),e.preventDefault()):t==this._lastFocusItem&&!e.shiftKey&&(v.focus(this._firstFocusItem),e.stopPropagation(),e.preventDefault())}else this.closable&&e.keyCode==d.ESCAPE&&(this.onCancel(),e.stopPropagation(),e.preventDefault())},show:function(){if(!this.open){this._started||this.startup(),this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0),this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),D.hide(this));var e=_.get(this.ownerDocument);this._modalconnects.push(f(e,"scroll",u.hitch(this,"resize"))),this._modalconnects.push(f(this.domNode,"keydown",u.hitch(this,"_onKey"))),l.set(this.domNode,{opacity:0,display:""}),this._set("open",!0),this._onShow(),this._size(),this._position();var t;return this._fadeInDeferred=new s(u.hitch(this,function(){t.stop(),delete this._fadeInDeferred})),e=this._fadeInDeferred.promise,t=c.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:u.hitch(this,function(){D.show(this,this.underlayAttrs)}),onEnd:u.hitch(this,function(){this.autofocus&&D.isTop(this)&&(this._getFocusItems(this.domNode),v.focus(this._firstFocusItem)),this._fadeInDeferred.resolve(!0),delete this._fadeInDeferred})}).play(),e}},hide:function(){if(this._alreadyInitialized&&this.open){this._fadeInDeferred&&this._fadeInDeferred.cancel();var e;this._fadeOutDeferred=new s(u.hitch(this,function(){e.stop(),delete this._fadeOutDeferred})),this._fadeOutDeferred.then(u.hitch(this,"onHide"));var t=this._fadeOutDeferred.promise;e=c.fadeOut({node:this.domNode,duration:this.duration,onEnd:u.hitch(this,function(){this.domNode.style.display="none",D.hide(this),this._fadeOutDeferred.resolve(!0),delete this._fadeOutDeferred})}).play(),this._scrollConnected&&(this._scrollConnected=!1);for(var i;i=this._modalconnects.pop();)i.remove();return this._relativePosition&&delete this._relativePosition,this._set("open",!1),t}},resize:function(){"none"!=this.domNode.style.display&&(this._size(),m("touch")||this._position())},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel(),this._fadeOutDeferred&&this._fadeOutDeferred.cancel(),this._moveable&&this._moveable.destroy();for(var e;e=this._modalconnects.pop();)e.remove();D.hide(this),this.inherited(arguments)}}),m("dojo-bidi")&&(b=n("dijit._DialogBase",b,{_setTitleAttr:function(e){this._set("title",e),this.titleNode.innerHTML=e,this.applyTextDir(this.titleNode)},_setTextDirAttr:function(e){this._created&&this.textDir!=e&&(this._set("textDir",e),this.set("title",this.title))}}));var M=n("dijit.Dialog",[k,b],{});M._DialogBase=b;var D=M._DialogLevelManager={_beginZIndex:950,show:function(e,t){L[L.length-1].focus=v.curNode;var i=L[L.length-1].dialog?L[L.length-1].zIndex+2:M._DialogLevelManager._beginZIndex;l.set(e.domNode,"zIndex",i),E.show(t,i-1),L.push({dialog:e,underlayAttrs:t,zIndex:i})},hide:function(e){if(L[L.length-1].dialog==e){L.pop();var i=L[L.length-1];if(1==L.length?E.hide():E.show(i.underlayAttrs,i.zIndex-1),e.refocus&&(e=i.focus,!i.dialog||e&&r.isDescendant(e,i.dialog.domNode)||(i.dialog._getFocusItems(i.dialog.domNode),e=i.dialog._firstFocusItem),e))try{e.focus()}catch(n){}}else i=t.indexOf(t.map(L,function(e){return e.dialog}),e),-1!=i&&L.splice(i,1)},isTop:function(e){return L[L.length-1].dialog==e}},L=M._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];return v.watch("curNode",function(e,t,i){if(e=L[L.length-1].dialog,i&&e&&!e._fadeOutDeferred&&i.ownerDocument==e.ownerDocument){do if(i==e.domNode||o.contains(i,"dijitPopup"))return;while(i=i.parentNode);e.focus()}}),m("dijit-legacy-requires")&&p(0,function(){e(["dijit/TooltipDialog"])}),M})},"dijit/_base/focus":function(){define("dojo/_base/array dojo/dom dojo/_base/lang dojo/topic dojo/_base/window ../focus ../selection ../main".split(" "),function(e,t,i,n,s,r,o,a){return r.focus=function(e){if(e){var t="node"in e?e.node:e,i=e.bookmark;e=e.openedForWindow;var n=i?i.isCollapsed:!1;if(t){var o="iframe"==t.tagName.toLowerCase()?t.contentWindow:t;if(o&&o.focus)try{o.focus()}catch(l){}r._onFocusNode(t)}if(i&&s.withGlobal(e||s.global,a.isCollapsed)&&!n){e&&e.focus();try{s.withGlobal(e||s.global,a.moveToBookmark,null,[i])}catch(c){}}}},r.watch("curNode",function(e,t,i){a._curFocus=i,a._prevFocus=t,i&&n.publish("focusNode",i)}),r.watch("activeStack",function(e,t,i){a._activeStack=i}),r.on("widget-blur",function(e,t){n.publish("widgetBlur",e,t)}),r.on("widget-focus",function(e,t){n.publish("widgetFocus",e,t)}),i.mixin(a,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return a.getBookmark().isCollapsed},getBookmark:function(){return(s.global==window?o:new o.SelectionManager(s.global)).getBookmark()},moveToBookmark:function(e){return(s.global==window?o:new o.SelectionManager(s.global)).moveToBookmark(e)},getFocus:function(e,i){var n=!r.curNode||e&&t.isDescendant(r.curNode,e.domNode)?a._prevFocus:r.curNode;return{node:n,bookmark:n&&n==r.curNode&&s.withGlobal(i||s.global,a.getBookmark),openedForWindow:i}},_activeStack:[],registerIframe:function(e){return r.registerIframe(e)},unregisterIframe:function(e){e&&e.remove()},registerWin:function(e,t){return r.registerWin(e,t)},unregisterWin:function(e){e&&e.remove()}}),a})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),function(e,t,i,n,s,r,o){var a={_isElementShown:function(e){var t=n.get(e);return"hidden"!=t.visibility&&"collapsed"!=t.visibility&&"none"!=t.display&&"hidden"!=i.get(e,"type")},hasDefaultTabStop:function(e){switch(e.nodeName.toLowerCase()){case"a":return i.has(e,"href");case"area":case"button":case"input":case"object":case"select":case"textarea":return!0;case"iframe":var t;try{var n=e.contentDocument;if("designMode"in n&&"on"==n.designMode)return!0;t=n.body}catch(s){try{t=e.contentWindow.document.body}catch(r){return!1}}return t&&("true"==t.contentEditable||t.firstChild&&"true"==t.firstChild.contentEditable);default:return"true"==e.contentEditable}},isTabNavigable:function(e){return i.get(e,"disabled")?!1:i.has(e,"tabIndex")?0<=i.get(e,"tabIndex"):a.hasDefaultTabStop(e)},_getTabNavigable:function(e){function t(e){return e&&"input"==e.tagName.toLowerCase()&&e.type&&"radio"==e.type.toLowerCase()&&e.name&&e.name.toLowerCase()}var n,s,o,l,c,h,d={},u=a._isElementShown,f=a.isTabNavigable,p=function(e){for(e=e.firstChild;e;e=e.nextSibling)if(!(1!=e.nodeType||9>=r("ie")&&"HTML"!==e.scopeName)&&u(e)){if(f(e)){var a=+i.get(e,"tabIndex");i.has(e,"tabIndex")&&0!=a?a>0&&((!o||l>a)&&(l=a,o=e),(!c||a>=h)&&(h=a,c=e)):(n||(n=e),s=e),a=t(e),i.get(e,"checked")&&a&&(d[a]=e)}"SELECT"!=e.nodeName.toUpperCase()&&p(e)}};return u(e)&&p(e),{first:d[t(n)]||n,last:d[t(s)]||s,lowest:d[t(o)]||o,highest:d[t(c)]||c}},getFirstInTabbingOrder:function(e,i){var n=a._getTabNavigable(t.byId(e,i));return n.lowest?n.lowest:n.first},getLastInTabbingOrder:function(e,i){var n=a._getTabNavigable(t.byId(e,i));return n.last?n.last:n.highest}};return s.mixin(o,a),a})},"esri/tasks/LinearUnit":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(e,t,i,n){return e=e(null,{declaredClass:"esri.tasks.LinearUnit",constructor:function(e){e&&t.mixin(this,e)},distance:0,units:null,toJson:function(){var e={};return this.distance&&(e.distance=this.distance),this.units&&(e.units=this.units),e}}),i("extend-esri")&&t.setObject("tasks.LinearUnit",e,n),e})},"esri/tasks/GPResultImageLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has dojo/io-query esri/kernel esri/layers/ArcGISDynamicMapServiceLayer".split(" "),function(e,t,i,n,s,r,o){return e=e(o,{declaredClass:"esri.tasks._GPResultImageLayer",constructor:function(e,i){i&&i.imageParameters&&i.imageParameters.extent&&(this.initialExtent=this.fullExtent=i.imageParameters.extent,this.spatialReference=this.initialExtent.spatialReference),this.getImageUrl=t.hitch(this,this.getImageUrl),this.loaded=!0,this.onLoad(this)},getImageUrl:function(e,n,r,o){var a=e.spatialReference.wkid;o(this._url.path+"?"+s.objectToQuery(t.mixin(this._params,{f:"image",bbox:i.toJson(e.toJson()),bboxSR:a,imageSR:a,size:n+","+r})))}}),n("extend-esri")&&t.setObject("tasks._GPResultImageLayer",e,r),e})},"dijit/form/_ToggleButtonMixin":function(){define(["dojo/_base/declare","dojo/dom-attr"],function(e,t){return e("dijit.form._ToggleButtonMixin",null,{checked:!1,_aria_attr:"aria-pressed",_onClick:function(){var e=this.checked;this._set("checked",!e);var t=this.inherited(arguments);return this.set("checked",t?this.checked:e),t},_setCheckedAttr:function(e,i){this._set("checked",e);var n=this.focusNode||this.domNode;this._created&&t.get(n,"checked")!=!!e&&t.set(n,"checked",!!e),n.setAttribute(this._aria_attr,String(e)),this._handleOnChange(e,i)},postCreate:function(){this.inherited(arguments);var e=this.focusNode||this.domNode;this.checked&&e.setAttribute("checked","checked")},reset:function(){this._hasBeenBlurred=!1,this.set("checked",this.params.checked||!1)}})})},"esri/map":function(){define("require dojo/_base/kernel dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/event dojo/on dojo/aspect dojo/dom dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/registry esri/kernel esri/config esri/sniff esri/lang esri/_coremap esri/MapNavigationManager".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p,m,_,g,y,v,b){var x={up:"panUp",right:"panRight",down:"panDown",left:"panLeft"},w={upperRight:"panUpperRight",lowerRight:"panLowerRight",lowerLeft:"panLowerLeft",upperLeft:"panUpperLeft"},S=n.connect,T=n.disconnect,j=d.create,E=f.set,k=s.hitch,C=u.getMarginBox,M=t.deprecated,D=s.mixin,L=0;
return t=i(v,{declaredClass:"esri.Map",constructor:function(t,i){D(this,{_slider:null,_navDiv:null,_mapParams:D({attributionWidth:.45,slider:!0,nav:!1,logo:!0,sliderStyle:"small",sliderPosition:"top-left",sliderOrientation:"vertical",autoResize:!0},i||{})}),D(this,{isDoubleClickZoom:!1,isShiftDoubleClickZoom:!1,isClickRecenter:!1,isScrollWheelZoom:!1,isPan:!1,isRubberBandZoom:!1,isKeyboardNavigation:!1,isPanArrows:!1,isZoomSlider:!1}),s.isFunction(m._css)&&(m._css=m._css(this._mapParams.force3DTransforms),this.force3DTransforms=this._mapParams.force3DTransforms);var n=g("esri-transforms")&&g("esri-transitions");if(this.navigationMode=this._mapParams.navigationMode||n&&"css-transforms"||"classic","css-transforms"===this.navigationMode&&!n&&(this.navigationMode="classic"),this.fadeOnZoom=y.isDefined(this._mapParams.fadeOnZoom)?this._mapParams.fadeOnZoom:"css-transforms"===this.navigationMode,"css-transforms"!==this.navigationMode&&(this.fadeOnZoom=!1),this.setMapCursor("default"),this.smartNavigation=i&&i.smartNavigation,!(y.isDefined(this.smartNavigation)||!g("mac")||g("esri-touch")||g("esri-pointer")||3.5>=g("ff"))){var o=navigator.userAgent.match(/Mac\s+OS\s+X\s+([\d]+)(\.|\_)([\d]+)\D/i);o&&y.isDefined(o[1])&&y.isDefined(o[3])&&(n=parseInt(o[1],10),o=parseInt(o[3],10),this.smartNavigation=n>10||10===n&&o>=6)}this.showAttribution=y.isDefined(this._mapParams.showAttribution)?this._mapParams.showAttribution:!0,this._onLoadHandler_connect=S(this,"onLoad",this,"_onLoadInitNavsHandler");var c=j("div",{"class":"esriControlsBR"+(this._mapParams.nav?" withPanArrows":"")},this.root);if(this.showAttribution)if(n=s.getObject("esri.dijit.Attribution",!1))this._initAttribution(n,c);else{var d=L++,u=this;this._rids&&this._rids.push(d),e(["esri/dijit/Attribution"],function(e){var t=u._rids?r.indexOf(u._rids,d):-1;-1!==t&&(u._rids.splice(t,1),u._initAttribution(e,c))})}this._mapParams.logo&&(n={},6===g("ie")&&(n.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true', sizingMethod='crop', src='"+e.toUrl("esri")+"/images/map/logo-med.png')"),n=this._ogol=j("div",{style:n},c),25e4>this.root.clientWidth*this.root.clientHeight?h.add(n,"logo-sm"):h.add(n,"logo-med"),!g("esri-touch")&&!g("esri-pointer")&&(this._ogol_connect=S(n,"onclick",this,"_openLogoLink"))),this.navigationManager=new b(this),i&&i.basemap&&(this._onLoadFix=!0,this.setBasemap(i.basemap),this._onLoadFix=!1),(this.autoResize=this._mapParams.autoResize)&&(n=(n=p.getEnclosingWidget(this.container))&&n.resize?n:window,o=k(this,this.resize),this._rszSignal=a.pausable(n,"resize",o),this._oriSignal=a.pausable(window,"orientationchange",o),l.after(n,"resize",o,!0))},_initAttribution:function(e,t){var i=j("span",{"class":"esriAttribution"},t,"first");E(i,"maxWidth",Math.floor(this.width*this._mapParams.attributionWidth)+"px"),this._connects.push(S(i,"onclick",function(){h.contains(this,"esriAttributionOpen")?h.remove(this,"esriAttributionOpen"):this.scrollWidth>this.clientWidth&&h.add(this,"esriAttributionOpen")})),this.attribution=new e({map:this},i)},_cleanUp:function(){this.disableMapNavigation(),this.navigationManager.destroy();var e=this._slider;e&&e.destroy&&!e._destroyed&&e.destroy();var e=this._navDiv,t=this.attribution;e&&d.destroy(e),t&&t.destroy(),this._connects.push(this._slider_connect,this._ogol_connect,this._rszSignal,this._oriSignal),r.forEach(this._connects,T),this.attribution=this.navigationManager=this._rids=this._connects=this._slider_connect=this._ogol_connect=this._rszSignal=this._oriSignal=null,this.inherited("_cleanUp",arguments)},_isPanningOrZooming:function(){return this.__panning||this.__zooming},_canZoom:function(e){var t=this.getLevel();return!this.__tileInfo||!(t===this.getMinZoom()&&0>e||t===this.getMaxZoom()&&e>0)},_onLoadInitNavsHandler:function(){if(this.enableMapNavigation(),this._createNav(),"small"!==this._mapParams.sliderStyle&&this._createSlider){if(this._mapParams.slider){var t=-1!==this._getSliderClass(!0).indexOf("Horizontal"),t=[t?"dijit.form.HorizontalSlider":"dijit.form.VerticalSlider",t?"dijit.form.HorizontalRule":"dijit.form.VerticalRule",t?"dijit.form.HorizontalRuleLabels":"dijit.form.VerticalRuleLabels"];if(r.some(t,function(e){return!s.getObject(e,!1)})){var t=r.map(t,function(e){return e.replace(/\./g,"/")}),i=L++,n=this;this._rids&&this._rids.push(i),e(t,function(){var e=n._rids?r.indexOf(n._rids,i):-1;-1!==e&&(n._rids.splice(e,1),n._createSlider.apply(n,arguments))})}else t=r.map(t,function(e){return s.getObject(e,!1)}),this._createSlider.apply(this,t)}}else this._createSimpleSlider();T(this._onLoadHandler_connect)},_createNav:function(){if(this._mapParams.nav){var e,t,i,n=h.add,s=this.id;this._navDiv=j("div",{id:s+"_navdiv"},this.root),n(this._navDiv,"navDiv");var r,o=this.width/2,a=this.height/2;for(i in x)t=x[i],e=j("div",{id:s+"_pan_"+i},this._navDiv),n(e,"fixedPan "+t),"up"===i||"down"===i?(r=parseInt(C(e).w,10)/2,E(e,{left:o-r+"px",zIndex:30})):(r=parseInt(C(e).h,10)/2,E(e,{top:a-r+"px",zIndex:30})),this._connects.push(S(e,"onclick",k(this,this[t])));this._onMapResizeNavHandler_connect=S(this,"onResize",this,"_onMapResizeNavHandler");for(i in w)t=w[i],e=j("div",{id:s+"_pan_"+i,style:{zIndex:30}},this._navDiv),n(e,"fixedPan "+t),this._connects.push(S(e,"onclick",k(this,this[t])));this.isPanArrows=!0}},_onMapResizeNavHandler:function(e,t,i){e=this.id,t/=2,i/=2;var n,s,r,o=c.byId;for(n in x)s=o(e+"_pan_"+n),"up"===n||"down"===n?(r=parseInt(C(s).w,10)/2,E(s,"left",t-r+"px")):(r=parseInt(C(s).h,10)/2,E(s,"top",i-r+"px"))},_createSimpleSlider:function(){if(this._mapParams.slider){var e=this._slider=j("div",{id:this.id+"_zoom_slider","class":this._getSliderClass(),style:{zIndex:30}}),t=g("esri-touch")&&!g("ff")?"touchstart":g("esri-pointer")?navigator.msPointerEnabled?"MSPointerDown":"pointerdown":"onclick",i=j("div",{"class":"esriSimpleSliderIncrementButton"},e),n=j("div",{"class":"esriSimpleSliderDecrementButton"},e);this._incButton=i,this._decButton=n,i.innerHTML="+",n.innerHTML="&ndash;",8>g("ie")&&h.add(n,"dj_ie67Fix"),this._connects.push(S(i,t,this,this._simpleSliderChangeHandler)),this._connects.push(S(n,t,this,this._simpleSliderChangeHandler)),"touchstart"==t&&(this._connects.push(S(i,"onclick",this,this._simpleSliderChangeHandler)),this._connects.push(S(n,"onclick",this,this._simpleSliderChangeHandler))),(-1<this.getMaxZoom()||-1<this.getMinZoom())&&this._connects.push(S(this,"onZoomEnd",this,this._simpleSliderZoomHandler)),10>g("ie")&&c.setSelectable(e,!1),this.root.appendChild(e),this.isZoomSlider=!0}},_simpleSliderChangeHandler:function(e){o.stop(e),e=-1!==e.currentTarget.className.indexOf("IncrementButton")?!0:!1,this._extentUtil({numLevels:e?1:-1})},_simpleSliderZoomHandler:function(e,t,i,n){var s;e=this._incButton,t=this._decButton,n===this.getMaxZoom()?s=e:n===this.getMinZoom()&&(s=t),s?(h.add(s,"esriSimpleSliderDisabledButton"),h.remove(s===e?t:e,"esriSimpleSliderDisabledButton")):(h.remove(e,"esriSimpleSliderDisabledButton"),h.remove(t,"esriSimpleSliderDisabledButton"))},_getSliderClass:function(e){e=e?"Large":"Simple";var t=this._mapParams.sliderOrientation,i=this._mapParams.sliderPosition||"",t=t&&"horizontal"===t.toLowerCase()?"esri"+e+"SliderHorizontal":"esri"+e+"SliderVertical";if(i)switch(i.toLowerCase()){case"top-left":i="esri"+e+"SliderTL";break;case"top-right":i="esri"+e+"SliderTR";break;case"bottom-left":i="esri"+e+"SliderBL";break;case"bottom-right":i="esri"+e+"SliderBR"}return"esri"+e+"Slider "+t+" "+i},_createSlider:function(e,t,i){if(this._mapParams.slider){var n=j("div",{id:this.id+"_zoom_slider"},this.root),s=_.defaults.map,o=this._getSliderClass(!0),a=-1!==o.indexOf("Horizontal");-1!==o.indexOf("SliderTL")||o.indexOf("SliderBL"),-1!==o.indexOf("SliderTL")||o.indexOf("SliderTR");var l=this.getNumLevels();if(l>0){var c,h,d=this._mapParams.sliderLabels,u=!!d;if(s=!1!==d){var f=a?"bottomDecoration":"rightDecoration";if(!d)for(d=[],a=0;l>a;a++)d[a]="";r.forEach([{"class":"esriLargeSliderTicks",container:f,count:l,dijitClass:t},{"class":u&&"esriLargeSliderLabels",container:f,count:l,labels:d,dijitClass:i}],function(e){var i=j("div"),s=e.dijitClass;delete e.dijitClass,n.appendChild(i),s===t?c=new s(e,i):h=new s(e,i)})}e=this._slider=new e({id:n.id,"class":o,minimum:this.getMinZoom(),maximum:this.getMaxZoom(),discreteValues:l,value:this.getLevel(),clickSelect:!0,intermediateChanges:!0,style:"z-index:30;"},n),e.startup(),s&&(c.startup(),h.startup()),this._slider_connect=S(e,"onChange",this,"_onSliderChangeHandler"),this._connects.push(S(this,"onExtentChange",this,"_onExtentChangeSliderHandler")),this._connects.push(S(e._movable,"onFirstMove",this,"_onSliderMoveStartHandler"))}else{for(e=this._slider=new e({id:n.id,"class":o,minimum:0,maximum:2,discreteValues:3,value:1,clickSelect:!0,intermediateChanges:s.sliderChangeImmediate,style:"height:50px; z-index:30;"},n),i=e.domNode.firstChild.childNodes,a=1;3>=a;a++)E(i[a],"visibility","hidden");e.startup(),this._slider_connect=S(e,"onChange",this,"_onDynSliderChangeHandler"),this._connects.push(S(this,"onExtentChange",this,"_onExtentChangeDynSliderHandler"))}if(i=e.decrementButton,e.incrementButton.style.outline="none",i.style.outline="none",e.sliderHandle.style.outline="none",e._onKeyPress=function(){},e=e._movable){var p=e.onMouseDown;e.onMouseDown=function(e){9>g("ie")&&1!==e.button||p.apply(this,arguments)}}this.isZoomSlider=!0}},_onSliderMoveStartHandler:function(){T(this._slider_connect),T(this._slidermovestop_connect),this._slider_connect=S(this._slider,"onChange",this,"_onSliderChangeDragHandler"),this._slidermovestop_connect=S(this._slider._movable,"onMoveStop",this,"_onSliderMoveEndHandler")},_onSliderChangeDragHandler:function(e){this._extentUtil({targetLevel:e})},_onSliderMoveEndHandler:function(){T(this._slider_connect),T(this._slidermovestop_connect)},_onSliderChangeHandler:function(e){this.setLevel(e)},_updateSliderValue:function(e,t){T(this._slider_connect);var i=this._slider,n=i._onChangeActive;i._onChangeActive=!1,i.set("value",e),i._onChangeActive=n,this._slider_connect=S(i,"onChange",this,t)},_onExtentChangeSliderHandler:function(e,t,i,n){T(this._slidermovestop_connect),this._updateSliderValue(n.level,"_onSliderChangeHandler")},_onDynSliderChangeHandler:function(e){this._extentUtil({numLevels:e>0?1:-1})},_onExtentChangeDynSliderHandler:function(){this._updateSliderValue(1,"_onDynSliderChangeHandler")},_openLogoLink:function(e){window.open(_.defaults.map.logoLink,"_blank"),o.stop(e)},enableMapNavigation:function(){this.navigationManager.enableNavigation()},disableMapNavigation:function(){this.navigationManager.disableNavigation()},enableDoubleClickZoom:function(){this.isDoubleClickZoom||(this.navigationManager.enableDoubleClickZoom(),this.isDoubleClickZoom=!0)},disableDoubleClickZoom:function(){this.isDoubleClickZoom&&(this.navigationManager.disableDoubleClickZoom(),this.isDoubleClickZoom=!1)},enableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom||(M(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",null,"v2.0"),this.navigationManager.enableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!0)},disableShiftDoubleClickZoom:function(){this.isShiftDoubleClickZoom&&(M(this.declaredClass+": Map.(enable/disable)ShiftDoubleClickZoom deprecated. Shift-Double-Click zoom behavior will not be supported.",null,"v2.0"),this.navigationManager.disableShiftDoubleClickZoom(),this.isShiftDoubleClickZoom=!1)},enableClickRecenter:function(){this.isClickRecenter||(this.navigationManager.enableClickRecenter(),this.isClickRecenter=!0)},disableClickRecenter:function(){this.isClickRecenter&&(this.navigationManager.disableClickRecenter(),this.isClickRecenter=!1)},enablePan:function(){this.isPan||(this.navigationManager.enablePan(),this.isPan=!0)},disablePan:function(){this.isPan&&(this.navigationManager.disablePan(),this.isPan=!1)},enableRubberBandZoom:function(){this.isRubberBandZoom||(this.navigationManager.enableRubberBandZoom(),this.isRubberBandZoom=!0)},disableRubberBandZoom:function(){this.isRubberBandZoom&&(this.navigationManager.disableRubberBandZoom(),this.isRubberBandZoom=!1)},enableKeyboardNavigation:function(){this.isKeyboardNavigation||(this.navigationManager.enableKeyboardNavigation(),this.isKeyboardNavigation=!0)},disableKeyboardNavigation:function(){this.isKeyboardNavigation&&(this.navigationManager.disableKeyboardNavigation(),this.isKeyboardNavigation=!1)},enableScrollWheelZoom:function(){this.isScrollWheelZoom||(this.navigationManager.enableScrollWheelZoom(),this.isScrollWheelZoom=!0)},disableScrollWheelZoom:function(){this.isScrollWheelZoom&&(this.navigationManager.disableScrollWheelZoom(),this.isScrollWheelZoom=!1)},showPanArrows:function(){this._navDiv&&(this._navDiv.style.display="block",this.isPanArrows=!0)},hidePanArrows:function(){this._navDiv&&(this._navDiv.style.display="none",this.isPanArrows=!1)},showZoomSlider:function(){this._slider&&(E(this._slider.domNode||this._slider,"visibility","visible"),this.isZoomSlider=!0)},hideZoomSlider:function(){this._slider&&(E(this._slider.domNode||this._slider,"visibility","hidden"),this.isZoomSlider=!1)}}),g("extend-esri")&&(m.Map=t),t})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u){function f(){}function p(e){return function(t,n,s,r){return t&&"string"==typeof n&&t[n]==f?t.on(n.substring(2).toLowerCase(),o.hitch(s,r)):e.apply(i,arguments)}}return e.around(i,"connect",p),r.connect&&e.around(r,"connect",p),e=n("dijit._Widget",[h,d,u],{onClick:f,onDblClick:f,onKeyDown:f,onKeyPress:f,onKeyUp:f,onMouseDown:f,onMouseMove:f,onMouseOut:f,onMouseOver:f,onMouseLeave:f,onMouseEnter:f,onMouseUp:f,constructor:function(e){this._toConnect={};for(var t in e)this[t]===f&&(this._toConnect[t.replace(/^on/,"").toLowerCase()]=e[t],delete e[t])},postCreate:function(){this.inherited(arguments);for(var e in this._toConnect)this.on(e,this._toConnect[e]);delete this._toConnect},on:function(e,t){return this[this._onMap(e)]===f?i.connect(this.domNode,e.toLowerCase(),this,t):this.inherited(arguments)},_setFocusedAttr:function(e){this._focused=e,this._set("focused",e)},setAttribute:function(e,t){r.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0"),this.set(e,t)},attr:function(e){if(t.isDebug){var i=arguments.callee._ach||(arguments.callee._ach={}),n=(arguments.callee.caller||"unknown caller").toString();i[n]||(r.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+n,"","2.0"),i[n]=!0)}return 2<=arguments.length||"object"==typeof e?this.set.apply(this,arguments):this.get(e)},getDescendants:function(){return r.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0"),this.containerNode?a("[widgetId]",this.containerNode).map(c.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}}),s("dijit-legacy-requires")&&l(0,function(){require(["dijit/_base"])}),e})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(e,t,i,n,s,r,o,a,l,c){function h(e,t,i){return j&&i?function(e,t){return r(e,i,t)}:S?function(i,n){var s=r(i,t,n),o=r(i,e,function(e){(!x||(new Date).getTime()>x+1e3)&&n.call(this,e)});return{remove:function(){s.remove(),o.remove()}}}:function(t,i){return r(t,e,i)}}function d(e){do if(e.dojoClick)return e.dojoClick;while(e=e.parentNode)}function u(e,t,s){(p=!e.target.disabled&&d(e.target))&&(m=e.target,_=e.touches?e.touches[0].pageX:e.clientX,g=e.touches?e.touches[0].pageY:e.clientY,y=("object"==typeof p?p.x:"number"==typeof p?p:0)||4,v=("object"==typeof p?p.y:"number"==typeof p?p:0)||4,f||(f=!0,c.doc.addEventListener(t,function(e){p=p&&e.target==m&&Math.abs((e.touches?e.touches[0].pageX:e.clientX)-_)<=y&&Math.abs((e.touches?e.touches[0].pageY:e.clientY)-g)<=v},!0),c.doc.addEventListener(s,function(e){if(p){b=(new Date).getTime();var t=e.target;"LABEL"===t.tagName&&(t=i.byId(t.getAttribute("for"))||t),setTimeout(function(){r.emit(t,"click",{bubbles:!0,cancelable:!0,_dojo_click:!0})})}},!0),e=function(e){c.doc.addEventListener(e,function(t){!t._dojo_click&&(new Date).getTime()<=b+1e3&&!("INPUT"==t.target.tagName&&n.contains(t.target,"dijitOffScreen"))&&(t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),"click"==e&&("INPUT"!=t.target.tagName||"radio"==t.target.type||"checkbox"==t.target.type)&&"TEXTAREA"!=t.target.tagName&&"AUDIO"!=t.target.tagName&&"VIDEO"!=t.target.tagName&&t.preventDefault())},!0)},e("click"),e("mousedown"),e("mouseup")))}var f,p,m,_,g,y,v,b,x,w,S=o("touch"),T=5>o("ios"),j=navigator.msPointerEnabled;return S&&(j?l(function(){c.doc.addEventListener("MSPointerDown",function(e){u(e,"MSPointerMove","MSPointerUp")},!0)}):l(function(){function e(e){var t=s.delegate(e,{bubbles:!0});return 6<=o("ios")&&(t.touches=e.touches,t.altKey=e.altKey,t.changedTouches=e.changedTouches,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.shiftKey=e.shiftKey,t.targetTouches=e.targetTouches),t}w=c.body(),c.doc.addEventListener("touchstart",function(e){x=(new Date).getTime();var t=w;w=e.target,r.emit(t,"dojotouchout",{relatedTarget:w,bubbles:!0}),r.emit(w,"dojotouchover",{relatedTarget:t,bubbles:!0}),u(e,"touchmove","touchend")},!0),r(c.doc,"touchmove",function(t){x=(new Date).getTime();var i=c.doc.elementFromPoint(t.pageX-(T?0:c.global.pageXOffset),t.pageY-(T?0:c.global.pageYOffset));i&&(w!==i&&(r.emit(w,"dojotouchout",{relatedTarget:i,bubbles:!0}),r.emit(i,"dojotouchover",{relatedTarget:w,bubbles:!0}),w=i),r.emit(i,"dojotouchmove",e(t)))}),r(c.doc,"touchend",function(t){x=(new Date).getTime();var i=c.doc.elementFromPoint(t.pageX-(T?0:c.global.pageXOffset),t.pageY-(T?0:c.global.pageYOffset))||c.body();r.emit(i,"dojotouchend",e(t))})})),t={press:h("mousedown","touchstart","MSPointerDown"),move:h("mousemove","dojotouchmove","MSPointerMove"),release:h("mouseup","dojotouchend","MSPointerUp"),cancel:h(a.leave,"touchcancel",S?"MSPointerCancel":null),over:h("mouseover","dojotouchover","MSPointerOver"),out:h("mouseout","dojotouchout","MSPointerOut"),enter:a._eventHandler(h("mouseover","dojotouchover","MSPointerOver")),leave:a._eventHandler(h("mouseout","dojotouchout","MSPointerOut"))},e.touch=t})},"esri/dijit/Popup":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/kernel dojo/has dojo/window dojo/Stateful dojo/query dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/registry esri/kernel esri/lang esri/sniff esri/domUtils esri/geometry/Polyline esri/geometry/Polygon esri/InfoWindowBase esri/PopupBase dojo/i18n!esri/nls/jsapi dojo/NodeList-dom dojo/has!extend-esri?esri/dijit/PopupTemplate dojo/has!extend-esri?esri/dijit/PopupRenderer".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p,m,_,g,y,v,b,x,w,S,T){return e=e([w,S,a],{declaredClass:"esri.dijit.Popup",offsetX:3,offsetY:3,zoomFactor:4,marginLeft:25,marginTop:25,highlight:!0,pagingControls:!0,pagingInfo:!0,keepHighlightOnHide:!1,popupWindow:!0,titleInBody:!0,anchor:"auto",visibleWhenEmpty:!0,hideDelay:1e3,constructor:function(e,i){this.initialize(),t.mixin(this,e),this.domNode=c.byId(i);var o=this._nls=t.mixin({},T.widgets.popup),a=this.domNode;d.add(a,"esriPopup"),(this._isRTL=!f.isBodyLtr())&&p.set(a,"direction","rtl"),h.set(a,"innerHTML","<div class='esriPopupWrapper' style='position: absolute;'><div class='sizer'><div class='titlePane'><div class='spinner hidden' title='"+o.NLS_searching+"...'></div><div class='title'></div><div class='titleButton prev hidden' title='"+o.NLS_prevFeature+"'></div><div class='titleButton next hidden' title='"+o.NLS_nextFeature+"'></div><div class='titleButton maximize' title='"+o.NLS_maximize+"'></div><div class='titleButton close' title='"+o.NLS_close+"'></div></div></div><div class='sizer content'><div class='contentPane'></div></div><div class='sizer'><div class='actionsPane'><div class='actionList hidden'><a class='action zoomTo' href='javascript:void(0);'>"+o.NLS_zoomTo+"</a></div></div></div><div class='pointer hidden'></div></div><div class='outerPointer hidden'></div>"),this._sizers=s.query(".sizer",a),o=s.query(".titlePane",a)[0],c.setSelectable(o,!1),this._title=s.query(".title",o)[0],this._prevFeatureButton=s.query(".prev",o)[0],this._nextFeatureButton=s.query(".next",o)[0],this._maxButton=s.query(".maximize",o)[0],this._spinner=s.query(".spinner",o)[0],this._contentPane=s.query(".contentPane",a)[0],this._positioner=s.query(".esriPopupWrapper",a)[0],this._pointer=s.query(".pointer",a)[0],this._outerPointer=s.query(".outerPointer",a)[0],this._actionList=s.query(".actionsPane .actionList",a)[0],this._eventConnections=[n.connect(s.query(".close",o)[0],"onclick",this,this.hide),n.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),n.connect(this._nextFeatureButton,"onclick",this,this.selectNext),n.connect(this._maxButton,"onclick",this,this._toggleSize),n.connect(s.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature),n.connect(this,"onClearFeatures",this,this._featuresCleared),n.connect(this,"onSelectionChange",this,this._featureSelected),n.connect(this,"onDfdComplete",this,this._updateUI)],r("esri-touch")&&(a=v.setScrollable(this._contentPane),this._eventConnections.push(a[0],a[1])),this._toggleVisibility(!1)},onMaximize:function(){},onRestore:function(){},setMap:function(e){this.inherited(arguments),u.place(this.domNode,e.root),this.highlight&&this.enableHighlight(e),this._maxHeight=p.get(this._contentPane,"maxHeight")},unsetMap:function(){this.disableHighlight(this.map),this.inherited(arguments)},setTitle:function(e){this.popupWindow&&(g.isDefined(e)&&""!==e||(e="&nbsp;"),this.destroyDijits(this._title),this.place(e,this._title),this.isShowing&&(this.startupDijits(this._title),this.reposition()))},setContent:function(e){this.popupWindow&&(g.isDefined(e)&&""!==e||(e="&nbsp;"),this.destroyDijits(this._contentPane),this.place(e,this._contentPane),this.isShowing&&(this.startupDijits(this._contentPane),this.reposition()))},show:function(e,t){if(this.popupWindow)if(this._delayHide=!1,e){var i,n=this.map;e.spatialReference?(this._location=e,i=n.toScreen(e)):(this._location=n.toMap(e),i=e);var s=n._getFrameWidth();if(-1!==s&&(i.x%=s,0>i.x&&(i.x+=s),n.width>s))for(n=(n.width-s)/2;i.x<n;)i.x+=s;this._maximized?this.restore():this._setPosition(i),t&&t.closestFirst&&this.showClosestFirst(this._location),this.isShowing||(this._toggleVisibility(!0),this._followMap(),this.startupDijits(this._title),this.startupDijits(this._contentPane),this.reposition(),this.showHighlight(),this.onShow())}else this._toggleVisibility(!0)},hide:function(){this.isShowing&&(this._toggleVisibility(!1),this._unfollowMap(),this.keepHighlightOnHide||this.hideHighlight(),this.onHide())},resize:function(e,t){this.popupWindow&&(this._sizers.style({width:e+"px"}),p.set(this._contentPane,"maxHeight",t+"px"),this._maxHeight=t,this.isShowing&&this.reposition())},reposition:function(){this.popupWindow&&this.map&&this._location&&!this._maximized&&this.isShowing&&this._setPosition(this.map.toScreen(this._location))},maximize:function(){var e=this.map;if(e&&!this._maximized&&this.popupWindow){this._maximized=!0;var t=this._maxButton;d.remove(t,"maximize"),d.add(t,"restore"),h.set(t,"title",this._nls.NLS_restore);var t=this.marginLeft,i=this.marginTop,n=e.width-2*t,e=e.height-2*i;p.set(this.domNode,{left:this._isRTL?null:t+"px",right:this._isRTL?t+"px":null,top:i+"px",bottom:null}),p.set(this._positioner,{left:null,right:null,top:null,bottom:null}),this._savedWidth=p.get(this._sizers[0],"width"),this._savedHeight=p.get(this._contentPane,"maxHeight"),this._sizers.style({width:n+"px"}),p.set(this._contentPane,{maxHeight:e-65+"px",height:e-65+"px"}),this._showPointer(""),this._unfollowMap(),d.add(this.domNode,"esriPopupMaximized"),this.onMaximize()}},restore:function(){if(this.map&&this._maximized&&this.popupWindow){this._maximized=!1;var e=this._maxButton;d.remove(e,"restore"),d.add(e,"maximize"),h.set(e,"title",this._nls.NLS_maximize),p.set(this._contentPane,"height",null),this.resize(this._savedWidth,this._savedHeight),this._savedWidth=this._savedHeight=null,this.show(this._location),this._followMap(),d.remove(this.domNode,"esriPopupMaximized"),this.onRestore()}},startup:function(){},destroy:function(){this.map&&this.unsetMap(),this.cleanup(),this.isShowing&&this.hide(),this.destroyDijits(this._title),this.destroyDijits(this._content),i.forEach(this._eventConnections,n.disconnect),u.destroy(this.domNode),this._sizers=this._contentPane=this._actionList=this._positioner=this._pointer=this._outerPointer=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=this._pagerScope=this._targetLocation=this._nls=this._maxButton=null},selectNext:function(){this.select(this.selectedIndex+1)},selectPrevious:function(){this.select(this.selectedIndex-1)},setFeatures:function(){this.inherited(arguments),this._updateUI()},postscript:null,_highlightSetter:function(e){var t=this.highlight,i=this.map;this.highlight=e,i&&e!==t&&(e?(this.enableHighlight(i),(e=this.features&&this.features[this.selectedIndex])&&(this.updateHighlight(i,e),this.showHighlight())):this.disableHighlight(i))},_pagingControlsSetter:function(e){var t=this.pagingControls,i=this.map;this.pagingControls=e,i&&e!==t&&this._updatePagingControls()},_pagingInfoSetter:function(e){var t=this.pagingInfo,i=this.map;this.pagingInfo=e,i&&e!==t&&this.features&&this.features.length&&this._updatePagingInfo()},_popupWindowSetter:function(e){var t=this.popupWindow,i=this.map;this.popupWindow=e,i&&e!==t&&(e?(this._updateUI(),this._updateWindow()):(this.hide(),this.showHighlight()))},_anchorSetter:function(e){var t=this.anchor;this.anchor=e,this.map&&e!==t&&this.reposition()},_featuresCleared:function(){this.setTitle("&nbsp;"),this.setContent("&nbsp;"),this._setPagerCallbacks(this),this._updateUI(),this.hideHighlight()},_featureSelected:function(){this._updateUI(),this._updateWindow()},_updateWindow:function(){var e=this.selectedIndex;if(e>=0){var i,n=this.features[e].getContent();!this.titleInBody&&n&&t.isString(n.id)&&(i=m.byId(n.id))&&i.set&&/_PopupRenderer/.test(i.declaredClass)&&i.set("showTitle",!1),this.setContent(n),this.updateHighlight(this.map,this.features[e]),this.showHighlight()}},_toggleVisibility:function(e){this._setVisibility(e),this.isShowing=e},_setVisibility:function(e){p.set(this.domNode,"visibility",e?"visible":"hidden")},_waitAndHide:function(e){var t=this;this._delayHide=!0,setTimeout(function(){t._delayHide&&(t._delayHide=!1,t.hide())},e)},_followMap:function(){this._unfollowMap();var e=this.map;this._handles=[n.connect(e,"onPanStart",this,this._onPanStart),n.connect(e,"onPan",this,this._onPan),n.connect(e,"onZoomStart",this,this._onZoomStart),n.connect(e,"onExtentChange",this,this._onExtentChange)]},_unfollowMap:function(){var e=this._handles;e&&(i.forEach(e,n.disconnect),this._handles=null)},_onPanStart:function(){var e=this.domNode.style;this._panOrigin={left:e.left,top:e.top,right:e.right,bottom:e.bottom}},_onPan:function(e,t){var i=this._panOrigin,n=t.x,s=t.y,r=i.left,o=i.top,a=i.right,i=i.bottom;r&&(r=parseFloat(r)+n+"px"),o&&(o=parseFloat(o)+s+"px"),a&&(a=parseFloat(a)-n+"px"),i&&(i=parseFloat(i)-s+"px"),p.set(this.domNode,{left:r,top:o,right:a,bottom:i})},_onZoomStart:function(){this._setVisibility(!1)},_onExtentChange:function(e,t,i){i&&(this._setVisibility(!0),this.show(this._targetLocation||this._location)),this._targetLocation=null},_toggleSize:function(){this._maximized?this.restore():this.maximize()},_setPosition:function(e){var t=e.x,i=e.y;e=this.offsetX||0;var n=this.offsetY||0,s=0,r=0,a=f.position(this.map.container,!0),l=a.w,c=a.h,h="Left",d="bottom",u=f.getContentBox(this._positioner),m=u.w/2,_=u.h/2,g=p.get(this._sizers[0],"height")+this._maxHeight+p.get(this._sizers[2],"height"),y=g/2,v=0,b=0,x=t,w=i,S=this.anchor.toLowerCase();switch("auto"===S?((S=o.getBox)&&(S=S(),v=Math.max(S.l,a.x),l=Math.min(S.l+S.w,a.x+a.w),b=Math.max(S.t,a.y),c=Math.min(S.t+S.h,a.y+a.h),x+=a.x,w+=a.y),a=w-b>=g,g=c-w>=g,S=l-x>=u.w,u=x-v>=u.w,w-b>y&&c-w>=y&&(S?(d="",h="Left"):u&&(d="",h="Right")),h&&d&&x-v>m&&l-x>=m&&(a?(h="",d="bottom"):g&&(h="",d="top")),h&&d&&(S&&a?(h="Left",d="bottom"):S&&g?(h="Left",d="top"):u&&g?(h="Right",d="top"):u&&a&&(h="Right",d="bottom"))):(d=h="",-1!==S.indexOf("top")?d="bottom":-1!==S.indexOf("bottom")&&(d="top"),-1!==S.indexOf("left")?h="Right":-1!==S.indexOf("right")&&(h="Left")),y=d+h){case"top":case"bottom":r=14;break;case"Left":case"Right":s=13;break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":r=14,s=-16}p.set(this.domNode,{left:t+"px",top:i+"px",right:null,bottom:null}),t={left:null,right:null,top:null,bottom:null},h?t[h.toLowerCase()]=s+e+"px":t.left=-m+"px",d?t[d]=r+n+"px":t.top=-_+"px",p.set(this._positioner,t),this._showPointer(y)},_showPointer:function(e){d.remove(this._pointer,"top bottom right left topLeft topRight bottomRight bottomLeft hidden".split(" ")),d.remove(this._outerPointer,["right","left","hidden"]),"Right"===e||"Left"===e?(e=e.toLowerCase(),d.add(this._outerPointer,e)):d.add(this._pointer,e)},_setPagerCallbacks:function(e,t,i){if(this.pagingControls&&(e!==this||this._pagerScope&&this._pagerScope!==this)&&e!==this._pagerScope){this._pagerScope=e,e===this&&(t=this.selectPrevious,i=this.selectNext);var s=this._eventConnections;n.disconnect(s[1]),n.disconnect(s[2]),t&&(s[1]=n.connect(this._prevFeatureButton,"onclick",e,t)),i&&(s[2]=n.connect(this._nextFeatureButton,"onclick",e,i))}},_getLocation:function(e){var t,n,s,r=this.map,o=0;if(e=e&&e.geometry)switch(e.type){case"point":t=e;break;case"multipoint":t=e.getPoint(0),n=e.getExtent();break;case"polyline":t=e.getPoint(0,0),n=e.getExtent(),-1!==r._getFrameWidth()&&(i.forEach(e.paths,function(e){e=new b({paths:[e,r.spatialReference]}).getExtent();var t=Math.abs(e.ymax-e.ymin),i=Math.abs(e.xmax-e.xmin),t=i>t?i:t;t>o&&(o=t,s=e)}),s.spatialReference=n.spatialReference,n=s);break;case"polygon":t=e.getPoint(0,0),n=e.getExtent(),-1!==r._getFrameWidth()&&(i.forEach(e.rings,function(e){e=new x({rings:[e,r.spatialReference]}).getExtent();var t=Math.abs(e.ymax-e.ymin),i=Math.abs(e.xmax-e.xmin),t=i>t?i:t;t>o&&(o=t,s=e)}),s.spatialReference=n.spatialReference,n=s)}return[t,n]},_zoomToFeature:function(){var e=this.features,t=this.selectedIndex,i=this.map;if(e)if(t=this._getLocation(e[t]),e=t[0],t=t[1],e||(e=this._location),t&&t.intersects(this._location)||(this._location=e),t)i.setExtent(t,!0);else{var n=i.getNumLevels(),t=i.getLevel(),s=i.getMaxZoom(),r=this.zoomFactor||1;n>0?t!==s&&(n=t+r,n>s&&(n=s),i.navigationManager._wheelZoom({value:n-t,mapPoint:e},!0)):i.navigationManager._wheelZoom({value:2*(1/Math.pow(2,r)),mapPoint:e},!0)}},_updatePagingControls:function(){var e=this._prevFeatureButton,t=this._nextFeatureButton,i=this.selectedIndex,n=this.features?this.features.length:0;this.pagingControls&&n>1?(0===i?d.add(e,"hidden"):d.remove(e,"hidden"),i===n-1?d.add(t,"hidden"):d.remove(t,"hidden")):(d.add(e,"hidden"),d.add(t,"hidden"))},_updatePagingInfo:function(){var e=this.features?this.features.length:0,t=this._nls,i="&nbsp;";this.pagingInfo&&e>1&&t.NLS_pagingInfo&&(i=g.substitute({index:this.selectedIndex+1,total:e},t.NLS_pagingInfo)),!e||(t=this.getSelectedFeature(),e=t.getInfoTemplate(),t=t.getTitle(),e&&!/esri\.InfoTemplate/.test(e.declaredClass)&&this.titleInBody||!t)||(i=t+("&nbsp;"===i?"":" "+i)),this.setTitle(i)},_updateUI:function(){if(this.popupWindow){var e=this.features,t=this.deferreds,i=e?e.length:0,n=this._spinner,s=this._actionList,r=this._nls;this._updatePagingControls(),this._updatePagingInfo(),i?d.remove(s,"hidden"):d.add(s,"hidden"),t&&t.length?e?d.remove(n,"hidden"):this.setContent("<div style='text-align: center;'>"+r.NLS_searching+"...</div>"):(d.add(n,"hidden"),i||(this.setContent("<div style='text-align: center;'>"+r.NLS_noInfo+".</div>"),this.visibleWhenEmpty||this._waitAndHide(this.hideDelay)))
}}}),r("extend-esri")&&t.setObject("dijit.Popup",e,_),e})},"esri/layers/agstiled":function(){define(["esri/layers/agscommon","esri/layers/ArcGISTiledMapServiceLayer"],function(){return{}})},"dojo/fx":function(){define("./_base/lang ./Evented ./_base/kernel ./_base/array ./aspect ./_base/fx ./dom ./dom-style ./dom-geometry ./ready require".split(" "),function(e,t,i,n,s,r,o,a,l,c,h){i.isAsync||c(0,function(){h(["./fx/Toggler"])}),i=i.fx={},c={_fire:function(e,t){return this[e]&&this[e].apply(this,t||[]),this}};var d=function(e){this._index=-1,this._animations=e||[],this._current=this._onAnimateCtx=this._onEndCtx=null,this.duration=0,n.forEach(this._animations,function(e){this.duration+=e.duration,e.delay&&(this.duration+=e.delay)},this)};d.prototype=new t,e.extend(d,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove(),this._onEndCtx.remove(),this._onAnimateCtx=this._onEndCtx=null,this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=s.after(this._current,"onAnimate",e.hitch(this,"_onAnimate"),!0),this._onEndCtx=s.after(this._current,"onEnd",e.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(t,i){if(this._current||(this._current=this._animations[this._index=0]),!i&&"playing"==this._current.status())return this;var n=s.after(this._current,"beforeBegin",e.hitch(this,function(){this._fire("beforeBegin")}),!0),r=s.after(this._current,"onBegin",e.hitch(this,function(){this._fire("onBegin",arguments)}),!0),o=s.after(this._current,"onPlay",e.hitch(this,function(){this._fire("onPlay",arguments),n.remove(),r.remove(),o.remove()}));return this._onAnimateCtx&&this._onAnimateCtx.remove(),this._onAnimateCtx=s.after(this._current,"onAnimate",e.hitch(this,"_onAnimate"),!0),this._onEndCtx&&this._onEndCtx.remove(),this._onEndCtx=s.after(this._current,"onEnd",e.hitch(this,"_onEnd"),!0),this._current.play.apply(this._current,arguments),this},pause:function(){if(this._current){var t=s.after(this._current,"onPause",e.hitch(this,function(){this._fire("onPause",arguments),t.remove()}),!0);this._current.pause()}return this},gotoPercent:function(e,t){this.pause();var i=this.duration*e;return this._current=null,n.some(this._animations,function(e){return e.duration<=i?(this._current=e,!0):(i-=e.duration,!1)}),this._current&&this._current.gotoPercent(i/this._current.duration,t),this},stop:function(t){if(this._current){if(t){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var i=s.after(this._current,"onStop",e.hitch(this,function(){this._fire("onStop",arguments),i.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this._onAnimateCtx&&this._onAnimateCtx.remove(),this._onEndCtx&&this._onEndCtx.remove()}}),e.extend(d,c),i.chain=function(e){return new d(e)};var u=function(t){this._animations=t||[],this._connects=[],this.duration=this._finished=0,n.forEach(t,function(t){var i=t.duration;t.delay&&(i+=t.delay),this.duration<i&&(this.duration=i),this._connects.push(s.after(t,"onEnd",e.hitch(this,"_onEnd"),!0))},this),this._pseudoAnimation=new r.Animation({curve:[0,1],duration:this.duration});var i=this;n.forEach("beforeBegin onBegin onPlay onAnimate onPause onStop onEnd".split(" "),function(e){i._connects.push(s.after(i._pseudoAnimation,e,function(){i._fire(e,arguments)},!0))})};return e.extend(u,{_doAction:function(e,t){return n.forEach(this._animations,function(i){i[e].apply(i,t)}),this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(e,t){var i=this._pseudoAnimation;i[e].apply(i,t)},play:function(){return this._finished=0,this._doAction("play",arguments),this._call("play",arguments),this},pause:function(){return this._doAction("pause",arguments),this._call("pause",arguments),this},gotoPercent:function(e,t){var i=this.duration*e;return n.forEach(this._animations,function(e){e.gotoPercent(e.duration<i?1:i/e.duration,t)}),this._call("gotoPercent",arguments),this},stop:function(){return this._doAction("stop",arguments),this._call("stop",arguments),this},status:function(){return this._pseudoAnimation.status()},destroy:function(){n.forEach(this._connects,function(e){e.remove()})}}),e.extend(u,c),i.combine=function(e){return new u(e)},i.wipeIn=function(t){var i,n=t.node=o.byId(t.node),l=n.style;t=r.animateProperty(e.mixin({properties:{height:{start:function(){if(i=l.overflow,l.overflow="hidden","hidden"==l.visibility||"none"==l.display)return l.height="1px",l.display="",l.visibility="",1;var e=a.get(n,"height");return Math.max(e,1)},end:function(){return n.scrollHeight}}}},t));var c=function(){l.height="auto",l.overflow=i};return s.after(t,"onStop",c,!0),s.after(t,"onEnd",c,!0),t},i.wipeOut=function(t){var i,n=(t.node=o.byId(t.node)).style;t=r.animateProperty(e.mixin({properties:{height:{end:1}}},t)),s.after(t,"beforeBegin",function(){i=n.overflow,n.overflow="hidden",n.display=""},!0);var a=function(){n.overflow=i,n.height="auto",n.display="none"};return s.after(t,"onStop",a,!0),s.after(t,"onEnd",a,!0),t},i.slideTo=function(t){var i=null,n=null,c=function(e){return function(){var t=a.getComputedStyle(e),s=t.position;i="absolute"==s?e.offsetTop:parseInt(t.top)||0,n="absolute"==s?e.offsetLeft:parseInt(t.left)||0,"absolute"!=s&&"relative"!=s&&(t=l.position(e,!0),i=t.y,n=t.x,e.style.position="absolute",e.style.top=i+"px",e.style.left=n+"px")}}(t.node=o.byId(t.node));return c(),t=r.animateProperty(e.mixin({properties:{top:t.top||0,left:t.left||0}},t)),s.after(t,"beforeBegin",c,!0),t},i})},"esri/InfoTemplate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang"],function(e,t,i,n,s){return e=e(null,{declaredClass:"esri.InfoTemplate",constructor:function(e,i){e&&t.isObject(e)&&!t.isFunction(e)?t.mixin(this,e):(this.title=e||"${*}",this.content=i||"${*}")},setTitle:function(e){return this.title=e,this},setContent:function(e){return this.content=e,this},toJson:function(){return s.fixJson({title:this.title,content:this.content})}}),i("extend-esri")&&(n.InfoTemplate=e),e})},"esri/tasks/JobInfo":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/tasks/GPMessage"],function(e,t,i,n,s){return e=e(null,{declaredClass:"esri.tasks.JobInfo",constructor:function(e){this.messages=[],t.mixin(this,e),e=this.messages;var i,n=e.length;for(i=0;n>i;i++)e[i]=new s(e[i])},jobId:"",jobStatus:""}),t.mixin(e,{STATUS_CANCELLED:"esriJobCancelled",STATUS_CANCELLING:"esriJobCancelling",STATUS_DELETED:"esriJobDeleted",STATUS_DELETING:"esriJobDeleting",STATUS_EXECUTING:"esriJobExecuting",STATUS_FAILED:"esriJobFailed",STATUS_NEW:"esriJobNew",STATUS_SUBMITTED:"esriJobSubmitted",STATUS_SUCCEEDED:"esriJobSucceeded",STATUS_TIMED_OUT:"esriJobTimedOut",STATUS_WAITING:"esriJobWaiting"}),i("extend-esri")&&t.setObject("tasks.JobInfo",e,n),e})},"esri/tasks/DensifyParameters":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/json dojo/has esri/kernel esri/geometry/jsonUtils".split(" "),function(e,t,i,n,s,r,o){return e=e(null,{declaredClass:"esri.tasks.DensifyParameters",geometries:null,geodesic:null,lengthUnit:null,maxSegmentLength:null,toJson:function(){var e=i.map(this.geometries,function(e){return e.toJson()}),t={};return this.geometries&&0<this.geometries.length&&(t.geometries=n.toJson({geometryType:o.getJsonType(this.geometries[0]),geometries:e}),t.sr=n.toJson(this.geometries[0].spatialReference.toJson())),this.geodesic&&(t.geodesic=this.geodesic),this.lengthUnit&&(t.lengthUnit=this.lengthUnit),this.maxSegmentLength&&(t.maxSegmentLength=this.maxSegmentLength),t}}),s("extend-esri")&&t.setObject("tasks.DensifyParameters",e,r),e})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(e,t){return e("dijit._DialogMixin",null,{execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute(),this.execute(this.get("value"))},_getFocusItems:function(){var e=t._getTabNavigable(this.containerNode);this._firstFocusItem=e.lowest||e.first||this.closeButtonNode||this.domNode,this._lastFocusItem=e.last||e.highest||this._firstFocusItem}})})},"esri/tasks/route":function(){define(["esri/tasks/RouteTask","esri/tasks/RouteParameters","esri/tasks/RouteResult"],function(){return{}})},"esri/layers/TiledMapServiceLayer":function(){define("dojo/_base/declare dojo/_base/connect dojo/_base/lang dojo/_base/array dojo/_base/url dojo/dom-construct dojo/dom-class dojo/dom-geometry dojo/dom-style dojox/collections/ArrayList dojox/gfx/matrix esri/kernel esri/config esri/sniff esri/domUtils esri/tileUtils esri/geometry/Point esri/geometry/Rect esri/layers/layer".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p,m,_,g,y){var v=u.defaults.map.zoomDuration;return e=e(y,{declaredClass:"esri.layers.TiledMapServiceLayer",constructor:function(e,n){t.connect(this,"onLoad",this,"_initTiledLayer"),this._lowestLevel=(this._displayLevels=n?n.displayLevels:null)?this._displayLevels[0]:0,this.resampling=n?n.resampling:!1,this._resamplingTolerance=n?n.resamplingTolerance:null;var s=i.hitch;this._addImage=s(this,this._addImage),this._tileLoadHandler=s(this,this._tileLoadHandler),this._tileErrorHandler=s(this,this._tileErrorHandler),this._tilePopPop=s(this,this._tilePopPop),this._cleanUpRemovedImages=s(this,this._cleanUpRemovedImages),this._fireOnUpdateEvent=s(this,this._fireOnUpdateEvent),this._transitionEnd=s(this,this._transitionEnd)},opacity:1,isPNG32:!1,_multiple:1,_initTiledLayer:function(){var e=this.tileInfo,t=e.lods;this._tileW=e.width,this._tileH=e.height;var i,s,r,o=this.scales=[],a=this._displayLevels,l="esri.layers.WMTSLayer"===this.declaredClass&&96!=e.dpi,c=-1/0,h=1/0,d=this.fullExtent,u=new _(d.xmin,d.ymax),d=new _(d.xmax,d.ymin),p=m.getContainingTileCoords,g=t.length;for(r=0;g>r;r++)s=t[r],l&&(s.scale=96*s.scale/e.dpi),i=p(e,u,s),s.startTileRow=0>i.row?0:i.row,s.startTileCol=0>i.col?0:i.col,i=p(e,d,s),s.endTileRow=i.row,s.endTileCol=i.col,a&&-1===n.indexOf(a,s.level)||(o[r]=s.scale,c=s.scale>c?s.scale:c,h=s.scale<h?s.scale:h);l&&(e.dpi=96),-1/0!==c&&!this._hasMin&&this.setMinScale(c),1/0!==h&&!this._hasMax&&this.setMaxScale(h),this._patchIE=6<=f("ie")&&7>f("ie")&&(this.isPNG32||"Mixed"===e.format)},_isMapAtVisibleScale:function(){var e=this.inherited(arguments);if(e){var t;t=this._map;var e=this.scales,i=t.getScale(),n=!1,s=t.width>t.height?t.width:t.height;for(t=0;t<e.length;t++)if(Math.abs(e[t]-i)/e[t]<1/s){n=!0;break}e=n}return e},_setMap:function(e,i){this.inherited(arguments),this._map=e;var n=this._div=r.create("div",null,i),s=e.__visibleDelta,o=t.connect,a=d._css.names,c={position:"absolute",width:e.width+"px",height:e.height+"px",overflow:"visible"};if("css-transforms"===e.navigationMode?(c[a.transform]=d._css.translate(-s.x,-s.y),l.set(n,c),delete c[a.transform],c[a.transition]=a.transformName+" "+v+"ms ease",l.set(this._active=r.create("div",null,n),c),this._active._remove=0,this._passives=[]):(c.left=-s.x+"px",c.top=-s.y+"px",l.set(n,c)),this._onResizeHandler_connect=o(e,"onResize",this,"_onResizeHandler"),this._opacityChangeHandler_connect=o(this,"onOpacityChange",this,"_opacityChangeHandler"),s=this.tileInfo,o=s.spatialReference,a=o._getInfo(),(this._wrap=e.wrapAround180&&o._isWrappable()&&Math.abs(a.origin[0]-s.origin.x)<=a.dx)&&m._addFrameInfo(s,a),this.evaluateSuspension(),this.suspended&&!e.loaded)var h=t.connect(e,"onLoad",this,function(){t.disconnect(h),h=null,this.evaluateSuspension()});return n},_unsetMap:function(){this.suspended||this._suspendImpl(),r.destroy(this._div),this._map=this._div=null;var e=t.disconnect;e(this._onResizeHandler_connect),e(this._opacityChangeHandler_connect),this.inherited(arguments)},onSuspend:function(){this.inherited(arguments),this._suspendImpl()},_suspendImpl:function(){p.hide(this._div),clearTimeout(this._wakeTimer),this._wakeTimer=null,this._disableDrawConnectors();var e,i,n=this._tiles,s=this._tileIds,o=this._loadingList,a=t.disconnect,l=r.destroy;for(o&&0<o.count&&(o.forEach(function(t){(e=n[t])&&(a(e._onload_connect),a(e._onerror_connect),a(e._onabort_connect),e._onload_connect=e._onerror_connect=e._onabort_connect=null)}),o.clear(),this._fireUpdateEnd()),this._removeList.clear(),o=s.length-1;o>=0;o--)(e=(i=s[o])&&n[i])&&l(e);if("css-transforms"===this._map.navigationMode){s=this._active,i=this._passives;var c;for(this._noDom=0,o=i.length-1;o>=0;o--)c=i[o],c._endHandle&&a(c._endHandle),c._matrix=c._multiply=c._endHandle=null,c._marked=c._remove=0,i.splice(o,1),l(c);s._matrix=s._multiply=null,s._marked=s._remove=0}this._tileIds=this._tiles=this._tileBounds=this._ct=this._loadingList=this._removeList=this._standby=null},onResume:function(){this.inherited(arguments),this._tileIds=[],this._tiles=[],this._tileBounds=[],this._ct=null,this._removeList=new c,this._loadingList=new c,p.show(this._div),this._enableDrawConnectors(),this._wakeTimer=this._wakeTimer||setTimeout(i.hitch(this,function(){this.suspended||this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD)}),0)},_enableDrawConnectors:function(){var e=this._map,i=t.connect;if("css-transforms"===e.navigationMode){if(this._onScaleHandler_connect=i(e,"onScale",this,this._onScaleHandler),f("esri-touch")||f("esri-pointer")){this._standby=[];var n=this,s=function(){n._noDom=1};this._onPanStartHandler_connect=i(e,"onPanStart",s),this._onZoomStartHandler_connect=i(e,"onZoomStart",s)}}else this._onZoomHandler_connect=i(e,"onZoom",this,"_onZoomHandler");this._onPanHandler_connect=i(e,"onPan",this,"_onPanHandler"),this._onExtentChangeHandler_connect=i(e,"onExtentChange",this,"_onExtentChangeHandler")},_disableDrawConnectors:function(){var e=t.disconnect;e(this._onPanHandler_connect),e(this._onZoomHandler_connect),e(this._onScaleHandler_connect),e(this._onExtentChangeHandler_connect),e(this._onPanStartHandler_connect),e(this._onZoomStartHandler_connect),this._onPanHandler_connect=this._onZoomHandler_connect=this._onScaleHandler_connect=this._onExtentChangeHandler_connect=this._onPanStartHandler_connect=this._onZoomStartHandler_connect=null},_onResizeHandler:function(e,t,i){if(e={width:t+"px",height:i+"px"},t=l.set,t(this._div,e),"css-transforms"===this._map.navigationMode)for(this._active&&t(this._active,e),i=this._passives.length-1;i>=0;i--)t(this._passives[i],e)},_onExtentChangeHandler:function(e,t,i,n){t=this._map;var s,o=this._standby;if(clearTimeout(this._wakeTimer),this._wakeTimer=null,!t._isPanningOrZooming()){if("css-transforms"===t.navigationMode){if(i)for(n=this._passives.length-1;n>=0;n--)s=this._passives[n],l.set(s,d._css.names.transition,"none"),s._marked?(this._passives.splice(n,1),s.parentNode&&s.parentNode.removeChild(s),r.destroy(s)):0<s.childNodes.length&&(s._multiply=s._multiply?h.multiply(s._matrix,s._multiply):s._matrix);if(this._noDom=0,o&&o.length)for(n=o.length-1;n>=0;n--)s=o[n],l.set(s,"visibility","visible"),this._tilePopPop(s),o.splice(n,1)}if(this._fireUpdateStart(),this._rrIndex=0,n=m.getCandidateTileInfo(t,this.tileInfo,e),e=t.__visibleDelta,!this._ct||n.lod.level!==this._ct.lod.level||i){s=n&&this._ct&&n.lod.level!==this._ct.lod.level,this._ct=n;var c,u=this._tiles,f=this._tileIds,p=this._tileBounds,_=this._removeList,y=f.length;for(this._cleanUpRemovedImages(),n=0;y>n;n++)o=f[n],c=u[o],p[o]=f[n]=null,"css-transforms"===t.navigationMode&&s&&c.parentNode&&t.fadeOnZoom&&(c._fadeOut=s,c.parentNode._remove++),_.add(c);i&&(this._tileIds=[],this._tiles=[],this._tileBounds=[])}for(n=e.x,i=e.y,"css-transforms"===t.navigationMode?(o={},o[d._css.names.transform]=d._css.translate(n,i),l.set(this._div,o)):l.set(this._div,{left:n+"px",top:i+"px"}),this.__coords_dx=n,this.__coords_dy=i,this._updateImages(new g(0,0,e.width,e.height)),0===this._loadingList.count?(this.onUpdate(),this._fireUpdateEnd()):this._fireOnUpdate=!0,i=this._tileW,u=this._tileH,e=new g(-e.x,-e.y,e.width,e.height),n=this._tileIds.length-1;n>=0;n--)(o=this._tileIds[n])?(s=this._tiles[o],f=a.getMarginBox(s),f=new g(f.l,f.t,i,u),"css-transforms"===t.navigationMode&&(f.x=s._left,f.y=s._top),e.intersects(f)?this._tileBounds[o]=f:(this._loadingList.contains(o)&&this._tilePopPop(s),r.destroy(s),this._tileIds.splice(n,1),delete this._tileBounds[o],delete this._tiles[o])):(this._tileIds.splice(n,1),delete this._tileBounds[o],delete this._tiles[o])}},_onPanHandler:function(e,t){var i=this._map,n=i.__visibleDelta.offset(t.x,t.y);this.__coords_dx=this.__coords_dy=0,"css-transforms"===i.navigationMode?(i={},i[d._css.names.transform]=d._css.translate(n.x,n.y),l.set(this._div,i),!f("esri-touch")&&!f("esri-pointer")&&this._updateImages({x:-n.x,y:-n.y,width:n.width,height:n.height})):(l.set(this._div,{left:n.x+"px",top:n.y+"px"}),this._updateImages({x:-n.x,y:-n.y,width:n.width,height:n.height})),0<this._loadingList.count&&(this._fireUpdateStart(),this._fireOnUpdate=!0)},_onScaleHandler:function(e,t){var i,n={},s=d._css.names,o=this._map;for(i=this._passives.length-1;i>=0;i--){var a=this._passives[i];0===a.childNodes.length?(this._passives.splice(i,1),r.destroy(a)):("none"===a.style[s.transition]&&l.set(a,s.transition,s.transformName+" "+v+"ms ease"),l.set(a,s.transition,t?"none":s.transformName+" "+v+"ms ease"),a._matrix=e,n[s.transform]=d._css.matrix(a._multiply?h.multiply(e,a._multiply):e),l.set(a,n))}this._active&&0===this._active.childNodes.length||(l.set(this._active,s.transition,t?"none":s.transformName+" "+v+"ms ease"),this._active._matrix=e,n[s.transform]=d._css.matrix(this._active._matrix),l.set(this._active,n),this._passives.push(this._active),n={position:"absolute",width:o.width+"px",height:o.height+"px",overflow:"visible"},n[s.transition]=s.transformName+" "+v+"ms ease",l.set(this._active=r.create("div",null,this._div),n),this._active._remove=0,o.fadeOnZoom&&r.place(this._active,this._div,"first"))},_onZoomHandler:function(e,t,i){e=a.getMarginBox(this._div),i=i.offset(-e.l,-e.t),this._previousScale&&1!==t||(this._previousScale=1);var s,r,o,c=this._tileW*t,h=this._tileH*t,d=this._tileBounds,u=this._tiles,p=this._previousScale,m=this._multiple,_=l.set;if((e=f("ie"))&&8>e)n.forEach(this._tileIds,function(e){o="",s=d[e],r=u[e].style.margin.split(" "),n.forEach(r,function(e){""!==o&&(o+=" "),e=parseFloat(e),o+=e/p*t+"px"}),_(u[e],{left:s.x-(c-s.width)*(i.x-s.x)/s.width+"px",top:s.y-(h-s.height)*(i.y-s.y)/s.height+"px",margin:1!==m&&-1===o.indexOf("NaN")?o:"",zoom:t})});else{var g,y,v=c*m,b=h*m;n.forEach(this._tileIds,function(e){o="",s=d[e],g=s.x-(c-s.width)*(i.x-s.x)/s.width,y=s.y-(h-s.height)*(i.y-s.y)/s.height,r=u[e].style.margin.split(" "),n.forEach(r,function(e){""!==o&&(o+=" "),e=parseFloat(e),o+=e/p*t+"px"}),_(u[e],{left:g+"px",top:y+"px",margin:1!==m&&-1===o.indexOf("NaN")?o:"",width:v+"px",height:b+"px"})})}this._previousScale=t},_updateImages:function(e){if(this._ct){var t,i=this._tileW,s=this._tileH,r=this._ct;t=r.lod;var o,a,r=r.tile,l=r.offsets,c=r.coords,h=c.row,c=c.col,d=t.level,u=this.opacity,f=this._tileIds,p=this._loadingList,m=this._addImage,_=this._map.id,g=this.id,y=e.x,v=e.y,b=t.startTileRow,x=t.endTileRow,w=t.startTileCol,S=t.endTileCol,T=n.indexOf,j=l.x-this.__coords_dx,E=l.y-this.__coords_dy;a=i-j+-e.x;var k=s-E+-e.y;o=Math.ceil,a=a>0?a%i:i-Math.abs(a)%i,k=k>0?k%s:s-Math.abs(k)%s,y=y>0?Math.floor((y+j)/i):o((y-(i-j))/i),v=v>0?Math.floor((v+E)/s):o((v-(s-E))/s),E=y+o((e.width-a)/i),e=v+o((e.height-k)/s);var C,M,D;for(this._wrap&&(C=t._frameInfo,M=C[0],D=C[1],C=C[2]),k=y;E>=k;k++)for(y=v;e>=y;y++)o=h+y,a=c+k,this._wrap&&(D>a?(a%=M,a=D>a?a+M:a):a>C&&(a%=M)),o>=b&&x>=o&&a>=w&&S>=a&&(t=_+"_"+g+"_tile_"+d+"_"+y+"_"+k,-1===T(f,t)&&(p.add(t),f.push(t),m(d,y,o,k,a,t,i,s,u,r,l)))}},_cleanUpRemovedImages:function(){var e,i=this._removeList,n=r.destroy,s=d._css.names;if(i.forEach(function(e){e._fadeOut||(e.style.filter="",e.style.zoom=1,n(e))}),"css-transforms"===this._map.navigationMode)for(e=this._passives.length-1;e>=0;e--){var o=this._passives[e];0===o.childNodes.length?(this._passives.splice(e,1),n(o)):this._map.fadeOnZoom&&!o._marked&&o._remove===o.childNodes.length&&(l.set(o,s.transition,"opacity 0.65s"),l.set(o,"opacity",0),o._marked=1,10<=f("ie")?o.addEventListener(s.endEvent,this._transitionEnd,!1):o._endHandle=t.connect(o,s.endEvent,this._transitionEnd))}i.clear()},_transitionEnd:function(e){var i=e.target;"opacity"===e.propertyName&&(10<=f("ie")?i.removeEventListener(d._css.names.endEvent,this._transitionEnd,!1):(t.disconnect(i._endHandle),i._endHandle=null),e=n.indexOf(this._passives,i),e>-1&&this._passives.splice(e,1),i.parentNode&&i.parentNode.removeChild(i),r.destroy(i))},_addImage:function(e,n,s,a,c,h,u,f,p,m,_){if(this._patchIE)m=this._tiles[h]=r.create("div"),m.id=h,o.add(m,"layerTile"),l.set(m,{left:u*a-_.x+"px",top:f*n-_.y+"px",width:u+"px",height:f+"px",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+this.getTileUrl(e,s,c)+"', sizingMethod='scale')"}),1>p&&l.set(m,"opacity",p),e=m.appendChild(r.create("div")),l.set(e,{opacity:0,width:u+"px",height:f+"px"}),this._div.appendChild(m),this._loadingList.remove(h),this._fireOnUpdateEvent();else{m=this._tiles[h]=r.create("img");var g=t.connect;m.id=h,o.add(m,"layerTile"),h=u*a-_.x,_=f*n-_.y,n=this._map,a=d._css.names,u={width:u+"px",height:f+"px",visibility:"hidden"},"css-transforms"===n.navigationMode?(u[a.transform]=d._css.translate(h,_),l.set(m,u),m._left=h,m._top=_):(u.left=h+"px",u.top=_+"px",l.set(m,u)),1>p&&l.set(m,"opacity",p),m._onload_connect=g(m,"onload",this,"_tileLoadHandler"),m._onerror_connect=g(m,"onerror",i.hitch(this,"_tileErrorHandler",s,c)),m._onabort_connect=g(m,"onabort",this,"_tileAbortHandler"),(e=this.getTileUrl(e,s,c,m))&&(this._failedRequests&&this._failedRequests[e]?(l.set(m,this._failedRequests[e].css),m.src=this._failedRequests[e].src,this._multiple=parseInt(this._failedRequests[e].css.width)/this._tileW):(this._multiple=1,m.src=e)),"css-transforms"===n.navigationMode?this._active.appendChild(m):this._div.appendChild(m)}},getTileUrl:function(){},_reCheckTS:/[\?\&]_ts=/gi,_reReplaceTS:/([\?\&]_ts=)[0-9]+/gi,addTimestampToURL:function(e){var t=this._refreshTS;return t&&(e=this._reCheckTS.test(e)?e.replace(this._reReplaceTS,"$$$1"+t):e+((-1===e.indexOf("?")?"?":"&")+"_ts="+t)),e},refresh:function(){this.suspended||(this._refreshTS=(new Date).getTime(),this._onExtentChangeHandler(this._map.extent,null,!0,this._map.__LOD))},_tilePopPop:function(e){var i=t.disconnect;i(e._onload_connect),i(e._onerror_connect),i(e._onabort_connect),e._onload_connect=e._onerror_connect=e._onabort_connect=null,this._loadingList.remove(e.id),this._fireOnUpdateEvent()},_tileLoadHandler:function(e){e=e.currentTarget,this._noDom?this._standby.push(e):(l.set(e,"visibility","visible"),this._tilePopPop(e))},_tileAbortHandler:function(e){e=e.currentTarget,this.onError(Error("Unable to load tile: "+e.src)),l.set(e,"visibility","hidden"),this._tilePopPop(e)},_tileErrorHandler:function(e,t,i){i=i.currentTarget;var n=new s(i.src).path.split("/"),n=parseInt(n[n.length-3]);this._multiple=Math.pow(2,this._ct.lod.level-n+1),!this.resampling||n===this._lowestLevel||0===this._resamplingTolerance||this._resamplingTolerance&&Math.log(this._multiple)/Math.LN2>this._resamplingTolerance?(this.onError(Error("Unable to load tile: "+i.src)),l.set(i,"visibility","hidden"),this._tilePopPop(i)):this._resample(i,e,t)},_resample:function(e,t,i){var n=new s(e.src).path.split("/"),r=this._multiple,o=parseInt(n[n.length-3])-1,a=parseInt(t/r),c=parseInt(i/r),n=i%r,h=t%r,a=this.getTileUrl(o,a,c);t=this.getTileUrl(o+Math.log(r)/Math.LN2,t,i),r={width:this._tileW*r+"px",height:this._tileH*r+"px",margin:"-"+this._tileW*h+"px 0 0 "+("-"+this._tileH*n+"px")},this._failedRequests||(this._failedRequests={}),this._failedRequests[t]={src:a,css:r},l.set(e,r),f("chrome")&&e.setAttribute("src",null),e.src=a},_fireOnUpdateEvent:function(){0===this._loadingList.count&&(this._cleanUpRemovedImages(),this._fireOnUpdate&&(this._fireOnUpdate=!1,this.onUpdate(),this._fireUpdateEnd()))},setOpacity:function(e){this.opacity!=e&&this.onOpacityChange(this.opacity=e)},onOpacityChange:function(){},_opacityChangeHandler:function(e){var t,i,n,s=l.set;if("css-transforms"===this._map.navigationMode){if(this._active)for(n=this._active.childNodes,t=n.length-1;t>=0;t--)s(n[t],"opacity",e);for(t=this._passives.length-1;t>=0;t--)for(n=this._passives[t].childNodes,i=n.length-1;i>=0;i--)s(n[i],"opacity",e)}else for(n=this._div.childNodes,t=n.length-1;t>=0;t--)s(n[t],"opacity",e)}}),f("extend-esri")&&i.setObject("layers.TiledMapServiceLayer",e,d),e})},"esri/virtualearth/VETiledLayer":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/_base/array dojo/_base/config dojo/has dojo/string dojo/_base/Deferred esri/kernel esri/urlUtils esri/SpatialReference esri/layers/TileInfo esri/layers/TiledMapServiceLayer esri/geometry/Extent esri/request".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p){return e=e(u,{declaredClass:"esri.virtualearth.VETiledLayer",constructor:function(e){try{e=t.mixin({bingMapsKey:null,culture:"en-US"},e||{});var i=window.location.protocol;if("file:"===i&&(i="http:"),this.url=i+"//dev.virtualearth.net/REST/v1",this._url=c.urlToObject(this.url),this.spatialReference=new h({wkid:102100}),this.tileInfo=new d({rows:256,cols:256,dpi:96,origin:{x:-20037508.342787,y:20037508.342787},spatialReference:{wkid:102100},lods:[{level:1,resolution:78271.5169639999,scale:295828763.795777},{level:2,resolution:39135.7584820001,scale:147914381.897889},{level:3,resolution:19567.8792409999,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:.597164283559817,scale:2256.994353},{level:19,resolution:.298582141647617,scale:1128.497176}]}),this.initialExtent=this.fullExtent=new f(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,new h({wkid:102100})),t.mixin(this,e),this.hasAttributionData=this.showAttribution,this._initLayer=t.hitch(this,this._initLayer),this._errorHandler=t.hitch(this,this._errorHandler),this._getTileInfo=t.hitch(this,this._getTileInfo),!this.bingMapsKey)throw Error("BingMapsKey must be provided.");this._getTileInfo()}catch(n){throw this.onError(n),n}},_unsetMap:function(){this.inherited("_unsetMap",arguments)},_getTileInfo:function(){if(this.mapStyle){var e=this._url.path+"/Imagery/Metadata/"+this.mapStyle;if(this.bingMapsKey){var i=this.resourceInfo;!this.loaded&&i?this._initLayer(i):p({url:e,content:t.mixin({},{key:this.bingMapsKey,ss:!0,c:this.culture,include:this.hasAttributionData?"imageryProviders":null}),callbackParamName:"jsonp",load:this._initLayer,error:this._errorHandler})}}},_initLayer:function(e){if(200!==e.statusCode){var t=Error();t.code=e.statusCode,t.message=e.statusDescription,t.details=e.errorDetails,t.authenticationResultCode=e.authenticationResultCode,this.onError(t)}else try{this.resourceInfo=i.toJson(e);var t=e.resourceSets[0].resources[0],s=t.imageUrl.replace("{","${");if(this.tileServers=n.map(t.imageUrlSubdomains,function(e){var t=window.location.protocol;return"file:"===t&&(t="http:"),o.substitute(s,{subdomain:e}).replace("http:",t)}),this._tsLength=this.tileServers.length,this.loaded)this.refresh(),this.onMapStyleChange();else{this.copyright=this.copyright||"&copy; 2012 Microsoft Corporation and its data suppliers",this.loaded=!0,this.onLoad(this);var r=this.loadCallback;r&&(delete this.loadCallback,r(this))}}catch(a){this.onError(a)}},getAttributionData:function(){var e,n=new a,r=i.fromJson(this.resourceInfo);return this.hasAttributionData&&r&&(e=t.getObject("resourceSets.0.resources.0.imageryProviders",!1,r)),e?n.callback({contributors:e}):(r=Error("Layer does not have attribution data"),r.log=s.isDebug,n.errback(r)),n},getTileUrl:function(e,t,i){return o.substitute(this.tileServers[t%this._tsLength].replace(/\{/g,"${"),{quadkey:this._getQuadKey(e,t,i),culture:this.culture,token:this.bingMapsKey})},_getQuadKey:function(e,t,i){var n,s,r="";for(s=e;s>0;s--)e="0",n=1<<s-1,0!=(i&n)&&e++,0!=(t&n)&&(e++,e++),r+=e;return r},setMapStyle:function(e){this.mapStyle=e,this._getTileInfo()},setCulture:function(e){this.culture=e,this._getTileInfo()},setBingMapsKey:function(e){this.bingMapsKey=e},onMapStyleChange:function(){}}),t.mixin(e,{MAP_STYLE_AERIAL:"aerial",MAP_STYLE_AERIAL_WITH_LABELS:"aerialWithLabels",MAP_STYLE_ROAD:"road"}),r("extend-esri")&&t.setObject("virtualearth.VETiledLayer",e,l),e})},"esri/layers/layer":function(){define("dojo/_base/declare dojo/_base/config dojo/_base/connect dojo/_base/lang dojo/_base/Deferred dojo/_base/json dojo/has esri/Evented esri/kernel esri/lang esri/request esri/deferredUtils esri/urlUtils esri/SpatialReference esri/geometry/Extent".split(" "),function(e,t,i,n,s,r,o,a,l,c,h,d,u,f,p){var m=e([a],{declaredClass:"esri.layers.Layer",_eventMap:{error:["error"],load:["layer"],"opacity-change":["opacity"],"update-end":["error"],"visibility-change":["visible"]},constructor:function(e,t){if(e&&n.isString(e)?this._url=u.urlToObject(this.url=e):(this.url=this._url=null,(t=t||e)&&t.layerDefinition&&(t=null)),this.spatialReference=new f(4326),this.initialExtent=new p(-180,-90,180,90,new f(4326)),this._map=this._div=null,this.normalization=!0,t&&(t.id&&(this.id=t.id),!1===t.visible&&(this.visible=!1),c.isDefined(t.opacity)&&(this.opacity=t.opacity),c.isDefined(t.minScale)&&this.setMinScale(t.minScale),c.isDefined(t.maxScale)&&this.setMaxScale(t.maxScale),this.attributionDataUrl=t.attributionDataUrl||"",this.hasAttributionData=!!this.attributionDataUrl,c.isDefined(t.showAttribution)&&(this.showAttribution=t.showAttribution),this.className=t.className,this.refreshInterval=t.refreshInterval||0),this._errorHandler=n.hitch(this,this._errorHandler),this.refresh=n.hitch(this,this.refresh),this.managedSuspension){var s=this._setMap;this._setMap=function(e){var t=s.apply(this,arguments);if(this.evaluateSuspension(),this.suspended&&!e.loaded)var n=i.connect(e,"onLoad",this,function(){i.disconnect(n),n=null,this.evaluateSuspension()});return t}}this.registerConnectEvents()},id:null,visible:!0,loaded:!1,minScale:0,maxScale:0,visibleAtMapScale:!1,suspended:!0,attributionDataUrl:"",hasAttributionData:!1,showAttribution:!0,refreshInterval:0,_errorHandler:function(e){this.onError(e)},_setMap:function(e){if(this._map=e,this._lyrZEHandle=i.connect(e,"onZoomEnd",this,this._processMapScale),e.loaded)this.visibleAtMapScale=this._isMapAtVisibleScale();else var t=i.connect(e,"onLoad",this,function(){i.disconnect(t),t=null,this._processMapScale()})},_unsetMap:function(){i.disconnect(this._lyrZEHandle),this._toggleRT(),this._map=this._lyrZEHandle=null,this.suspended=!0},_cleanUp:function(){this._map=this._div=null},_fireUpdateStart:function(){this.updating||(this.updating=!0,this.attr("data-updating",""),this._toggleRT(),this.onUpdateStart(),this._map&&this._map._incr())},_fireUpdateEnd:function(e,t){this.updating&&(this.updating=!1,this.attr("data-updating"),this._toggleRT(!0),this.onUpdateEnd(e,t),this._map&&this._map._decr())},_getToken:function(){var e=this._url,t=this.credential;return e&&e.query&&e.query.token||t&&t.token||void 0},_findCredential:function(){this.credential=l.id&&this._url&&l.id.findCredential(this._url.path)
},_useSSL:function(){var e=this._url,t=/^http:/i;this.url&&(this.url=this.url.replace(t,"https:")),e&&e.path&&(e.path=e.path.replace(t,"https:"))},refresh:function(){},show:function(){this.setVisibility(!0)},hide:function(){this.setVisibility(!1)},setMinScale:function(e){this.setScaleRange(e)},setMaxScale:function(e){this.setScaleRange(null,e)},setScaleRange:function(e,t){var i=c.isDefined(e),n=c.isDefined(t);this.loaded||(this._hasMin=this._hasMin||i,this._hasMax=this._hasMax||n);var s=this.minScale,r=this.maxScale;this.minScale=(i?e:this.minScale)||0,this.maxScale=(n?t:this.maxScale)||0,(s!==this.minScale||r!==this.maxScale)&&(this.onScaleRangeChange(),this._processMapScale())},suspend:function(){this._suspended=!0,this.evaluateSuspension()},resume:function(){this._suspended=!1,this.evaluateSuspension()},canResume:function(){return this.loaded&&this._map&&this._map.loaded&&this.visible&&this.visibleAtMapScale&&!this._suspended},evaluateSuspension:function(){this.canResume()?this.suspended&&this._resume():this.suspended||this._suspend()},_suspend:function(){this.suspended=!0,this.attr("data-suspended",""),this._toggleRT(),this.onSuspend(),this._map&&this._map.onLayerSuspend(this)},_resume:function(){this.suspended=!1,this.attr("data-suspended");var e=void 0===this._resumedOnce,t=this.className,i=this.getNode();if(e&&(this._resumedOnce=!0,t&&i)){var n=i.getAttribute("class")||"";RegExp("(^|\\s)"+t+"(\\s|$)","i").test(n)||i.setAttribute("class",n+((n?" ":"")+t))}this._toggleRT(!0),this.onResume({firstOccurrence:e}),this._map&&this._map.onLayerResume(this)},_processMapScale:function(){var e=this.visibleAtMapScale;this.visibleAtMapScale=this._isMapAtVisibleScale(),e!==this.visibleAtMapScale&&(this.onScaleVisibilityChange(),this.evaluateSuspension())},isVisibleAtScale:function(e){return e?m.prototype._isMapAtVisibleScale.apply(this,arguments):!1},_isMapAtVisibleScale:function(e){if(!(e||this._map&&this._map.loaded))return!1;e=e||this._map.getScale();var t=this.minScale,i=this.maxScale,n=!t,s=!i;return!n&&t>=e&&(n=!0),!s&&e>=i&&(s=!0),n&&s?!0:!1},getAttributionData:function(){var e=this.attributionDataUrl,i=new s(d._dfdCanceller);return this.hasAttributionData&&e?(i._pendingDfd=h({url:e,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}),i._pendingDfd.then(function(e){i.callback(e)},function(e){i.errback(e)})):(e=Error("Layer does not have attribution data"),e.log=t.isDebug,i.errback(e)),i},getResourceInfo:function(){var e=this.resourceInfo;return n.isString(e)?r.fromJson(e):n.clone(e)},getMap:function(){return this._map},getNode:function(){return this._div},attr:function(e,t){var i=this.getNode();return i&&(null==t?i.removeAttribute(e):i.setAttribute(e,t)),this},setRefreshInterval:function(e){var t=this.refreshInterval;return this.refreshInterval=e,this._toggleRT(),e&&!this.updating&&!this.suspended&&this._toggleRT(!0),t!==e&&this.onRefreshIntervalChange(),this},_toggleRT:function(e){e&&this.refreshInterval?(clearTimeout(this._refreshT),this._refreshT=setTimeout(this.refresh,6e4*this.refreshInterval)):this._refreshT&&(clearTimeout(this._refreshT),this._refreshT=null)},setNormalization:function(e){this.normalization=e},setVisibility:function(e){this.visible!==e&&(this.visible=e,this.onVisibilityChange(this.visible),this.evaluateSuspension()),this.attr("data-hidden",e?null:"")},onLoad:function(){},onVisibilityChange:function(){},onScaleRangeChange:function(){},onScaleVisibilityChange:function(){},onSuspend:function(){},onResume:function(){},onUpdate:function(){},onUpdateStart:function(){},onUpdateEnd:function(){},onRefreshIntervalChange:function(){},onError:function(){}});return o("extend-esri")&&n.setObject("layers.Layer",m,l),m})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(e,t,i,n){return e("dijit.form._FormValueWidget",[i,n],{_layoutHackIE7:function(){if(7==t("ie"))for(var e=this.domNode,i=e.parentNode,n=e.firstChild||e,s=n.style.filter,r=this;i&&0==i.clientHeight;)!function(){var e=r.connect(i,"onscroll",function(){r.disconnect(e),n.style.filter=(new Date).getMilliseconds(),r.defer(function(){n.style.filter=s})})}(),i=i.parentNode}})})},"esri/urlUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/url dojo/io-query esri/kernel esri/config esri/sniff".split(" "),function(e,t,i,n,s,r,o){var a={},l=r.defaults.io,c=window.location.protocol;return"file:"===c&&(c="http:"),a.urlToObject=function(e){var t=e.indexOf("?");return-1===t?{path:e,query:null}:{path:e.substring(0,t),query:n.queryToObject(e.substring(t+1))}},a.getProxyUrl=function(t,i){var n,s,r=e.isString(t)?0===e.trim(t).toLowerCase().indexOf("https:"):t,o=l.proxyUrl;if(e.isString(t)&&(s=a.getProxyRule(t))&&(o=s.proxyUrl),!o)throw console.log("esri.config.defaults.io.proxyUrl is not set."),Error("esri.config.defaults.io.proxyUrl is not set.");return r&&!1!==i&&0!==window.location.href.toLowerCase().indexOf("https:")&&(r=o,0!==r.toLowerCase().indexOf("http")&&(r=a.getAbsoluteUrl(r)),r=r.replace(/^http:/i,"https:"),a.canUseXhr(r)&&(o=r,n=1)),o=a.urlToObject(o),o._xo=n,o},a.addProxy=function(t){var i,s=a.getProxyRule(t);return s?i=a.urlToObject(s.proxyUrl):l.alwaysUseProxy&&(i=a.getProxyUrl()),i&&(s=a.urlToObject(t),t=i.path+"?"+s.path,(i=n.objectToQuery(e.mixin(i.query||{},s.query)))&&(t+="?"+i)),t},a.addProxyRule=function(e){var t,i,n=e.urlPrefix=a.urlToObject(e.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//gi,"").toLowerCase(),s=l.proxyRules,r=s.length,o=r;for(t=0;r>t;t++){if(i=s[t].urlPrefix,0===n.indexOf(i)){if(n.length===i)return-1;o=t;break}0===i.indexOf(n)&&(o=t+1)}return s.splice(o,0,e),o},a.getProxyRule=function(e){var t,i=l.proxyRules,n=i.length,s=a.urlToObject(e).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//gi,"").toLowerCase();for(e=0;n>e;e++)if(0===s.indexOf(i[e].urlPrefix)){t=i[e];break}return t},a.hasSameOrigin=function(t,n,s){t=t.toLowerCase(),n=n.toLowerCase();var r=window.location.href.toLowerCase();return t=0===t.indexOf("http")?new i(t):r=new i(r),n=0===n.indexOf("http")?new i(n):e.isString(r)?new i(r):r,(s||t.scheme===n.scheme)&&t.host===n.host&&t.port===n.port},a.canUseXhr=function(i,n){var s,r=!1,c=a.hasSameOrigin,h=l.corsEnabledServers,d=-1;return o("esri-cors")&&h&&h.length&&(r=t.some(h,function(t,n){return s=0!==e.trim(t).toLowerCase().indexOf("http"),c(i,s?"http://"+t:t)||s&&c(i,"https://"+t)?(d=n,!0):!1})),n?d:r},a.getAbsoluteUrl=function(t){return e.isString(t)&&-1===t.indexOf("http://")&&-1===t.indexOf("https://")?0===t.indexOf("//")?c+t:0===t.indexOf("/")?c+"//"+window.location.host+t:s._appBaseUrl+t:t},a.fixUrl=function(e){return/^\/\//i.test(e)&&(e=c+e),e=e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")},o("extend-esri")&&(e.mixin(s,a),s._getProxyUrl=a.getProxyUrl,s._getProxiedUrl=a.addProxy,s._hasSameOrigin=a.hasSameOrigin,s._canDoXOXHR=a.canUseXhr,s._getAbsoluteUrl=a.getAbsoluteUrl,s.fixUrl=a.fixUrl),a})},"esri/tasks/FindResult":function(){define("dojo/_base/declare dojo/_base/lang dojo/has esri/kernel esri/graphic esri/geometry/jsonUtils".split(" "),function(e,t,i,n,s,r){return e=e(null,{declaredClass:"esri.tasks.FindResult",constructor:function(e){t.mixin(this,e),this.feature=new s(e.geometry?r.fromJson(e.geometry):null,null,e.attributes),delete this.geometry,delete this.attributes}}),i("extend-esri")&&t.setObject("tasks.FindResult",e,n),e})},"url:dijit/templates/Tooltip.html":'<div class="dijitTooltip dijitTooltipLeft" id="dojoTooltip"\n	><div class="dijitTooltipConnector" data-dojo-attach-point="connectorNode"></div\n	><div class="dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point="containerNode" role=\'alert\'></div\n></div>\n',"url:dijit/templates/Dialog.html":'<div class="dijitDialog" role="dialog" aria-labelledby="${id}_title">\n	<div data-dojo-attach-point="titleBar" class="dijitDialogTitleBar">\n		<span data-dojo-attach-point="titleNode" class="dijitDialogTitle" id="${id}_title"\n				role="heading" level="1"></span>\n		<span data-dojo-attach-point="closeButtonNode" class="dijitDialogCloseIcon" data-dojo-attach-event="ondijitclick: onCancel" title="${buttonCancel}" role="button" tabindex="0">\n			<span data-dojo-attach-point="closeText" class="closeText" title="${buttonCancel}">x</span>\n		</span>\n	</div>\n	<div data-dojo-attach-point="containerNode" class="dijitDialogPaneContent"></div>\n</div>\n',"url:dijit/form/templates/ComboButton.html":'<table class="dijit dijitReset dijitInline dijitLeft"\n	cellspacing=\'0\' cellpadding=\'0\' role="presentation"\n	><tbody role="presentation"><tr role="presentation"\n		><td class="dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point="buttonNode" data-dojo-attach-event="ondijitclick:__onClick,onkeydown:_onButtonKeyDown"\n		><div id="${id}_button" class="dijitReset dijitButtonContents"\n			data-dojo-attach-point="titleNode"\n			role="button" aria-labelledby="${id}_label"\n			><div class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode" role="presentation"></div\n			><div class="dijitReset dijitInline dijitButtonText" id="${id}_label" data-dojo-attach-point="containerNode" role="presentation"></div\n		></div\n		></td\n		><td id="${id}_arrow" class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'\n			data-dojo-attach-point="_popupStateNode,focusNode,_buttonNode"\n			data-dojo-attach-event="onkeydown:_onArrowKeyDown"\n			title="${optionsTitle}"\n			role="button" aria-haspopup="true"\n			><div class="dijitReset dijitArrowButtonInner" role="presentation"></div\n			><div class="dijitReset dijitArrowButtonChar" role="presentation">&#9660;</div\n		></td\n		><td style="display:none !important;"\n			><input ${!nameAttrSetting} type="${type}" value="${value}" data-dojo-attach-point="valueNode" role="presentation"\n				data-dojo-attach-event="onclick:_onClick"\n		/></td></tr></tbody\n></table>\n',"url:dijit/form/templates/DropDownButton.html":'<span class="dijit dijitReset dijitInline"\n	><span class=\'dijitReset dijitInline dijitButtonNode\'\n		data-dojo-attach-event="ondijitclick:__onClick" data-dojo-attach-point="_buttonNode"\n		><span class="dijitReset dijitStretch dijitButtonContents"\n			data-dojo-attach-point="focusNode,titleNode,_arrowWrapperNode,_popupStateNode"\n			role="button" aria-haspopup="true" aria-labelledby="${id}_label"\n			><span class="dijitReset dijitInline dijitIcon"\n				data-dojo-attach-point="iconNode"\n			></span\n			><span class="dijitReset dijitInline dijitButtonText"\n				data-dojo-attach-point="containerNode"\n				id="${id}_label"\n			></span\n			><span class="dijitReset dijitInline dijitArrowButtonInner"></span\n			><span class="dijitReset dijitInline dijitArrowButtonChar">&#9660;</span\n		></span\n	></span\n	><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1"\n		data-dojo-attach-event="onclick:_onClick"\n		data-dojo-attach-point="valueNode" role="presentation"\n/></span>\n',"url:dijit/form/templates/Button.html":'<span class="dijit dijitReset dijitInline" role="presentation"\n	><span class="dijitReset dijitInline dijitButtonNode"\n		data-dojo-attach-event="ondijitclick:__onClick" role="presentation"\n		><span class="dijitReset dijitStretch dijitButtonContents"\n			data-dojo-attach-point="titleNode,focusNode"\n			role="button" aria-labelledby="${id}_label"\n			><span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span\n			><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span\n			><span class="dijitReset dijitInline dijitButtonText"\n				id="${id}_label"\n				data-dojo-attach-point="containerNode"\n			></span\n		></span\n	></span\n	><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"\n		data-dojo-attach-event="onclick:_onClick"\n		tabIndex="-1" role="presentation" data-dojo-attach-point="valueNode"\n/></span>\n',"url:dijit/templates/TooltipDialog.html":'<div role="alertdialog" tabIndex="-1">\n	<div class="dijitTooltipContainer" role="presentation">\n		<div class="dijitTooltipContents dijitTooltipFocusNode" data-dojo-attach-point="containerNode"></div>\n	</div>\n	<div class="dijitTooltipConnector" role="presentation" data-dojo-attach-point="connectorNode"></div>\n</div>\n',"url:dijit/form/templates/ValidationTextBox.html":'<div class="dijit dijitReset dijitInline dijitLeft"\n	id="widget_${id}" role="presentation"\n	><div class=\'dijitReset dijitValidationContainer\'\n		><input class="dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value="&#935; " type="text" tabIndex="-1" readonly="readonly" role="presentation"\n	/></div\n	><div class="dijitReset dijitInputField dijitInputContainer"\n		><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\n			${!nameAttrSetting} type=\'${type}\'\n	/></div\n></div>\n',"url:dijit/form/templates/TextBox.html":'<div class="dijit dijitReset dijitInline dijitLeft" id="widget_${id}" role="presentation"\n	><div class="dijitReset dijitInputField dijitInputContainer"\n		><input class="dijitReset dijitInputInner" data-dojo-attach-point=\'textbox,focusNode\' autocomplete="off"\n			${!nameAttrSetting} type=\'${type}\'\n	/></div\n></div>\n',"*now":function(e){e(['dojo/i18n!*preload*esri/nls/jsapi*["ar","az","ca","cs","da","de-de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ro","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])},"*noref":1}}),define("esri/jsapi","dojo/fx/Toggler dojo/_base/html dijit/_base dijit/form/DropDownButton dijit/form/ComboButton dijit/form/ToggleButton dijit/_base/manager dijit/TooltipDialog esri/main esri/map esri/geometry esri/symbol esri/renderer esri/utils esri/IdentityManager esri/layers/graphics esri/layers/agstiled esri/layers/agsdynamic esri/layers/agsimageservice esri/dijit/PopupTemplate esri/dijit/PopupRenderer esri/dijit/Attribution esri/tasks/find esri/tasks/geometry esri/tasks/gp esri/tasks/identify esri/tasks/locator esri/tasks/query esri/tasks/route esri/tasks/QueryTask esri/tasks/RelationshipQuery esri/tasks/StatisticDefinition esri/toolbars/draw esri/toolbars/navigation esri/virtualearth/VETiledLayer esri/virtualearth/VEGeocoder".split(" "),function(){return{}});