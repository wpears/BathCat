/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
require({cache:{"dojox/charting/plot2d/Lines":function(){define("dojox/charting/plot2d/Lines",["dojo/_base/declare","./Default"],function(_1,_2){return _1("dojox.charting.plot2d.Lines",_2,{constructor:function(){this.opt.lines=true;}});});},"dojox/charting/plot2d/ClusteredBars":function(){define("dojox/charting/plot2d/ClusteredBars",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Bars","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils"],function(_3,_4,_5,_6,dc,df,_7,du){var _8=_7.lambda("item.purgeGroup()");return _5("dojox.charting.plot2d.ClusteredBars",_6,{render:function(_9,_a){if(this.zoom&&!this.isDataDirty()){return this.performZoom(_9,_a);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){_4.forEach(this.series,_8);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(_b){_b.cleanGroup(s);});}var t=this.chart.theme,f,_c,_d,_e,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_f=Math.max(0,this._hScaler.bounds.lower),_10=ht(_f),_11=this.events();f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt,this.series.length);_c=f.gap;_d=_e=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i],_12=_e*(this.series.length-i-1);if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _13=t.next("bar",[this.opt,run]),s=run.group,_14=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var _15=run.data[j];if(_15!==null){var v=typeof _15=="number"?_15:_15.y,hv=ht(v),_16=hv-_10,w=Math.abs(_16),_17=typeof _15!="number"?t.addMixin(_13,"bar",_15,true):t.post(_13,"bar");if(w>=0&&_d>=1){var _18={x:_a.l+(v<_f?hv:_10),y:_9.height-_a.b-vt(j+1.5)+_c+_12,width:w,height:_d};var _19=this._plotFill(_17.series.fill,_9,_a);_19=this._shapeFill(_19,_18);var _1a=s.createRect(_18).setFill(_19).setStroke(_17.series.stroke);run.dyn.fill=_1a.getFill();run.dyn.stroke=_1a.getStroke();if(_11){var o={element:"bar",index:j,run:run,shape:_1a,x:v,y:j+1.5};this._connectEvents(o);_14[j]=o;}if(this.animate){this._animateBar(_1a,_a.l+_10,-_16);}}}}this._eventSeries[run.name]=_14;run.dirty=false;}this.dirty=false;return this;}});});},"dojox/gfx/utils":function(){define("dojox/gfx/utils",["dojo/_base/kernel","dojo/_base/lang","./_base","dojo/_base/html","dojo/_base/array","dojo/_base/window","dojo/_base/json","dojo/_base/Deferred","dojo/_base/sniff","require","dojo/_base/config"],function(_1b,_1c,g,_1d,arr,win,_1e,_1f,has,_20,_21){var gu=g.utils={};_1c.mixin(gu,{forEach:function(_22,f,o){o=o||win.global;f.call(o,_22);if(_22 instanceof g.Surface||_22 instanceof g.Group){arr.forEach(_22.children,function(_23){gu.forEach(_23,f,o);});}},serialize:function(_24){var t={},v,_25=_24 instanceof g.Surface;if(_25||_24 instanceof g.Group){t.children=arr.map(_24.children,gu.serialize);if(_25){return t.children;}}else{t.shape=_24.getShape();}if(_24.getTransform){v=_24.getTransform();if(v){t.transform=v;}}if(_24.getStroke){v=_24.getStroke();if(v){t.stroke=v;}}if(_24.getFill){v=_24.getFill();if(v){t.fill=v;}}if(_24.getFont){v=_24.getFont();if(v){t.font=v;}}return t;},toJson:function(_26,_27){return _1e.toJson(gu.serialize(_26),_27);},deserialize:function(_28,_29){if(_29 instanceof Array){return arr.map(_29,_1c.hitch(null,gu.deserialize,_28));}var _2a=("shape" in _29)?_28.createShape(_29.shape):_28.createGroup();if("transform" in _29){_2a.setTransform(_29.transform);}if("stroke" in _29){_2a.setStroke(_29.stroke);}if("fill" in _29){_2a.setFill(_29.fill);}if("font" in _29){_2a.setFont(_29.font);}if("children" in _29){arr.forEach(_29.children,_1c.hitch(null,gu.deserialize,_2a));}return _2a;},fromJson:function(_2b,_2c){return gu.deserialize(_2b,_1e.fromJson(_2c));},toSvg:function(_2d){var _2e=new _1f();if(g.renderer==="svg"){try{var svg=gu._cleanSvg(gu._innerXML(_2d.rawNode));_2e.callback(svg);}catch(e){_2e.errback(e);}}else{if(!gu._initSvgSerializerDeferred){gu._initSvgSerializer();}var _2f=gu.toJson(_2d);var _30=function(){try{var _31=_2d.getDimensions();var _32=_31.width;var _33=_31.height;var _34=gu._gfxSvgProxy.document.createElement("div");gu._gfxSvgProxy.document.body.appendChild(_34);win.withDoc(gu._gfxSvgProxy.document,function(){_1d.style(_34,"width",_32);_1d.style(_34,"height",_33);},this);var ts=gu._gfxSvgProxy[dojox._scopeName].gfx.createSurface(_34,_32,_33);var _35=function(_36){try{gu._gfxSvgProxy[dojox._scopeName].gfx.utils.fromJson(_36,_2f);var svg=gu._cleanSvg(_34.innerHTML);_36.clear();_36.destroy();gu._gfxSvgProxy.document.body.removeChild(_34);_2e.callback(svg);}catch(e){_2e.errback(e);}};ts.whenLoaded(null,_35);}catch(ex){_2e.errback(ex);}};if(gu._initSvgSerializerDeferred.fired>0){_30();}else{gu._initSvgSerializerDeferred.addCallback(_30);}}return _2e;},_gfxSvgProxy:null,_initSvgSerializerDeferred:null,_svgSerializerInitialized:function(){gu._initSvgSerializerDeferred.callback(true);},_initSvgSerializer:function(){if(!gu._initSvgSerializerDeferred){gu._initSvgSerializerDeferred=new _1f();var f=win.doc.createElement("iframe");_1d.style(f,{display:"none",position:"absolute",width:"1em",height:"1em",top:"-10000px"});var _37;if(has("ie")){f.onreadystatechange=function(){if(f.contentWindow.document.readyState=="complete"){f.onreadystatechange=function(){};_37=setInterval(function(){if(f.contentWindow[_1b.scopeMap["dojo"][1]._scopeName]&&f.contentWindow[_1b.scopeMap["dojox"][1]._scopeName].gfx&&f.contentWindow[_1b.scopeMap["dojox"][1]._scopeName].gfx.utils){clearInterval(_37);f.contentWindow.parent[_1b.scopeMap["dojox"][1]._scopeName].gfx.utils._gfxSvgProxy=f.contentWindow;f.contentWindow.parent[_1b.scopeMap["dojox"][1]._scopeName].gfx.utils._svgSerializerInitialized();}},50);}};}else{f.onload=function(){f.onload=function(){};_37=setInterval(function(){if(f.contentWindow[_1b.scopeMap["dojo"][1]._scopeName]&&f.contentWindow[_1b.scopeMap["dojox"][1]._scopeName].gfx&&f.contentWindow[_1b.scopeMap["dojox"][1]._scopeName].gfx.utils){clearInterval(_37);f.contentWindow.parent[_1b.scopeMap["dojox"][1]._scopeName].gfx.utils._gfxSvgProxy=f.contentWindow;f.contentWindow.parent[_1b.scopeMap["dojox"][1]._scopeName].gfx.utils._svgSerializerInitialized();}},50);};}var uri=(_21["dojoxGfxSvgProxyFrameUrl"]||_20.toUrl("dojox/gfx/resources/gfxSvgProxyFrame.html"));f.setAttribute("src",uri.toString());win.body().appendChild(f);}},_innerXML:function(_38){if(_38.innerXML){return _38.innerXML;}else{if(_38.xml){return _38.xml;}else{if(typeof XMLSerializer!="undefined"){return (new XMLSerializer()).serializeToString(_38);}}}return null;},_cleanSvg:function(svg){if(svg){if(svg.indexOf("xmlns=\"http://www.w3.org/2000/svg\"")==-1){svg=svg.substring(4,svg.length);svg="<svg xmlns=\"http://www.w3.org/2000/svg\""+svg;}if(svg.indexOf("xmlns:xlink=\"http://www.w3.org/1999/xlink\"")==-1){svg=svg.substring(4,svg.length);svg="<svg xmlns:xlink=\"http://www.w3.org/1999/xlink\""+svg;}if(svg.indexOf("xlink:href")===-1){svg=svg.replace(/href\s*=/g,"xlink:href=");}svg=svg.replace(/\bdojoGfx\w*\s*=\s*(['"])\w*\1/g,"");svg=svg.replace(/\b__gfxObject__\s*=\s*(['"])\w*\1/g,"");svg=svg.replace(/[=]([^"']+?)(\s|>)/g,"=\"$1\"$2");}return svg;}});return gu;});},"dijit/_TemplatedMixin":function(){define("dijit/_TemplatedMixin",["dojo/_base/lang","dojo/touch","./_WidgetBase","dojo/string","dojo/cache","dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/sniff","dojo/_base/unload","dojo/_base/window"],function(_39,_3a,_3b,_3c,_3d,_3e,_3f,_40,has,_41,win){var _42=_3f("dijit._TemplatedMixin",null,{templateString:null,templatePath:null,_skipNodeCache:false,_earlyTemplatedStartup:false,constructor:function(){this._attachPoints=[];this._attachEvents=[];},_stringRepl:function(_43){var _44=this.declaredClass,_45=this;return _3c.substitute(_43,this,function(_46,key){if(key.charAt(0)=="!"){_46=_39.getObject(key.substr(1),false,_45);}if(typeof _46=="undefined"){throw new Error(_44+" template:"+key);}if(_46==null){return "";}return key.charAt(0)=="!"?_46:_46.toString().replace(/"/g,"&quot;");},this);},buildRendering:function(){if(!this.templateString){this.templateString=_3d(this.templatePath,{sanitize:true});}var _47=_42.getCachedTemplate(this.templateString,this._skipNodeCache);var _48;if(_39.isString(_47)){_48=_40.toDom(this._stringRepl(_47));if(_48.nodeType!=1){throw new Error("Invalid template: "+_47);}}else{_48=_47.cloneNode(true);}this.domNode=_48;this.inherited(arguments);this._attachTemplateNodes(_48,function(n,p){return n.getAttribute(p);});this._beforeFillContent();this._fillContent(this.srcNodeRef);},_beforeFillContent:function(){},_fillContent:function(_49){var _4a=this.containerNode;if(_49&&_4a){while(_49.hasChildNodes()){_4a.appendChild(_49.firstChild);}}},_attachTemplateNodes:function(_4b,_4c){var _4d=_39.isArray(_4b)?_4b:(_4b.all||_4b.getElementsByTagName("*"));var x=_39.isArray(_4b)?0:-1;for(;x<_4d.length;x++){var _4e=(x==-1)?_4b:_4d[x];if(this.widgetsInTemplate&&(_4c(_4e,"dojoType")||_4c(_4e,"data-dojo-type"))){continue;}var _4f=_4c(_4e,"dojoAttachPoint")||_4c(_4e,"data-dojo-attach-point");if(_4f){var _50,_51=_4f.split(/\s*,\s*/);while((_50=_51.shift())){if(_39.isArray(this[_50])){this[_50].push(_4e);}else{this[_50]=_4e;}this._attachPoints.push(_50);}}var _52=_4c(_4e,"dojoAttachEvent")||_4c(_4e,"data-dojo-attach-event");if(_52){var _53,_54=_52.split(/\s*,\s*/);var _55=_39.trim;while((_53=_54.shift())){if(_53){var _56=null;if(_53.indexOf(":")!=-1){var _57=_53.split(":");_53=_55(_57[0]);_56=_55(_57[1]);}else{_53=_55(_53);}if(!_56){_56=_53;}this._attachEvents.push(this.connect(_4e,_3a[_53]||_53,_56));}}}}},destroyRendering:function(){_3e.forEach(this._attachPoints,function(_58){delete this[_58];},this);this._attachPoints=[];_3e.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments);}});_42._templateCache={};_42.getCachedTemplate=function(_59,_5a){var _5b=_42._templateCache;var key=_59;var _5c=_5b[key];if(_5c){try{if(!_5c.ownerDocument||_5c.ownerDocument==win.doc){return _5c;}}catch(e){}_40.destroy(_5c);}_59=_3c.trim(_59);if(_5a||_59.match(/\$\{([^\}]+)\}/g)){return (_5b[key]=_59);}else{var _5d=_40.toDom(_59);if(_5d.nodeType!=1){throw new Error("Invalid template: "+_59);}return (_5b[key]=_5d);}};if(has("ie")){_41.addOnWindowUnload(function(){var _5e=_42._templateCache;for(var key in _5e){var _5f=_5e[key];if(typeof _5f=="object"){_40.destroy(_5f);}delete _5e[key];}});}_39.extend(_3b,{dojoAttachEvent:"",dojoAttachPoint:""});return _42;});},"dijit/_Templated":function(){define("dijit/_Templated",["./_WidgetBase","./_TemplatedMixin","./_WidgetsInTemplateMixin","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/kernel"],function(_60,_61,_62,_63,_64,_65,_66){_65.extend(_60,{waiRole:"",waiState:""});return _64("dijit._Templated",[_61,_62],{widgetsInTemplate:false,constructor:function(){_66.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0");},_attachTemplateNodes:function(_67,_68){this.inherited(arguments);var _69=_65.isArray(_67)?_67:(_67.all||_67.getElementsByTagName("*"));var x=_65.isArray(_67)?0:-1;for(;x<_69.length;x++){var _6a=(x==-1)?_67:_69[x];var _6b=_68(_6a,"waiRole");if(_6b){_6a.setAttribute("role",_6b);}var _6c=_68(_6a,"waiState");if(_6c){_63.forEach(_6c.split(/\s*,\s*/),function(_6d){if(_6d.indexOf("-")!=-1){var _6e=_6d.split("-");_6a.setAttribute("aria-"+_6e[0],_6e[1]);}});}}}});});},"dojox/charting/plot2d/Areas":function(){define("dojox/charting/plot2d/Areas",["dojo/_base/declare","./Default"],function(_6f,_70){return _6f("dojox.charting.plot2d.Areas",_70,{constructor:function(){this.opt.lines=true;this.opt.areas=true;}});});},"dojox/lang/functional/array":function(){define("dojox/lang/functional/array",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","./lambda"],function(_71,_72,arr,win,df){var _73={};_72.mixin(df,{filter:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var t=[],v,i,n;if(_72.isArray(a)){for(i=0,n=a.length;i<n;++i){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){v=a.next();if(f.call(o,v,i++,a)){t.push(v);}}}else{for(i in a){if(!(i in _73)){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}}}}return t;},forEach:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var i,n;if(_72.isArray(a)){for(i=0,n=a.length;i<n;f.call(o,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();f.call(o,a.next(),i++,a)){}}else{for(i in a){if(!(i in _73)){f.call(o,a[i],i,a);}}}}return o;},map:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var t,n,i;if(_72.isArray(a)){t=new Array(n=a.length);for(i=0;i<n;t[i]=f.call(o,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){t=[];for(i=0;a.hasNext();t.push(f.call(o,a.next(),i++,a))){}}else{t=[];for(i in a){if(!(i in _73)){t.push(f.call(o,a[i],i,a));}}}}return t;},every:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var i,n;if(_72.isArray(a)){for(i=0,n=a.length;i<n;++i){if(!f.call(o,a[i],i,a)){return false;}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){if(!f.call(o,a.next(),i++,a)){return false;}}}else{for(i in a){if(!(i in _73)){if(!f.call(o,a[i],i,a)){return false;}}}}}return true;},some:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var i,n;if(_72.isArray(a)){for(i=0,n=a.length;i<n;++i){if(f.call(o,a[i],i,a)){return true;}}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();){if(f.call(o,a.next(),i++,a)){return true;}}}else{for(i in a){if(!(i in _73)){if(f.call(o,a[i],i,a)){return true;}}}}}return false;}});return df;});},"dijit/place":function(){define("dijit/place",["dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/window","dojo/window","."],function(_74,_75,_76,_77,win,_78,_79){function _7a(_7b,_7c,_7d,_7e){var _7f=_78.getBox();if(!_7b.parentNode||String(_7b.parentNode.tagName).toLowerCase()!="body"){win.body().appendChild(_7b);}var _80=null;_74.some(_7c,function(_81){var _82=_81.corner;var pos=_81.pos;var _83=0;var _84={w:{"L":_7f.l+_7f.w-pos.x,"R":pos.x-_7f.l,"M":_7f.w}[_82.charAt(1)],h:{"T":_7f.t+_7f.h-pos.y,"B":pos.y-_7f.t,"M":_7f.h}[_82.charAt(0)]};if(_7d){var res=_7d(_7b,_81.aroundCorner,_82,_84,_7e);_83=typeof res=="undefined"?0:res;}var _85=_7b.style;var _86=_85.display;var _87=_85.visibility;if(_85.display=="none"){_85.visibility="hidden";_85.display="";}var mb=_75.getMarginBox(_7b);_85.display=_86;_85.visibility=_87;var _88={"L":pos.x,"R":pos.x-mb.w,"M":Math.max(_7f.l,Math.min(_7f.l+_7f.w,pos.x+(mb.w>>1))-mb.w)}[_82.charAt(1)],_89={"T":pos.y,"B":pos.y-mb.h,"M":Math.max(_7f.t,Math.min(_7f.t+_7f.h,pos.y+(mb.h>>1))-mb.h)}[_82.charAt(0)],_8a=Math.max(_7f.l,_88),_8b=Math.max(_7f.t,_89),_8c=Math.min(_7f.l+_7f.w,_88+mb.w),_8d=Math.min(_7f.t+_7f.h,_89+mb.h),_8e=_8c-_8a,_8f=_8d-_8b;_83+=(mb.w-_8e)+(mb.h-_8f);if(_80==null||_83<_80.overflow){_80={corner:_82,aroundCorner:_81.aroundCorner,x:_8a,y:_8b,w:_8e,h:_8f,overflow:_83,spaceAvailable:_84};}return !_83;});if(_80.overflow&&_7d){_7d(_7b,_80.aroundCorner,_80.corner,_80.spaceAvailable,_7e);}var l=_75.isBodyLtr(),s=_7b.style;s.top=_80.y+"px";s[l?"left":"right"]=(l?_80.x:_7f.w-_80.x-_80.w)+"px";s[l?"right":"left"]="auto";return _80;};return (_79.place={at:function(_90,pos,_91,_92){var _93=_74.map(_91,function(_94){var c={corner:_94,pos:{x:pos.x,y:pos.y}};if(_92){c.pos.x+=_94.charAt(1)=="L"?_92.x:-_92.x;c.pos.y+=_94.charAt(0)=="T"?_92.y:-_92.y;}return c;});return _7a(_90,_93);},around:function(_95,_96,_97,_98,_99){var _9a=(typeof _96=="string"||"offsetWidth" in _96)?_75.position(_96,true):_96;if(_96.parentNode){var _9b=_96.parentNode;while(_9b&&_9b.nodeType==1&&_9b.nodeName!="BODY"){var _9c=_75.position(_9b,true);var _9d=_76.getComputedStyle(_9b).overflow;if(_9d=="hidden"||_9d=="auto"||_9d=="scroll"){var _9e=Math.min(_9a.y+_9a.h,_9c.y+_9c.h);var _9f=Math.min(_9a.x+_9a.w,_9c.x+_9c.w);_9a.x=Math.max(_9a.x,_9c.x);_9a.y=Math.max(_9a.y,_9c.y);_9a.h=_9e-_9a.y;_9a.w=_9f-_9a.x;}_9b=_9b.parentNode;}}var x=_9a.x,y=_9a.y,_a0="w" in _9a?_9a.w:(_9a.w=_9a.width),_a1="h" in _9a?_9a.h:(_77.deprecated("place.around: dijit.place.__Rectangle: { x:"+x+", y:"+y+", height:"+_9a.height+", width:"+_a0+" } has been deprecated.  Please use { x:"+x+", y:"+y+", h:"+_9a.height+", w:"+_a0+" }","","2.0"),_9a.h=_9a.height);var _a2=[];function _a3(_a4,_a5){_a2.push({aroundCorner:_a4,corner:_a5,pos:{x:{"L":x,"R":x+_a0,"M":x+(_a0>>1)}[_a4.charAt(1)],y:{"T":y,"B":y+_a1,"M":y+(_a1>>1)}[_a4.charAt(0)]}});};_74.forEach(_97,function(pos){var ltr=_98;switch(pos){case "above-centered":_a3("TM","BM");break;case "below-centered":_a3("BM","TM");break;case "after-centered":ltr=!ltr;case "before-centered":_a3(ltr?"ML":"MR",ltr?"MR":"ML");break;case "after":ltr=!ltr;case "before":_a3(ltr?"TL":"TR",ltr?"TR":"TL");_a3(ltr?"BL":"BR",ltr?"BR":"BL");break;case "below-alt":ltr=!ltr;case "below":_a3(ltr?"BL":"BR",ltr?"TL":"TR");_a3(ltr?"BR":"BL",ltr?"TR":"TL");break;case "above-alt":ltr=!ltr;case "above":_a3(ltr?"TL":"TR",ltr?"BL":"BR");_a3(ltr?"TR":"TL",ltr?"BR":"BL");break;default:_a3(pos.aroundCorner,pos.corner);}});var _a6=_7a(_95,_a2,_99,{w:_a0,h:_a1});_a6.aroundNodePos=_9a;return _a6;}});});},"dojox/charting/Chart2D":function(){define("dojox/charting/Chart2D",["dojo/_base/kernel","dojox","./Chart","./axis2d/Default","./axis2d/Invisible","./plot2d/Default","./plot2d/Lines","./plot2d/Areas","./plot2d/Markers","./plot2d/MarkersOnly","./plot2d/Scatter","./plot2d/Stacked","./plot2d/StackedLines","./plot2d/StackedAreas","./plot2d/Columns","./plot2d/StackedColumns","./plot2d/ClusteredColumns","./plot2d/Bars","./plot2d/StackedBars","./plot2d/ClusteredBars","./plot2d/Grid","./plot2d/Pie","./plot2d/Bubble","./plot2d/Candlesticks","./plot2d/OHLC","./plot2d/Spider"],function(_a7,_a8,_a9){_a7.deprecated("dojox.charting.Chart2D","Use dojo.charting.Chart instead and require all other components explicitly","2.0");return _a8.charting.Chart2D=_a9;});},"esri/layers/agsimageservice":function(){define(["dijit","dojo","dojox","dojo/require!esri/layers/dynamic,esri/layers/agscommon,esri/utils"],function(_aa,_ab,_ac){_ab.provide("esri.layers.agsimageservice");_ab.require("esri.layers.dynamic");_ab.require("esri.layers.agscommon");_ab.require("esri.utils");_ab.declare("esri.layers.ArcGISImageServiceLayer",esri.layers.DynamicMapServiceLayer,{constructor:function(url,_ad){this._url=esri.urlToObject(url);var _ae=_ad&&_ad.imageServiceParameters;this.format=_ae&&_ae.format;this.interpolation=_ae?_ae.interpolation:null;this.compressionQuality=_ae?_ae.compressionQuality:null;this.bandIds=_ae?_ae.bandIds:null;this.mosaicRule=_ae?_ae.mosaicRule:null;this.renderingRule=_ae?_ae.renderingRule:null;this._params=_ab.mixin({},this._url.query,{f:"image",interpolation:this.interpolation,format:this.format,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null},_ae?_ae.toJson():{});this._initLayer=_ab.hitch(this,this._initLayer);this.useMapImage=(_ad&&_ad.useMapImage)||false;this._loadCallback=_ad&&_ad.loadCallback;var _af=_ad&&_ad.resourceInfo;if(_af){this._initLayer(_af);}else{esri.request({url:this._url.path,content:_ab.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});}},disableClientCaching:false,_initLayer:function(_b0,io){this._findCredential();var ssl=(this.credential&&this.credential.ssl)||(_b0&&_b0._ssl);if(ssl){this._useSSL();}var _b1=this.minScale,_b2=this.maxScale;_ab.mixin(this,_b0);this.minScale=_b1;this.maxScale=_b2;this.initialExtent=(this.fullExtent=this.extent=(new esri.geometry.Extent(_b0.extent)));this.spatialReference=this.initialExtent.spatialReference;this.pixelSizeX=parseFloat(this.pixelSizeX);this.pixelSizeY=parseFloat(this.pixelSizeY);var i,il,_b3=this.minValues,_b4=this.maxValues,_b5=this.meanValues,_b6=this.stdvValues,bs=(this.bands=[]);for(i=0,il=this.bandCount;i<il;i++){bs[i]={min:_b3[i],max:_b4[i],mean:_b5[i],stddev:_b6[i]};}var _b7=this.timeInfo;this.timeInfo=(_b7&&_b7.timeExtent)?new esri.layers.TimeInfo(_b7):null;var _b8=this.fields=[];var _b9=_b0.fields;if(_b9){for(i=0;i<_b9.length;i++){_b8.push(new esri.layers.Field(_b9[i]));}}this.version=_b0.currentVersion;if(!this.version){var ver;if("fields" in _b0||"objectIdField" in _b0||"timeInfo" in _b0){ver=10;}else{ver=9.3;}this.version=ver;}if(esri._isDefined(_b0.minScale)&&!this._hasMin){this.setMinScale(_b0.minScale);}if(esri._isDefined(_b0.maxScale)&&!this._hasMax){this.setMaxScale(_b0.maxScale);}this.loaded=true;this.onLoad(this);var _ba=this._loadCallback;if(_ba){delete this._loadCallback;_ba(this);}},getImageUrl:function(_bb,_bc,_bd,_be){var sr=_bb.spatialReference.wkid||_ab.toJson(_bb.spatialReference.toJson());delete this._params._ts;var _bf=this._url.path+"/exportImage?";_ab.mixin(this._params,{bbox:_bb.xmin+","+_bb.ymin+","+_bb.xmax+","+_bb.ymax,imageSR:sr,bboxSR:sr,size:_bc+","+_bd},this.disableClientCaching?{_ts:new Date().getTime()}:{});var _c0=(this._params.token=this._getToken()),_c1=esri._getProxiedUrl(_bf+_ab.objectToQuery(_ab.mixin(this._params,{f:"image"})));if((_c1.length>esri.config.defaults.io.postLength)||this.useMapImage){this._jsonRequest=esri.request({url:_bf,content:_ab.mixin(this._params,{f:"json"}),callbackParamName:"callback",load:function(_c2,io){var _c3=_c2.href;if(_c0){_c3+=(_c3.indexOf("?")===-1?("?token="+_c0):("&token="+_c0));}_be(esri._getProxiedUrl(_c3));},error:this._errorHandler});}else{_be(_c1);}},setInterpolation:function(_c4,_c5){this.interpolation=(this._params.interpolation=_c4);if(!_c5){this.refresh(true);}},setCompressionQuality:function(_c6,_c7){this.compressionQuality=(this._params.compressionQuality=_c6);if(!_c7){this.refresh(true);}},setBandIds:function(ids,_c8){this.bandIds=ids;this._params.bandIds=ids.join(",");if(!_c8){this.refresh(true);}},setDefaultBandIds:function(_c9){this.bandIds=(this._params.bandIds=null);if(!_c9){this.refresh(true);}},setDisableClientCaching:function(_ca){this.disableClientCaching=_ca;},setMosaicRule:function(_cb,_cc){this.mosaicRule=_cb;this._params.mosaicRule=_ab.toJson(_cb.toJson());if(!_cc){this.refresh(true);}},setRenderingRule:function(_cd,_ce){this.renderingRule=_cd;this._params.renderingRule=_ab.toJson(_cd.toJson());if(!_ce){this.refresh(true);}},setImageFormat:function(_cf,_d0){this.format=(this._params.format=_cf);if(!_d0){this.refresh(true);}},refresh:function(_d1){if(_d1){this.inherited(arguments);}else{var dc=this.disableClientCaching;this.disableClientCaching=true;this.inherited(arguments);this.disableClientCaching=dc;}},exportMapImage:function(_d2,_d3){var m=esri.config.defaults.map,p=_ab.mixin({size:m.width+","+m.height},this._params,_d2?_d2.toJson(this.normalization):{},{f:"json"});delete p._ts;this._exportMapImage(this._url.path+"/exportImage",p,_d3);}});_ab.declare("esri.layers.ImageServiceParameters",null,{extent:null,width:null,height:null,imageSpatialReference:null,format:null,interpolation:null,compressionQuality:null,bandIds:null,timeExtent:null,mosaicRule:null,renderingRule:null,noData:null,toJson:function(_d4){var ext=this.bbox||this.extent;ext=ext&&_d4&&ext._normalize(true);var _d5=ext?(ext.spatialReference.wkid||_ab.toJson(ext.spatialReference.toJson())):null,_d6=this.imageSpatialReference,_d7={bbox:ext?(ext.xmin+","+ext.ymin+","+ext.xmax+","+ext.ymax):null,bboxSR:_d5,size:(this.width!==null&&this.height!==null?this.width+","+this.height:null),imageSR:(_d6?(_d6.wkid||_ab.toJson(_d6.toJson())):_d5),format:this.format,interpolation:this.interpolation,compressionQuality:this.compressionQuality,bandIds:this.bandIds?this.bandIds.join(","):null,mosaicRule:this.mosaicRule?_ab.toJson(this.mosaicRule.toJson()):null,renderingRule:this.renderingRule?_ab.toJson(this.renderingRule.toJson()):null,noData:this.noData};var _d8=this.timeExtent;_d7.time=_d8?_d8.toJson().join(","):null;return esri.filter(_d7,function(_d9){if(_d9!==null){return true;}});}});_ab.mixin(esri.layers.ImageServiceParameters,{INTERPOLATION_BILINEAR:"RSP_BilinearInterpolation",INTERPOLATION_CUBICCONVOLUTION:"RSP_CubicConvolution",INTERPOLATION_MAJORITY:"RSP_Majority",INTERPOLATION_NEARESTNEIGHBOR:"RSP_NearestNeighbor"});_ab.declare("esri.layers.MosaicRule",null,{method:null,where:null,sortField:null,sortValue:null,ascending:false,lockRasterIds:null,viewpoint:null,objectIds:null,operation:null,toJson:function(){var _da={mosaicMethod:this.method,where:this.where,sortField:this.sortField,sortValue:this.sortValue?_ab.toJson(this.sortValue):null,ascending:this.ascending,lockRasterIds:this.lockRasterIds,viewpoint:this.viewpoint?this.viewpoint.toJson():null,fids:this.objectIds,mosaicOperation:this.operation};return esri.filter(_da,function(_db){if(_db!==null){return true;}});}});_ab.mixin(esri.layers.MosaicRule,{METHOD_NONE:"esriMosaicNone",METHOD_CENTER:"esriMosaicCenter",METHOD_NADIR:"esriMosaicNadir",METHOD_VIEWPOINT:"esriMosaicViewpoint",METHOD_ATTRIBUTE:"esriMosaicAttribute",METHOD_LOCKRASTER:"esriMosaicLockRaster",METHOD_NORTHWEST:"esriMosaicNorthwest",METHOD_SEAMLINE:"esriMosaicSeamline",OPERATION_FIRST:"MT_FIRST",OPERATION_LAST:"MT_LAST",OPERATION_MIN:"MT_MIN",OPERATION_MAX:"MT_MAX",OPERATION_MEAN:"MT_MEAN",OPERATION_BLEND:"MT_BLEND"});_ab.declare("esri.layers.RasterFunction",null,{functionName:null,"arguments":null,variableName:null,toJson:function(){var _dc={rasterFunction:this.functionName,rasterFunctionArguments:this["arguments"],variableName:this.variableName};return esri.filter(_dc,function(_dd){if(_dd!==null){return true;}});}});});},"dojox/charting/Series":function(){define("dojox/charting/Series",["dojo/_base/lang","dojo/_base/declare","./Element"],function(_de,_df,_e0){return _df("dojox.charting.Series",_e0,{constructor:function(_e1,_e2,_e3){_de.mixin(this,_e3);if(typeof this.plot!="string"){this.plot="default";}this.update(_e2);},clear:function(){this.dyn={};},update:function(_e4){if(_de.isArray(_e4)){this.data=_e4;}else{this.source=_e4;this.data=this.source.data;if(this.source.setSeriesObject){this.source.setSeriesObject(this);}}this.dirty=true;this.clear();}});});},"dijit/focus":function(){define("dijit/focus",["dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/Evented","dojo/_base/lang","dojo/on","dojo/ready","dojo/_base/sniff","dojo/Stateful","dojo/_base/unload","dojo/_base/window","dojo/window","./a11y","./registry","."],function(_e5,_e6,dom,_e7,_e8,_e9,_ea,on,_eb,has,_ec,_ed,win,_ee,_ef,_f0,_f1){var _f2=_e6([_ec,_e9],{curNode:null,activeStack:[],constructor:function(){var _f3=_ea.hitch(this,function(_f4){if(dom.isDescendant(this.curNode,_f4)){this.set("curNode",null);}if(dom.isDescendant(this.prevNode,_f4)){this.set("prevNode",null);}});_e5.before(_e8,"empty",_f3);_e5.before(_e8,"destroy",_f3);},registerIframe:function(_f5){return this.registerWin(_f5.contentWindow,_f5);},registerWin:function(_f6,_f7){var _f8=this;var _f9=function(evt){_f8._justMouseDowned=true;setTimeout(function(){_f8._justMouseDowned=false;},0);if(has("ie")&&evt&&evt.srcElement&&evt.srcElement.parentNode==null){return;}_f8._onTouchNode(_f7||evt.target||evt.srcElement,"mouse");};var doc=has("ie")?_f6.document.documentElement:_f6.document;if(doc){if(has("ie")){_f6.document.body.attachEvent("onmousedown",_f9);var _fa=function(evt){var tag=evt.srcElement.tagName.toLowerCase();if(tag=="#document"||tag=="body"){return;}if(_ef.isTabNavigable(evt.srcElement)){_f8._onFocusNode(_f7||evt.srcElement);}else{_f8._onTouchNode(_f7||evt.srcElement);}};doc.attachEvent("onactivate",_fa);var _fb=function(evt){_f8._onBlurNode(_f7||evt.srcElement);};doc.attachEvent("ondeactivate",_fb);return {remove:function(){_f6.document.detachEvent("onmousedown",_f9);doc.detachEvent("onactivate",_fa);doc.detachEvent("ondeactivate",_fb);doc=null;}};}else{doc.body.addEventListener("mousedown",_f9,true);doc.body.addEventListener("touchstart",_f9,true);var _fc=function(evt){_f8._onFocusNode(_f7||evt.target);};doc.addEventListener("focus",_fc,true);var _fd=function(evt){_f8._onBlurNode(_f7||evt.target);};doc.addEventListener("blur",_fd,true);return {remove:function(){doc.body.removeEventListener("mousedown",_f9,true);doc.body.removeEventListener("touchstart",_f9,true);doc.removeEventListener("focus",_fc,true);doc.removeEventListener("blur",_fd,true);doc=null;}};}}},_onBlurNode:function(){this.set("prevNode",this.curNode);this.set("curNode",null);if(this._justMouseDowned){return;}if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);}this._clearActiveWidgetsTimer=setTimeout(_ea.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([]);this.prevNode=null;}),100);},_onTouchNode:function(_fe,by){if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);delete this._clearActiveWidgetsTimer;}var _ff=[];try{while(_fe){var _100=_e7.get(_fe,"dijitPopupParent");if(_100){_fe=_f0.byId(_100).domNode;}else{if(_fe.tagName&&_fe.tagName.toLowerCase()=="body"){if(_fe===win.body()){break;}_fe=_ee.get(_fe.ownerDocument).frameElement;}else{var id=_fe.getAttribute&&_fe.getAttribute("widgetId"),_101=id&&_f0.byId(id);if(_101&&!(by=="mouse"&&_101.get("disabled"))){_ff.unshift(id);}_fe=_fe.parentNode;}}}}catch(e){}this._setStack(_ff,by);},_onFocusNode:function(node){if(!node){return;}if(node.nodeType==9){return;}this._onTouchNode(node);if(node==this.curNode){return;}this.set("curNode",node);},_setStack:function(_102,by){var _103=this.activeStack;this.set("activeStack",_102);for(var _104=0;_104<Math.min(_103.length,_102.length);_104++){if(_103[_104]!=_102[_104]){break;}}var _105;for(var i=_103.length-1;i>=_104;i--){_105=_f0.byId(_103[i]);if(_105){_105._hasBeenBlurred=true;_105.set("focused",false);if(_105._focusManager==this){_105._onBlur(by);}this.emit("widget-blur",_105,by);}}for(i=_104;i<_102.length;i++){_105=_f0.byId(_102[i]);if(_105){_105.set("focused",true);if(_105._focusManager==this){_105._onFocus(by);}this.emit("widget-focus",_105,by);}}},focus:function(node){if(node){try{node.focus();}catch(e){}}}});var _106=new _f2();_eb(function(){var _107=_106.registerWin(win.doc.parentWindow||win.doc.defaultView);if(has("ie")){_ed.addOnWindowUnload(function(){_107.remove();_107=null;});}});_f1.focus=function(node){_106.focus(node);};for(var attr in _106){if(!/^_/.test(attr)){_f1.focus[attr]=typeof _106[attr]=="function"?_ea.hitch(_106,attr):_106[attr];}}_106.watch(function(attr,_108,_109){_f1.focus[attr]=_109;});return _106;});},"dijit/hccss":function(){define("dijit/hccss",["require","dojo/_base/config","dojo/dom-class","dojo/dom-construct","dojo/dom-style","dojo/ready","dojo/_base/sniff","dojo/_base/window"],function(_10a,_10b,_10c,_10d,_10e,_10f,has,win){if(has("ie")||has("mozilla")){_10f(90,function(){var div=_10d.create("div",{id:"a11yTestNode",style:{cssText:"border: 1px solid;"+"border-color:red green;"+"position: absolute;"+"height: 5px;"+"top: -999px;"+"background-image: url(\""+(_10b.blankGif||_10a.toUrl("dojo/resources/blank.gif"))+"\");"}},win.body());var cs=_10e.getComputedStyle(div);if(cs){var _110=cs.backgroundImage;var _111=(cs.borderTopColor==cs.borderRightColor)||(_110!=null&&(_110=="none"||_110=="url(invalid-url:)"));if(_111){_10c.add(win.body(),"dijit_a11y");}if(has("ie")){div.outerHTML="";}else{win.body().removeChild(div);}}});}});},"esri/layers/osm":function(){define(["dijit","dojo","dojox","dojo/require!esri/layers/tiled"],function(_112,dojo,_113){dojo.provide("esri.layers.osm");dojo.require("esri.layers.tiled");dojo.declare("esri.layers.OpenStreetMapLayer",esri.layers.TiledMapServiceLayer,{constructor:function(_114){this.spatialReference=new esri.SpatialReference({wkid:102100});this.tileInfo=new esri.layers.TileInfo({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-20037508.342787,y:20037508.342787},spatialReference:{wkid:102100},lods:[{level:0,scale:591657527.591555,resolution:156543.033928},{level:1,scale:295828763.795777,resolution:78271.5169639999},{level:2,scale:147914381.897889,resolution:39135.7584820001},{level:3,scale:73957190.948944,resolution:19567.8792409999},{level:4,scale:36978595.474472,resolution:9783.93962049996},{level:5,scale:18489297.737236,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:0.597164283559817}]});this.fullExtent=new esri.geometry.Extent({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}});this.initialExtent=new esri.geometry.Extent({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}});this.tileServers=(_114&&_114.tileServers)||["http://a.tile.openstreetmap.org","http://b.tile.openstreetmap.org","http://c.tile.openstreetmap.org"];this.serversLength=this.tileServers.length;this._displayLevels=_114?_114.displayLevels:null;this.copyright=(_114&&_114.copyright)||"Map data &copy; OpenStreetMap contributors, CC-BY-SA";this.loaded=true;this.onLoad(this);var _115=_114&&_114.loadCallback;if(_115){_115(this);}},getTileUrl:function(_116,row,col){return esri._getProxiedUrl(this.tileServers[row%this.serversLength]+"/"+_116+"/"+col+"/"+row+".png");}});});},"esri/tasks/query":function(){define(["dijit","dojo","dojox","dojo/require!esri/tasks/_task,esri/_time"],function(_117,dojo,_118){dojo.provide("esri.tasks.query");dojo.require("esri.tasks._task");dojo.require("esri._time");dojo.declare("esri.tasks.QueryTask",esri.tasks._Task,{constructor:function(url,_119){this._handler=dojo.hitch(this,this._handler);this._relationshipQueryHandler=dojo.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=dojo.hitch(this,this._executeForIdsHandler);this._countHandler=dojo.hitch(this,this._countHandler);this.source=_119&&_119.source;this.gdbVersion=_119&&_119.gdbVersion;},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},execute:function(_11a,_11b,_11c,_11d,_11e){var _11f=_11e.assembly,_120=this._encode(dojo.mixin({},this._url.query,{f:"json"},_11a.toJson(_11f&&_11f[0]))),_121=this._handler,_122=this._errorHandler;if(this.source){var _123={source:this.source.toJson()};_120.layer=dojo.toJson(_123);}if(this.gdbVersion){_120.gdbVersion=this.gdbVersion;}return esri.request({url:this._url.path+"/query",content:_120,callbackParamName:"callback",load:function(r,i){_121(r,i,_11b,_11c,_11e.dfd);},error:function(r){_122(r,_11c,_11e.dfd);},callbackSuffix:_11d});},executeRelationshipQuery:function(_124,_125,_126){var _127=this._encode(dojo.mixin({},this._url.query,{f:"json"},_124.toJson())),_128=this._relationshipQueryHandler,_129=this._errorHandler;if(this.gdbVersion){_127.gdbVersion=this.gdbVersion;}var dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/queryRelatedRecords",content:_127,callbackParamName:"callback",load:function(r,i){_128(r,i,_125,_126,dfd);},error:function(r){_129(r,_126,dfd);}});return dfd;},executeForIds:function(_12a,_12b,_12c,_12d){var _12e=_12d.assembly,_12f=this._encode(dojo.mixin({},this._url.query,{f:"json",returnIdsOnly:true},_12a.toJson(_12e&&_12e[0]))),_130=this._executeForIdsHandler,_131=this._errorHandler;if(this.source){var _132={source:this.source.toJson()};_12f.layer=dojo.toJson(_132);}if(this.gdbVersion){_12f.gdbVersion=this.gdbVersion;}return esri.request({url:this._url.path+"/query",content:_12f,callbackParamName:"callback",load:function(r,i){_130(r,i,_12b,_12c,_12d.dfd);},error:function(r){_131(r,_12c,_12d.dfd);}});},executeForCount:function(_133,_134,_135,_136){var _137=_136.assembly,_138=this._encode(dojo.mixin({},this._url.query,{f:"json",returnIdsOnly:true,returnCountOnly:true},_133.toJson(_137&&_137[0]))),_139=this._countHandler,_13a=this._errorHandler;if(this.source){var _13b={source:this.source.toJson()};_138.layer=dojo.toJson(_13b);}if(this.gdbVersion){_138.gdbVersion=this.gdbVersion;}return esri.request({url:this._url.path+"/query",content:_138,callbackParamName:"callback",load:function(r,i){_139(r,i,_134,_135,_136.dfd);},error:function(r){_13a(r,_135,_136.dfd);}});},_handler:function(_13c,io,_13d,_13e,dfd){try{var _13f=new esri.tasks.FeatureSet(_13c);this._successHandler([_13f],"onComplete",_13d,dfd);}catch(err){this._errorHandler(err,_13e,dfd);}},_relationshipQueryHandler:function(_140,io,_141,_142,dfd){try{var gt=_140.geometryType,sr=_140.spatialReference,_143={};dojo.forEach(_140.relatedRecordGroups,function(gr){var _144={};_144.geometryType=gt;_144.spatialReference=sr;_144.features=gr.relatedRecords;var fset=new esri.tasks.FeatureSet(_144);_143[gr.objectId]=fset;});this._successHandler([_143],"onExecuteRelationshipQueryComplete",_141,dfd);}catch(err){this._errorHandler(err,_142,dfd);}},_executeForIdsHandler:function(_145,io,_146,_147,dfd){try{this._successHandler([_145.objectIds],"onExecuteForIdsComplete",_146,dfd);}catch(err){this._errorHandler(err,_147,dfd);}},_countHandler:function(_148,io,_149,_14a,dfd){try{var _14b,_14c=_148.features,ids=_148.objectIds;if(ids){_14b=ids.length;}else{if(_14c){throw new Error(esri.bundle.tasks.query.invalid);}else{_14b=_148.count;}}this._successHandler([_14b],"onExecuteForCountComplete",_149,dfd);}catch(err){this._errorHandler(err,_14a,dfd);}}});esri._createWrappers("esri.tasks.QueryTask");dojo.declare("esri.tasks.Query",null,{constructor:function(){this.spatialRelationship=esri.tasks.Query.SPATIAL_REL_INTERSECTS;},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:false,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,toJson:function(_14d){var json={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},g=_14d&&_14d["geometry"]||this.geometry,ids=this.objectIds,_14e=this.outFields,_14f=this.outSpatialReference,_150=this.groupByFieldsForStatistics,_151=this.orderByFields,_152=this.outStatistics;if(g){json.geometry=g;json.geometryType=esri.geometry.getJsonType(g);json.inSR=g.spatialReference.wkid||dojo.toJson(g.spatialReference.toJson());}if(ids){json.objectIds=ids.join(",");}if(_14e){json.outFields=_14e.join(",");}if(_150){json.groupByFieldsForStatistics=_150.join(",");}if(_151){json.orderByFields=_151.join(",");}if(_152){var _153=[];dojo.forEach(_152,function(item,idx){_153.push(item.toJson());});json.outStatistics=dojo.toJson(_153);}if(_14f!==null){json.outSR=_14f.wkid||dojo.toJson(_14f.toJson());}else{if(g){json.outSR=g.spatialReference.wkid||dojo.toJson(g.spatialReference.toJson());}}var _154=this.timeExtent;json.time=_154?_154.toJson().join(","):null;var _155=this.relationParam;if(_155&&this.spatialRelationship===esri.tasks.Query.SPATIAL_REL_RELATION){json.relationParam=_155;}json._ts=this._ts;return json;}});dojo.mixin(esri.tasks.Query,esri.tasks._SpatialRelationship);dojo.declare("esri.tasks.RelationshipQuery",null,{definitionExpression:"",relationshipId:null,returnGeometry:false,objectIds:null,outSpatialReference:null,outFields:null,toJson:function(){var json={definitionExpression:this.definitionExpression,relationshipId:this.relationshipId,returnGeometry:this.returnGeometry,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},_156=this.objectIds,_157=this.outFields,_158=this.outSpatialReference;if(_156){json.objectIds=_156.join(",");}if(_157){json.outFields=_157.join(",");}if(_158){json.outSR=_158.toJson();}json._ts=this._ts;return json;}});dojo.declare("esri.tasks.StatisticDefinition",null,{statisticType:null,onStatisticField:null,outStatisticFieldName:null,toJson:function(){var json={statisticType:this.statisticType,onStatisticField:this.onStatisticField};if(this.outStatisticFieldName){json.outStatisticFieldName=this.outStatisticFieldName;}return json;}});});},"esri/layers/KMLLayer":function(){define(["dijit","dojo","dojox","dojo/require!esri/utils,esri/layers/layer,esri/layers/MapImageLayer,esri/layers/FeatureLayer,esri/dijit/Popup"],function(_159,dojo,_15a){dojo.provide("esri.layers.KMLLayer");dojo.require("esri.utils");dojo.require("esri.layers.layer");dojo.require("esri.layers.MapImageLayer");dojo.require("esri.layers.FeatureLayer");dojo.require("esri.dijit.Popup");dojo.declare("esri.layers.KMLLayer",[esri.layers.Layer],{serviceUrl:"http://utility.arcgis.com/sharing/kml",constructor:function(url,_15b){if(!url){console.log("KMLLayer:constructor - please provide url for the KML file");}this._outSR=(_15b&&_15b.outSR)||new esri.SpatialReference({wkid:4326});this._options=_15b;if(esri.config.defaults.kmlService){this.serviceUrl=esri.config.defaults.kmlService;}var link=(this.linkInfo=_15b&&_15b.linkInfo);if(link){this.visible=!!link.visibility;this._waitingForMap=!!link.viewFormat;}if(!link||(link&&link.visibility&&!this._waitingForMap)){this._parseKml();}this.refresh=dojo.hitch(this,this.refresh);},getFeature:function(_15c){if(!_15c){return;}var type=_15c.type,id=_15c.id,_15d,i,len;switch(type){case "esriGeometryPoint":case "esriGeometryPolyline":case "esriGeometryPolygon":var _15e=this["_"+type];if(_15e){_15d=dojo.getObject("_mode._featureMap."+id,false,_15e);}break;case "GroundOverlay":var _15f=this._groundLyr;if(_15f){var _160=_15f.getImages();len=_160.length;for(i=0;i<len;i++){if(_160[i].id===id){_15d=_160[i];break;}}}break;case "ScreenOverlay":break;case "NetworkLink":dojo.some(this._links,function(link){if(link.linkInfo&&link.linkInfo.id===id){_15d=link;return true;}else{return false;}});break;case "Folder":var _161=this.folders;len=_161?_161.length:0;for(i=0;i<len;i++){if(_161[i].id===id){_15d=_161[i];break;}}break;default:console.log("KMLLayer:getFeature - unknown feature type");break;}return _15d;},getLayers:function(){var _162=[];if(this._groundLyr){_162.push(this._groundLyr);}if(this._fLayers){_162=_162.concat(this._fLayers);}if(this._links){dojo.forEach(this._links,function(link){if(link.declaredClass){_162.push(link);}});}return _162;},setFolderVisibility:function(_163,_164){if(!_163){return;}this._fireUpdateStart();_163.visible=_164;if(_164){_164=this._areLocalAncestorsVisible(_163);}this._setState(_163,_164);this._fireUpdateEnd();},onRefresh:function(){},_parseKml:function(map){var self=this;this._fireUpdateStart();this._io=esri.request({url:this.serviceUrl,content:{url:this._url.path+this._getQueryParameters(map),model:"simple",folders:"",refresh:this.loaded?true:undefined,outSR:dojo.toJson(this._outSR.toJson())},callbackParamName:"callback",load:function(_165){self._io=null;self._initLayer(_165);},error:function(err){self._io=null;err=dojo.mixin(new Error(),err);err.message="Unable to load KML: "+self.url+" "+(err.message||"");self._fireUpdateEnd(err);self.onError(err);}});},_initLayer:function(json){if(this.loaded){this._removeInternalLayers();}this.name=json.name;this.description=json.description;this.snippet=json.snippet;this.visibility=json.visibility;this.featureInfos=json.featureInfos;var i,len;var _166=(this.folders=json.folders),_167=[],fldr;if(_166){len=_166.length;for(i=0;i<len;i++){fldr=(_166[i]=new esri.layers.KMLFolder(_166[i]));if(fldr.parentFolderId===-1){_167.push(fldr);}}}var _168=(this._links=json.networkLinks),_169;len=_168?_168.length:0;for(i=0;i<len;i++){if(_168[i].viewRefreshMode&&_168[i].viewRefreshMode.toLowerCase().indexOf("onregion")!==-1){continue;}_169=dojo.mixin({},this._options);_169.linkInfo=_168[i];if(_169.id){_169.id=_169.id+"_"+i;}_168[i]=new esri.layers.KMLLayer(_168[i].href,_169);_168[i]._parentLayer=this;_168[i]._parentFolderId=this._getLinkParentId(_168[i].linkInfo.id);}var _16a=json.groundOverlays;if(_16a&&_16a.length>0){_169=dojo.mixin({},this._options);if(_169.id){_169.id=_169.id+"_"+"mapImage";}var _16b=(this._groundLyr=new esri.layers.MapImageLayer(_169));len=_16a.length;for(i=0;i<len;i++){_16b.addImage(new esri.layers.KMLGroundOverlay(_16a[i]));}}var _16c=dojo.getObject("featureCollection.layers",false,json);if(_16c&&_16c.length>0){this._fLayers=[];dojo.forEach(_16c,function(_16d,i){var _16e=dojo.getObject("featureSet.features",false,_16d),_16f;if(_16e&&_16e.length>0){_169=dojo.mixin({outFields:["*"],infoTemplate:_16d.popupInfo?new esri.dijit.PopupTemplate(_16d.popupInfo):null,editable:false},this._options);if(_169.id){_169.id=_169.id+"_"+i;}_16d.layerDefinition.capabilities="Query,Data";_16f=new esri.layers.FeatureLayer(_16d,_169);if(_16f.geometryType){this["_"+_16f.geometryType]=_16f;}this._fLayers.push(_16f);}},this);if(this._fLayers.length===0){delete this._fLayers;}}len=_167.length;for(i=0;i<len;i++){fldr=_167[i];this._setState(fldr,fldr.visible);}this._fireUpdateEnd();if(this.loaded){this._addInternalLayers();this.onRefresh();}else{this.loaded=true;this.onLoad(this);}},_addInternalLayers:function(){var map=this._map;this._fireUpdateStart();if(this._links){dojo.forEach(this._links,function(link){if(link.declaredClass){map.addLayer(link);if(link._waitingForMap){link._waitingForMap=null;if(link.visible){link._parseKml(map);}else{link._wMap=map;}}}});}var _170=map.spatialReference,_171=this._outSR,_172,_173;if(_170.wkid){_172=(_170._isWebMercator()&&_171._isWebMercator())||(_170.wkid===_171.wkid);}else{if(_170.wkt){_172=(_170.wkt===_171.wkt);}else{console.log("KMLLayer:_setMap - map has invalid spatial reference");return;}}if(!_172){if(_170._isWebMercator()&&_171.wkid===4326){_173=esri.geometry.geographicToWebMercator;}else{if(_171._isWebMercator()&&_170.wkid===4326){_173=esri.geometry.webMercatorToGeographic;}else{console.log("KMLLayer:_setMap - unsupported workflow. Spatial reference of the map and kml layer do not match, and the conversion cannot be done on the client.");return;}}}if(this._groundLyr){if(_173){dojo.forEach(this._groundLyr.getImages(),function(_174){_174.extent=_173(_174.extent);});}map.addLayer(this._groundLyr);}var _175=this._fLayers;if(_175&&_175.length>0){dojo.forEach(_175,function(_176){if(_173){var _177=_176.graphics,i,geom,len=_177?_177.length:0;for(i=0;i<len;i++){geom=_177[i].geometry;if(geom){_177[i].setGeometry(_173(geom));}}}map.addLayer(_176);});}this.onVisibilityChange(this.visible);},_removeInternalLayers:function(){var map=this._map;if(this._links){dojo.forEach(this._links,function(link){if(link.declaredClass&&link._io){link._io.cancel();}});}if(map){dojo.forEach(this.getLayers(),map.removeLayer,map);}},_setState:function(_178,_179){var _17a=_178.featureInfos,info,_17b,i,len=_17a?_17a.length:0,_17c=_179?"show":"hide";for(i=0;i<len;i++){info=_17a[i];_17b=this.getFeature(info);if(!_17b){continue;}if(info.type==="Folder"){this._setState(_17b,_179&&_17b.visible);}else{if(info.type==="NetworkLink"){this._setInternalVisibility(_17b,_179);}else{_17b[_17c]();}}}},_areLocalAncestorsVisible:function(_17d){var _17e=_17d.parentFolderId,_17f=_17d.visible;while(_17f&&_17e!==-1){var _180=this.getFeature({type:"Folder",id:_17e});_17f=_17f&&_180.visible;_17e=_180.parentFolderId;}return _17f;},_setInternalVisibility:function(_181,_182){var _183=_181._parentLayer,_184=_181._parentFolderId;_182=_182&&_181.visible;while(_182&&_183){_182=_182&&_183.visible;if(_184>-1){_182=_182&&_183._areLocalAncestorsVisible(_183.getFeature({type:"Folder",id:_184}));}_184=_183._parentFolderId;_183=_183._parentLayer;}this._setIntState(_181,_182);},_setIntState:function(link,_185){if(!link){return;}dojo.forEach(link.getLayers(),function(_186){if(_186.linkInfo){link._setIntState(_186,_185&&_186.visible&&link._areLocalAncestorsVisible(link.getFeature({type:"Folder",id:_186._parentFolderId})));}else{_186.setVisibility(_185);}});},_getLinkParentId:function(id){var _187=-1;if(this.folders){dojo.some(this.folders,function(_188){if(_188.networkLinkIds&&dojo.indexOf(_188.networkLinkIds,id)!==-1){_187=_188.id;return true;}return false;});}return _187;},_checkAutoRefresh:function(){var _189=this.linkInfo;if(_189){if(this.visible){if(this.loaded&&this._map){var _18a=_189.refreshMode,_18b=_189.refreshInterval,_18c=_189.viewRefreshMode,_18d=_189.viewRefreshTime;if(_18a&&_18a.toLowerCase().indexOf("oninterval")!==-1&&_18b>0){this._stopAutoRefresh();this._timeoutHandle=setTimeout(this.refresh,_18b*1000);}if(_18c&&_18c.toLowerCase().indexOf("onstop")!==-1&&_18d>0){if(!this._extChgHandle){this._extChgHandle=dojo.connect(this._map,"onExtentChange",this,this._extentChanged);}}}}else{this._stopAutoRefresh();dojo.disconnect(this._extChgHandle);delete this._extChgHandle;}}},_stopAutoRefresh:function(){clearTimeout(this._timeoutHandle);this._timeoutHandle=null;},_getQueryParameters:function(map){map=map||this._map;var _18e={},_18f=this.linkInfo,_190=map&&map.extent,_191;if(this._url.query){dojo.mixin(_18e,this._url.query);_191=!!this._url.query.token;}if(esri.id&&!_191){var _192=esri.id.findCredential(this._url.path);if(_192){_18e.token=_192.token;}}if(_18f){var _193=_18f.viewFormat,_194=_18f.httpQuery,_195=_18f.viewBoundScale;if(_190&&_193){var _196=_190,_197=_190,sr=_190.spatialReference;if(sr){if(sr._isWebMercator()){_196=esri.geometry.webMercatorToGeographic(_190);}else{if(sr.wkid===4326){_197=esri.geometry.geographicToWebMercator(_190);}}}var _198=_196.getCenter(),_199=Math.max(_197.getWidth(),_197.getHeight());if(_195){_196=_196.expand(_195);}_193=_193.replace(/\[bboxWest\]/ig,_196.xmin).replace(/\[bboxEast\]/ig,_196.xmax).replace(/\[bboxSouth\]/ig,_196.ymin).replace(/\[bboxNorth\]/ig,_196.ymax).replace(/\[lookatLon\]/ig,_198.x).replace(/\[lookatLat\]/ig,_198.y).replace(/\[lookatRange\]/ig,_199).replace(/\[lookatTilt\]/ig,0).replace(/\[lookatHeading\]/ig,0).replace(/\[lookatTerrainLon\]/ig,_198.x).replace(/\[lookatTerrainLat\]/ig,_198.y).replace(/\[lookatTerrainAlt\]/ig,0).replace(/\[cameraLon\]/ig,_198.x).replace(/\[cameraLat\]/ig,_198.y).replace(/\[cameraAlt\]/ig,_199).replace(/\[horizFov\]/ig,60).replace(/\[vertFov\]/ig,60).replace(/\[horizPixels\]/ig,map.width).replace(/\[vertPixels\]/ig,map.height).replace(/\[terrainEnabled\]/ig,0);dojo.mixin(_18e,dojo.queryToObject(_193));}if(_194){_194=_194.replace(/\[clientVersion\]/ig,esri.version).replace(/\[kmlVersion\]/ig,2.2).replace(/\[clientName\]/ig,"ArcGIS API for JavaScript").replace(/\[language\]/ig,dojo.locale);dojo.mixin(_18e,dojo.queryToObject(_194));}}var _19a=[],_19b;for(_19b in _18e){if(esri._isDefined(_18e[_19b])){_19a.push(_19b+"="+_18e[_19b]);}}_19a=_19a.join("&");return _19a?("?"+_19a):"";},_setMap:function(map,_19c){this._map=map;var div=this._div=dojo.create("div",null,_19c);dojo.style(div,"position","absolute");this._addInternalLayers();return div;},_unsetMap:function(map,_19d){if(this._io){this._io.cancel();}this._stopAutoRefresh();dojo.disconnect(this._extChgHandle);delete this._extChgHandle;this._removeInternalLayers();var div=this._div;if(div){_19d.removeChild(div);dojo.destroy(div);}this._map=this._wMap=this._div=null;},onVisibilityChange:function(_19e){if(!this.loaded){if(this.linkInfo&&_19e){if(!this._waitingForMap){this._parseKml(this._wMap);}}return;}this._fireUpdateStart();this._setInternalVisibility(this,_19e);this._checkAutoRefresh();this._fireUpdateEnd();},refresh:function(){if(!this.loaded||!this._map||this._io){return;}this._parseKml();},_extentChanged:function(){this._stopAutoRefresh();this._timeoutHandle=setTimeout(this.refresh,this.linkInfo.viewRefreshTime*1000);}});dojo.declare("esri.layers.KMLGroundOverlay",[esri.layers.MapImage],{constructor:function(json){if(esri._isDefined(this.visibility)){this.visible=!!this.visibility;}}});dojo.declare("esri.layers.KMLFolder",null,{constructor:function(json){dojo.mixin(this,json);if(esri._isDefined(this.visibility)){this.visible=!!this.visibility;}}});});},"dojo/parser":function(){define(["./_base/kernel","./_base/lang","./_base/array","./_base/html","./_base/window","./_base/url","./_base/json","./aspect","./date/stamp","./query","./on","./ready"],function(dojo,_19f,_1a0,_1a1,_1a2,_1a3,_1a4,_1a5,_1a6,_1a7,don){new Date("X");var _1a8={"dom-attributes-explicit":document.createElement("div").attributes.length<40};function has(_1a9){return _1a8[_1a9];};dojo.parser=new function(){var _1aa={};function _1ab(_1ac){var map={};for(var name in _1ac){if(name.charAt(0)=="_"){continue;}map[name.toLowerCase()]=name;}return map;};_1a5.after(_19f,"extend",function(){_1aa={};},true);var _1ad={};this._functionFromScript=function(_1ae,_1af){var _1b0="";var _1b1="";var _1b2=(_1ae.getAttribute(_1af+"args")||_1ae.getAttribute("args"));if(_1b2){_1a0.forEach(_1b2.split(/\s*,\s*/),function(part,idx){_1b0+="var "+part+" = arguments["+idx+"]; ";});}var _1b3=_1ae.getAttribute("with");if(_1b3&&_1b3.length){_1a0.forEach(_1b3.split(/\s*,\s*/),function(part){_1b0+="with("+part+"){";_1b1+="}";});}return new Function(_1b0+_1ae.innerHTML+_1b1);};this.instantiate=function(_1b4,_1b5,args){var _1b6=[],_1b5=_1b5||{};args=args||{};var _1b7=(args.scope||dojo._scopeName)+"Type",_1b8="data-"+(args.scope||dojo._scopeName)+"-",_1b9=_1b8+"type",_1ba=_1b8+"props",_1bb=_1b8+"attach-point",_1bc=_1b8+"attach-event",_1bd=_1b8+"id";var _1be={};_1a0.forEach([_1ba,_1b9,_1b7,_1bd,"jsId",_1bb,_1bc,"dojoAttachPoint","dojoAttachEvent","class","style"],function(name){_1be[name.toLowerCase()]=name.replace(args.scope,"dojo");});_1a0.forEach(_1b4,function(obj){if(!obj){return;}var node=obj.node||obj,type=_1b7 in _1b5?_1b5[_1b7]:obj.node?obj.type:(node.getAttribute(_1b9)||node.getAttribute(_1b7)),ctor=_1ad[type]||(_1ad[type]=_19f.getObject(type)),_1bf=ctor&&ctor.prototype;if(!ctor){throw new Error("Could not load class '"+type);}var _1c0={};if(args.defaults){_19f.mixin(_1c0,args.defaults);}if(obj.inherited){_19f.mixin(_1c0,obj.inherited);}var _1c1;if(has("dom-attributes-explicit")){_1c1=node.attributes;}else{var _1c2=/^input$|^img$/i.test(node.nodeName)?node:node.cloneNode(false),_1c3=_1c2.outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*/,"").replace(/>.*$/,"");_1c1=_1a0.map(_1c3.split(/\s+/),function(name){var _1c4=name.toLowerCase();return {name:name,value:(node.nodeName=="LI"&&name=="value")||_1c4=="enctype"?node.getAttribute(_1c4):node.getAttributeNode(_1c4).value,specified:true};});}var i=0,item;while(item=_1c1[i++]){if(!item||!item.specified){continue;}var name=item.name,_1c5=name.toLowerCase(),_1c6=item.value;if(_1c5 in _1be){switch(_1be[_1c5]){case "data-dojo-props":var _1c7=_1c6;break;case "data-dojo-id":case "jsId":var _1c8=_1c6;break;case "data-dojo-attach-point":case "dojoAttachPoint":_1c0.dojoAttachPoint=_1c6;break;case "data-dojo-attach-event":case "dojoAttachEvent":_1c0.dojoAttachEvent=_1c6;break;case "class":_1c0["class"]=node.className;break;case "style":_1c0["style"]=node.style&&node.style.cssText;break;}}else{if(!(name in _1bf)){var map=(_1aa[type]||(_1aa[type]=_1ab(_1bf)));name=map[_1c5]||name;}if(name in _1bf){switch(typeof _1bf[name]){case "string":_1c0[name]=_1c6;break;case "number":_1c0[name]=_1c6.length?Number(_1c6):NaN;break;case "boolean":_1c0[name]=_1c6.toLowerCase()!="false";break;case "function":if(_1c6===""||_1c6.search(/[^\w\.]+/i)!=-1){_1c0[name]=new Function(_1c6);}else{_1c0[name]=_19f.getObject(_1c6,false)||new Function(_1c6);}break;default:var pVal=_1bf[name];_1c0[name]=(pVal&&"length" in pVal)?(_1c6?_1c6.split(/\s*,\s*/):[]):(pVal instanceof Date)?(_1c6==""?new Date(""):_1c6=="now"?new Date():_1a6.fromISOString(_1c6)):(pVal instanceof dojo._Url)?(dojo.baseUrl+_1c6):_1a4.fromJson(_1c6);}}else{_1c0[name]=_1c6;}}}if(_1c7){try{_1c7=_1a4.fromJson.call(args.propsThis,"{"+_1c7+"}");_19f.mixin(_1c0,_1c7);}catch(e){throw new Error(e.toString()+" in data-dojo-props='"+_1c7+"'");}}_19f.mixin(_1c0,_1b5);var _1c9=obj.node?obj.scripts:(ctor&&(ctor._noScript||_1bf._noScript)?[]:_1a7("> script[type^='dojo/']",node));var _1ca=[],_1cb=[],_1cc=[],on=[];if(_1c9){for(i=0;i<_1c9.length;i++){var _1cd=_1c9[i];node.removeChild(_1cd);var _1ce=(_1cd.getAttribute(_1b8+"event")||_1cd.getAttribute("event")),prop=_1cd.getAttribute(_1b8+"prop"),type=_1cd.getAttribute("type"),nf=this._functionFromScript(_1cd,_1b8);if(_1ce){if(type=="dojo/connect"){_1ca.push({event:_1ce,func:nf});}else{if(type=="dojo/on"){on.push({event:_1ce,func:nf});}else{_1c0[_1ce]=nf;}}}else{if(type=="dojo/watch"){_1cc.push({prop:prop,func:nf});}else{_1cb.push(nf);}}}}var _1cf=ctor.markupFactory||_1bf.markupFactory;var _1d0=_1cf?_1cf(_1c0,node,ctor):new ctor(_1c0,node);_1b6.push(_1d0);if(_1c8){_19f.setObject(_1c8,_1d0);}for(i=0;i<_1ca.length;i++){_1a5.after(_1d0,_1ca[i].event,dojo.hitch(_1d0,_1ca[i].func),true);}for(i=0;i<_1cb.length;i++){_1cb[i].call(_1d0);}for(i=0;i<_1cc.length;i++){_1d0.watch(_1cc[i].prop,_1cc[i].func);}for(i=0;i<on.length;i++){don(_1d0,on[i].event,on[i].func);}},this);if(!_1b5._started){_1a0.forEach(_1b6,function(_1d1){if(!args.noStart&&_1d1&&_19f.isFunction(_1d1.startup)&&!_1d1._started){_1d1.startup();}});}return _1b6;};this.parse=function(_1d2,args){var root;if(!args&&_1d2&&_1d2.rootNode){args=_1d2;root=args.rootNode;}else{root=_1d2;}root=root?_1a1.byId(root):_1a2.body();args=args||{};var _1d3=(args.scope||dojo._scopeName)+"Type",_1d4="data-"+(args.scope||dojo._scopeName)+"-",_1d5=_1d4+"type",_1d6=_1d4+"textdir";var list=[];var node=root.firstChild;var _1d7=args&&args.inherited;if(!_1d7){function _1d8(node,attr){return (node.getAttribute&&node.getAttribute(attr))||(node!==_1a2.doc&&node!==_1a2.doc.documentElement&&node.parentNode?_1d8(node.parentNode,attr):null);};_1d7={dir:_1d8(root,"dir"),lang:_1d8(root,"lang"),textDir:_1d8(root,_1d6)};for(var key in _1d7){if(!_1d7[key]){delete _1d7[key];}}}var _1d9={inherited:_1d7};var _1da;var _1db;function _1dc(_1dd){if(!_1dd.inherited){_1dd.inherited={};var node=_1dd.node,_1de=_1dc(_1dd.parent);var _1df={dir:node.getAttribute("dir")||_1de.dir,lang:node.getAttribute("lang")||_1de.lang,textDir:node.getAttribute(_1d6)||_1de.textDir};for(var key in _1df){if(_1df[key]){_1dd.inherited[key]=_1df[key];}}}return _1dd.inherited;};while(true){if(!node){if(!_1d9||!_1d9.node){break;}node=_1d9.node.nextSibling;_1da=_1d9.scripts;_1db=false;_1d9=_1d9.parent;continue;}if(node.nodeType!=1){node=node.nextSibling;continue;}if(_1da&&node.nodeName.toLowerCase()=="script"){type=node.getAttribute("type");if(type&&/^dojo\/\w/i.test(type)){_1da.push(node);}node=node.nextSibling;continue;}if(_1db){node=node.nextSibling;continue;}var type=node.getAttribute(_1d5)||node.getAttribute(_1d3);var _1e0=node.firstChild;if(!type&&(!_1e0||(_1e0.nodeType==3&&!_1e0.nextSibling))){node=node.nextSibling;continue;}var _1e1={node:node,scripts:_1da,parent:_1d9};var ctor=type&&(_1ad[type]||(_1ad[type]=_19f.getObject(type))),_1e2=ctor&&!ctor.prototype._noScript?[]:null;if(type){list.push({"type":type,node:node,scripts:_1e2,inherited:_1dc(_1e1)});}node=_1e0;_1da=_1e2;_1db=ctor&&ctor.prototype.stopParser&&!(args&&args.template);_1d9=_1e1;}var _1e3=args&&args.template?{template:true}:null;return this.instantiate(list,_1e3,args);};}();if(dojo.config.parseOnLoad){dojo.ready(100,dojo.parser,"parse");}return dojo.parser;});},"dojox/charting/plot2d/Spider":function(){define("dojox/charting/plot2d/Spider",["dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","dojo/_base/html","dojo/_base/array","dojo/dom-geometry","dojo/_base/fx","dojo/fx","dojo/_base/sniff","../Element","./_PlotEvents","dojo/_base/Color","dojox/color/_base","./common","../axis2d/common","../scaler/primitive","dojox/gfx","dojox/gfx/matrix","dojox/gfx/fx","dojox/lang/functional","dojox/lang/utils","dojo/fx/easing"],function(lang,_1e4,hub,html,arr,_1e5,_1e6,_1e7,has,_1e8,_1e9,_1ea,_1eb,dc,da,_1ec,g,m,_1ed,df,du,_1ee){var _1ef=0.2;var _1f0=_1e4("dojox.charting.plot2d.Spider",[_1e8,_1e9],{defaultParams:{labels:true,ticks:false,fixed:true,precision:1,labelOffset:-10,labelStyle:"default",htmlLabels:true,startAngle:-90,divisions:3,axisColor:"",axisWidth:0,spiderColor:"",spiderWidth:0,seriesWidth:0,seriesFillAlpha:0.2,spiderOrigin:0.16,markerSize:3,spiderType:"polygon",animationType:_1ee.backOut,axisTickFont:"",axisTickFontColor:"",axisFont:"",axisFontColor:""},optionalParams:{radius:0,font:"",fontColor:""},constructor:function(_1f1,_1f2){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_1f2);du.updateWithPattern(this.opt,_1f2,this.optionalParams);this.series=[];this.dyn=[];this.datas={};this.labelKey=[];this.oldSeriePoints={};this.animations={};},clear:function(){this.dirty=true;this.dyn=[];this.series=[];this.datas={};this.labelKey=[];this.oldSeriePoints={};this.animations={};return this;},setAxis:function(axis){return this;},addSeries:function(run){var _1f3=false;this.series.push(run);for(var key in run.data){var val=run.data[key],data=this.datas[key];if(data){data.vlist.push(val);data.min=Math.min(data.min,val);data.max=Math.max(data.max,val);}else{this.datas[key]={min:val,max:val,vlist:[val]};}}if(this.labelKey.length<=0){for(var key in run.data){this.labelKey.push(key);}}return this;},getSeriesStats:function(){return dc.collectSimpleStats(this.series);},calculateAxes:function(dim){this.initializeScalers(dim,this.getSeriesStats());return this;},getRequiredColors:function(){return this.series.length;},initializeScalers:function(dim,_1f4){if(this._hAxis){if(!this._hAxis.initialized()){this._hAxis.calculate(_1f4.hmin,_1f4.hmax,dim.width);}this._hScaler=this._hAxis.getScaler();}else{this._hScaler=_1ec.buildScaler(_1f4.hmin,_1f4.hmax,dim.width);}if(this._vAxis){if(!this._vAxis.initialized()){this._vAxis.calculate(_1f4.vmin,_1f4.vmax,dim.height);}this._vScaler=this._vAxis.getScaler();}else{this._vScaler=_1ec.buildScaler(_1f4.vmin,_1f4.vmax,dim.height);}return this;},render:function(dim,_1f5){if(!this.dirty){return this;}this.dirty=false;this.cleanGroup();var s=this.group,t=this.chart.theme;this.resetEvents();if(!this.series||!this.series.length){return this;}var o=this.opt,ta=t.axis,rx=(dim.width-_1f5.l-_1f5.r)/2,ry=(dim.height-_1f5.t-_1f5.b)/2,r=Math.min(rx,ry),_1f6=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font)||"normal normal normal 7pt Tahoma",_1f7=o.axisFont||(ta.tick&&ta.tick.titleFont)||"normal normal normal 11pt Tahoma",_1f8=o.axisTickFontColor||(ta.majorTick&&ta.majorTick.fontColor)||(ta.tick&&ta.tick.fontColor)||"silver",_1f9=o.axisFontColor||(ta.tick&&ta.tick.titleFontColor)||"black",_1fa=o.axisColor||(ta.tick&&ta.tick.axisColor)||"silver",_1fb=o.spiderColor||(ta.tick&&ta.tick.spiderColor)||"silver",_1fc=o.axisWidth||(ta.stroke&&ta.stroke.width)||2,_1fd=o.spiderWidth||(ta.stroke&&ta.stroke.width)||2,_1fe=o.seriesWidth||(ta.stroke&&ta.stroke.width)||2,_1ff=g.normalizedLength(g.splitFontString(_1f7).size),_200=m._degToRad(o.startAngle),_201=_200,step,_202,_203,_204,_205,_206,_207,_208,_209,_20a,_20b,ro=o.spiderOrigin,dv=o.divisions>=3?o.divisions:3,ms=o.markerSize,spt=o.spiderType,at=o.animationType,_20c=o.labelOffset<-10?o.labelOffset:-10,_20d=0.2;if(o.labels){_204=arr.map(this.series,function(s){return s.name;},this);_205=df.foldl1(df.map(_204,function(_20e,i){var font=t.series.font;return g._base._getTextBox(_20e,{font:font}).w;},this),"Math.max(a, b)")/2;r=Math.min(rx-2*_205,ry-_1ff)+_20c;_206=r-_20c;}if("radius" in o){r=o.radius;_206=r-_20c;}r/=(1+_20d);var _20f={cx:_1f5.l+rx,cy:_1f5.t+ry,r:r};for(var i=this.series.length-1;i>=0;i--){var _210=this.series[i];if(!this.dirty&&!_210.dirty){t.skip();continue;}_210.cleanGroup();var run=_210.data;if(run!==null){var len=this._getObjectLength(run);if(!_207||_207.length<=0){_207=[],_208=[],_20b=[];this._buildPoints(_207,len,_20f,r,_201,true);this._buildPoints(_208,len,_20f,r*ro,_201,true);this._buildPoints(_20b,len,_20f,_206,_201);if(dv>2){_209=[],_20a=[];for(var j=0;j<dv-2;j++){_209[j]=[];this._buildPoints(_209[j],len,_20f,r*(ro+(1-ro)*(j+1)/(dv-1)),_201,true);_20a[j]=r*(ro+(1-ro)*(j+1)/(dv-1));}}}}}var _211=s.createGroup(),_212={color:_1fa,width:_1fc},_213={color:_1fb,width:_1fd};for(var j=_207.length-1;j>=0;--j){var _214=_207[j],st={x:_214.x+(_214.x-_20f.cx)*_20d,y:_214.y+(_214.y-_20f.cy)*_20d},nd={x:_214.x+(_214.x-_20f.cx)*_20d/2,y:_214.y+(_214.y-_20f.cy)*_20d/2};_211.createLine({x1:_20f.cx,y1:_20f.cy,x2:st.x,y2:st.y}).setStroke(_212);this._drawArrow(_211,st,nd,_212);}var _215=s.createGroup();for(var j=_20b.length-1;j>=0;--j){var _214=_20b[j],_216=g._base._getTextBox(this.labelKey[j],{font:_1f7}).w||0,_217=this.opt.htmlLabels&&g.renderer!="vml"?"html":"gfx",elem=da.createText[_217](this.chart,_215,(!_1e5.isBodyLtr()&&_217=="html")?(_214.x+_216-dim.width):_214.x,_214.y,"middle",this.labelKey[j],_1f7,_1f9);if(this.opt.htmlLabels){this.htmlElements.push(elem);}}var _218=s.createGroup();if(spt=="polygon"){_218.createPolyline(_207).setStroke(_213);_218.createPolyline(_208).setStroke(_213);if(_209.length>0){for(var j=_209.length-1;j>=0;--j){_218.createPolyline(_209[j]).setStroke(_213);}}}else{var _219=this._getObjectLength(this.datas);_218.createCircle({cx:_20f.cx,cy:_20f.cy,r:r}).setStroke(_213);_218.createCircle({cx:_20f.cx,cy:_20f.cy,r:r*ro}).setStroke(_213);if(_20a.length>0){for(var j=_20a.length-1;j>=0;--j){_218.createCircle({cx:_20f.cx,cy:_20f.cy,r:_20a[j]}).setStroke(_213);}}}var _21a=s.createGroup(),len=this._getObjectLength(this.datas),k=0;for(var key in this.datas){var data=this.datas[key],min=data.min,max=data.max,_21b=max-min,end=_201+2*Math.PI*k/len;for(var i=0;i<dv;i++){var text=min+_21b*i/(dv-1),_214=this._getCoordinate(_20f,r*(ro+(1-ro)*i/(dv-1)),end);text=this._getLabel(text);var _216=g._base._getTextBox(text,{font:_1f6}).w||0,_217=this.opt.htmlLabels&&g.renderer!="vml"?"html":"gfx";if(this.opt.htmlLabels){this.htmlElements.push(da.createText[_217](this.chart,_21a,(!_1e5.isBodyLtr()&&_217=="html")?(_214.x+_216-dim.width):_214.x,_214.y,"start",text,_1f6,_1f8));}}k++;}this.chart.seriesShapes={};var _21c=[];for(var i=this.series.length-1;i>=0;i--){var _210=this.series[i],run=_210.data;if(run!==null){var _21d=[],k=0,_21e=[];for(var key in run){var data=this.datas[key],min=data.min,max=data.max,_21b=max-min,_21f=run[key],end=_201+2*Math.PI*k/len,_214=this._getCoordinate(_20f,r*(ro+(1-ro)*(_21f-min)/_21b),end);_21d.push(_214);_21e.push({sname:_210.name,key:key,data:_21f});k++;}_21d[_21d.length]=_21d[0];_21e[_21e.length]=_21e[0];var _220=this._getBoundary(_21d),_221=t.next("spider",[o,_210]),ts=_210.group,f=g.normalizeColor(_221.series.fill),sk={color:_221.series.fill,width:_1fe};f.a=o.seriesFillAlpha;_210.dyn={fill:f,stroke:sk};var osps=this.oldSeriePoints[_210.name];var cs=this._createSeriesEntry(ts,(osps||_208),_21d,f,sk,r,ro,ms,at);this.chart.seriesShapes[_210.name]=cs;this.oldSeriePoints[_210.name]=_21d;var po={element:"spider_poly",index:i,id:"spider_poly_"+_210.name,run:_210,plot:this,shape:cs.poly,parent:ts,brect:_220,cx:_20f.cx,cy:_20f.cy,cr:r,f:f,s:s};this._connectEvents(po);var so={element:"spider_plot",index:i,id:"spider_plot_"+_210.name,run:_210,plot:this,shape:_210.group};this._connectEvents(so);arr.forEach(cs.circles,function(c,i){var _222=c.getShape(),co={element:"spider_circle",index:i,id:"spider_circle_"+_210.name+i,run:_210,plot:this,shape:c,parent:ts,tdata:_21e[i],cx:_21d[i].x,cy:_21d[i].y,f:f,s:s};this._connectEvents(co);},this);}}return this;},_createSeriesEntry:function(ts,osps,sps,f,sk,r,ro,ms,at){var _223=ts.createPolyline(osps).setFill(f).setStroke(sk),_224=[];for(var j=0;j<osps.length;j++){var _225=osps[j],cr=ms;var _226=ts.createCircle({cx:_225.x,cy:_225.y,r:cr}).setFill(f).setStroke(sk);_224.push(_226);}var _227=arr.map(sps,function(np,j){var sp=osps[j],anim=new _1e6.Animation({duration:1000,easing:at,curve:[sp.y,np.y]});var spl=_223,sc=_224[j];hub.connect(anim,"onAnimate",function(y){var _228=spl.getShape();_228.points[j].y=y;spl.setShape(_228);var _229=sc.getShape();_229.cy=y;sc.setShape(_229);});return anim;});var _22a=arr.map(sps,function(np,j){var sp=osps[j],anim=new _1e6.Animation({duration:1000,easing:at,curve:[sp.x,np.x]});var spl=_223,sc=_224[j];hub.connect(anim,"onAnimate",function(x){var _22b=spl.getShape();_22b.points[j].x=x;spl.setShape(_22b);var _22c=sc.getShape();_22c.cx=x;sc.setShape(_22c);});return anim;});var _22d=_1e7.combine(_227.concat(_22a));_22d.play();return {group:ts,poly:_223,circles:_224};},plotEvent:function(o){var _22e=o.id?o.id:"default",a;if(_22e in this.animations){a=this.animations[_22e];a.anim&&a.anim.stop(true);}else{a=this.animations[_22e]={};}if(o.element=="spider_poly"){if(!a.color){var _22f=o.shape.getFill();if(!_22f||!(_22f instanceof _1ea)){return;}a.color={start:_22f,end:_230(_22f)};}var _231=a.color.start,end=a.color.end;if(o.type=="onmouseout"){var t=_231;_231=end;end=t;}a.anim=_1ed.animateFill({shape:o.shape,duration:800,easing:_1ee.backOut,color:{start:_231,end:end}});a.anim.play();}else{if(o.element=="spider_circle"){var init,_232,_233=1.5;if(o.type=="onmouseover"){init=m.identity;_232=_233;var _234={type:"rect"};_234.x=o.cx;_234.y=o.cy;_234.width=_234.height=1;var lt=html.coords(this.chart.node,true);_234.x+=lt.x;_234.y+=lt.y;_234.x=Math.round(_234.x);_234.y=Math.round(_234.y);_234.width=Math.ceil(_234.width);_234.height=Math.ceil(_234.height);this.aroundRect=_234;var _235=["after","before"];dc.doIfLoaded("dijit/Tooltip",dojo.hitch(this,function(_236){_236.show(o.tdata.sname+"<br/>"+o.tdata.key+"<br/>"+o.tdata.data,this.aroundRect,_235);}));}else{init=m.scaleAt(_233,o.cx,o.cy);_232=1/_233;dc.doIfLoaded("dijit/Tooltip",dojo.hitch(this,function(_237){this.aroundRect&&_237.hide(this.aroundRect);}));}var cs=o.shape.getShape(),init=m.scaleAt(_233,cs.cx,cs.cy),_238={shape:o.shape,duration:200,easing:_1ee.backOut,transform:[{name:"scaleAt",start:[1,cs.cx,cs.cy],end:[_232,cs.cx,cs.cy]},init]};a.anim=_1ed.animateTransform(_238);a.anim.play();}else{if(o.element=="spider_plot"){if(o.type=="onmouseover"&&!has("ie")){o.shape.moveToFront();}}}}},_getBoundary:function(_239){var xmax=_239[0].x,xmin=_239[0].x,ymax=_239[0].y,ymin=_239[0].y;for(var i=0;i<_239.length;i++){var _23a=_239[i];xmax=Math.max(_23a.x,xmax);ymax=Math.max(_23a.y,ymax);xmin=Math.min(_23a.x,xmin);ymin=Math.min(_23a.y,ymin);}return {x:xmin,y:ymin,width:xmax-xmin,height:ymax-ymin};},_drawArrow:function(s,_23b,end,_23c){var len=Math.sqrt(Math.pow(end.x-_23b.x,2)+Math.pow(end.y-_23b.y,2)),sin=(end.y-_23b.y)/len,cos=(end.x-_23b.x)/len,_23d={x:end.x+(len/3)*(-sin),y:end.y+(len/3)*cos},_23e={x:end.x+(len/3)*sin,y:end.y+(len/3)*(-cos)};s.createPolyline([_23b,_23d,_23e]).setFill(_23c.color).setStroke(_23c);},_buildPoints:function(_23f,_240,_241,_242,_243,_244){for(var i=0;i<_240;i++){var end=_243+2*Math.PI*i/_240;_23f.push(this._getCoordinate(_241,_242,end));}if(_244){_23f.push(this._getCoordinate(_241,_242,_243+2*Math.PI));}},_getCoordinate:function(_245,_246,_247){return {x:_245.cx+_246*Math.cos(_247),y:_245.cy+_246*Math.sin(_247)};},_getObjectLength:function(obj){var _248=0;if(lang.isObject(obj)){for(var key in obj){_248++;}}return _248;},_getLabel:function(_249){return dc.getLabel(_249,this.opt.fixed,this.opt.precision);}});function _230(_24a){var a=new _1eb.Color(_24a),x=a.toHsl();if(x.s==0){x.l=x.l<50?100:0;}else{x.s=100;if(x.l<50){x.l=75;}else{if(x.l>75){x.l=50;}else{x.l=x.l-50>75-x.l?50:75;}}}var _24a=_1eb.fromHsl(x);_24a.a=0.7;return _24a;};return _1f0;});},"dojo/date/stamp":function(){define(["../_base/kernel","../_base/lang","../_base/array"],function(dojo,lang,_24b){lang.getObject("date.stamp",true,dojo);dojo.date.stamp.fromISOString=function(_24c,_24d){if(!dojo.date.stamp._isoRegExp){dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _24e=dojo.date.stamp._isoRegExp.exec(_24c),_24f=null;if(_24e){_24e.shift();if(_24e[1]){_24e[1]--;}if(_24e[6]){_24e[6]*=1000;}if(_24d){_24d=new Date(_24d);_24b.forEach(_24b.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return _24d["get"+prop]();}),function(_250,_251){_24e[_251]=_24e[_251]||_250;});}_24f=new Date(_24e[0]||1970,_24e[1]||0,_24e[2]||1,_24e[3]||0,_24e[4]||0,_24e[5]||0,_24e[6]||0);if(_24e[0]<100){_24f.setFullYear(_24e[0]||1970);}var _252=0,_253=_24e[7]&&_24e[7].charAt(0);if(_253!="Z"){_252=((_24e[8]||0)*60)+(Number(_24e[9])||0);if(_253!="-"){_252*=-1;}}if(_253){_252-=_24f.getTimezoneOffset();}if(_252){_24f.setTime(_24f.getTime()+_252*60000);}}return _24f;};dojo.date.stamp.toISOString=function(_254,_255){var _256=function(n){return (n<10)?"0"+n:n;};_255=_255||{};var _257=[],_258=_255.zulu?"getUTC":"get",date="";if(_255.selector!="time"){var year=_254[_258+"FullYear"]();date=["0000".substr((year+"").length)+year,_256(_254[_258+"Month"]()+1),_256(_254[_258+"Date"]())].join("-");}_257.push(date);if(_255.selector!="date"){var time=[_256(_254[_258+"Hours"]()),_256(_254[_258+"Minutes"]()),_256(_254[_258+"Seconds"]())].join(":");var _259=_254[_258+"Milliseconds"]();if(_255.milliseconds){time+="."+(_259<100?"0":"")+_256(_259);}if(_255.zulu){time+="Z";}else{if(_255.selector!="time"){var _25a=_254.getTimezoneOffset();var _25b=Math.abs(_25a);time+=(_25a>0?"-":"+")+_256(Math.floor(_25b/60))+":"+_256(_25b%60);}}_257.push(time);}return _257.join("T");};return dojo.date.stamp;});},"dojo/Stateful":function(){define(["./_base/kernel","./_base/declare","./_base/lang","./_base/array"],function(dojo,_25c,lang,_25d){return dojo.declare("dojo.Stateful",null,{postscript:function(_25e){if(_25e){lang.mixin(this,_25e);}},get:function(name){return this[name];},set:function(name,_25f){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _260=this[name];this[name]=_25f;if(this._watchCallbacks){this._watchCallbacks(name,_260,_25f);}return this;},watch:function(name,_261){var _262=this._watchCallbacks;if(!_262){var self=this;_262=this._watchCallbacks=function(name,_263,_264,_265){var _266=function(_267){if(_267){_267=_267.slice();for(var i=0,l=_267.length;i<l;i++){try{_267[i].call(self,name,_263,_264);}catch(e){console.error(e);}}}};_266(_262["_"+name]);if(!_265){_266(_262["*"]);}};}if(!_261&&typeof name==="function"){_261=name;name="*";}else{name="_"+name;}var _268=_262[name];if(typeof _268!=="object"){_268=_262[name]=[];}_268.push(_261);return {unwatch:function(){_268.splice(_25d.indexOf(_268,_261),1);}};}});});},"dojox/charting/Theme":function(){define("dojox/charting/Theme",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/Color","dojox/color/_base","dojox/color/Palette","dojox/lang/utils","dojox/gfx/gradutils"],function(lang,arr,_269,_26a,_26b,_26c,dlu,dgg){var _26d=_269("dojox.charting.Theme",null,{shapeSpaces:{shape:1,shapeX:1,shapeY:1},constructor:function(_26e){_26e=_26e||{};var def=_26d.defaultTheme;arr.forEach(["chart","plotarea","axis","series","marker","indicator"],function(name){this[name]=lang.delegate(def[name],_26e[name]);},this);if(_26e.seriesThemes&&_26e.seriesThemes.length){this.colors=null;this.seriesThemes=_26e.seriesThemes.slice(0);}else{this.seriesThemes=null;this.colors=(_26e.colors||_26d.defaultColors).slice(0);}this.markerThemes=null;if(_26e.markerThemes&&_26e.markerThemes.length){this.markerThemes=_26e.markerThemes.slice(0);}this.markers=_26e.markers?lang.clone(_26e.markers):lang.delegate(_26d.defaultMarkers);this.noGradConv=_26e.noGradConv;this.noRadialConv=_26e.noRadialConv;if(_26e.reverseFills){this.reverseFills();}this._current=0;this._buildMarkerArray();},clone:function(){var _26f=new _26d({chart:this.chart,plotarea:this.plotarea,axis:this.axis,series:this.series,marker:this.marker,colors:this.colors,markers:this.markers,indicator:this.indicator,seriesThemes:this.seriesThemes,markerThemes:this.markerThemes,noGradConv:this.noGradConv,noRadialConv:this.noRadialConv});arr.forEach(["clone","clear","next","skip","addMixin","post","getTick"],function(name){if(this.hasOwnProperty(name)){_26f[name]=this[name];}},this);return _26f;},clear:function(){this._current=0;},next:function(_270,_271,_272){var _273=dlu.merge,_274,_275;if(this.colors){_274=lang.delegate(this.series);_275=lang.delegate(this.marker);var _276=new _26a(this.colors[this._current%this.colors.length]),old;if(_274.stroke&&_274.stroke.color){_274.stroke=lang.delegate(_274.stroke);old=new _26a(_274.stroke.color);_274.stroke.color=new _26a(_276);_274.stroke.color.a=old.a;}else{_274.stroke={color:_276};}if(_275.stroke&&_275.stroke.color){_275.stroke=lang.delegate(_275.stroke);old=new _26a(_275.stroke.color);_275.stroke.color=new _26a(_276);_275.stroke.color.a=old.a;}else{_275.stroke={color:_276};}if(!_274.fill||_274.fill.type){_274.fill=_276;}else{old=new _26a(_274.fill);_274.fill=new _26a(_276);_274.fill.a=old.a;}if(!_275.fill||_275.fill.type){_275.fill=_276;}else{old=new _26a(_275.fill);_275.fill=new _26a(_276);_275.fill.a=old.a;}}else{_274=this.seriesThemes?_273(this.series,this.seriesThemes[this._current%this.seriesThemes.length]):this.series;_275=this.markerThemes?_273(this.marker,this.markerThemes[this._current%this.markerThemes.length]):_274;}var _277=_275&&_275.symbol||this._markers[this._current%this._markers.length];var _278={series:_274,marker:_275,symbol:_277};++this._current;if(_271){_278=this.addMixin(_278,_270,_271);}if(_272){_278=this.post(_278,_270);}return _278;},skip:function(){++this._current;},addMixin:function(_279,_27a,_27b,_27c){if(lang.isArray(_27b)){arr.forEach(_27b,function(m){_279=this.addMixin(_279,_27a,m);},this);}else{var t={};if("color" in _27b){if(_27a=="line"||_27a=="area"){lang.setObject("series.stroke.color",_27b.color,t);lang.setObject("marker.stroke.color",_27b.color,t);}else{lang.setObject("series.fill",_27b.color,t);}}arr.forEach(["stroke","outline","shadow","fill","font","fontColor","labelWiring"],function(name){var _27d="marker"+name.charAt(0).toUpperCase()+name.substr(1),b=_27d in _27b;if(name in _27b){lang.setObject("series."+name,_27b[name],t);if(!b){lang.setObject("marker."+name,_27b[name],t);}}if(b){lang.setObject("marker."+name,_27b[_27d],t);}});if("marker" in _27b){t.symbol=_27b.marker;}_279=dlu.merge(_279,t);}if(_27c){_279=this.post(_279,_27a);}return _279;},post:function(_27e,_27f){var fill=_27e.series.fill,t;if(!this.noGradConv&&this.shapeSpaces[fill.space]&&fill.type=="linear"){if(_27f=="bar"){t={x1:fill.y1,y1:fill.x1,x2:fill.y2,y2:fill.x2};}else{if(!this.noRadialConv&&fill.space=="shape"&&(_27f=="slice"||_27f=="circle")){t={type:"radial",cx:0,cy:0,r:100};}}if(t){return dlu.merge(_27e,{series:{fill:t}});}}return _27e;},getTick:function(name,_280){var tick=this.axis.tick,_281=name+"Tick",_282=dlu.merge;if(tick){if(this.axis[_281]){tick=_282(tick,this.axis[_281]);}}else{tick=this.axis[_281];}if(_280){if(tick){if(_280[_281]){tick=_282(tick,_280[_281]);}}else{tick=_280[_281];}}return tick;},inspectObjects:function(f){arr.forEach(["chart","plotarea","axis","series","marker","indicator"],function(name){f(this[name]);},this);if(this.seriesThemes){arr.forEach(this.seriesThemes,f);}if(this.markerThemes){arr.forEach(this.markerThemes,f);}},reverseFills:function(){this.inspectObjects(function(o){if(o&&o.fill){o.fill=dgg.reverse(o.fill);}});},addMarker:function(name,_283){this.markers[name]=_283;this._buildMarkerArray();},setMarkers:function(obj){this.markers=obj;this._buildMarkerArray();},_buildMarkerArray:function(){this._markers=[];for(var p in this.markers){this._markers.push(this.markers[p]);}}});lang.mixin(_26d,{defaultMarkers:{CIRCLE:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",SQUARE:"m-3,-3 l0,6 6,0 0,-6 z",DIAMOND:"m0,-3 l3,3 -3,3 -3,-3 z",CROSS:"m0,-3 l0,6 m-3,-3 l6,0",X:"m-3,-3 l6,6 m0,-6 l-6,6",TRIANGLE:"m-3,3 l3,-6 3,6 z",TRIANGLE_INVERTED:"m-3,-3 l3,6 3,-6 z"},defaultColors:["#54544c","#858e94","#6e767a","#948585","#474747"],defaultTheme:{chart:{stroke:null,fill:"white",pageStyle:null,titleGap:20,titlePos:"top",titleFont:"normal normal bold 14pt Tahoma",titleFontColor:"#333"},plotarea:{stroke:null,fill:"white"},axis:{stroke:{color:"#333",width:1},tick:{color:"#666",position:"center",font:"normal normal normal 7pt Tahoma",fontColor:"#333",titleGap:15,titleFont:"normal normal normal 11pt Tahoma",titleFontColor:"#333",titleOrientation:"axis"},majorTick:{width:1,length:6},minorTick:{width:0.8,length:3},microTick:{width:0.5,length:1}},series:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000",labelWiring:{width:1,color:"#ccc"}},marker:{stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",font:"normal normal normal 8pt Tahoma",fontColor:"#000"},indicator:{lineStroke:{width:1.5,color:"#333"},lineOutline:{width:0.1,color:"#ccc"},lineShadow:null,stroke:{width:1.5,color:"#333"},outline:{width:0.1,color:"#ccc"},shadow:null,fill:"#ccc",radius:3,font:"normal normal normal 10pt Tahoma",fontColor:"#000",markerFill:"#ccc",markerSymbol:"m-3,0 c0,-4 6,-4 6,0 m-6,0 c0,4 6,4 6,0",markerStroke:{width:1.5,color:"#333"},markerOutline:{width:0.1,color:"#ccc"},markerShadow:null}},defineColors:function(_284){_284=_284||{};var l,c=[],n=_284.num||5;if(_284.colors){l=_284.colors.length;for(var i=0;i<n;i++){c.push(_284.colors[i%l]);}return c;}if(_284.hue){var s=_284.saturation||100,st=_284.low||30,end=_284.high||90;l=(end+st)/2;return _26b.Palette.generate(_26b.fromHsv(_284.hue,s,l),"monochromatic").colors;}if(_284.generator){return _26b.Palette.generate(_284.base,_284.generator).colors;}return c;},generateGradient:function(_285,_286,_287){var fill=lang.delegate(_285);fill.colors=[{offset:0,color:_286},{offset:1,color:_287}];return fill;},generateHslColor:function(_288,_289){_288=new _26a(_288);var hsl=_288.toHsl(),_28a=_26b.fromHsl(hsl.h,hsl.s,_289);_28a.a=_288.a;return _28a;},generateHslGradient:function(_28b,_28c,_28d,_28e){_28b=new _26a(_28b);var hsl=_28b.toHsl(),_28f=_26b.fromHsl(hsl.h,hsl.s,_28d),_290=_26b.fromHsl(hsl.h,hsl.s,_28e);_28f.a=_290.a=_28b.a;return _26d.generateGradient(_28c,_28f,_290);}});return _26d;});},"dojox/charting/axis2d/Invisible":function(){define("dojox/charting/axis2d/Invisible",["dojo/_base/lang","dojo/_base/declare","./Base","../scaler/linear","dojox/gfx","dojox/lang/utils","dojox/lang/functional","dojo/string"],function(lang,_291,Base,lin,g,du,df,_292){var _293=du.merge,_294=4,_295=45;return _291("dojox.charting.axis2d.Invisible",Base,{defaultParams:{vertical:false,fixUpper:"none",fixLower:"none",natural:false,leftBottom:true,includeZero:false,fixed:true,majorLabels:true,minorTicks:true,minorLabels:true,microTicks:false,rotation:0},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,trailingSymbol:null},constructor:function(_296,_297){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_297);du.updateWithPattern(this.opt,_297,this.optionalParams);},dependOnData:function(){return !("min" in this.opt)||!("max" in this.opt);},clear:function(){delete this.scaler;delete this.ticks;this.dirty=true;return this;},initialized:function(){return "scaler" in this&&!(this.dirty&&this.dependOnData());},setWindow:function(_298,_299){this.scale=_298;this.offset=_299;return this.clear();},getWindowScale:function(){return "scale" in this?this.scale:1;},getWindowOffset:function(){return "offset" in this?this.offset:0;},_groupLabelWidth:function(_29a,font,_29b){if(!_29a.length){return 0;}if(lang.isObject(_29a[0])){_29a=df.map(_29a,function(_29c){return _29c.text;});}if(_29b){_29a=df.map(_29a,function(_29d){return lang.trim(_29d).length==0?"":_29d.substring(0,_29b)+this.trailingSymbol;},this);}var s=_29a.join("<br>");return g._base._getTextBox(s,{font:font}).w||0;},calculate:function(min,max,span,_29e){if(this.initialized()){return this;}var o=this.opt;this.labels="labels" in o?o.labels:_29e;this.scaler=lin.buildScaler(min,max,span,o);var tsb=this.scaler.bounds;if("scale" in this){o.from=tsb.lower+this.offset;o.to=(tsb.upper-tsb.lower)/this.scale+o.from;if(!isFinite(o.from)||isNaN(o.from)||!isFinite(o.to)||isNaN(o.to)||o.to-o.from>=tsb.upper-tsb.lower){delete o.from;delete o.to;delete this.scale;delete this.offset;}else{if(o.from<tsb.lower){o.to+=tsb.lower-o.from;o.from=tsb.lower;}else{if(o.to>tsb.upper){o.from+=tsb.upper-o.to;o.to=tsb.upper;}}this.offset=o.from-tsb.lower;}this.scaler=lin.buildScaler(min,max,span,o);tsb=this.scaler.bounds;if(this.scale==1&&this.offset==0){delete this.scale;delete this.offset;}}var ta=this.chart.theme.axis,_29f=0,_2a0=o.rotation%360,_2a1=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font),size=_2a1?g.normalizedLength(g.splitFontString(_2a1).size):0,cosr=Math.abs(Math.cos(_2a0*Math.PI/180)),sinr=Math.abs(Math.sin(_2a0*Math.PI/180));if(_2a0<0){_2a0+=360;}if(size){if(this.vertical?_2a0!=0&&_2a0!=180:_2a0!=90&&_2a0!=270){if(this.labels){_29f=this._groupLabelWidth(this.labels,_2a1,o.maxLabelCharCount);}else{var _2a2=Math.ceil(Math.log(Math.max(Math.abs(tsb.from),Math.abs(tsb.to)))/Math.LN10),t=[];if(tsb.from<0||tsb.to<0){t.push("-");}t.push(_292.rep("9",_2a2));var _2a3=Math.floor(Math.log(tsb.to-tsb.from)/Math.LN10);if(_2a3>0){t.push(".");t.push(_292.rep("9",_2a3));}_29f=g._base._getTextBox(t.join(""),{font:_2a1}).w;}_29f=o.maxLabelSize?Math.min(o.maxLabelSize,_29f):_29f;}else{_29f=size;}switch(_2a0){case 0:case 90:case 180:case 270:break;default:var gap1=Math.sqrt(_29f*_29f+size*size),gap2=this.vertical?size*cosr+_29f*sinr:_29f*cosr+size*sinr;_29f=Math.min(gap1,gap2);break;}}this.scaler.minMinorStep=_29f+_294;this.ticks=lin.buildTicks(this.scaler,o);return this;},getScaler:function(){return this.scaler;},getTicks:function(){return this.ticks;}});});},"esri/layers/MapImageLayer":function(){define(["dijit","dojo","dojox","dojo/require!esri/utils,esri/layers/layer,esri/geometry"],function(_2a4,dojo,_2a5){dojo.provide("esri.layers.MapImageLayer");dojo.require("esri.utils");dojo.require("esri.layers.layer");dojo.require("esri.geometry");dojo.declare("esri.layers.MapImageLayer",[esri.layers.Layer],{"-chains-":{constructor:"manual"},constructor:function(_2a6){this.inherited(arguments,[null,_2a6]);this._mapImages=[];var _2a7=dojo.hitch;this._panStart=_2a7(this,this._panStart);this._pan=_2a7(this,this._pan);this._extentChange=_2a7(this,this._extentChange);this._zoom=_2a7(this,this._zoom);this._zoomStart=_2a7(this,this._zoomStart);this._scale=_2a7(this,this._scale);this._resize=_2a7(this,this._resize);this.loaded=true;this.onLoad(this);},opacity:1,_transform:esri._getDOMAccessor("transform"),addImage:function(_2a8){var _2a9=this._mapImages.push(_2a8);_2a9=_2a9-1;_2a8._idx=_2a9;_2a8._layer=this;if(this._div){this._createImage(_2a8,_2a9);}},removeImage:function(_2aa){if(_2aa){var idx=_2aa._idx,_2ab=this._mapImages;if(_2ab[idx]===_2aa){delete _2ab[idx];var node=_2aa._node;if(node){this._clearEvents(node);node.e_idx=node.e_bl=node.e_tr=node.e_l=node.e_t=node.e_w=node.e_h=null;if(node.parentNode){node.parentNode.removeChild(node);dojo.destroy(node);}}_2aa._node=_2aa._idx=_2aa._layer=null;}}},removeAllImages:function(){var _2ac=this._mapImages,i,len=_2ac.length;for(i=0;i<len;i++){var _2ad=_2ac[i];if(_2ad){this.removeImage(_2ad);}}this._mapImages=[];},getImages:function(){var _2ae=this._mapImages,_2af=[],i,len=_2ae.length;for(i=0;i<len;i++){if(_2ae[i]){_2af.push(_2ae[i]);}}return _2af;},setOpacity:function(_2b0){if(this.opacity!=_2b0){this.onOpacityChange(this.opacity=_2b0);}},onOpacityChange:function(_2b1){var div=this._div,i,len,_2b2;if(div){if(!dojo.isIE||dojo.isIE>8){dojo.style(div,"opacity",_2b1);}else{_2b2=div.childNodes;len=_2b2.length;for(i=0;i<len;i++){dojo.style(_2b2[i],"opacity",_2b1);}}}},_createImage:function(_2b3,idx){var node=dojo.create("img");dojo.style(node,{position:"absolute"});if(dojo.isIE<=8){dojo.style(node,"opacity",this.opacity);}if(_2b3.rotation){var _2b4="rotate("+(360-_2b3.rotation)+"deg)";if(dojo.isIE<9){}else{dojo.style(node,this._transform,_2b4);dojo.style(node,"transform",_2b4);}}_2b3._node=node;node.e_idx=idx;node.e_layer=this;node.e_load=dojo.connect(node,"onload",esri.layers.MapImageLayer.prototype._imageLoaded);node.e_error=dojo.connect(node,"onerror",esri.layers.MapImageLayer.prototype._imageError);node.e_abort=dojo.connect(node,"onabort",esri.layers.MapImageLayer.prototype._imageError);node.src=_2b3.href;},_imageLoaded:function(evt,img){var node=img||evt.target||evt.currentTarget,self=node.e_layer,_2b5=self._mapImages[node.e_idx];if(self._map&&(self._map.__zooming||self._map.__panning)){self._standby.push(node);return;}self._clearEvents(node);if(!_2b5||_2b5._node!==node){return;}if(self._map){self._attach(_2b5);}},_imageError:function(evt){var node=evt.target||evt.currentTarget,self=node.e_layer,_2b6=self._mapImages[node.e_idx];self._clearEvents(node);if(_2b6){_2b6._node=null;}},_clearEvents:function(node){var _2b7=dojo.disconnect;_2b7(node.e_load);_2b7(node.e_error);_2b7(node.e_abort);node.e_load=node.e_error=node.e_abort=node.e_layer=null;},_attach:function(_2b8){var _2b9=_2b8.extent,_2ba,_2bb=_2b9.spatialReference,_2bc=this._sr,div=this._div,node=_2b8._node,_2bd=new esri.geometry.Point({x:_2b9.xmin,y:_2b9.ymin}),_2be=new esri.geometry.Point({x:_2b9.xmax,y:_2b9.ymax});if(_2bc.wkid){_2ba=(_2bc._isWebMercator()&&_2bb._isWebMercator())||(_2bc.wkid===_2bb.wkid);}else{if(_2bc.wkt){_2ba=(_2bc.wkt===_2bb.wkt);}}if(!_2ba){if(_2bc._isWebMercator()&&_2bb.wkid===4326){_2bd=esri.geometry.geographicToWebMercator(_2bd);_2be=esri.geometry.geographicToWebMercator(_2be);}else{if(_2bb._isWebMercator()&&_2bc.wkid===4326){_2bd=esri.geometry.webMercatorToGeographic(_2bd);_2be=esri.geometry.webMercatorToGeographic(_2be);}}}node.e_bl=_2bd;node.e_tr=_2be;if(_2b8.visible){this._setPos(node,div._left,div._top);(this._active||div).appendChild(node);}},_setPos:function(node,_2bf,_2c0){var _2c1=node.e_bl,_2c2=node.e_tr,map=this._map;_2c1=map.toScreen(_2c1);_2c2=map.toScreen(_2c2);var left=_2c1.x-_2bf,top=_2c2.y-_2c0,_2c3=Math.abs(_2c2.x-_2c1.x),_2c4=Math.abs(_2c1.y-_2c2.y),css={width:_2c3+"px",height:_2c4+"px"},_2c5=this._mapImages[node.e_idx];if(map.navigationMode==="css-transforms"){css[esri._css.names.transform]=esri._css.translate(left,top)+(_2c5.rotation?(" "+esri._css.rotate(360-_2c5.rotation)):"");}else{css.left=left+"px";css.top=top+"px";}dojo.style(node,css);node.e_l=left;node.e_t=top;node.e_w=_2c3;node.e_h=_2c4;},_setMap:function(map,_2c6){this._map=map;this._sr=map.spatialReference;var div=this._div=dojo.create("div",null,_2c6),_2c7=esri._css.names,css={position:"absolute"},vd=map.__visibleDelta;if(!dojo.isIE||dojo.isIE>8){css.opacity=this.opacity;}if(map.navigationMode==="css-transforms"){css[_2c7.transform]=esri._css.translate(vd.x,vd.y);dojo.style(div,css);div._left=vd.x;div._top=vd.y;css={position:"absolute",width:map.width+"px",height:map.height+"px",overflow:"visible"};this._active=dojo.create("div",null,div);dojo.style(this._active,css);this._passive=dojo.create("div",null,div);dojo.style(this._passive,css);}else{div._left=0;div._top=0;dojo.style(div,css);}this._standby=[];var _2c8=this._mapImages,i,len=_2c8.length;for(i=0;i<len;i++){var _2c9=_2c8[i],node=_2c9._node;if(!node){this._createImage(_2c9,_2c9._idx);}}this.onVisibilityChange(this.visible);return div;},_unsetMap:function(map,_2ca){this._disconnect();var div=this._div;if(div){var _2cb=this._mapImages,i,len=_2cb.length;for(i=0;i<len;i++){var _2cc=_2cb[i];if(_2cc){var node=_2cc._node;if(node){this._clearEvents(node);node.e_idx=node.e_bl=node.e_tr=node.e_l=node.e_t=node.e_w=node.e_h=null;}_2cc._node=null;}}_2ca.removeChild(div);dojo.destroy(div);}this._map=this._div=this._sr=this._active=this._passive=this._standby=null;},onVisibilityChange:function(_2cd){var div=this._div;if(div){if(_2cd){this._redraw();this._connect(this._map);esri.show(div);}else{this._disconnect();esri.hide(div);}}},_connect:function(map){if(!this._connections){var _2ce=dojo.connect,_2cf=(map.navigationMode==="css-transforms");this._connections=[_2ce(map,"onPanStart",this._panStart),_2ce(map,"onPan",this._pan),_2ce(map,"onExtentChange",this._extentChange),_2cf&&_2ce(map,"onZoomStart",this._zoomStart),_2cf?_2ce(map,"onScale",this._scale):_2ce(map,"onZoom",this._zoom),_2cf&&_2ce(map,"onResize",this._resize)];}},_disconnect:function(){if(this._connections){dojo.forEach(this._connections,dojo.disconnect);this._connections=null;}},_panStart:function(){this._panL=this._div._left;this._panT=this._div._top;},_pan:function(_2d0,_2d1){var div=this._div;div._left=this._panL+_2d1.x;div._top=this._panT+_2d1.y;if(this._map.navigationMode==="css-transforms"){dojo.style(div,esri._css.names.transform,esri._css.translate(div._left,div._top));}else{dojo.style(div,{left:div._left+"px",top:div._top+"px"});}},_extentChange:function(_2d2,_2d3,_2d4){if(_2d4){this._redraw(this._map.navigationMode==="css-transforms");}else{if(_2d3){this._pan(_2d2,_2d3);}}var i,_2d5=this._standby;if(_2d5&&_2d5.length){for(i=_2d5.length-1;i>=0;i--){this._imageLoaded(null,_2d5[i]);_2d5.splice(i,1);}}},_redraw:function(_2d6){if(_2d6){var _2d7=this._passive,_2d8=esri._css.names;dojo.style(_2d7,_2d8.transition,"none");this._moveImages(_2d7,this._active);dojo.style(_2d7,_2d8.transform,"none");}var div=this._active||this._div,_2d9=this._div._left,_2da=this._div._top,i,len=div.childNodes.length,node;for(i=0;i<len;i++){node=div.childNodes[i];this._setPos(node,_2d9,_2da);}},_zoom:function(_2db,_2dc,_2dd){var div=this._div,_2de=div._left,_2df=div._top,i,len=div.childNodes.length,node;for(i=0;i<len;i++){node=div.childNodes[i];var _2e0=node.e_w*_2dc,_2e1=node.e_h*_2dc,_2e2=(_2dd.x-_2de-node.e_l)*(_2e0-node.e_w)/node.e_w,_2e3=(_2dd.y-_2df-node.e_t)*(_2e1-node.e_h)/node.e_h;_2e2=isNaN(_2e2)?0:_2e2;_2e3=isNaN(_2e3)?0:_2e3;dojo.style(node,{left:(node.e_l-_2e2)+"px",top:(node.e_t-_2e3)+"px",width:_2e0+"px",height:_2e1+"px"});}},_zoomStart:function(){this._moveImages(this._active,this._passive);},_moveImages:function(_2e4,dest){var _2e5=_2e4.childNodes,i,len=_2e5.length;if(len>0){for(i=len-1;i>=0;i--){dest.appendChild(_2e5[i]);}}},_scale:function(mtx,_2e6){var css={},_2e7=esri._css.names,_2e8=this._passive;dojo.style(_2e8,_2e7.transition,_2e6?"none":(_2e7.transformName+" "+esri.config.defaults.map.zoomDuration+"ms ease"));css[_2e7.transform]=esri._css.matrix(mtx);dojo.style(_2e8,_2e7.transform,esri._css.matrix(mtx));},_resize:function(_2e9,_2ea,_2eb){dojo.style(this._active,{width:_2ea+"px",height:_2eb+"px"});dojo.style(this._passive,{width:_2ea+"px",height:_2eb+"px"});}});dojo.extend(esri.layers.MapImage,{visible:true,getLayer:function(){return this._layer;},getNode:function(){return this._node;},show:function(){if(!this.visible){this.visible=true;var node=this._node,_2ec=this._layer,div;if(node){div=_2ec&&_2ec._div;if(div){_2ec._setPos(node,div._left,div._top);(_2ec._active||div).appendChild(node);}esri.show(node);}}},hide:function(){if(this.visible){this.visible=false;var node=this._node;if(node){esri.hide(node);if(node.parentNode){node.parentNode.removeChild(node);}}}}});});},"dojox/charting/plot2d/common":function(){define("dojox/charting/plot2d/common",["dojo/_base/lang","dojo/_base/array","dojo/_base/Color","dojox/gfx","dojox/lang/functional","../scaler/common"],function(lang,arr,_2ed,g,df,sc){var _2ee=lang.getObject("dojox.charting.plot2d.common",true);return lang.mixin(_2ee,{doIfLoaded:sc.doIfLoaded,makeStroke:function(_2ef){if(!_2ef){return _2ef;}if(typeof _2ef=="string"||_2ef instanceof _2ed){_2ef={color:_2ef};}return g.makeParameters(g.defaultStroke,_2ef);},augmentColor:function(_2f0,_2f1){var t=new _2ed(_2f0),c=new _2ed(_2f1);c.a=t.a;return c;},augmentStroke:function(_2f2,_2f3){var s=_2ee.makeStroke(_2f2);if(s){s.color=_2ee.augmentColor(s.color,_2f3);}return s;},augmentFill:function(fill,_2f4){var fc,c=new _2ed(_2f4);if(typeof fill=="string"||fill instanceof _2ed){return _2ee.augmentColor(fill,_2f4);}return fill;},defaultStats:{vmin:Number.POSITIVE_INFINITY,vmax:Number.NEGATIVE_INFINITY,hmin:Number.POSITIVE_INFINITY,hmax:Number.NEGATIVE_INFINITY},collectSimpleStats:function(_2f5){var _2f6=lang.delegate(_2ee.defaultStats);for(var i=0;i<_2f5.length;++i){var run=_2f5[i];for(var j=0;j<run.data.length;j++){if(run.data[j]!==null){if(typeof run.data[j]=="number"){var _2f7=_2f6.vmin,_2f8=_2f6.vmax;if(!("ymin" in run)||!("ymax" in run)){arr.forEach(run.data,function(val,i){if(val!==null){var x=i+1,y=val;if(isNaN(y)){y=0;}_2f6.hmin=Math.min(_2f6.hmin,x);_2f6.hmax=Math.max(_2f6.hmax,x);_2f6.vmin=Math.min(_2f6.vmin,y);_2f6.vmax=Math.max(_2f6.vmax,y);}});}if("ymin" in run){_2f6.vmin=Math.min(_2f7,run.ymin);}if("ymax" in run){_2f6.vmax=Math.max(_2f8,run.ymax);}}else{var _2f9=_2f6.hmin,_2fa=_2f6.hmax,_2f7=_2f6.vmin,_2f8=_2f6.vmax;if(!("xmin" in run)||!("xmax" in run)||!("ymin" in run)||!("ymax" in run)){arr.forEach(run.data,function(val,i){if(val!==null){var x="x" in val?val.x:i+1,y=val.y;if(isNaN(x)){x=0;}if(isNaN(y)){y=0;}_2f6.hmin=Math.min(_2f6.hmin,x);_2f6.hmax=Math.max(_2f6.hmax,x);_2f6.vmin=Math.min(_2f6.vmin,y);_2f6.vmax=Math.max(_2f6.vmax,y);}});}if("xmin" in run){_2f6.hmin=Math.min(_2f9,run.xmin);}if("xmax" in run){_2f6.hmax=Math.max(_2fa,run.xmax);}if("ymin" in run){_2f6.vmin=Math.min(_2f7,run.ymin);}if("ymax" in run){_2f6.vmax=Math.max(_2f8,run.ymax);}}break;}}}return _2f6;},calculateBarSize:function(_2fb,opt,_2fc){if(!_2fc){_2fc=1;}var gap=opt.gap,size=(_2fb-2*gap)/_2fc;if("minBarSize" in opt){size=Math.max(size,opt.minBarSize);}if("maxBarSize" in opt){size=Math.min(size,opt.maxBarSize);}size=Math.max(size,1);gap=(_2fb-size*_2fc)/2;return {size:size,gap:gap};},collectStackedStats:function(_2fd){var _2fe=lang.clone(_2ee.defaultStats);if(_2fd.length){_2fe.hmin=Math.min(_2fe.hmin,1);_2fe.hmax=df.foldl(_2fd,"seed, run -> Math.max(seed, run.data.length)",_2fe.hmax);for(var i=0;i<_2fe.hmax;++i){var v=_2fd[0].data[i];v=v&&(typeof v=="number"?v:v.y);if(isNaN(v)){v=0;}_2fe.vmin=Math.min(_2fe.vmin,v);for(var j=1;j<_2fd.length;++j){var t=_2fd[j].data[i];t=t&&(typeof t=="number"?t:t.y);if(isNaN(t)){t=0;}v+=t;}_2fe.vmax=Math.max(_2fe.vmax,v);}}return _2fe;},curve:function(a,_2ff){var _300=a.slice(0);if(_2ff=="x"){_300[_300.length]=arr[0];}var p=arr.map(_300,function(item,i){if(i==0){return "M"+item.x+","+item.y;}if(!isNaN(_2ff)){var dx=item.x-_300[i-1].x,dy=_300[i-1].y;return "C"+(item.x-(_2ff-1)*(dx/_2ff))+","+dy+" "+(item.x-(dx/_2ff))+","+item.y+" "+item.x+","+item.y;}else{if(_2ff=="X"||_2ff=="x"||_2ff=="S"){var p0,p1=_300[i-1],p2=_300[i],p3;var bz1x,bz1y,bz2x,bz2y;var f=1/6;if(i==1){if(_2ff=="x"){p0=_300[_300.length-2];}else{p0=p1;}f=1/3;}else{p0=_300[i-2];}if(i==(_300.length-1)){if(_2ff=="x"){p3=_300[1];}else{p3=p2;}f=1/3;}else{p3=_300[i+1];}var p1p2=Math.sqrt((p2.x-p1.x)*(p2.x-p1.x)+(p2.y-p1.y)*(p2.y-p1.y));var p0p2=Math.sqrt((p2.x-p0.x)*(p2.x-p0.x)+(p2.y-p0.y)*(p2.y-p0.y));var p1p3=Math.sqrt((p3.x-p1.x)*(p3.x-p1.x)+(p3.y-p1.y)*(p3.y-p1.y));var _301=p0p2*f;var _302=p1p3*f;if(_301>p1p2/2&&_302>p1p2/2){_301=p1p2/2;_302=p1p2/2;}else{if(_301>p1p2/2){_301=p1p2/2;_302=p1p2/2*p1p3/p0p2;}else{if(_302>p1p2/2){_302=p1p2/2;_301=p1p2/2*p0p2/p1p3;}}}if(_2ff=="S"){if(p0==p1){_301=0;}if(p2==p3){_302=0;}}bz1x=p1.x+_301*(p2.x-p0.x)/p0p2;bz1y=p1.y+_301*(p2.y-p0.y)/p0p2;bz2x=p2.x-_302*(p3.x-p1.x)/p1p3;bz2y=p2.y-_302*(p3.y-p1.y)/p1p3;}}return "C"+(bz1x+","+bz1y+" "+bz2x+","+bz2y+" "+p2.x+","+p2.y);});return p.join(" ");},getLabel:function(_303,_304,_305){return sc.doIfLoaded("dojo/number",function(_306){return (_304?_306.format(_303,{places:_305}):_306.format(_303))||"";},function(){return _304?_303.toFixed(_305):_303.toString();});}});});},"dojox/gfx/shape":function(){define("dojox/gfx/shape",["./_base","dojo/_base/lang","dojo/_base/declare","dojo/_base/window","dojo/_base/sniff","dojo/_base/connect","dojo/_base/array","dojo/dom-construct","dojo/_base/Color","./matrix"],function(g,lang,_307,win,has,_308,arr,_309,_30a,_30b){var _30c=g.shape={};var _30d={};var _30e={};_30c.register=function(_30f){var t=_30f.declaredClass.split(".").pop();var i=t in _30d?++_30d[t]:((_30d[t]=0));var uid=t+i;_30e[uid]=_30f;return uid;};_30c.byId=function(id){return _30e[id];};_30c.dispose=function(_310){delete _30e[_310.getUID()];};_307("dojox.gfx.shape.Shape",null,{constructor:function(){this.rawNode=null;this.shape=null;this.matrix=null;this.fillStyle=null;this.strokeStyle=null;this.bbox=null;this.parent=null;this.parentMatrix=null;var uid=_30c.register(this);this.getUID=function(){return uid;};},getNode:function(){return this.rawNode;},getShape:function(){return this.shape;},getTransform:function(){return this.matrix;},getFill:function(){return this.fillStyle;},getStroke:function(){return this.strokeStyle;},getParent:function(){return this.parent;},getBoundingBox:function(){return this.bbox;},getTransformedBoundingBox:function(){var b=this.getBoundingBox();if(!b){return null;}var m=this._getRealMatrix(),gm=_30b;return [gm.multiplyPoint(m,b.x,b.y),gm.multiplyPoint(m,b.x+b.width,b.y),gm.multiplyPoint(m,b.x+b.width,b.y+b.height),gm.multiplyPoint(m,b.x,b.y+b.height)];},getEventSource:function(){return this.rawNode;},setShape:function(_311){this.shape=g.makeParameters(this.shape,_311);this.bbox=null;return this;},setFill:function(fill){if(!fill){this.fillStyle=null;return this;}var f=null;if(typeof (fill)=="object"&&"type" in fill){switch(fill.type){case "linear":f=g.makeParameters(g.defaultLinearGradient,fill);break;case "radial":f=g.makeParameters(g.defaultRadialGradient,fill);break;case "pattern":f=g.makeParameters(g.defaultPattern,fill);break;}}else{f=g.normalizeColor(fill);}this.fillStyle=f;return this;},setStroke:function(_312){if(!_312){this.strokeStyle=null;return this;}if(typeof _312=="string"||lang.isArray(_312)||_312 instanceof _30a){_312={color:_312};}var s=this.strokeStyle=g.makeParameters(g.defaultStroke,_312);s.color=g.normalizeColor(s.color);return this;},setTransform:function(_313){this.matrix=_30b.clone(_313?_30b.normalize(_313):_30b.identity);return this._applyTransform();},_applyTransform:function(){return this;},moveToFront:function(){var p=this.getParent();if(p){p._moveChildToFront(this);this._moveToFront();}return this;},moveToBack:function(){var p=this.getParent();if(p){p._moveChildToBack(this);this._moveToBack();}return this;},_moveToFront:function(){},_moveToBack:function(){},applyRightTransform:function(_314){return _314?this.setTransform([this.matrix,_314]):this;},applyLeftTransform:function(_315){return _315?this.setTransform([_315,this.matrix]):this;},applyTransform:function(_316){return _316?this.setTransform([this.matrix,_316]):this;},removeShape:function(_317){if(this.parent){this.parent.remove(this,_317);}return this;},_setParent:function(_318,_319){this.parent=_318;return this._updateParentMatrix(_319);},_updateParentMatrix:function(_31a){this.parentMatrix=_31a?_30b.clone(_31a):null;return this._applyTransform();},_getRealMatrix:function(){var m=this.matrix;var p=this.parent;while(p){if(p.matrix){m=_30b.multiply(p.matrix,m);}p=p.parent;}return m;}});_30c._eventsProcessing={connect:function(name,_31b,_31c){return _308.connect(this.getEventSource(),name,_30c.fixCallback(this,g.fixTarget,_31b,_31c));},disconnect:function(_31d){_308.disconnect(_31d);}};_30c.fixCallback=function(_31e,_31f,_320,_321){if(!_321){_321=_320;_320=null;}if(lang.isString(_321)){_320=_320||win.global;if(!_320[_321]){throw (["dojox.gfx.shape.fixCallback: scope[\"",_321,"\"] is null (scope=\"",_320,"\")"].join(""));}return function(e){return _31f(e,_31e)?_320[_321].apply(_320,arguments||[]):undefined;};}return !_320?function(e){return _31f(e,_31e)?_321.apply(_320,arguments):undefined;}:function(e){return _31f(e,_31e)?_321.apply(_320,arguments||[]):undefined;};};lang.extend(_30c.Shape,_30c._eventsProcessing);_30c.Container={_init:function(){this.children=[];},openBatch:function(){},closeBatch:function(){},add:function(_322){var _323=_322.getParent();if(_323){_323.remove(_322,true);}this.children.push(_322);return _322._setParent(this,this._getRealMatrix());},remove:function(_324,_325){for(var i=0;i<this.children.length;++i){if(this.children[i]==_324){if(_325){}else{_324.parent=null;_324.parentMatrix=null;}this.children.splice(i,1);break;}}return this;},clear:function(){var _326;for(var i=0;i<this.children.length;++i){_326=this.children[i];_326.parent=null;_326.parentMatrix=null;}this.children=[];return this;},_moveChildToFront:function(_327){for(var i=0;i<this.children.length;++i){if(this.children[i]==_327){this.children.splice(i,1);this.children.push(_327);break;}}return this;},_moveChildToBack:function(_328){for(var i=0;i<this.children.length;++i){if(this.children[i]==_328){this.children.splice(i,1);this.children.unshift(_328);break;}}return this;}};_307("dojox.gfx.shape.Surface",null,{constructor:function(){this.rawNode=null;this._parent=null;this._nodes=[];this._events=[];},destroy:function(){arr.forEach(this._nodes,_309.destroy);this._nodes=[];arr.forEach(this._events,_308.disconnect);this._events=[];this.rawNode=null;if(has("ie")){while(this._parent.lastChild){_309.destroy(this._parent.lastChild);}}else{this._parent.innerHTML="";}this._parent=null;},getEventSource:function(){return this.rawNode;},_getRealMatrix:function(){return null;},isLoaded:true,onLoad:function(_329){},whenLoaded:function(_32a,_32b){var f=lang.hitch(_32a,_32b);if(this.isLoaded){f(this);}else{var h=_308.connect(this,"onLoad",function(_32c){_308.disconnect(h);f(_32c);});}}});lang.extend(_30c.Surface,_30c._eventsProcessing);_307("dojox.gfx.Point",null,{});_307("dojox.gfx.Rectangle",null,{});_307("dojox.gfx.shape.Rect",_30c.Shape,{constructor:function(_32d){this.shape=g.getDefault("Rect");this.rawNode=_32d;},getBoundingBox:function(){return this.shape;}});_307("dojox.gfx.shape.Ellipse",_30c.Shape,{constructor:function(_32e){this.shape=g.getDefault("Ellipse");this.rawNode=_32e;},getBoundingBox:function(){if(!this.bbox){var _32f=this.shape;this.bbox={x:_32f.cx-_32f.rx,y:_32f.cy-_32f.ry,width:2*_32f.rx,height:2*_32f.ry};}return this.bbox;}});_307("dojox.gfx.shape.Circle",_30c.Shape,{constructor:function(_330){this.shape=g.getDefault("Circle");this.rawNode=_330;},getBoundingBox:function(){if(!this.bbox){var _331=this.shape;this.bbox={x:_331.cx-_331.r,y:_331.cy-_331.r,width:2*_331.r,height:2*_331.r};}return this.bbox;}});_307("dojox.gfx.shape.Line",_30c.Shape,{constructor:function(_332){this.shape=g.getDefault("Line");this.rawNode=_332;},getBoundingBox:function(){if(!this.bbox){var _333=this.shape;this.bbox={x:Math.min(_333.x1,_333.x2),y:Math.min(_333.y1,_333.y2),width:Math.abs(_333.x2-_333.x1),height:Math.abs(_333.y2-_333.y1)};}return this.bbox;}});_307("dojox.gfx.shape.Polyline",_30c.Shape,{constructor:function(_334){this.shape=g.getDefault("Polyline");this.rawNode=_334;},setShape:function(_335,_336){if(_335&&_335 instanceof Array){this.inherited(arguments,[{points:_335}]);if(_336&&this.shape.points.length){this.shape.points.push(this.shape.points[0]);}}else{this.inherited(arguments,[_335]);}return this;},_normalizePoints:function(){var p=this.shape.points,l=p&&p.length;if(l&&typeof p[0]=="number"){var _337=[];for(var i=0;i<l;i+=2){_337.push({x:p[i],y:p[i+1]});}this.shape.points=_337;}},getBoundingBox:function(){if(!this.bbox&&this.shape.points.length){var p=this.shape.points;var l=p.length;var t=p[0];var bbox={l:t.x,t:t.y,r:t.x,b:t.y};for(var i=1;i<l;++i){t=p[i];if(bbox.l>t.x){bbox.l=t.x;}if(bbox.r<t.x){bbox.r=t.x;}if(bbox.t>t.y){bbox.t=t.y;}if(bbox.b<t.y){bbox.b=t.y;}}this.bbox={x:bbox.l,y:bbox.t,width:bbox.r-bbox.l,height:bbox.b-bbox.t};}return this.bbox;}});_307("dojox.gfx.shape.Image",_30c.Shape,{constructor:function(_338){this.shape=g.getDefault("Image");this.rawNode=_338;},getBoundingBox:function(){return this.shape;},setStroke:function(){return this;},setFill:function(){return this;}});_307("dojox.gfx.shape.Text",_30c.Shape,{constructor:function(_339){this.fontStyle=null;this.shape=g.getDefault("Text");this.rawNode=_339;},getFont:function(){return this.fontStyle;},setFont:function(_33a){this.fontStyle=typeof _33a=="string"?g.splitFontString(_33a):g.makeParameters(g.defaultFont,_33a);this._setFont();return this;}});_30c.Creator={createShape:function(_33b){switch(_33b.type){case g.defaultPath.type:return this.createPath(_33b);case g.defaultRect.type:return this.createRect(_33b);case g.defaultCircle.type:return this.createCircle(_33b);case g.defaultEllipse.type:return this.createEllipse(_33b);case g.defaultLine.type:return this.createLine(_33b);case g.defaultPolyline.type:return this.createPolyline(_33b);case g.defaultImage.type:return this.createImage(_33b);case g.defaultText.type:return this.createText(_33b);case g.defaultTextPath.type:return this.createTextPath(_33b);}return null;},createGroup:function(){return this.createObject(g.Group);},createRect:function(rect){return this.createObject(g.Rect,rect);},createEllipse:function(_33c){return this.createObject(g.Ellipse,_33c);},createCircle:function(_33d){return this.createObject(g.Circle,_33d);},createLine:function(line){return this.createObject(g.Line,line);},createPolyline:function(_33e){return this.createObject(g.Polyline,_33e);},createImage:function(_33f){return this.createObject(g.Image,_33f);},createText:function(text){return this.createObject(g.Text,text);},createPath:function(path){return this.createObject(g.Path,path);},createTextPath:function(text){return this.createObject(g.TextPath,{}).setText(text);},createObject:function(_340,_341){return null;}};return _30c;});},"dijit/_OnDijitClickMixin":function(){define("dijit/_OnDijitClickMixin",["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/_base/sniff","dojo/_base/unload","dojo/_base/window"],function(on,_342,keys,_343,has,_344,win){var _345=null;if(has("ie")){(function(){var _346=function(evt){_345=evt.srcElement;};win.doc.attachEvent("onkeydown",_346);_344.addOnWindowUnload(function(){win.doc.detachEvent("onkeydown",_346);});})();}else{win.doc.addEventListener("keydown",function(evt){_345=evt.target;},true);}var _347=function(node,_348){if(/input|button/i.test(node.nodeName)){return on(node,"click",_348);}else{function _349(e){return (e.keyCode==keys.ENTER||e.keyCode==keys.SPACE)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey;};var _34a=[on(node,"keypress",function(e){if(_349(e)){_345=e.target;e.preventDefault();}}),on(node,"keyup",function(e){if(_349(e)&&e.target==_345){_345=null;_348.call(this,e);}}),on(node,"click",function(e){_348.call(this,e);})];return {remove:function(){_342.forEach(_34a,function(h){h.remove();});}};}};return _343("dijit._OnDijitClickMixin",null,{connect:function(obj,_34b,_34c){return this.inherited(arguments,[obj,_34b=="ondijitclick"?_347:_34b,_34c]);}});});},"esri/tasks/_task":function(){define(["dijit","dojo","dojox","dojo/require!esri/graphic,esri/utils"],function(_34d,dojo,_34e){dojo.provide("esri.tasks._task");dojo.require("esri.graphic");dojo.require("esri.utils");dojo.declare("esri.tasks._Task",null,{constructor:function(url){if(url&&dojo.isString(url)){this._url=esri.urlToObject(this.url=url);}this.normalization=true;this._errorHandler=dojo.hitch(this,this._errorHandler);},_useSSL:function(){var _34f=this._url,re=/^http:/i,rep="https:";if(this.url){this.url=this.url.replace(re,rep);}if(_34f&&_34f.path){_34f.path=_34f.path.replace(re,rep);}},_encode:function(_350,_351,_352){var _353,type,_354={},i,p,pl;for(i in _350){if(i==="declaredClass"){continue;}_353=_350[i];type=typeof (_353);if(_353!==null&&_353!==undefined&&type!=="function"){if(dojo.isArray(_353)){_354[i]=[];pl=_353.length;for(p=0;p<pl;p++){_354[i][p]=this._encode(_353[p]);}}else{if(type==="object"){if(_353.toJson){var json=_353.toJson(_352&&_352[i]);if(_353 instanceof esri.tasks.FeatureSet){if(json.spatialReference){json.sr=json.spatialReference;delete json.spatialReference;}}_354[i]=_351?json:dojo.toJson(json);}}else{_354[i]=_353;}}}}return _354;},_successHandler:function(args,_355,_356,dfd){if(_355){this[_355].apply(this,args);}if(_356){_356.apply(null,args);}if(dfd){esri._resDfd(dfd,args);}},_errorHandler:function(err,_357,dfd){this.onError(err);if(_357){_357(err);}if(dfd){dfd.errback(err);}},setNormalization:function(_358){this.normalization=_358;},onError:function(){}});dojo.declare("esri.tasks.FeatureSet",null,{constructor:function(json){if(json){dojo.mixin(this,json);var _359=this.features,sr=json.spatialReference,_35a=esri.Graphic,_35b=esri.geometry.getGeometryType(json.geometryType);sr=(this.spatialReference=new esri.SpatialReference(sr));this.geometryType=json.geometryType;if(json.fields){this.fields=json.fields;}dojo.forEach(_359,function(_35c,i){var _35d=_35c.geometry&&_35c.geometry.spatialReference;_359[i]=new _35a((_35b&&_35c.geometry)?new _35b(_35c.geometry):null,_35c.symbol&&esri.symbol.fromJson(_35c.symbol),_35c.attributes);if(_359[i].geometry&&!_35d){_359[i].geometry.setSpatialReference(sr);}});}else{this.features=[];}},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(_35e){var json={};if(this.displayFieldName){json.displayFieldName=this.displayFieldName;}if(this.fields){json.fields=this.fields;}if(this.spatialReference){json.spatialReference=this.spatialReference.toJson();}else{if(this.features[0]&&this.features[0].geometry){json.spatialReference=this.features[0].geometry.spatialReference.toJson();}}if(this.features[0]){if(this.features[0].geometry){json.geometryType=esri.geometry.getJsonType(this.features[0].geometry);}json.features=esri._encodeGraphics(this.features,_35e);}json.exceededTransferLimit=this.exceededTransferLimit;return esri._sanitize(json);}});esri.tasks._SpatialRelationship={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};});},"dojox/charting/action2d/Tooltip":function(){define("dojox/charting/action2d/Tooltip",["dojo/_base/kernel","dijit/Tooltip","dojo/_base/lang","dojo/_base/html","dojo/_base/declare","./PlotAction","dojox/gfx/matrix","dojox/lang/functional","dojox/lang/functional/scan","dojox/lang/functional/fold"],function(dojo,_35f,lang,html,_360,_361,m,df,dfs,dff){var _362=function(o){var t=o.run&&o.run.data&&o.run.data[o.index];if(t&&typeof t!="number"&&(t.tooltip||t.text)){return t.tooltip||t.text;}if(o.element=="candlestick"){return "<table cellpadding=\"1\" cellspacing=\"0\" border=\"0\" style=\"font-size:0.9em;\">"+"<tr><td>Open:</td><td align=\"right\"><strong>"+o.data.open+"</strong></td></tr>"+"<tr><td>High:</td><td align=\"right\"><strong>"+o.data.high+"</strong></td></tr>"+"<tr><td>Low:</td><td align=\"right\"><strong>"+o.data.low+"</strong></td></tr>"+"<tr><td>Close:</td><td align=\"right\"><strong>"+o.data.close+"</strong></td></tr>"+(o.data.mid!==undefined?"<tr><td>Mid:</td><td align=\"right\"><strong>"+o.data.mid+"</strong></td></tr>":"")+"</table>";}return o.element=="bar"?o.x:o.y;};var pi4=Math.PI/4,pi2=Math.PI/2;return _360("dojox.charting.action2d.Tooltip",_361,{defaultParams:{text:_362},optionalParams:{},constructor:function(_363,plot,_364){this.text=_364&&_364.text?_364.text:_362;this.connect();},process:function(o){if(o.type==="onplotreset"||o.type==="onmouseout"){_35f.hide(this.aroundRect);this.aroundRect=null;if(o.type==="onplotreset"){delete this.angles;}return;}if(!o.shape||o.type!=="onmouseover"){return;}var _365={type:"rect"},_366=["after","before"];switch(o.element){case "marker":_365.x=o.cx;_365.y=o.cy;_365.w=_365.h=1;break;case "circle":_365.x=o.cx-o.cr;_365.y=o.cy-o.cr;_365.w=_365.h=2*o.cr;break;case "column":_366=["above","below"];case "bar":_365=lang.clone(o.shape.getShape());_365.w=_365.width;_365.h=_365.height;break;case "candlestick":_365.x=o.x;_365.y=o.y;_365.w=o.width;_365.h=o.height;break;default:if(!this.angles){if(typeof o.run.data[0]=="number"){this.angles=df.map(df.scanl(o.run.data,"+",0),"* 2 * Math.PI / this",df.foldl(o.run.data,"+",0));}else{this.angles=df.map(df.scanl(o.run.data,"a + b.y",0),"* 2 * Math.PI / this",df.foldl(o.run.data,"a + b.y",0));}}var _367=m._degToRad(o.plot.opt.startAngle),_368=(this.angles[o.index]+this.angles[o.index+1])/2+_367;_365.x=o.cx+o.cr*Math.cos(_368);_365.y=o.cy+o.cr*Math.sin(_368);_365.w=_365.h=1;if(_368<pi4){}else{if(_368<pi2+pi4){_366=["below","above"];}else{if(_368<Math.PI+pi4){_366=["before","after"];}else{if(_368<2*Math.PI-pi4){_366=["above","below"];}}}}break;}var lt=this.chart.getCoords();_365.x+=lt.x;_365.y+=lt.y;_365.x=Math.round(_365.x);_365.y=Math.round(_365.y);_365.w=Math.ceil(_365.w);_365.h=Math.ceil(_365.h);this.aroundRect=_365;var _369=this.text(o);if(this.chart.getTextDir){var _36a=(html.style(this.chart.node,"direction")=="rtl");var _36b=(this.chart.getTextDir(_369)=="rtl");}if(_369){if(_36b&&!_36a){_35f.show("<span dir = 'rtl'>"+_369+"</span>",this.aroundRect,_366);}else{if(!_36b&&_36a){_35f.show("<span dir = 'ltr'>"+_369+"</span>",this.aroundRect,_366);}else{_35f.show(_369,this.aroundRect,_366);}}}}});});},"dojox/charting/plot2d/Grid":function(){define("dojox/charting/plot2d/Grid",["dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","dojo/_base/array","../Element","./common","dojox/lang/utils","dojox/gfx/fx"],function(lang,_36c,hub,arr,_36d,dc,du,fx){return _36c("dojox.charting.plot2d.Grid",_36d,{defaultParams:{hAxis:"x",vAxis:"y",hMajorLines:true,hMinorLines:false,vMajorLines:true,vMinorLines:false,hStripes:"none",vStripes:"none",animate:null,enableCache:false},optionalParams:{},constructor:function(_36e,_36f){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_36f);this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.dirty=true;this.animate=this.opt.animate;this.zoom=null,this.zoomQueue=[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0};if(this.opt.enableCache){this._lineFreePool=[];this._lineUsePool=[];}},clear:function(){this._hAxis=null;this._vAxis=null;this.dirty=true;return this;},setAxis:function(axis){if(axis){this[axis.vertical?"_vAxis":"_hAxis"]=axis;}return this;},addSeries:function(run){return this;},getSeriesStats:function(){return lang.delegate(dc.defaultStats);},initializeScalers:function(){return this;},isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||this._vAxis&&this._vAxis.dirty;},performZoom:function(dim,_370){var vs=this._vAxis.scale||1,hs=this._hAxis.scale||1,_371=dim.height-_370.b,_372=this._hAxis.getScaler().bounds,_373=(_372.from-_372.lower)*_372.scale,_374=this._vAxis.getScaler().bounds,_375=(_374.from-_374.lower)*_374.scale,_376=vs/this.lastWindow.vscale,_377=hs/this.lastWindow.hscale,_378=(this.lastWindow.xoffset-_373)/((this.lastWindow.hscale==1)?hs:this.lastWindow.hscale),_379=(_375-this.lastWindow.yoffset)/((this.lastWindow.vscale==1)?vs:this.lastWindow.vscale),_37a=this.group,anim=fx.animateTransform(lang.delegate({shape:_37a,duration:1200,transform:[{name:"translate",start:[0,0],end:[_370.l*(1-_377),_371*(1-_376)]},{name:"scale",start:[1,1],end:[_377,_376]},{name:"original"},{name:"translate",start:[0,0],end:[_378,_379]}]},this.zoom));lang.mixin(this.lastWindow,{vscale:vs,hscale:hs,xoffset:_373,yoffset:_375});this.zoomQueue.push(anim);hub.connect(anim,"onEnd",this,function(){this.zoom=null;this.zoomQueue.shift();if(this.zoomQueue.length>0){this.zoomQueue[0].play();}});if(this.zoomQueue.length==1){this.zoomQueue[0].play();}return this;},getRequiredColors:function(){return 0;},cleanGroup:function(){this.inherited(arguments);if(this.opt.enableCache){this._lineFreePool=this._lineFreePool.concat(this._lineUsePool);this._lineUsePool=[];}},createLine:function(_37b,_37c){var line;if(this.opt.enableCache&&this._lineFreePool.length>0){line=this._lineFreePool.pop();line.setShape(_37c);_37b.add(line);}else{line=_37b.createLine(_37c);}if(this.opt.enableCache){this._lineUsePool.push(line);}return line;},render:function(dim,_37d){if(this.zoom){return this.performZoom(dim,_37d);}this.dirty=this.isDirty();if(!this.dirty){return this;}this.cleanGroup();var s=this.group,ta=this.chart.theme.axis;try{var _37e=this._vAxis.getScaler(),vt=_37e.scaler.getTransformerFromModel(_37e),_37f=this._vAxis.getTicks();if(_37f!=null){if(this.opt.hMinorLines){arr.forEach(_37f.minor,function(tick){var y=dim.height-_37d.b-vt(tick.value);var _380=this.createLine(s,{x1:_37d.l,y1:y,x2:dim.width-_37d.r,y2:y}).setStroke(ta.minorTick);if(this.animate){this._animateGrid(_380,"h",_37d.l,_37d.r+_37d.l-dim.width);}},this);}if(this.opt.hMajorLines){arr.forEach(_37f.major,function(tick){var y=dim.height-_37d.b-vt(tick.value);var _381=this.createLine(s,{x1:_37d.l,y1:y,x2:dim.width-_37d.r,y2:y}).setStroke(ta.majorTick);if(this.animate){this._animateGrid(_381,"h",_37d.l,_37d.r+_37d.l-dim.width);}},this);}}}catch(e){}try{var _382=this._hAxis.getScaler(),ht=_382.scaler.getTransformerFromModel(_382),_37f=this._hAxis.getTicks();if(this!=null){if(_37f&&this.opt.vMinorLines){arr.forEach(_37f.minor,function(tick){var x=_37d.l+ht(tick.value);var _383=this.createLine(s,{x1:x,y1:_37d.t,x2:x,y2:dim.height-_37d.b}).setStroke(ta.minorTick);if(this.animate){this._animateGrid(_383,"v",dim.height-_37d.b,dim.height-_37d.b-_37d.t);}},this);}if(_37f&&this.opt.vMajorLines){arr.forEach(_37f.major,function(tick){var x=_37d.l+ht(tick.value);var _384=this.createLine(s,{x1:x,y1:_37d.t,x2:x,y2:dim.height-_37d.b}).setStroke(ta.majorTick);if(this.animate){this._animateGrid(_384,"v",dim.height-_37d.b,dim.height-_37d.b-_37d.t);}},this);}}}catch(e){}this.dirty=false;return this;},_animateGrid:function(_385,type,_386,size){var _387=type=="h"?[_386,0]:[0,_386];var _388=type=="h"?[1/size,1]:[1,1/size];fx.animateTransform(lang.delegate({shape:_385,duration:1200,transform:[{name:"translate",start:_387,end:[0,0]},{name:"scale",start:_388,end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojox/charting/plot2d/Markers":function(){define("dojox/charting/plot2d/Markers",["dojo/_base/declare","./Default"],function(_389,_38a){return _389("dojox.charting.plot2d.Markers",_38a,{constructor:function(){this.opt.markers=true;}});});},"dojox/lang/functional/sequence":function(){define("dojox/lang/functional/sequence",["dojo/_base/lang","./lambda"],function(lang,df){lang.mixin(df,{repeat:function(n,f,z,o){o=o||dojo.global;f=df.lambda(f);var t=new Array(n),i=1;t[0]=z;for(;i<n;t[i]=z=f.call(o,z),++i){}return t;},until:function(pr,f,z,o){o=o||dojo.global;f=df.lambda(f);pr=df.lambda(pr);var t=[];for(;!pr.call(o,z);t.push(z),z=f.call(o,z)){}return t;}});return df;});},"dojo/cache":function(){define(["./_base/kernel","./text"],function(dojo,text){return dojo.cache;});},"dojox/lang/utils":function(){define("dojox/lang/utils",["..","dojo/_base/lang"],function(_38b,lang){var du=lang.getObject("lang.utils",true,_38b);var _38c={},opts=Object.prototype.toString;var _38d=function(o){if(o){switch(opts.call(o)){case "[object Array]":return o.slice(0);case "[object Object]":return lang.delegate(o);}}return o;};lang.mixin(du,{coerceType:function(_38e,_38f){switch(typeof _38e){case "number":return Number(eval("("+_38f+")"));case "string":return String(_38f);case "boolean":return Boolean(eval("("+_38f+")"));}return eval("("+_38f+")");},updateWithObject:function(_390,_391,conv){if(!_391){return _390;}for(var x in _390){if(x in _391&&!(x in _38c)){var t=_390[x];if(t&&typeof t=="object"){du.updateWithObject(t,_391[x],conv);}else{_390[x]=conv?du.coerceType(t,_391[x]):_38d(_391[x]);}}}return _390;},updateWithPattern:function(_392,_393,_394,conv){if(!_393||!_394){return _392;}for(var x in _394){if(x in _393&&!(x in _38c)){_392[x]=conv?du.coerceType(_394[x],_393[x]):_38d(_393[x]);}}return _392;},merge:function(_395,_396){if(_396){var _397=opts.call(_395),_398=opts.call(_396),t,i,l,m;switch(_398){case "[object Array]":if(_398==_397){t=new Array(Math.max(_395.length,_396.length));for(i=0,l=t.length;i<l;++i){t[i]=du.merge(_395[i],_396[i]);}return t;}return _396.slice(0);case "[object Object]":if(_398==_397&&_395){t=lang.delegate(_395);for(i in _396){if(i in _395){l=_395[i];m=_396[i];if(m!==l){t[i]=du.merge(l,m);}}else{t[i]=lang.clone(_396[i]);}}return t;}return lang.clone(_396);}}return _396;}});return du;});},"dojox/charting/plot2d/Columns":function(){define("dojox/charting/plot2d/Columns",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Base","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(lang,arr,_399,Base,dc,df,dfr,du,fx){var _39a=dfr.lambda("item.purgeGroup()");return _399("dojox.charting.plot2d.Columns",Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:0,animate:null,enableCache:false},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_39b,_39c){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_39c);du.updateWithPattern(this.opt,_39c,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},getSeriesStats:function(){var _39d=dc.collectSimpleStats(this.series);_39d.hmin-=0.5;_39d.hmax+=0.5;return _39d;},createRect:function(run,_39e,_39f){var rect;if(this.opt.enableCache&&run._rectFreePool.length>0){rect=run._rectFreePool.pop();rect.setShape(_39f);_39e.add(rect);}else{rect=_39e.createRect(_39f);}if(this.opt.enableCache){run._rectUsePool.push(rect);}return rect;},render:function(dim,_3a0){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_3a0);}var t=this.getSeriesStats();this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_39a);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_3a1,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_3a2=Math.max(0,this._vScaler.bounds.lower),_3a3=vt(_3a2),min=Math.max(0,Math.floor(this._hScaler.bounds.from-1)),max=Math.ceil(this._hScaler.bounds.to),_3a4=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_3a1=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(this.opt.enableCache){run._rectFreePool=(run._rectFreePool?run._rectFreePool:[]).concat(run._rectUsePool?run._rectUsePool:[]);run._rectUsePool=[];}var _3a5=t.next("column",[this.opt,run]),s=run.group,_3a6=new Array(run.data.length);var l=Math.min(run.data.length,max);for(var j=min;j<l;++j){var _3a7=run.data[j];if(_3a7!==null){var v=typeof _3a7=="number"?_3a7:_3a7.y,vv=vt(v),_3a8=vv-_3a3,h=Math.abs(_3a8),_3a9=typeof _3a7!="number"?t.addMixin(_3a5,"column",_3a7,true):t.post(_3a5,"column");if(_3a1>=1&&h>=0){var rect={x:_3a0.l+ht(j+0.5)+gap,y:dim.height-_3a0.b-(v>_3a2?vv:_3a3),width:_3a1,height:h};var _3aa=this._plotFill(_3a9.series.fill,dim,_3a0);_3aa=this._shapeFill(_3aa,rect);var _3ab=this.createRect(run,s,rect).setFill(_3aa).setStroke(_3a9.series.stroke);run.dyn.fill=_3ab.getFill();run.dyn.stroke=_3ab.getStroke();if(_3a4){var o={element:"column",index:j,run:run,shape:_3ab,x:j+0.5,y:v};this._connectEvents(o);_3a6[j]=o;}if(this.animate){this._animateColumn(_3ab,dim.height-_3a0.b-_3a3,h);}}}}this._eventSeries[run.name]=_3a6;run.dirty=false;}this.dirty=false;return this;},_animateColumn:function(_3ac,_3ad,_3ae){fx.animateTransform(lang.delegate({shape:_3ac,duration:1200,transform:[{name:"translate",start:[0,_3ad-(_3ad/_3ae)],end:[0,0]},{name:"scale",start:[1,1/_3ae],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojox/lang/functional":function(){define("dojox/lang/functional",["./functional/lambda","./functional/array","./functional/object"],function(df){return df;});},"dojox/charting/plot2d/StackedBars":function(){define("dojox/charting/plot2d/StackedBars",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Bars","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/functional/sequence"],function(lang,arr,_3af,Bars,dc,df,dfr,dfs){var _3b0=dfr.lambda("item.purgeGroup()");return _3af("dojox.charting.plot2d.StackedBars",Bars,{getSeriesStats:function(){var _3b1=dc.collectStackedStats(this.series),t;this._maxRunLength=_3b1.hmax;_3b1.hmin-=0.5;_3b1.hmax+=0.5;t=_3b1.hmin,_3b1.hmin=_3b1.vmin,_3b1.vmin=t;t=_3b1.hmax,_3b1.hmax=_3b1.vmax,_3b1.vmax=t;return _3b1;},render:function(dim,_3b2){if(this._maxRunLength<=0){return this;}var acc=df.repeat(this._maxRunLength,"-> 0",0);for(var i=0;i<this.series.length;++i){var run=this.series[i];for(var j=0;j<run.data.length;++j){var _3b3=run.data[j];if(_3b3!==null){var v=typeof _3b3=="number"?_3b3:_3b3.y;if(isNaN(v)){v=0;}acc[j]+=v;}}}if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_3b2);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_3b0);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_3b4,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_3b5=this.events();f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt);gap=f.gap;_3b4=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _3b6=t.next("bar",[this.opt,run]),s=run.group,_3b7=new Array(acc.length);for(var j=0;j<acc.length;++j){var _3b3=run.data[j];if(_3b3!==null){var v=acc[j],_3b8=ht(v),_3b9=typeof _3b3!="number"?t.addMixin(_3b6,"bar",_3b3,true):t.post(_3b6,"bar");if(_3b8>=0&&_3b4>=1){var rect={x:_3b2.l,y:dim.height-_3b2.b-vt(j+1.5)+gap,width:_3b8,height:_3b4};var _3ba=this._plotFill(_3b9.series.fill,dim,_3b2);_3ba=this._shapeFill(_3ba,rect);var _3bb=s.createRect(rect).setFill(_3ba).setStroke(_3b9.series.stroke);run.dyn.fill=_3bb.getFill();run.dyn.stroke=_3bb.getStroke();if(_3b5){var o={element:"bar",index:j,run:run,shape:_3bb,x:v,y:j+1.5};this._connectEvents(o);_3b7[j]=o;}if(this.animate){this._animateBar(_3bb,_3b2.l,-_3b8);}}}}this._eventSeries[run.name]=_3b7;run.dirty=false;for(var j=0;j<run.data.length;++j){var _3b3=run.data[j];if(_3b3!==null){var v=typeof _3b3=="number"?_3b3:_3b3.y;if(isNaN(v)){v=0;}acc[j]-=v;}}}this.dirty=false;return this;}});});},"dojo/cldr/nls/gregorian":function(){define({root:{"months-format-narrow":["1","2","3","4","5","6","7","8","9","10","11","12"],"quarters-standAlone-narrow":["1","2","3","4"],"field-weekday":"Day of the Week","dateFormatItem-yQQQ":"y QQQ","dateFormatItem-yMEd":"EEE, y-M-d","dateFormatItem-MMMEd":"E MMM d","eraNarrow":["BCE","CE"],"dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","dateFormat-long":"y MMMM d","months-format-wide":["1","2","3","4","5","6","7","8","9","10","11","12"],"dateTimeFormat-medium":"{1} {0}","dateFormatItem-EEEd":"d EEE","dayPeriods-format-wide-pm":"PM","dateFormat-full":"EEEE, y MMMM dd","dateFormatItem-Md":"M-d","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","field-era":"Era","dateFormatItem-yM":"y-M","months-standAlone-wide":["1","2","3","4","5","6","7","8","9","10","11","12"],"timeFormat-short":"HH:mm","quarters-format-wide":["Q1","Q2","Q3","Q4"],"timeFormat-long":"HH:mm:ss z","field-year":"Year","dateFormatItem-yMMM":"y MMM","dateFormatItem-yQ":"y Q","dateTimeFormats-appendItem-Era":"{0} {1}","field-hour":"Hour","months-format-abbr":["1","2","3","4","5","6","7","8","9","10","11","12"],"timeFormat-full":"HH:mm:ss zzzz","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","field-day-relative+0":"Today","field-day-relative+1":"Tomorrow","dateFormatItem-H":"HH","months-standAlone-abbr":["1","2","3","4","5","6","7","8","9","10","11","12"],"quarters-format-abbr":["Q1","Q2","Q3","Q4"],"quarters-standAlone-wide":["Q1","Q2","Q3","Q4"],"dateFormatItem-M":"L","days-standAlone-wide":["1","2","3","4","5","6","7"],"timeFormat-medium":"HH:mm:ss","dateFormatItem-Hm":"HH:mm","quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],"eraAbbr":["BCE","CE"],"field-minute":"Minute","field-dayperiod":"Dayperiod","days-standAlone-abbr":["1","2","3","4","5","6","7"],"dateFormatItem-d":"d","dateFormatItem-ms":"mm:ss","quarters-format-narrow":["1","2","3","4"],"field-day-relative+-1":"Yesterday","dateFormatItem-h":"h a","dateTimeFormat-long":"{1} {0}","dayPeriods-format-narrow-am":"AM","dateFormatItem-MMMd":"MMM d","dateFormatItem-MEd":"E, M-d","dateTimeFormat-full":"{1} {0}","field-day":"Day","days-format-wide":["1","2","3","4","5","6","7"],"field-zone":"Zone","dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","dateFormatItem-y":"y","months-standAlone-narrow":["1","2","3","4","5","6","7","8","9","10","11","12"],"dateFormatItem-hm":"h:mm a","dateTimeFormats-appendItem-Year":"{0} {1}","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","dayPeriods-format-abbr-pm":"PM","days-format-abbr":["1","2","3","4","5","6","7"],"eraNames":["BCE","CE"],"days-format-narrow":["1","2","3","4","5","6","7"],"days-standAlone-narrow":["1","2","3","4","5","6","7"],"dateFormatItem-MMM":"LLL","field-month":"Month","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dayPeriods-format-wide-am":"AM","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateFormat-short":"yyyy-MM-dd","field-second":"Second","dateFormatItem-yMMMEd":"EEE, y MMM d","dateTimeFormats-appendItem-Timezone":"{0} {1}","field-week":"Week","dateFormat-medium":"y MMM d","dayPeriods-format-narrow-pm":"PM","dateTimeFormat-short":"{1} {0}","dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-hms":"h:mm:ss a"},"ar":true,"ca":true,"cs":true,"da":true,"de":true,"el":true,"en":true,"en-au":true,"en-ca":true,"en-gb":true,"es":true,"fi":true,"fr":true,"fr-ch":true,"he":true,"hu":true,"it":true,"ja":true,"ko":true,"nb":true,"nl":true,"pl":true,"pt":true,"pt-pt":true,"ro":true,"ru":true,"sk":true,"sl":true,"sv":true,"th":true,"tr":true,"zh":true,"zh-hant":true,"zh-hk":true,"zh-tw":true});},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./ready","./_base/sniff","./_base/window"],function(_3bc,lang,_3bd,has,_3be){var html=_3be.doc.documentElement,ie=has("ie"),_3bf=has("opera"),maj=Math.floor,ff=has("ff"),_3c0=_3bc.boxModel.replace(/-/,""),_3c1={"dj_ie":ie,"dj_ie6":maj(ie)==6,"dj_ie7":maj(ie)==7,"dj_ie8":maj(ie)==8,"dj_ie9":maj(ie)==9,"dj_quirks":has("quirks"),"dj_iequirks":ie&&has("quirks"),"dj_opera":_3bf,"dj_khtml":has("khtml"),"dj_webkit":has("webkit"),"dj_safari":has("safari"),"dj_chrome":has("chrome"),"dj_gecko":has("mozilla"),"dj_ff3":maj(ff)==3};_3c1["dj_"+_3c0]=true;var _3c2="";for(var clz in _3c1){if(_3c1[clz]){_3c2+=clz+" ";}}html.className=lang.trim(html.className+" "+_3c2);_3bd(90,function(){if(!_3bc.isBodyLtr()){var _3c3="dj_rtl dijitRtl "+_3c2.replace(/ /g,"-rtl ");html.className=lang.trim(html.className+" "+_3c3+"dj_rtl dijitRtl "+_3c2.replace(/ /g,"-rtl "));}});return has;});},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(dojo,lang){lang.getObject("string",true,dojo);dojo.string.rep=function(str,num){if(num<=0||!str){return "";}var buf=[];for(;;){if(num&1){buf.push(str);}if(!(num>>=1)){break;}str+=str;}return buf.join("");};dojo.string.pad=function(text,size,ch,end){if(!ch){ch="0";}var out=String(text),pad=dojo.string.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out;};dojo.string.substitute=function(_3c4,map,_3c5,_3c6){_3c6=_3c6||dojo.global;_3c5=_3c5?lang.hitch(_3c6,_3c5):function(v){return v;};return _3c4.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(_3c7,key,_3c8){var _3c9=lang.getObject(key,false,map);if(_3c8){_3c9=lang.getObject(_3c8,false,_3c6).call(_3c6,_3c9,key);}return _3c5(_3c9,key).toString();});};dojo.string.trim=String.prototype.trim?lang.trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}return str;};return dojo.string;});},"dijit/Tooltip":function(){require({cache:{"url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\r\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\r\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\r\n></div>\r\n"}});define("dijit/Tooltip",["dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","./_base/manager","./place","./_Widget","./_TemplatedMixin","./BackgroundIframe","dojo/text!./templates/Tooltip.html","."],function(_3ca,_3cb,fx,dom,_3cc,_3cd,_3ce,lang,has,win,_3cf,_3d0,_3d1,_3d2,_3d3,_3d4,_3d5){var _3d6=_3cb("dijit._MasterTooltip",[_3d1,_3d2],{duration:_3cf.defaultDuration,templateString:_3d4,postCreate:function(){win.body().appendChild(this.domNode);this.bgIframe=new _3d3(this.domNode);this.fadeIn=fx.fadeIn({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onShow")});this.fadeOut=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onHide")});},show:function(_3d7,_3d8,_3d9,rtl,_3da){if(this.aroundNode&&this.aroundNode===_3d8&&this.containerNode.innerHTML==_3d7){return;}this.domNode.width="auto";if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_3d7;this.set("textDir",_3da);this.containerNode.align=rtl?"right":"left";var pos=_3d0.around(this.domNode,_3d8,_3d9&&_3d9.length?_3d9:_3db.defaultPosition,!rtl,lang.hitch(this,"orient"));var _3dc=pos.aroundNodePos;if(pos.corner.charAt(0)=="M"&&pos.aroundCorner.charAt(0)=="M"){this.connectorNode.style.top=_3dc.y+((_3dc.h-this.connectorNode.offsetHeight)>>1)-pos.y+"px";this.connectorNode.style.left="";}else{if(pos.corner.charAt(1)=="M"&&pos.aroundCorner.charAt(1)=="M"){this.connectorNode.style.left=_3dc.x+((_3dc.w-this.connectorNode.offsetWidth)>>1)-pos.x+"px";}}_3ce.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_3d8;},orient:function(node,_3dd,_3de,_3df,_3e0){this.connectorNode.style.top="";var _3e1=_3df.w-this.connectorNode.offsetWidth;node.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_3dd+"-"+_3de];this.domNode.style.width="auto";var size=_3cd.getContentBox(this.domNode);var _3e2=Math.min((Math.max(_3e1,1)),size.w);var _3e3=_3e2<size.w;this.domNode.style.width=_3e2+"px";if(_3e3){this.containerNode.style.overflow="auto";var _3e4=this.containerNode.scrollWidth;this.containerNode.style.overflow="visible";if(_3e4>_3e2){_3e4=_3e4+_3ce.get(this.domNode,"paddingLeft")+_3ce.get(this.domNode,"paddingRight");this.domNode.style.width=_3e4+"px";}}if(_3de.charAt(0)=="B"&&_3dd.charAt(0)=="B"){var mb=_3cd.getMarginBox(node);var _3e5=this.connectorNode.offsetHeight;if(mb.h>_3df.h){var _3e6=_3df.h-((_3e0.h+_3e5)>>1);this.connectorNode.style.top=_3e6+"px";this.connectorNode.style.bottom="";}else{this.connectorNode.style.bottom=Math.min(Math.max(_3e0.h/2-_3e5/2,0),mb.h-_3e5)+"px";this.connectorNode.style.top="";}}else{this.connectorNode.style.top="";this.connectorNode.style.bottom="";}return Math.max(0,size.w-_3e1);},_onShow:function(){if(has("ie")){this.domNode.style.filter="";}},hide:function(_3e7){if(this._onDeck&&this._onDeck[1]==_3e7){this._onDeck=null;}else{if(this.aroundNode===_3e7){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play();}else{}}},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null;}},_setAutoTextDir:function(node){this.applyTextDir(node,has("ie")?node.outerText:node.textContent);_3ca.forEach(node.children,function(_3e8){this._setAutoTextDir(_3e8);},this);},_setTextDirAttr:function(_3e9){this._set("textDir",typeof _3e9!="undefined"?_3e9:"");if(_3e9=="auto"){this._setAutoTextDir(this.containerNode);}else{this.containerNode.dir=this.textDir;}}});_3d5.showTooltip=function(_3ea,_3eb,_3ec,rtl,_3ed){if(_3ec){_3ec=_3ca.map(_3ec,function(val){return {after:"after-centered",before:"before-centered"}[val]||val;});}if(!_3db._masterTT){_3d5._masterTT=_3db._masterTT=new _3d6();}return _3db._masterTT.show(_3ea,_3eb,_3ec,rtl,_3ed);};_3d5.hideTooltip=function(_3ee){return _3db._masterTT&&_3db._masterTT.hide(_3ee);};var _3db=_3cb("dijit.Tooltip",_3d1,{label:"",showDelay:400,connectId:[],position:[],_setConnectIdAttr:function(_3ef){_3ca.forEach(this._connections||[],function(_3f0){_3ca.forEach(_3f0,lang.hitch(this,"disconnect"));},this);this._connectIds=_3ca.filter(lang.isArrayLike(_3ef)?_3ef:(_3ef?[_3ef]:[]),function(id){return dom.byId(id);});this._connections=_3ca.map(this._connectIds,function(id){var node=dom.byId(id);return [this.connect(node,"onmouseenter","_onHover"),this.connect(node,"onmouseleave","_onUnHover"),this.connect(node,"onfocus","_onHover"),this.connect(node,"onblur","_onUnHover")];},this);this._set("connectId",_3ef);},addTarget:function(node){var id=node.id||node;if(_3ca.indexOf(this._connectIds,id)==-1){this.set("connectId",this._connectIds.concat(id));}},removeTarget:function(node){var id=node.id||node,idx=_3ca.indexOf(this._connectIds,id);if(idx>=0){this._connectIds.splice(idx,1);this.set("connectId",this._connectIds);}},buildRendering:function(){this.inherited(arguments);_3cc.add(this.domNode,"dijitTooltipData");},startup:function(){this.inherited(arguments);var ids=this.connectId;_3ca.forEach(lang.isArrayLike(ids)?ids:[ids],this.addTarget,this);},_onHover:function(e){if(!this._showTimer){var _3f1=e.target;this._showTimer=setTimeout(lang.hitch(this,function(){this.open(_3f1);}),this.showDelay);}},_onUnHover:function(){if(this._focus){return;}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}this.close();},open:function(_3f2){if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}_3db.show(this.label||this.domNode.innerHTML,_3f2,this.position,!this.isLeftToRight(),this.textDir);this._connectNode=_3f2;this.onShow(_3f2,this.position);},close:function(){if(this._connectNode){_3db.hide(this._connectNode);delete this._connectNode;this.onHide();}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}},onShow:function(){},onHide:function(){},uninitialize:function(){this.close();this.inherited(arguments);}});_3db._MasterTooltip=_3d6;_3db.show=_3d5.showTooltip;_3db.hide=_3d5.hideTooltip;_3db.defaultPosition=["after-centered","before-centered"];return _3db;});},"dojox/charting/action2d/Base":function(){define("dojox/charting/action2d/Base",["dojo/_base/lang","dojo/_base/declare"],function(lang,_3f3){return _3f3("dojox.charting.action2d.Base",null,{constructor:function(_3f4,plot){this.chart=_3f4;this.plot=plot?(lang.isString(plot)?this.chart.getPlot(plot):plot):this.chart.getPlot("default");},connect:function(){},disconnect:function(){},destroy:function(){this.disconnect();}});});},"dojox/charting/plot2d/Stacked":function(){define("dojox/charting/plot2d/Stacked",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","./Default","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/functional/sequence"],function(lang,_3f5,arr,_3f6,dc,df,dfr,dfs){var _3f7=dfr.lambda("item.purgeGroup()");return _3f5("dojox.charting.plot2d.Stacked",_3f6,{getSeriesStats:function(){var _3f8=dc.collectStackedStats(this.series);this._maxRunLength=_3f8.hmax;return _3f8;},render:function(dim,_3f9){if(this._maxRunLength<=0){return this;}var acc=df.repeat(this._maxRunLength,"-> 0",0);for(var i=0;i<this.series.length;++i){var run=this.series[i];for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){if(isNaN(v)){v=0;}acc[j]+=v;}}}if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_3f9);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_3f7);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_3fa=this.events(),ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler);for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _3fb=t.next(this.opt.areas?"area":"line",[this.opt,run],true),s=run.group,_3fc,_3fd=arr.map(acc,function(v,i){return {x:ht(i+1)+_3f9.l,y:dim.height-_3f9.b-vt(v)};},this);var _3fe=this.opt.tension?dc.curve(_3fd,this.opt.tension):"";if(this.opt.areas){var _3ff=lang.clone(_3fd);if(this.opt.tension){var p=dc.curve(_3ff,this.opt.tension);p+=" L"+_3fd[_3fd.length-1].x+","+(dim.height-_3f9.b)+" L"+_3fd[0].x+","+(dim.height-_3f9.b)+" L"+_3fd[0].x+","+_3fd[0].y;run.dyn.fill=s.createPath(p).setFill(_3fb.series.fill).getFill();}else{_3ff.push({x:_3fd[_3fd.length-1].x,y:dim.height-_3f9.b});_3ff.push({x:_3fd[0].x,y:dim.height-_3f9.b});_3ff.push(_3fd[0]);run.dyn.fill=s.createPolyline(_3ff).setFill(_3fb.series.fill).getFill();}}if(this.opt.lines||this.opt.markers){if(_3fb.series.outline){_3fc=dc.makeStroke(_3fb.series.outline);_3fc.width=2*_3fc.width+_3fb.series.stroke.width;}}if(this.opt.markers){run.dyn.marker=_3fb.symbol;}var _400,_401,_402;if(_3fb.series.shadow&&_3fb.series.stroke){var _403=_3fb.series.shadow,_404=arr.map(_3fd,function(c){return {x:c.x+_403.dx,y:c.y+_403.dy};});if(this.opt.lines){if(this.opt.tension){run.dyn.shadow=s.createPath(dc.curve(_404,this.opt.tension)).setStroke(_403).getStroke();}else{run.dyn.shadow=s.createPolyline(_404).setStroke(_403).getStroke();}}if(this.opt.markers){_403=_3fb.marker.shadow;_402=arr.map(_404,function(c){return s.createPath("M"+c.x+" "+c.y+" "+_3fb.symbol).setStroke(_403).setFill(_403.color);},this);}}if(this.opt.lines){if(_3fc){if(this.opt.tension){run.dyn.outline=s.createPath(_3fe).setStroke(_3fc).getStroke();}else{run.dyn.outline=s.createPolyline(_3fd).setStroke(_3fc).getStroke();}}if(this.opt.tension){run.dyn.stroke=s.createPath(_3fe).setStroke(_3fb.series.stroke).getStroke();}else{run.dyn.stroke=s.createPolyline(_3fd).setStroke(_3fb.series.stroke).getStroke();}}if(this.opt.markers){_400=new Array(_3fd.length);_401=new Array(_3fd.length);_3fc=null;if(_3fb.marker.outline){_3fc=dc.makeStroke(_3fb.marker.outline);_3fc.width=2*_3fc.width+(_3fb.marker.stroke?_3fb.marker.stroke.width:0);}arr.forEach(_3fd,function(c,i){var path="M"+c.x+" "+c.y+" "+_3fb.symbol;if(_3fc){_401[i]=s.createPath(path).setStroke(_3fc);}_400[i]=s.createPath(path).setStroke(_3fb.marker.stroke).setFill(_3fb.marker.fill);},this);if(_3fa){var _405=new Array(_400.length);arr.forEach(_400,function(s,i){var o={element:"marker",index:i,run:run,shape:s,outline:_401[i]||null,shadow:_402&&_402[i]||null,cx:_3fd[i].x,cy:_3fd[i].y,x:i+1,y:run.data[i]};this._connectEvents(o);_405[i]=o;},this);this._eventSeries[run.name]=_405;}else{delete this._eventSeries[run.name];}}run.dirty=false;for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){if(isNaN(v)){v=0;}acc[j]-=v;}}}this.dirty=false;return this;}});});},"dojo/cldr/nls/number":function(){define({root:{"scientificFormat":"#E0","currencySpacing-afterCurrency-currencyMatch":"[:letter:]","infinity":"∞","list":";","percentSign":"%","minusSign":"-","currencySpacing-beforeCurrency-surroundingMatch":"[:digit:]","decimalFormat-short":"000T","currencySpacing-afterCurrency-insertBetween":" ","nan":"NaN","nativeZeroDigit":"0","plusSign":"+","currencySpacing-afterCurrency-surroundingMatch":"[:digit:]","currencySpacing-beforeCurrency-currencyMatch":"[:letter:]","currencyFormat":"¤ #,##0.00","perMille":"‰","group":",","percentFormat":"#,##0%","decimalFormat":"#,##0.###","decimal":".","patternDigit":"#","currencySpacing-beforeCurrency-insertBetween":" ","exponential":"E"},"ar":true,"ca":true,"cs":true,"da":true,"de":true,"el":true,"en":true,"en-au":true,"en-gb":true,"es":true,"fi":true,"fr":true,"fr-ch":true,"he":true,"hu":true,"it":true,"ja":true,"ko":true,"nb":true,"nl":true,"pl":true,"pt":true,"pt-pt":true,"ro":true,"ru":true,"sk":true,"sl":true,"sv":true,"th":true,"tr":true,"zh":true,"zh-hant":true,"zh-hk":true});},"dojox/charting/plot2d/Pie":function(){define("dojox/charting/plot2d/Pie",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","../Element","./_PlotEvents","./common","../axis2d/common","dojox/gfx","dojox/gfx/matrix","dojox/lang/functional","dojox/lang/utils"],function(lang,arr,_406,_407,_408,dc,da,g,m,df,du){var _409=0.2;return _406("dojox.charting.plot2d.Pie",[_407,_408],{defaultParams:{labels:true,ticks:false,fixed:true,precision:1,labelOffset:20,labelStyle:"default",htmlLabels:true,radGrad:"native",fanSize:5,startAngle:0},optionalParams:{radius:0,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:"",labelWiring:{}},constructor:function(_40a,_40b){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_40b);du.updateWithPattern(this.opt,_40b,this.optionalParams);this.run=null;this.dyn=[];},clear:function(){this.dirty=true;this.dyn=[];this.run=null;return this;},setAxis:function(axis){return this;},addSeries:function(run){this.run=run;return this;},getSeriesStats:function(){return lang.delegate(dc.defaultStats);},initializeScalers:function(){return this;},getRequiredColors:function(){return this.run?this.run.data.length:0;},render:function(dim,_40c){if(!this.dirty){return this;}this.resetEvents();this.dirty=false;this._eventSeries={};this.cleanGroup();var s=this.group,t=this.chart.theme;if(!this.run||!this.run.data.length){return this;}var rx=(dim.width-_40c.l-_40c.r)/2,ry=(dim.height-_40c.t-_40c.b)/2,r=Math.min(rx,ry),_40d="font" in this.opt?this.opt.font:t.axis.font,size=_40d?g.normalizedLength(g.splitFontString(_40d).size):0,_40e="fontColor" in this.opt?this.opt.fontColor:t.axis.fontColor,_40f=m._degToRad(this.opt.startAngle),_410=_40f,step,_411,_412,_413,_414,_415,run=this.run.data,_416=this.events();if(typeof run[0]=="number"){_411=df.map(run,"x ? Math.max(x, 0) : 0");if(df.every(_411,"<= 0")){return this;}_412=df.map(_411,"/this",df.foldl(_411,"+",0));if(this.opt.labels){_413=arr.map(_412,function(x){return x>0?this._getLabel(x*100)+"%":"";},this);}}else{_411=df.map(run,"x ? Math.max(x.y, 0) : 0");if(df.every(_411,"<= 0")){return this;}_412=df.map(_411,"/this",df.foldl(_411,"+",0));if(this.opt.labels){_413=arr.map(_412,function(x,i){if(x<=0){return "";}var v=run[i];return "text" in v?v.text:this._getLabel(x*100)+"%";},this);}}var _417=df.map(run,function(v,i){if(v===null||typeof v=="number"){return t.next("slice",[this.opt,this.run],true);}return t.next("slice",[this.opt,this.run,v],true);},this);if(this.opt.labels){_414=df.foldl1(df.map(_413,function(_418,i){var font=_417[i].series.font;return g._base._getTextBox(_418,{font:font}).w;},this),"Math.max(a, b)")/2;if(this.opt.labelOffset<0){r=Math.min(rx-2*_414,ry-size)+this.opt.labelOffset;}_415=r-this.opt.labelOffset;}if("radius" in this.opt){r=this.opt.radius;_415=r-this.opt.labelOffset;}var _419={cx:_40c.l+rx,cy:_40c.t+ry,r:r};this.dyn=[];var _41a=new Array(_412.length);arr.some(_412,function(_41b,i){if(_41b<0){return false;}if(_41b==0){this.dyn.push({fill:null,stroke:null});return false;}var v=run[i],_41c=_417[i],_41d;if(_41b>=1){_41d=this._plotFill(_41c.series.fill,dim,_40c);_41d=this._shapeFill(_41d,{x:_419.cx-_419.r,y:_419.cy-_419.r,width:2*_419.r,height:2*_419.r});_41d=this._pseudoRadialFill(_41d,{x:_419.cx,y:_419.cy},_419.r);var _41e=s.createCircle(_419).setFill(_41d).setStroke(_41c.series.stroke);this.dyn.push({fill:_41d,stroke:_41c.series.stroke});if(_416){var o={element:"slice",index:i,run:this.run,shape:_41e,x:i,y:typeof v=="number"?v:v.y,cx:_419.cx,cy:_419.cy,cr:r};this._connectEvents(o);_41a[i]=o;}return true;}var end=_410+_41b*2*Math.PI;if(i+1==_412.length){end=_40f+2*Math.PI;}var step=end-_410,x1=_419.cx+r*Math.cos(_410),y1=_419.cy+r*Math.sin(_410),x2=_419.cx+r*Math.cos(end),y2=_419.cy+r*Math.sin(end);var _41f=m._degToRad(this.opt.fanSize);if(_41c.series.fill&&_41c.series.fill.type==="radial"&&this.opt.radGrad==="fan"&&step>_41f){var _420=s.createGroup(),_421=Math.ceil(step/_41f),_422=step/_421;_41d=this._shapeFill(_41c.series.fill,{x:_419.cx-_419.r,y:_419.cy-_419.r,width:2*_419.r,height:2*_419.r});for(var j=0;j<_421;++j){var _423=j==0?x1:_419.cx+r*Math.cos(_410+(j-_409)*_422),_424=j==0?y1:_419.cy+r*Math.sin(_410+(j-_409)*_422),_425=j==_421-1?x2:_419.cx+r*Math.cos(_410+(j+1+_409)*_422),_426=j==_421-1?y2:_419.cy+r*Math.sin(_410+(j+1+_409)*_422),fan=_420.createPath().moveTo(_419.cx,_419.cy).lineTo(_423,_424).arcTo(r,r,0,_422>Math.PI,true,_425,_426).lineTo(_419.cx,_419.cy).closePath().setFill(this._pseudoRadialFill(_41d,{x:_419.cx,y:_419.cy},r,_410+(j+0.5)*_422,_410+(j+0.5)*_422));}_420.createPath().moveTo(_419.cx,_419.cy).lineTo(x1,y1).arcTo(r,r,0,step>Math.PI,true,x2,y2).lineTo(_419.cx,_419.cy).closePath().setStroke(_41c.series.stroke);_41e=_420;}else{_41e=s.createPath().moveTo(_419.cx,_419.cy).lineTo(x1,y1).arcTo(r,r,0,step>Math.PI,true,x2,y2).lineTo(_419.cx,_419.cy).closePath().setStroke(_41c.series.stroke);var _41d=_41c.series.fill;if(_41d&&_41d.type==="radial"){_41d=this._shapeFill(_41d,{x:_419.cx-_419.r,y:_419.cy-_419.r,width:2*_419.r,height:2*_419.r});if(this.opt.radGrad==="linear"){_41d=this._pseudoRadialFill(_41d,{x:_419.cx,y:_419.cy},r,_410,end);}}else{if(_41d&&_41d.type==="linear"){_41d=this._plotFill(_41d,dim,_40c);_41d=this._shapeFill(_41d,_41e.getBoundingBox());}}_41e.setFill(_41d);}this.dyn.push({fill:_41d,stroke:_41c.series.stroke});if(_416){var o={element:"slice",index:i,run:this.run,shape:_41e,x:i,y:typeof v=="number"?v:v.y,cx:_419.cx,cy:_419.cy,cr:r};this._connectEvents(o);_41a[i]=o;}_410=end;return false;},this);if(this.opt.labels){if(this.opt.labelStyle=="default"){_410=_40f;arr.some(_412,function(_427,i){if(_427<=0){return false;}var _428=_417[i];if(_427>=1){var v=run[i],elem=da.createText[this.opt.htmlLabels&&g.renderer!="vml"?"html":"gfx"](this.chart,s,_419.cx,_419.cy+size/2,"middle",_413[i],_428.series.font,_428.series.fontColor);if(this.opt.htmlLabels){this.htmlElements.push(elem);}return true;}var end=_410+_427*2*Math.PI,v=run[i];if(i+1==_412.length){end=_40f+2*Math.PI;}var _429=(_410+end)/2,x=_419.cx+_415*Math.cos(_429),y=_419.cy+_415*Math.sin(_429)+size/2;var elem=da.createText[this.opt.htmlLabels&&g.renderer!="vml"?"html":"gfx"](this.chart,s,x,y,"middle",_413[i],_428.series.font,_428.series.fontColor);if(this.opt.htmlLabels){this.htmlElements.push(elem);}_410=end;return false;},this);}else{if(this.opt.labelStyle=="columns"){_410=_40f;var _42a=[];arr.forEach(_412,function(_42b,i){var end=_410+_42b*2*Math.PI;if(i+1==_412.length){end=_40f+2*Math.PI;}var _42c=(_410+end)/2;_42a.push({angle:_42c,left:Math.cos(_42c)<0,theme:_417[i],index:i,omit:end-_410<0.001});_410=end;});var _42d=g._base._getTextBox("a",{font:_40d}).h;this._getProperLabelRadius(_42a,_42d,_419.r*1.1);arr.forEach(_42a,function(_42e,i){if(!_42e.omit){var _42f=_419.cx-_419.r*2,_430=_419.cx+_419.r*2,_431=g._base._getTextBox(_413[i],{font:_40d}).w,x=_419.cx+_42e.labelR*Math.cos(_42e.angle),y=_419.cy+_42e.labelR*Math.sin(_42e.angle),_432=(_42e.left)?(_42f+_431):(_430-_431),_433=(_42e.left)?_42f:_432;var _434=s.createPath().moveTo(_419.cx+_419.r*Math.cos(_42e.angle),_419.cy+_419.r*Math.sin(_42e.angle));if(Math.abs(_42e.labelR*Math.cos(_42e.angle))<_419.r*2-_431){_434.lineTo(x,y);}_434.lineTo(_432,y).setStroke(_42e.theme.series.labelWiring);var elem=da.createText[this.opt.htmlLabels&&g.renderer!="vml"?"html":"gfx"](this.chart,s,_433,y,"left",_413[i],_42e.theme.series.font,_42e.theme.series.fontColor);if(this.opt.htmlLabels){this.htmlElements.push(elem);}}},this);}}}var esi=0;this._eventSeries[this.run.name]=df.map(run,function(v){return v<=0?null:_41a[esi++];});return this;},_getProperLabelRadius:function(_435,_436,_437){var _438={},_439={},_43a=1,_43b=1;if(_435.length==1){_435[0].labelR=_437;return;}for(var i=0;i<_435.length;i++){var _43c=Math.abs(Math.sin(_435[i].angle));if(_435[i].left){if(_43a>=_43c){_43a=_43c;_438=_435[i];}}else{if(_43b>=_43c){_43b=_43c;_439=_435[i];}}}_438.labelR=_439.labelR=_437;this._calculateLabelR(_438,_435,_436);this._calculateLabelR(_439,_435,_436);},_calculateLabelR:function(_43d,_43e,_43f){var i=_43d.index,_440=_43e.length,_441=_43d.labelR;while(!(_43e[i%_440].left^_43e[(i+1)%_440].left)){if(!_43e[(i+1)%_440].omit){var _442=(Math.sin(_43e[i%_440].angle)*_441+((_43e[i%_440].left)?(-_43f):_43f))/Math.sin(_43e[(i+1)%_440].angle);_441=(_442<_43d.labelR)?_43d.labelR:_442;_43e[(i+1)%_440].labelR=_441;}i++;}i=_43d.index;var j=(i==0)?_440-1:i-1;while(!(_43e[i].left^_43e[j].left)){if(!_43e[j].omit){var _442=(Math.sin(_43e[i].angle)*_441+((_43e[i].left)?_43f:(-_43f)))/Math.sin(_43e[j].angle);_441=(_442<_43d.labelR)?_43d.labelR:_442;_43e[j].labelR=_441;}i--;j--;i=(i<0)?i+_43e.length:i;j=(j<0)?j+_43e.length:j;}},_getLabel:function(_443){return dc.getLabel(_443,this.opt.fixed,this.opt.precision);}});});},"dojox/color/_base":function(){define("dojox/color/_base",["dojo/_base/kernel","../main","dojo/_base/lang","dojo/_base/Color","dojo/colors"],function(dojo,_444,lang,_445,_446){var cx=lang.getObject("dojox.color",true);cx.Color=_445;cx.blend=_445.blendColors;cx.fromRgb=_445.fromRgb;cx.fromHex=_445.fromHex;cx.fromArray=_445.fromArray;cx.fromString=_445.fromString;cx.greyscale=_446.makeGrey;lang.mixin(cx,{fromCmy:function(cyan,_447,_448){if(lang.isArray(cyan)){_447=cyan[1],_448=cyan[2],cyan=cyan[0];}else{if(lang.isObject(cyan)){_447=cyan.m,_448=cyan.y,cyan=cyan.c;}}cyan/=100,_447/=100,_448/=100;var r=1-cyan,g=1-_447,b=1-_448;return new _445({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});},fromCmyk:function(cyan,_449,_44a,_44b){if(lang.isArray(cyan)){_449=cyan[1],_44a=cyan[2],_44b=cyan[3],cyan=cyan[0];}else{if(lang.isObject(cyan)){_449=cyan.m,_44a=cyan.y,_44b=cyan.b,cyan=cyan.c;}}cyan/=100,_449/=100,_44a/=100,_44b/=100;var r,g,b;r=1-Math.min(1,cyan*(1-_44b)+_44b);g=1-Math.min(1,_449*(1-_44b)+_44b);b=1-Math.min(1,_44a*(1-_44b)+_44b);return new _445({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});},fromHsl:function(hue,_44c,_44d){if(lang.isArray(hue)){_44c=hue[1],_44d=hue[2],hue=hue[0];}else{if(lang.isObject(hue)){_44c=hue.s,_44d=hue.l,hue=hue.h;}}_44c/=100;_44d/=100;while(hue<0){hue+=360;}while(hue>=360){hue-=360;}var r,g,b;if(hue<120){r=(120-hue)/60,g=hue/60,b=0;}else{if(hue<240){r=0,g=(240-hue)/60,b=(hue-120)/60;}else{r=(hue-240)/60,g=0,b=(360-hue)/60;}}r=2*_44c*Math.min(r,1)+(1-_44c);g=2*_44c*Math.min(g,1)+(1-_44c);b=2*_44c*Math.min(b,1)+(1-_44c);if(_44d<0.5){r*=_44d,g*=_44d,b*=_44d;}else{r=(1-_44d)*r+2*_44d-1;g=(1-_44d)*g+2*_44d-1;b=(1-_44d)*b+2*_44d-1;}return new _445({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});}});cx.fromHsv=function(hue,_44e,_44f){if(lang.isArray(hue)){_44e=hue[1],_44f=hue[2],hue=hue[0];}else{if(lang.isObject(hue)){_44e=hue.s,_44f=hue.v,hue=hue.h;}}if(hue==360){hue=0;}_44e/=100;_44f/=100;var r,g,b;if(_44e==0){r=_44f,b=_44f,g=_44f;}else{var _450=hue/60,i=Math.floor(_450),f=_450-i;var p=_44f*(1-_44e);var q=_44f*(1-(_44e*f));var t=_44f*(1-(_44e*(1-f)));switch(i){case 0:r=_44f,g=t,b=p;break;case 1:r=q,g=_44f,b=p;break;case 2:r=p,g=_44f,b=t;break;case 3:r=p,g=q,b=_44f;break;case 4:r=t,g=p,b=_44f;break;case 5:r=_44f,g=p,b=q;break;}}return new _445({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});};lang.extend(_445,{toCmy:function(){var cyan=1-(this.r/255),_451=1-(this.g/255),_452=1-(this.b/255);return {c:Math.round(cyan*100),m:Math.round(_451*100),y:Math.round(_452*100)};},toCmyk:function(){var cyan,_453,_454,_455;var r=this.r/255,g=this.g/255,b=this.b/255;_455=Math.min(1-r,1-g,1-b);cyan=(1-r-_455)/(1-_455);_453=(1-g-_455)/(1-_455);_454=(1-b-_455)/(1-_455);return {c:Math.round(cyan*100),m:Math.round(_453*100),y:Math.round(_454*100),b:Math.round(_455*100)};},toHsl:function(){var r=this.r/255,g=this.g/255,b=this.b/255;var min=Math.min(r,b,g),max=Math.max(r,g,b);var _456=max-min;var h=0,s=0,l=(min+max)/2;if(l>0&&l<1){s=_456/((l<0.5)?(2*l):(2-2*l));}if(_456>0){if(max==r&&max!=g){h+=(g-b)/_456;}if(max==g&&max!=b){h+=(2+(b-r)/_456);}if(max==b&&max!=r){h+=(4+(r-g)/_456);}h*=60;}return {h:h,s:Math.round(s*100),l:Math.round(l*100)};},toHsv:function(){var r=this.r/255,g=this.g/255,b=this.b/255;var min=Math.min(r,b,g),max=Math.max(r,g,b);var _457=max-min;var h=null,s=(max==0)?0:(_457/max);if(s==0){h=0;}else{if(r==max){h=60*(g-b)/_457;}else{if(g==max){h=120+60*(b-r)/_457;}else{h=240+60*(r-g)/_457;}}if(h<0){h+=360;}}return {h:h,s:Math.round(s*100),v:Math.round(max*100)};}});return cx;});},"dojox/charting/action2d/PlotAction":function(){define("dojox/charting/action2d/PlotAction",["dojo/_base/connect","dojo/_base/declare","./Base","dojo/fx/easing","dojox/lang/functional","dojox/lang/functional/object"],function(hub,_458,Base,dfe,df,dlfo){var _459=400,_45a=dfe.backOut;return _458("dojox.charting.action2d.PlotAction",Base,{overOutEvents:{onmouseover:1,onmouseout:1},constructor:function(_45b,plot,_45c){this.anim={};if(!_45c){_45c={};}this.duration=_45c.duration?_45c.duration:_459;this.easing=_45c.easing?_45c.easing:_45a;},connect:function(){this.handle=this.chart.connectToPlot(this.plot.name,this,"process");},disconnect:function(){if(this.handle){hub.disconnect(this.handle);this.handle=null;}},reset:function(){},destroy:function(){this.inherited(arguments);df.forIn(this.anim,function(o){df.forIn(o,function(anim){anim.action.stop(true);});});this.anim={};}});});},"dojox/lang/functional/fold":function(){define("dojox/lang/functional/fold",["dojo/_base/lang","dojo/_base/array","dojo/_base/window","./lambda"],function(lang,arr,win,df){var _45d={};lang.mixin(df,{foldl:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var i,n;if(lang.isArray(a)){for(i=0,n=a.length;i<n;z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){for(i=0;a.hasNext();z=f.call(o,z,a.next(),i++,a)){}}else{for(i in a){if(!(i in _45d)){z=f.call(o,z,a[i],i,a);}}}}return z;},foldl1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var z,i,n;if(lang.isArray(a)){z=a[0];for(i=1,n=a.length;i<n;z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){if(a.hasNext()){z=a.next();for(i=1;a.hasNext();z=f.call(o,z,a.next(),i++,a)){}}}else{var _45e=true;for(i in a){if(!(i in _45d)){if(_45e){z=a[i];_45e=false;}else{z=f.call(o,z,a[i],i,a);}}}}}return z;},foldr:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);for(var i=a.length;i>0;--i,z=f.call(o,z,a[i],i,a)){}return z;},foldr1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var n=a.length,z=a[n-1],i=n-1;for(;i>0;--i,z=f.call(o,z,a[i],i,a)){}return z;},reduce:function(a,f,z){return arguments.length<3?df.foldl1(a,f):df.foldl(a,f,z);},reduceRight:function(a,f,z){return arguments.length<3?df.foldr1(a,f):df.foldr(a,f,z);},unfold:function(pr,f,g,z,o){o=o||win.global;f=df.lambda(f);g=df.lambda(g);pr=df.lambda(pr);var t=[];for(;!pr.call(o,z);t.push(f.call(o,z)),z=g.call(o,z)){}return t;}});});},"dojox/charting/plot2d/Bars":function(){define("dojox/charting/plot2d/Bars",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Base","./common","dojox/gfx/fx","dojox/lang/utils","dojox/lang/functional","dojox/lang/functional/reversed"],function(dojo,lang,arr,_45f,Base,dc,fx,du,df,dfr){var _460=dfr.lambda("item.purgeGroup()");return _45f("dojox.charting.plot2d.Bars",Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:0,animate:null,enableCache:false},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_461,_462){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_462);du.updateWithPattern(this.opt,_462,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},getSeriesStats:function(){var _463=dc.collectSimpleStats(this.series),t;_463.hmin-=0.5;_463.hmax+=0.5;t=_463.hmin,_463.hmin=_463.vmin,_463.vmin=t;t=_463.hmax,_463.hmax=_463.vmax,_463.vmax=t;return _463;},createRect:function(run,_464,_465){var rect;if(this.opt.enableCache&&run._rectFreePool.length>0){rect=run._rectFreePool.pop();rect.setShape(_465);_464.add(rect);}else{rect=_464.createRect(_465);}if(this.opt.enableCache){run._rectUsePool.push(rect);}return rect;},render:function(dim,_466){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_466);}this.dirty=this.isDirty();this.resetEvents();if(this.dirty){arr.forEach(this.series,_460);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_467,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_468=Math.max(0,this._hScaler.bounds.lower),_469=ht(_468),_46a=this.events();f=dc.calculateBarSize(this._vScaler.bounds.scale,this.opt);gap=f.gap;_467=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(this.opt.enableCache){run._rectFreePool=(run._rectFreePool?run._rectFreePool:[]).concat(run._rectUsePool?run._rectUsePool:[]);run._rectUsePool=[];}var _46b=t.next("bar",[this.opt,run]),s=run.group,_46c=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var _46d=run.data[j];if(_46d!==null){var v=typeof _46d=="number"?_46d:_46d.y,hv=ht(v),_46e=hv-_469,w=Math.abs(_46e),_46f=typeof _46d!="number"?t.addMixin(_46b,"bar",_46d,true):t.post(_46b,"bar");if(w>=0&&_467>=1){var rect={x:_466.l+(v<_468?hv:_469),y:dim.height-_466.b-vt(j+1.5)+gap,width:w,height:_467};var _470=this._plotFill(_46f.series.fill,dim,_466);_470=this._shapeFill(_470,rect);var _471=this.createRect(run,s,rect).setFill(_470).setStroke(_46f.series.stroke);run.dyn.fill=_471.getFill();run.dyn.stroke=_471.getStroke();if(_46a){var o={element:"bar",index:j,run:run,shape:_471,x:v,y:j+1.5};this._connectEvents(o);_46c[j]=o;}if(this.animate){this._animateBar(_471,_466.l+_469,-w);}}}}this._eventSeries[run.name]=_46c;run.dirty=false;}this.dirty=false;return this;},_animateBar:function(_472,_473,_474){fx.animateTransform(lang.delegate({shape:_472,duration:1200,transform:[{name:"translate",start:[_473-(_473/_474),0],end:[0,0]},{name:"scale",start:[1/_474,1],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojo/cldr/supplemental":function(){define(["../_base/kernel","../_base/lang","../i18n"],function(dojo,lang){lang.getObject("cldr.supplemental",true,dojo);dojo.cldr.supplemental.getFirstDayOfWeek=function(_475){var _476={mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,er:6,et:6,iq:6,ir:6,jo:6,ke:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,so:6,sy:6,tn:6,ye:6,ar:0,as:0,az:0,bw:0,ca:0,cn:0,fo:0,ge:0,gl:0,gu:0,hk:0,il:0,"in":0,jm:0,jp:0,kg:0,kr:0,la:0,mh:0,mn:0,mo:0,mp:0,mt:0,nz:0,ph:0,pk:0,sg:0,th:0,tt:0,tw:0,um:0,us:0,uz:0,vi:0,zw:0};var _477=dojo.cldr.supplemental._region(_475);var dow=_476[_477];return (dow===undefined)?1:dow;};dojo.cldr.supplemental._region=function(_478){_478=dojo.i18n.normalizeLocale(_478);var tags=_478.split("-");var _479=tags[1];if(!_479){_479={de:"de",en:"us",es:"es",fi:"fi",fr:"fr",he:"il",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[tags[0]];}else{if(_479.length==4){_479=tags[2];}}return _479;};dojo.cldr.supplemental.getWeekend=function(_47a){var _47b={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5};var _47c={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6};var _47d=dojo.cldr.supplemental._region(_47a);var _47e=_47b[_47d];var end=_47c[_47d];if(_47e===undefined){_47e=6;}if(end===undefined){end=0;}return {start:_47e,end:end};};return dojo.cldr.supplemental;});},"dojox/lang/functional/object":function(){define("dojox/lang/functional/object",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/window","./lambda"],function(dojo,lang,win,df){var _47f={};lang.mixin(df,{keys:function(obj){var t=[];for(var i in obj){if(!(i in _47f)){t.push(i);}}return t;},values:function(obj){var t=[];for(var i in obj){if(!(i in _47f)){t.push(obj[i]);}}return t;},filterIn:function(obj,f,o){o=o||win.global;f=df.lambda(f);var t={},v,i;for(i in obj){if(!(i in _47f)){v=obj[i];if(f.call(o,v,i,obj)){t[i]=v;}}}return t;},forIn:function(obj,f,o){o=o||win.global;f=df.lambda(f);for(var i in obj){if(!(i in _47f)){f.call(o,obj[i],i,obj);}}return o;},mapIn:function(obj,f,o){o=o||win.global;f=df.lambda(f);var t={},i;for(i in obj){if(!(i in _47f)){t[i]=f.call(o,obj[i],i,obj);}}return t;}});return df;});},"esri/arcgis/csv":function(){define(["dijit","dojo","dojox","dojo/require!dojox/data/CsvStore"],function(_480,dojo,_481){dojo.provide("esri.arcgis.csv");dojo.require("dojox.data.CsvStore");(function(){var EAC=esri.arcgis.csv;EAC.latFieldStrings=["lat","latitude","y","ycenter","latitude83","latdecdeg","POINT-Y"];EAC.longFieldStrings=["lon","lng","long","longitude","x","xcenter","longitude83","longdecdeg","POINT-X"];EAC.buildCSVFeatureCollection=function(_482){var _483=new dojo.Deferred();var _484=function(_485){_483.callback(_485);};var _486=esri.request({url:_482.url,handleAs:"text",load:function(_487){EAC._processCsvData(_487,_482,dojo.hitch(this,_484));},error:function(_488){console.error("error: "+_488);}},{usePost:false});return _483;};EAC.projectFeatureCollection=function(_489,_48a){var _48b=new dojo.Deferred();var _48c=function(_48d){_48b.callback(_48d);};EAC._projectFeatureSet(_489,new esri.SpatialReference({wkid:4326}),_48a,dojo.hitch(this,_48c));return _48b;};EAC.generateDefaultPopupInfo=function(_48e){var _48f=_48e.layerDefinition.fields;var _490={"esriFieldTypeDouble":1,"esriFieldTypeSingle":1};var _491={"esriFieldTypeInteger":1,"esriFieldTypeSmallInteger":1};var dt={"esriFieldTypeDate":1};var _492=null;var _493=dojo.map(_48f,dojo.hitch(this,function(item){if(item.name.toUpperCase()==="NAME"){_492=item.name;}var _494=(item.type!=="esriFieldTypeOID"&&item.type!=="esriFieldTypeGlobalID"&&item.type!=="esriFieldTypeGeometry");var _495=null;if(_494){var f=item.name.toLowerCase();var _496=",stretched value,fnode_,tnode_,lpoly_,rpoly_,poly_,subclass,subclass_,rings_ok,rings_nok,";if(_496.indexOf(","+f+",")>-1||f.indexOf("area")>-1||f.indexOf("length")>-1||f.indexOf("shape")>-1||f.indexOf("perimeter")>-1||f.indexOf("objectid")>-1||f.indexOf("_")===f.length-1||(f.indexOf("_i")===f.length-2&&f.length>1)){_494=false;}if(item.type in _491){_495={places:0,digitSeparator:true};}else{if(item.type in _490){_495={places:2,digitSeparator:true};}else{if(item.type in dt){_495={dateFormat:"shortDateShortTime"};}}}}return dojo.mixin({},{fieldName:item.name,label:item.alias,isEditable:true,tooltip:"",visible:_494,format:_495,stringFieldOption:"textbox"});}));var _497={title:_492?"{"+_492+"}":"",fieldInfos:_493,description:null,showAttachments:false,mediaInfos:[]};return _497;};EAC._processCsvData=function(data,_498,_499){var _49a=data.indexOf("\n");var _49b=dojo.trim(data.substr(0,_49a));var _49c=_498.columnDelimiter;if(!_49c){_49c=EAC._getSeparator(_49b);}var _49d=new _481.data.CsvStore({data:data,separator:_49c});var _49e=(dojo.isIE<9)?750:1001;_49d.fetch({start:0,count:_49e,onComplete:function(_49f,_4a0){var _4a1=0;var _4a2={"layerDefinition":_498.layerDefinition,"featureSet":{"features":[],"geometryType":"esriGeometryPoint"}};var _4a3=_4a2.layerDefinition.objectIdField;if(!_4a3){if(!dojo.some(_4a2.layerDefinition.fields,function(_4a4){if(_4a4.type=="esriFieldTypeOID"){_4a3=_4a4.name;return true;}return false;})){_4a2.layerDefinition.fields.push({"name":"__OBJECTID","alias":"__OBJECTID","type":"esriFieldTypeOID","editable":false,"domain":null});_4a3="__OBJECTID";}}var _4a5,_4a6;var _4a7=_49d._attributes;var _4a8=[];var _4a9=[];dojo.forEach(_4a2.layerDefinition.fields,function(_4aa,_4ab){if(_4aa.type==="esriFieldTypeDate"){_4a8.push(_4aa.name);}else{if(_4aa.type==="esriFieldTypeDouble"||_4aa.type==="esriFieldTypeInteger"){_4a9.push(_4aa.name);}}});if(_498.locationInfo&&_498.locationInfo.locationType==="coordinates"){_4a5=_498.locationInfo.latitudeFieldName;_4a6=_498.locationInfo.longitudeFieldName;}else{dojo.forEach(_4a7,function(_4ac){var _4ad;_4ad=dojo.indexOf(EAC.latFieldStrings,_4ac.toLowerCase());if(_4ad!==-1){_4a5=_4ac;}_4ad=dojo.indexOf(EAC.longFieldStrings,_4ac.toLowerCase());if(_4ad!==-1){_4a6=_4ac;}},this);}if(!_4a5||!_4a6){setTimeout(function(){console.error("File does not seem to contain fields with point coordinates.");},1);return;}var i=0,il=_49f.length;for(i;i<il;i++){if(_4a2.featureSet.features.length>=1000){setTimeout(function(){console.error("1000 feature limit reached. Unable to load any more data.");},1);break;}var item=_49f[i];var _4ae=_49d.getAttributes(item),_4af={};dojo.forEach(_4ae,function(attr,_4b0){if(attr){var _4b1=attr;if(attr.length===0){dojo.forEach(_4a2.layerDefinition.fields,function(_4b2,idx){if(_4b2.name==="attribute_"+(idx-1)){attr="attribute_"+(idx-1);}});}if(dojo.some(_4a8,function(a){return a===attr;})){var val=_49d.getValue(item,_4b1),date=new Date(val);_4af[attr]=EAC._isValidDate(date,val)?date.getTime():null;}else{if(dojo.some(_4a9,function(a){return a===attr;})){var _4b3=dojo.number.parse(_49d.getValue(item,_4b1));if((attr==_4a5||attr==_4a6)&&(isNaN(_4b3)||Math.abs(_4b3)>181)){_4b3=parseFloat(_49d.getValue(item,_4b1));if(isNaN(_4b3)){_4af[attr]=null;}else{_4af[attr]=_4b3;}}else{if(isNaN(_4b3)){_4af[attr]=null;}else{_4af[attr]=_4b3;}}}else{_4af[attr]=_49d.getValue(item,_4b1);}}}});_4af[_4a3]=_4a1;_4a1++;var _4b4=_4af[_4a5];var _4b5=_4af[_4a6];if(_4b5==null||_4b4==null||isNaN(_4b4)||isNaN(_4b5)){continue;}var _4b6=new esri.geometry.Point(_4b5,_4b4,new esri.SpatialReference({wkid:4326}));var _4b7={"geometry":_4b6.toJson(),"attributes":_4af};_4a2.featureSet.features.push(_4b7);}_4a2.layerDefinition.name="csv";if(_499){_499(_4a2);}},onError:function(_4b8){console.error("Error fetching items from CSV store: ",_4b8);}});return true;};EAC._getSeparator=function(_4b9){var _4ba=[","," ",";","|","\t"];var _4bb=0;var _4bc="";dojo.forEach(_4ba,function(_4bd){var _4be=_4b9.split(_4bd).length;if(_4be>_4bb){_4bb=_4be;_4bc=_4bd;}});return _4bc;};EAC._isValidDate=function(d,_4bf){if(!d||Object.prototype.toString.call(d)!=="[object Date]"||isNaN(d.getTime())){return false;}var _4c0=true;if(dojo.isChrome&&/\d+\W*$/.test(_4bf)){var _4c1=_4bf.match(/[a-zA-Z]{2,}/);if(_4c1){var _4c2=false,i=0,len=_4c1.length,_4c3=/^((jan(uary)?)|(feb(ruary)?)|(mar(ch)?)|(apr(il)?)|(may)|(jun(e)?)|(jul(y)?)|(aug(ust)?)|(sep(tember)?)|(oct(ober)?)|(nov(ember)?)|(dec(ember)?)|(am)|(pm)|(gmt)|(utc))$/i;while(!_4c2&&(i<=len)&&!(_4c2=!_4c3.test(_4c1[i]))){i++;}_4c0=!_4c2;}}return _4c0;};EAC._projectFeatureSet=function(_4c4,_4c5,_4c6,_4c7){if(!_4c4.featureSet||_4c4.featureSet.length===0){return;}if(EAC._sameSpatialReference(_4c6,_4c5)){_4c7(_4c4);return;}var _4c8=function(_4c9){var _4ca=[];dojo.forEach(_4c4.featureSet.features,function(_4cb,i){if(_4c9[i]){_4cb.geometry=_4c9[i];_4ca.push(_4cb);}},this);_4c7(_4c4);};var _4cc=function(_4cd,args){console.error("error projecting featureSet ("+_4c4.layerDefinition.name+"). Try one more time.");EAC._projectGeometries(_4ce,_4c4.featureSet.geometryType,_4c5,_4c6,dojo.hitch(this,_4c8),dojo.hitch(this,_4cf));};var _4cf=function(_4d0,args){console.error("error projecting featureSet ("+_4c4.layerDefinition.name+"). Final try.");_4c7(_4c4);};if(_4c4.featureSet.features&&_4c4.featureSet.features.length>0){var _4ce=[];dojo.forEach(_4c4.featureSet.features,function(_4d1){_4ce.push(_4d1.geometry);});EAC._projectGeometries(_4ce,_4c4.featureSet.geometryType,_4c5,_4c6,dojo.hitch(this,_4c8),dojo.hitch(this,_4cc));}else{_4c7(_4c4);}};EAC._projectGeometries=function(_4d2,_4d3,inSR,_4d4,_4d5,_4d6){if(_4d2.length===0){_4d5(null);}var _4d7=esri.geometry.getGeometryType(_4d3);var _4d8=[];dojo.forEach(_4d2,function(_4d9){var _4da=new _4d7(_4d9);_4da.spatialReference=inSR;_4d8.push(_4da);},this);var _4db=[102113,102100,3857];if(inSR.wkid&&inSR.wkid===4326&&_4d4.wkid&&dojo.indexOf(_4db,_4d4.wkid)>-1){dojo.forEach(_4d8,function(_4dc){if(_4dc.xmin){_4dc.xmin=Math.max(_4dc.xmin,-180);_4dc.xmax=Math.min(_4dc.xmax,180);_4dc.ymin=Math.max(_4dc.ymin,-89.99);_4dc.ymax=Math.min(_4dc.ymax,89.99);}else{if(_4dc.rings){dojo.forEach(_4dc.rings,function(ring){dojo.forEach(ring,function(_4dd){_4dd[0]=Math.min(Math.max(_4dd[0],-180),180);_4dd[1]=Math.min(Math.max(_4dd[1],-89.99),89.99);},this);},this);}else{if(_4dc.paths){dojo.forEach(_4dc.paths,function(path){dojo.forEach(path,function(_4de){_4de[0]=Math.min(Math.max(_4de[0],-180),180);_4de[1]=Math.min(Math.max(_4de[1],-89.99),89.99);},this);},this);}else{if(_4dc.x){_4dc.x=Math.min(Math.max(_4dc.x,-180),180);_4dc.y=Math.min(Math.max(_4dc.y,-89.99),89.99);}}}}},this);_4d2=[];dojo.forEach(_4d8,function(_4df){var _4e0=esri.geometry.geographicToWebMercator(_4df);if(_4d4.wkid!==102100){_4e0.spatialReference=_4d4;}_4d2.push(_4e0.toJson());},this);_4d5(_4d2);}else{if(inSR.wkid!==null&&dojo.indexOf(_4db,inSR.wkid)>-1&&_4d4.wkid!==null&&_4d4.wkid===4326){_4d2=[];dojo.forEach(_4d8,function(_4e1){_4d2.push(esri.geometry.webMercatorToGeographic(_4e1).toJson());},this);_4d5(_4d2);}else{var _4e2=function(_4e3,args){if(_4e3&&_4e3.length===_4d2.length){_4d2=[];dojo.forEach(_4e3,function(_4e4){if(_4e4&&((_4e4.rings&&_4e4.rings.length>0&&_4e4.rings[0].length>0&&_4e4.rings[0][0].length>0&&!isNaN(_4e4.rings[0][0][0])&&!isNaN(_4e4.rings[0][0][1]))||(_4e4.paths&&_4e4.paths.length>0&&_4e4.paths[0].length>0&&_4e4.paths[0][0].length>0&&!isNaN(_4e4.paths[0][0][0])&&!isNaN(_4e4.paths[0][0][1]))||(_4e4.xmin&&!isNaN(_4e4.xmin)&&_4e4.ymin&&!isNaN(_4e4.ymin))||(_4e4.x&&!isNaN(_4e4.x)&&_4e4.y&&!isNaN(_4e4.y)))){_4d2.push(_4e4.toJson());}else{_4d2.push(null);}},this);_4d5(_4d2);}else{_4d6(_4e3,args);}};if(esri.config.defaults.geometryService){esri.config.defaults.geometryService.project(_4d8,_4d4,dojo.hitch(this,_4e2),_4d6);}else{_4d5(null);}}}};EAC._sameSpatialReference=function(sp1,sp2){var _4e5=[102113,102100,3857];if(sp1&&sp2&&sp1.wkid===sp2.wkid&&sp1.wkt===sp2.wkt){return true;}else{if(sp1&&sp2&&sp1.wkid&&sp2.wkid&&dojo.indexOf(_4e5,sp1.wkid)>-1&&dojo.indexOf(_4e5,sp2.wkid)>-1){return true;}}return false;};}());});},"dojox/charting/scaler/linear":function(){define("dojox/charting/scaler/linear",["dojo/_base/lang","./common"],function(lang,_4e6){var _4e7=lang.getObject("dojox.charting.scaler.linear",true);var _4e8=3,_4e9=_4e6.findString,_4ea=_4e6.getNumericLabel;var _4eb=function(min,max,_4ec,_4ed,_4ee,_4ef,span){_4ec=lang.delegate(_4ec);if(!_4ed){if(_4ec.fixUpper=="major"){_4ec.fixUpper="minor";}if(_4ec.fixLower=="major"){_4ec.fixLower="minor";}}if(!_4ee){if(_4ec.fixUpper=="minor"){_4ec.fixUpper="micro";}if(_4ec.fixLower=="minor"){_4ec.fixLower="micro";}}if(!_4ef){if(_4ec.fixUpper=="micro"){_4ec.fixUpper="none";}if(_4ec.fixLower=="micro"){_4ec.fixLower="none";}}var _4f0=_4e9(_4ec.fixLower,["major"])?Math.floor(_4ec.min/_4ed)*_4ed:_4e9(_4ec.fixLower,["minor"])?Math.floor(_4ec.min/_4ee)*_4ee:_4e9(_4ec.fixLower,["micro"])?Math.floor(_4ec.min/_4ef)*_4ef:_4ec.min,_4f1=_4e9(_4ec.fixUpper,["major"])?Math.ceil(_4ec.max/_4ed)*_4ed:_4e9(_4ec.fixUpper,["minor"])?Math.ceil(_4ec.max/_4ee)*_4ee:_4e9(_4ec.fixUpper,["micro"])?Math.ceil(_4ec.max/_4ef)*_4ef:_4ec.max;if(_4ec.useMin){min=_4f0;}if(_4ec.useMax){max=_4f1;}var _4f2=(!_4ed||_4ec.useMin&&_4e9(_4ec.fixLower,["major"]))?min:Math.ceil(min/_4ed)*_4ed,_4f3=(!_4ee||_4ec.useMin&&_4e9(_4ec.fixLower,["major","minor"]))?min:Math.ceil(min/_4ee)*_4ee,_4f4=(!_4ef||_4ec.useMin&&_4e9(_4ec.fixLower,["major","minor","micro"]))?min:Math.ceil(min/_4ef)*_4ef,_4f5=!_4ed?0:(_4ec.useMax&&_4e9(_4ec.fixUpper,["major"])?Math.round((max-_4f2)/_4ed):Math.floor((max-_4f2)/_4ed))+1,_4f6=!_4ee?0:(_4ec.useMax&&_4e9(_4ec.fixUpper,["major","minor"])?Math.round((max-_4f3)/_4ee):Math.floor((max-_4f3)/_4ee))+1,_4f7=!_4ef?0:(_4ec.useMax&&_4e9(_4ec.fixUpper,["major","minor","micro"])?Math.round((max-_4f4)/_4ef):Math.floor((max-_4f4)/_4ef))+1,_4f8=_4ee?Math.round(_4ed/_4ee):0,_4f9=_4ef?Math.round(_4ee/_4ef):0,_4fa=_4ed?Math.floor(Math.log(_4ed)/Math.LN10):0,_4fb=_4ee?Math.floor(Math.log(_4ee)/Math.LN10):0,_4fc=span/(max-min);if(!isFinite(_4fc)){_4fc=1;}return {bounds:{lower:_4f0,upper:_4f1,from:min,to:max,scale:_4fc,span:span},major:{tick:_4ed,start:_4f2,count:_4f5,prec:_4fa},minor:{tick:_4ee,start:_4f3,count:_4f6,prec:_4fb},micro:{tick:_4ef,start:_4f4,count:_4f7,prec:0},minorPerMajor:_4f8,microPerMinor:_4f9,scaler:_4e7};};return lang.mixin(_4e7,{buildScaler:function(min,max,span,_4fd){var h={fixUpper:"none",fixLower:"none",natural:false};if(_4fd){if("fixUpper" in _4fd){h.fixUpper=String(_4fd.fixUpper);}if("fixLower" in _4fd){h.fixLower=String(_4fd.fixLower);}if("natural" in _4fd){h.natural=Boolean(_4fd.natural);}}if("min" in _4fd){min=_4fd.min;}if("max" in _4fd){max=_4fd.max;}if(_4fd.includeZero){if(min>0){min=0;}if(max<0){max=0;}}h.min=min;h.useMin=true;h.max=max;h.useMax=true;if("from" in _4fd){min=_4fd.from;h.useMin=false;}if("to" in _4fd){max=_4fd.to;h.useMax=false;}if(max<=min){return _4eb(min,max,h,0,0,0,span);}var mag=Math.floor(Math.log(max-min)/Math.LN10),_4fe=_4fd&&("majorTickStep" in _4fd)?_4fd.majorTickStep:Math.pow(10,mag),_4ff=0,_500=0,_501;if(_4fd&&("minorTickStep" in _4fd)){_4ff=_4fd.minorTickStep;}else{do{_4ff=_4fe/10;if(!h.natural||_4ff>0.9){_501=_4eb(min,max,h,_4fe,_4ff,0,span);if(_501.bounds.scale*_501.minor.tick>_4e8){break;}}_4ff=_4fe/5;if(!h.natural||_4ff>0.9){_501=_4eb(min,max,h,_4fe,_4ff,0,span);if(_501.bounds.scale*_501.minor.tick>_4e8){break;}}_4ff=_4fe/2;if(!h.natural||_4ff>0.9){_501=_4eb(min,max,h,_4fe,_4ff,0,span);if(_501.bounds.scale*_501.minor.tick>_4e8){break;}}return _4eb(min,max,h,_4fe,0,0,span);}while(false);}if(_4fd&&("microTickStep" in _4fd)){_500=_4fd.microTickStep;_501=_4eb(min,max,h,_4fe,_4ff,_500,span);}else{do{_500=_4ff/10;if(!h.natural||_500>0.9){_501=_4eb(min,max,h,_4fe,_4ff,_500,span);if(_501.bounds.scale*_501.micro.tick>_4e8){break;}}_500=_4ff/5;if(!h.natural||_500>0.9){_501=_4eb(min,max,h,_4fe,_4ff,_500,span);if(_501.bounds.scale*_501.micro.tick>_4e8){break;}}_500=_4ff/2;if(!h.natural||_500>0.9){_501=_4eb(min,max,h,_4fe,_4ff,_500,span);if(_501.bounds.scale*_501.micro.tick>_4e8){break;}}_500=0;}while(false);}return _500?_501:_4eb(min,max,h,_4fe,_4ff,0,span);},buildTicks:function(_502,_503){var step,next,tick,_504=_502.major.start,_505=_502.minor.start,_506=_502.micro.start;if(_503.microTicks&&_502.micro.tick){step=_502.micro.tick,next=_506;}else{if(_503.minorTicks&&_502.minor.tick){step=_502.minor.tick,next=_505;}else{if(_502.major.tick){step=_502.major.tick,next=_504;}else{return null;}}}var _507=1/_502.bounds.scale;if(_502.bounds.to<=_502.bounds.from||isNaN(_507)||!isFinite(_507)||step<=0||isNaN(step)||!isFinite(step)){return null;}var _508=[],_509=[],_50a=[];while(next<=_502.bounds.to+_507){if(Math.abs(_504-next)<step/2){tick={value:_504};if(_503.majorLabels){tick.label=_4ea(_504,_502.major.prec,_503);}_508.push(tick);_504+=_502.major.tick;_505+=_502.minor.tick;_506+=_502.micro.tick;}else{if(Math.abs(_505-next)<step/2){if(_503.minorTicks){tick={value:_505};if(_503.minorLabels&&(_502.minMinorStep<=_502.minor.tick*_502.bounds.scale)){tick.label=_4ea(_505,_502.minor.prec,_503);}_509.push(tick);}_505+=_502.minor.tick;_506+=_502.micro.tick;}else{if(_503.microTicks){_50a.push({value:_506});}_506+=_502.micro.tick;}}next+=step;}return {major:_508,minor:_509,micro:_50a};},getTransformerFromModel:function(_50b){var _50c=_50b.bounds.from,_50d=_50b.bounds.scale;return function(x){return (x-_50c)*_50d;};},getTransformerFromPlot:function(_50e){var _50f=_50e.bounds.from,_510=_50e.bounds.scale;return function(x){return x/_510+_50f;};}});});},"dojox/gfx/gradutils":function(){define("dojox/gfx/gradutils",["./_base","dojo/_base/lang","./matrix","dojo/_base/Color"],function(g,lang,m,_511){var _512=g.gradutils={};function _513(o,c){if(o<=0){return c[0].color;}var len=c.length;if(o>=1){return c[len-1].color;}for(var i=0;i<len;++i){var stop=c[i];if(stop.offset>=o){if(i){var prev=c[i-1];return _511.blendColors(new _511(prev.color),new _511(stop.color),(o-prev.offset)/(stop.offset-prev.offset));}return stop.color;}}return c[len-1].color;};_512.getColor=function(fill,pt){var o;if(fill){switch(fill.type){case "linear":var _514=Math.atan2(fill.y2-fill.y1,fill.x2-fill.x1),_515=m.rotate(-_514),_516=m.project(fill.x2-fill.x1,fill.y2-fill.y1),p=m.multiplyPoint(_516,pt),pf1=m.multiplyPoint(_516,fill.x1,fill.y1),pf2=m.multiplyPoint(_516,fill.x2,fill.y2),_517=m.multiplyPoint(_515,pf2.x-pf1.x,pf2.y-pf1.y).x;o=m.multiplyPoint(_515,p.x-pf1.x,p.y-pf1.y).x/_517;break;case "radial":var dx=pt.x-fill.cx,dy=pt.y-fill.cy;o=Math.sqrt(dx*dx+dy*dy)/fill.r;break;}return _513(o,fill.colors);}return new _511(fill||[0,0,0,0]);};_512.reverse=function(fill){if(fill){switch(fill.type){case "linear":case "radial":fill=lang.delegate(fill);if(fill.colors){var c=fill.colors,l=c.length,i=0,stop,n=fill.colors=new Array(c.length);for(;i<l;++i){stop=c[i];n[i]={offset:1-stop.offset,color:stop.color};}n.sort(function(a,b){return a.offset-b.offset;});}break;}}return fill;};return _512;});},"dojox/charting/plot2d/Base":function(){define("dojox/charting/plot2d/Base",["dojo/_base/lang","dojo/_base/declare","dojo/_base/connect","../Element","./_PlotEvents","dojo/_base/array","../scaler/primitive","./common","dojox/gfx/fx"],function(lang,_518,hub,_519,_51a,arr,_51b,_51c,fx){return _518("dojox.charting.plot2d.Base",[_519,_51a],{constructor:function(_51d,_51e){this.zoom=null,this.zoomQueue=[];this.lastWindow={vscale:1,hscale:1,xoffset:0,yoffset:0};},clear:function(){this.series=[];this._hAxis=null;this._vAxis=null;this.dirty=true;return this;},setAxis:function(axis){if(axis){this[axis.vertical?"_vAxis":"_hAxis"]=axis;}return this;},toPage:function(_51f){var ah=this._hAxis,av=this._vAxis,sh=ah.getScaler(),sv=av.getScaler(),th=sh.scaler.getTransformerFromModel(sh),tv=sv.scaler.getTransformerFromModel(sv),c=this.chart.getCoords(),o=this.chart.offsets,dim=this.chart.dim;var t=function(_520){var r={};r.x=th(_520[ah.name])+c.x+o.l;r.y=c.y+dim.height-o.b-tv(_520[av.name]);return r;};return _51f?t(_51f):t;},toData:function(_521){var ah=this._hAxis,av=this._vAxis,sh=ah.getScaler(),sv=av.getScaler(),th=sh.scaler.getTransformerFromPlot(sh),tv=sv.scaler.getTransformerFromPlot(sv),c=this.chart.getCoords(),o=this.chart.offsets,dim=this.chart.dim;var t=function(_522){var r={};r[ah.name]=th(_522.x-c.x-o.l);r[av.name]=tv(c.y+dim.height-_522.y-o.b);return r;};return _521?t(_521):t;},addSeries:function(run){this.series.push(run);return this;},getSeriesStats:function(){return _51c.collectSimpleStats(this.series);},calculateAxes:function(dim){this.initializeScalers(dim,this.getSeriesStats());return this;},isDirty:function(){return this.dirty||this._hAxis&&this._hAxis.dirty||this._vAxis&&this._vAxis.dirty;},isDataDirty:function(){return arr.some(this.series,function(item){return item.dirty;});},performZoom:function(dim,_523){var vs=this._vAxis.scale||1,hs=this._hAxis.scale||1,_524=dim.height-_523.b,_525=this._hScaler.bounds,_526=(_525.from-_525.lower)*_525.scale,_527=this._vScaler.bounds,_528=(_527.from-_527.lower)*_527.scale,_529=vs/this.lastWindow.vscale,_52a=hs/this.lastWindow.hscale,_52b=(this.lastWindow.xoffset-_526)/((this.lastWindow.hscale==1)?hs:this.lastWindow.hscale),_52c=(_528-this.lastWindow.yoffset)/((this.lastWindow.vscale==1)?vs:this.lastWindow.vscale),_52d=this.group,anim=fx.animateTransform(lang.delegate({shape:_52d,duration:1200,transform:[{name:"translate",start:[0,0],end:[_523.l*(1-_52a),_524*(1-_529)]},{name:"scale",start:[1,1],end:[_52a,_529]},{name:"original"},{name:"translate",start:[0,0],end:[_52b,_52c]}]},this.zoom));lang.mixin(this.lastWindow,{vscale:vs,hscale:hs,xoffset:_526,yoffset:_528});this.zoomQueue.push(anim);hub.connect(anim,"onEnd",this,function(){this.zoom=null;this.zoomQueue.shift();if(this.zoomQueue.length>0){this.zoomQueue[0].play();}});if(this.zoomQueue.length==1){this.zoomQueue[0].play();}return this;},render:function(dim,_52e){return this;},getRequiredColors:function(){return this.series.length;},initializeScalers:function(dim,_52f){if(this._hAxis){if(!this._hAxis.initialized()){this._hAxis.calculate(_52f.hmin,_52f.hmax,dim.width);}this._hScaler=this._hAxis.getScaler();}else{this._hScaler=_51b.buildScaler(_52f.hmin,_52f.hmax,dim.width);}if(this._vAxis){if(!this._vAxis.initialized()){this._vAxis.calculate(_52f.vmin,_52f.vmax,dim.height);}this._vScaler=this._vAxis.getScaler();}else{this._vScaler=_51b.buildScaler(_52f.vmin,_52f.vmax,dim.height);}return this;}});});},"dijit/BackgroundIframe":function(){define("dijit/BackgroundIframe",["require",".","dojo/_base/config","dojo/dom-construct","dojo/dom-style","dojo/_base/lang","dojo/on","dojo/_base/sniff","dojo/_base/window"],function(_530,_531,_532,_533,_534,lang,on,has,win){var _535=new function(){var _536=[];this.pop=function(){var _537;if(_536.length){_537=_536.pop();_537.style.display="";}else{if(has("ie")<9){var burl=_532["dojoBlankHtmlUrl"]||_530.toUrl("dojo/resources/blank.html")||"javascript:\"\"";var html="<iframe src='"+burl+"' role='presentation'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";_537=win.doc.createElement(html);}else{_537=_533.create("iframe");_537.src="javascript:\"\"";_537.className="dijitBackgroundIframe";_537.setAttribute("role","presentation");_534.set(_537,"opacity",0.1);}_537.tabIndex=-1;}return _537;};this.push=function(_538){_538.style.display="none";_536.push(_538);};}();_531.BackgroundIframe=function(node){if(!node.id){throw new Error("no id");}if(has("ie")||has("mozilla")){var _539=(this.iframe=_535.pop());node.appendChild(_539);if(has("ie")<7||has("quirks")){this.resize(node);this._conn=on(node,"resize",lang.hitch(this,function(){this.resize(node);}));}else{_534.set(_539,{width:"100%",height:"100%"});}}};lang.extend(_531.BackgroundIframe,{resize:function(node){if(this.iframe){_534.set(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"});}},destroy:function(){if(this._conn){this._conn.remove();this._conn=null;}if(this.iframe){_535.push(this.iframe);delete this.iframe;}}});return _531.BackgroundIframe;});},"dijit/_WidgetBase":function(){define("dijit/_WidgetBase",["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./registry"],function(_53a,_53b,_53c,_53d,_53e,_53f,dom,_540,_541,_542,_543,_544,_545,lang,on,_546,_547,_548,win,_549){if(!_545.isAsync){_546(0,function(){var _54a=["dijit/_base/manager"];_53a(_54a);});}var _54b={};function _54c(obj){var ret={};for(var attr in obj){ret[attr.toLowerCase()]=true;}return ret;};function _54d(attr){return function(val){_540[val?"set":"remove"](this.domNode,attr,val);this._set(attr,val);};};return _53f("dijit._WidgetBase",_547,{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:_54d("lang"),dir:"",_setDirAttr:_54d("dir"),textDir:"","class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,attributeMap:{},_blankGif:_53d.blankGif||_53a.toUrl("dojo/resources/blank.gif"),postscript:function(_54e,_54f){this.create(_54e,_54f);},create:function(_550,_551){this.srcNodeRef=dom.byId(_551);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_550){this.params=_550;lang.mixin(this,_550);}this.postMixInProperties();if(!this.id){this.id=_549.getUniqueId(this.declaredClass.replace(/\./g,"_"));}_549.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();var _552=this.srcNodeRef;if(_552&&_552.parentNode&&this.domNode!==_552){_552.parentNode.replaceChild(this.domNode,_552);}}if(this.domNode){this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(this.srcNodeRef&&!this.srcNodeRef.parentNode){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var ctor=this.constructor,list=ctor._setterAttrs;if(!list){list=(ctor._setterAttrs=[]);for(var attr in this.attributeMap){list.push(attr);}var _553=ctor.prototype;for(var _554 in _553){if(_554 in this.attributeMap){continue;}var _555="_set"+_554.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();})+"Attr";if(_555 in _553){list.push(_554);}}}_53b.forEach(list,function(attr){if(this.params&&attr in this.params){}else{if(this[attr]){this.set(attr,this[attr]);}}},this);for(var _556 in this.params){this.set(_556,this[_556]);}},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode){this.domNode=this.srcNodeRef||_542.create("div");}if(this.baseClass){var _557=this.baseClass.split(" ");if(!this.isLeftToRight()){_557=_557.concat(_53b.map(_557,function(name){return name+"Rtl";}));}_541.add(this.domNode,_557);}},postCreate:function(){},startup:function(){if(this._started){return;}this._started=true;_53b.forEach(this.getChildren(),function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}});},destroyRecursive:function(_558){this._beingDestroyed=true;this.destroyDescendants(_558);this.destroy(_558);},destroy:function(_559){this._beingDestroyed=true;this.uninitialize();var c;while((c=this._connects.pop())){c.remove();}var w;while((w=this._supportingWidgets.pop())){if(w.destroyRecursive){w.destroyRecursive();}else{if(w.destroy){w.destroy();}}}this.destroyRendering(_559);_549.remove(this.id);this._destroyed=true;},destroyRendering:function(_55a){if(this.bgIframe){this.bgIframe.destroy(_55a);delete this.bgIframe;}if(this.domNode){if(_55a){_540.remove(this.domNode,"widgetId");}else{_542.destroy(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_55a){_542.destroy(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_55b){_53b.forEach(this.getChildren(),function(_55c){if(_55c.destroyRecursive){_55c.destroyRecursive(_55b);}});},uninitialize:function(){return false;},_setStyleAttr:function(_55d){var _55e=this.domNode;if(lang.isObject(_55d)){_544.set(_55e,_55d);}else{if(_55e.style.cssText){_55e.style.cssText+="; "+_55d;}else{_55e.style.cssText=_55d;}}this._set("style",_55d);},_attrToDom:function(attr,_55f,_560){_560=arguments.length>=3?_560:this.attributeMap[attr];_53b.forEach(lang.isArray(_560)?_560:[_560],function(_561){var _562=this[_561.node||_561||"domNode"];var type=_561.type||"attribute";switch(type){case "attribute":if(lang.isFunction(_55f)){_55f=lang.hitch(this,_55f);}var _563=_561.attribute?_561.attribute:(/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():attr);_540.set(_562,_563,_55f);break;case "innerText":_562.innerHTML="";_562.appendChild(win.doc.createTextNode(_55f));break;case "innerHTML":_562.innerHTML=_55f;break;case "class":_541.replace(_562,_55f,this[attr]);break;}},this);},get:function(name){var _564=this._getAttrNames(name);return this[_564.g]?this[_564.g]():this[name];},set:function(name,_565){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _566=this._getAttrNames(name),_567=this[_566.s];if(lang.isFunction(_567)){var _568=_567.apply(this,Array.prototype.slice.call(arguments,1));}else{var _569=this.focusNode&&!lang.isFunction(this.focusNode)?"focusNode":"domNode",tag=this[_569].tagName,_56a=_54b[tag]||(_54b[tag]=_54c(this[_569])),map=name in this.attributeMap?this.attributeMap[name]:_566.s in this?this[_566.s]:((_566.l in _56a&&typeof _565!="function")||/^aria-|^data-|^role$/.test(name))?_569:null;if(map!=null){this._attrToDom(name,_565,map);}this._set(name,_565);}return _568||this;},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();});return (apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr",l:uc.toLowerCase()});},_set:function(name,_56b){var _56c=this[name];this[name]=_56b;if(this._watchCallbacks&&this._created&&_56b!==_56c){this._watchCallbacks(name,_56c,_56b);}},on:function(type,func){return _53c.after(this,this._onMap(type),func,true);},_onMap:function(type){var ctor=this.constructor,map=ctor._onMap;if(!map){map=(ctor._onMap={});for(var attr in ctor.prototype){if(/^on/.test(attr)){map[attr.replace(/^on/,"").toLowerCase()]=attr;}}}return map[type.toLowerCase()];},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getChildren:function(){return this.containerNode?_549.findWidgets(this.containerNode):[];},getParent:function(){return _549.getEnclosingWidget(this.domNode.parentNode);},connect:function(obj,_56d,_56e){var _56f=_53e.connect(obj,_56d,this,_56e);this._connects.push(_56f);return _56f;},disconnect:function(_570){var i=_53b.indexOf(this._connects,_570);if(i!=-1){_570.remove();this._connects.splice(i,1);}},subscribe:function(t,_571){var _572=_548.subscribe(t,lang.hitch(this,_571));this._connects.push(_572);return _572;},unsubscribe:function(_573){this.disconnect(_573);},isLeftToRight:function(){return this.dir?(this.dir=="ltr"):_543.isBodyLtr();},isFocusable:function(){return this.focus&&(_544.get(this.domNode,"display")!="none");},placeAt:function(_574,_575){if(_574.declaredClass&&_574.addChild){_574.addChild(this,_575);}else{_542.place(this.domNode,_574,_575);}return this;},getTextDir:function(text,_576){return _576;},applyTextDir:function(){},defer:function(fcn,_577){var _578=setTimeout(lang.hitch(this,function(){_578=null;if(!this._destroyed){lang.hitch(this,fcn)();}}),_577||0);return {remove:function(){if(_578){clearTimeout(_578);_578=null;}return null;}};}});});},"dojox/charting/plot2d/Default":function(){define("dojox/charting/plot2d/Default",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","./Base","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(lang,_579,arr,Base,dc,df,dfr,du,fx){var _57a=dfr.lambda("item.purgeGroup()");var _57b=1200;return _579("dojox.charting.plot2d.Default",Base,{defaultParams:{hAxis:"x",vAxis:"y",lines:true,areas:false,markers:false,tension:"",animate:false,enableCache:false},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:"",markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:""},constructor:function(_57c,_57d){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_57d);du.updateWithPattern(this.opt,_57d,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},createPath:function(run,_57e,_57f){var path;if(this.opt.enableCache&&run._pathFreePool.length>0){path=run._pathFreePool.pop();path.setShape(_57f);_57e.add(path);}else{path=_57e.createPath(_57f);}if(this.opt.enableCache){run._pathUsePool.push(path);}return path;},render:function(dim,_580){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_580);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_57a);this._eventSeries={};this.cleanGroup();this.group.setTransform(null);var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_581,_582,_583,_584=this.events();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(this.opt.enableCache){run._pathFreePool=(run._pathFreePool?run._pathFreePool:[]).concat(run._pathUsePool?run._pathUsePool:[]);run._pathUsePool=[];}if(!run.data.length){run.dirty=false;t.skip();continue;}var _585=t.next(this.opt.areas?"area":"line",[this.opt,run],true),s=run.group,_586=[],_587=[],rseg=null,_588,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_589=this._eventSeries[run.name]=new Array(run.data.length);var _58a=typeof run.data[0]=="number";var min=_58a?Math.max(0,Math.floor(this._hScaler.bounds.from-1)):0,max=_58a?Math.min(run.data.length,Math.ceil(this._hScaler.bounds.to)):run.data.length;for(var j=min;j<max;j++){if(run.data[j]!=null){if(!rseg){rseg=[];_587.push(j);_586.push(rseg);}rseg.push(run.data[j]);}else{rseg=null;}}for(var seg=0;seg<_586.length;seg++){if(typeof _586[seg][0]=="number"){_588=arr.map(_586[seg],function(v,i){return {x:ht(i+_587[seg]+1)+_580.l,y:dim.height-_580.b-vt(v)};},this);}else{_588=arr.map(_586[seg],function(v,i){return {x:ht(v.x)+_580.l,y:dim.height-_580.b-vt(v.y)};},this);}var _58b=this.opt.tension?dc.curve(_588,this.opt.tension):"";if(this.opt.areas&&_588.length>1){var fill=_585.series.fill;var _58c=lang.clone(_588);if(this.opt.tension){var _58d="L"+_58c[_58c.length-1].x+","+(dim.height-_580.b)+" L"+_58c[0].x+","+(dim.height-_580.b)+" L"+_58c[0].x+","+_58c[0].y;run.dyn.fill=s.createPath(_58b+" "+_58d).setFill(fill).getFill();}else{_58c.push({x:_588[_588.length-1].x,y:dim.height-_580.b});_58c.push({x:_588[0].x,y:dim.height-_580.b});_58c.push(_588[0]);run.dyn.fill=s.createPolyline(_58c).setFill(fill).getFill();}}if(this.opt.lines||this.opt.markers){_581=_585.series.stroke;if(_585.series.outline){_582=run.dyn.outline=dc.makeStroke(_585.series.outline);_582.width=2*_582.width+_581.width;}}if(this.opt.markers){run.dyn.marker=_585.symbol;}var _58e=null,_58f=null,_590=null;if(_581&&_585.series.shadow&&_588.length>1){var _591=_585.series.shadow,_592=arr.map(_588,function(c){return {x:c.x+_591.dx,y:c.y+_591.dy};});if(this.opt.lines){if(this.opt.tension){run.dyn.shadow=s.createPath(dc.curve(_592,this.opt.tension)).setStroke(_591).getStroke();}else{run.dyn.shadow=s.createPolyline(_592).setStroke(_591).getStroke();}}if(this.opt.markers&&_585.marker.shadow){_591=_585.marker.shadow;_590=arr.map(_592,function(c){return this.createPath(run,s,"M"+c.x+" "+c.y+" "+_585.symbol).setStroke(_591).setFill(_591.color);},this);}}if(this.opt.lines&&_588.length>1){if(_582){if(this.opt.tension){run.dyn.outline=s.createPath(_58b).setStroke(_582).getStroke();}else{run.dyn.outline=s.createPolyline(_588).setStroke(_582).getStroke();}}if(this.opt.tension){run.dyn.stroke=s.createPath(_58b).setStroke(_581).getStroke();}else{run.dyn.stroke=s.createPolyline(_588).setStroke(_581).getStroke();}}if(this.opt.markers){_58e=new Array(_588.length);_58f=new Array(_588.length);_582=null;if(_585.marker.outline){_582=dc.makeStroke(_585.marker.outline);_582.width=2*_582.width+(_585.marker.stroke?_585.marker.stroke.width:0);}arr.forEach(_588,function(c,i){var path="M"+c.x+" "+c.y+" "+_585.symbol;if(_582){_58f[i]=this.createPath(run,s,path).setStroke(_582);}_58e[i]=this.createPath(run,s,path).setStroke(_585.marker.stroke).setFill(_585.marker.fill);},this);run.dyn.markerFill=_585.marker.fill;run.dyn.markerStroke=_585.marker.stroke;if(_584){arr.forEach(_58e,function(s,i){var o={element:"marker",index:i+_587[seg],run:run,shape:s,outline:_58f[i]||null,shadow:_590&&_590[i]||null,cx:_588[i].x,cy:_588[i].y};if(typeof _586[seg][0]=="number"){o.x=i+_587[seg]+1;o.y=_586[seg][i];}else{o.x=_586[seg][i].x;o.y=_586[seg][i].y;}this._connectEvents(o);_589[i+_587[seg]]=o;},this);}else{delete this._eventSeries[run.name];}}}run.dirty=false;}if(this.animate){var _593=this.group;fx.animateTransform(lang.delegate({shape:_593,duration:_57b,transform:[{name:"translate",start:[0,dim.height-_580.b],end:[0,0]},{name:"scale",start:[1,0],end:[1,1]},{name:"original"}]},this.animate)).play();}this.dirty=false;return this;}});});},"dojox/charting/plot2d/StackedLines":function(){define("dojox/charting/plot2d/StackedLines",["dojo/_base/declare","./Stacked"],function(_594,_595){return _594("dojox.charting.plot2d.StackedLines",_595,{constructor:function(){this.opt.lines=true;}});});},"dojox/color/Palette":function(){define("dojox/color/Palette",["dojo/_base/kernel","../main","dojo/_base/lang","dojo/_base/array","./_base"],function(dojo,_596,lang,arr,dxc){dxc.Palette=function(base){this.colors=[];if(base instanceof dxc.Palette){this.colors=base.colors.slice(0);}else{if(base instanceof dxc.Color){this.colors=[null,null,base,null,null];}else{if(lang.isArray(base)){this.colors=arr.map(base.slice(0),function(item){if(lang.isString(item)){return new dxc.Color(item);}return item;});}else{if(lang.isString(base)){this.colors=[null,null,new dxc.Color(base),null,null];}}}}};function _597(p,_598,val){var ret=new dxc.Palette();ret.colors=[];arr.forEach(p.colors,function(item){var r=(_598=="dr")?item.r+val:item.r,g=(_598=="dg")?item.g+val:item.g,b=(_598=="db")?item.b+val:item.b,a=(_598=="da")?item.a+val:item.a;ret.colors.push(new dxc.Color({r:Math.min(255,Math.max(0,r)),g:Math.min(255,Math.max(0,g)),b:Math.min(255,Math.max(0,b)),a:Math.min(1,Math.max(0,a))}));});return ret;};function tCMY(p,_599,val){var ret=new dxc.Palette();ret.colors=[];arr.forEach(p.colors,function(item){var o=item.toCmy(),c=(_599=="dc")?o.c+val:o.c,m=(_599=="dm")?o.m+val:o.m,y=(_599=="dy")?o.y+val:o.y;ret.colors.push(dxc.fromCmy(Math.min(100,Math.max(0,c)),Math.min(100,Math.max(0,m)),Math.min(100,Math.max(0,y))));});return ret;};function _59a(p,_59b,val){var ret=new dxc.Palette();ret.colors=[];arr.forEach(p.colors,function(item){var o=item.toCmyk(),c=(_59b=="dc")?o.c+val:o.c,m=(_59b=="dm")?o.m+val:o.m,y=(_59b=="dy")?o.y+val:o.y,k=(_59b=="dk")?o.b+val:o.b;ret.colors.push(dxc.fromCmyk(Math.min(100,Math.max(0,c)),Math.min(100,Math.max(0,m)),Math.min(100,Math.max(0,y)),Math.min(100,Math.max(0,k))));});return ret;};function tHSL(p,_59c,val){var ret=new dxc.Palette();ret.colors=[];arr.forEach(p.colors,function(item){var o=item.toHsl(),h=(_59c=="dh")?o.h+val:o.h,s=(_59c=="ds")?o.s+val:o.s,l=(_59c=="dl")?o.l+val:o.l;ret.colors.push(dxc.fromHsl(h%360,Math.min(100,Math.max(0,s)),Math.min(100,Math.max(0,l))));});return ret;};function tHSV(p,_59d,val){var ret=new dxc.Palette();ret.colors=[];arr.forEach(p.colors,function(item){var o=item.toHsv(),h=(_59d=="dh")?o.h+val:o.h,s=(_59d=="ds")?o.s+val:o.s,v=(_59d=="dv")?o.v+val:o.v;ret.colors.push(dxc.fromHsv(h%360,Math.min(100,Math.max(0,s)),Math.min(100,Math.max(0,v))));});return ret;};function _59e(val,low,high){return high-((high-val)*((high-low)/high));};lang.extend(dxc.Palette,{transform:function(_59f){var fn=_597;if(_59f.use){var use=_59f.use.toLowerCase();if(use.indexOf("hs")==0){if(use.charAt(2)=="l"){fn=tHSL;}else{fn=tHSV;}}else{if(use.indexOf("cmy")==0){if(use.charAt(3)=="k"){fn=_59a;}else{fn=tCMY;}}}}else{if("dc" in _59f||"dm" in _59f||"dy" in _59f){if("dk" in _59f){fn=_59a;}else{fn=tCMY;}}else{if("dh" in _59f||"ds" in _59f){if("dv" in _59f){fn=tHSV;}else{fn=tHSL;}}}}var _5a0=this;for(var p in _59f){if(p=="use"){continue;}_5a0=fn(_5a0,p,_59f[p]);}return _5a0;},clone:function(){return new dxc.Palette(this);}});lang.mixin(dxc.Palette,{generators:{analogous:function(args){var high=args.high||60,low=args.low||18,base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var h=[(hsv.h+low+360)%360,(hsv.h+Math.round(low/2)+360)%360,hsv.h,(hsv.h-Math.round(high/2)+360)%360,(hsv.h-high+360)%360];var s1=Math.max(10,(hsv.s<=95)?hsv.s+5:(100-(hsv.s-95))),s2=(hsv.s>1)?hsv.s-1:21-hsv.s,v1=(hsv.v>=92)?hsv.v-9:Math.max(hsv.v+9,20),v2=(hsv.v<=90)?Math.max(hsv.v+5,20):(95+Math.ceil((hsv.v-90)/2)),s=[s1,s2,hsv.s,s1,s1],v=[v1,v2,hsv.v,v1,v2];return new dxc.Palette(arr.map(h,function(hue,i){return dxc.fromHsv(hue,s[i],v[i]);}));},monochromatic:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var s1=(hsv.s-30>9)?hsv.s-30:hsv.s+30,s2=hsv.s,v1=_59e(hsv.v,20,100),v2=(hsv.v-20>20)?hsv.v-20:hsv.v+60,v3=(hsv.v-50>20)?hsv.v-50:hsv.v+30;return new dxc.Palette([dxc.fromHsv(hsv.h,s1,v1),dxc.fromHsv(hsv.h,s2,v3),base,dxc.fromHsv(hsv.h,s1,v3),dxc.fromHsv(hsv.h,s2,v2)]);},triadic:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var h1=(hsv.h+57+360)%360,h2=(hsv.h-157+360)%360,s1=(hsv.s>20)?hsv.s-10:hsv.s+10,s2=(hsv.s>90)?hsv.s-10:hsv.s+10,s3=(hsv.s>95)?hsv.s-5:hsv.s+5,v1=(hsv.v-20>20)?hsv.v-20:hsv.v+20,v2=(hsv.v-30>20)?hsv.v-30:hsv.v+30,v3=(hsv.v-30>70)?hsv.v-30:hsv.v+30;return new dxc.Palette([dxc.fromHsv(h1,s1,hsv.v),dxc.fromHsv(hsv.h,s2,v2),base,dxc.fromHsv(h2,s2,v1),dxc.fromHsv(h2,s3,v3)]);},complementary:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var h1=((hsv.h*2)+137<360)?(hsv.h*2)+137:Math.floor(hsv.h/2)-137,s1=Math.max(hsv.s-10,0),s2=_59e(hsv.s,10,100),s3=Math.min(100,hsv.s+20),v1=Math.min(100,hsv.v+30),v2=(hsv.v>20)?hsv.v-30:hsv.v+30;return new dxc.Palette([dxc.fromHsv(hsv.h,s1,v1),dxc.fromHsv(hsv.h,s2,v2),base,dxc.fromHsv(h1,s3,v2),dxc.fromHsv(h1,hsv.s,hsv.v)]);},splitComplementary:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,_5a1=args.da||30,hsv=base.toHsv();var _5a2=((hsv.h*2)+137<360)?(hsv.h*2)+137:Math.floor(hsv.h/2)-137,h1=(_5a2-_5a1+360)%360,h2=(_5a2+_5a1)%360,s1=Math.max(hsv.s-10,0),s2=_59e(hsv.s,10,100),s3=Math.min(100,hsv.s+20),v1=Math.min(100,hsv.v+30),v2=(hsv.v>20)?hsv.v-30:hsv.v+30;return new dxc.Palette([dxc.fromHsv(h1,s1,v1),dxc.fromHsv(h1,s2,v2),base,dxc.fromHsv(h2,s3,v2),dxc.fromHsv(h2,hsv.s,hsv.v)]);},compound:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var h1=((hsv.h*2)+18<360)?(hsv.h*2)+18:Math.floor(hsv.h/2)-18,h2=((hsv.h*2)+120<360)?(hsv.h*2)+120:Math.floor(hsv.h/2)-120,h3=((hsv.h*2)+99<360)?(hsv.h*2)+99:Math.floor(hsv.h/2)-99,s1=(hsv.s-40>10)?hsv.s-40:hsv.s+40,s2=(hsv.s-10>80)?hsv.s-10:hsv.s+10,s3=(hsv.s-25>10)?hsv.s-25:hsv.s+25,v1=(hsv.v-40>10)?hsv.v-40:hsv.v+40,v2=(hsv.v-20>80)?hsv.v-20:hsv.v+20,v3=Math.max(hsv.v,20);return new dxc.Palette([dxc.fromHsv(h1,s1,v1),dxc.fromHsv(h1,s2,v2),base,dxc.fromHsv(h2,s3,v3),dxc.fromHsv(h3,s2,v2)]);},shades:function(args){var base=lang.isString(args.base)?new dxc.Color(args.base):args.base,hsv=base.toHsv();var s=(hsv.s==100&&hsv.v==0)?0:hsv.s,v1=(hsv.v-50>20)?hsv.v-50:hsv.v+30,v2=(hsv.v-25>=20)?hsv.v-25:hsv.v+55,v3=(hsv.v-75>=20)?hsv.v-75:hsv.v+5,v4=Math.max(hsv.v-10,20);return new dxc.Palette([new dxc.fromHsv(hsv.h,s,v1),new dxc.fromHsv(hsv.h,s,v2),base,new dxc.fromHsv(hsv.h,s,v3),new dxc.fromHsv(hsv.h,s,v4)]);}},generate:function(base,type){if(lang.isFunction(type)){return type({base:base});}else{if(dxc.Palette.generators[type]){return dxc.Palette.generators[type]({base:base});}}throw new Error("dojox.color.Palette.generate: the specified generator ('"+type+"') does not exist.");}});return dxc.Palette;});},"url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\r\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\r\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\r\n></div>\r\n","dojox/charting/axis2d/common":function(){define("dojox/charting/axis2d/common",["dojo/_base/lang","dojo/_base/html","dojo/_base/window","dojo/dom-geometry","dojox/gfx"],function(lang,html,win,_5a3,g){var _5a4=lang.getObject("dojox.charting.axis2d.common",true);var _5a5=function(s){s.marginLeft="0px";s.marginTop="0px";s.marginRight="0px";s.marginBottom="0px";s.paddingLeft="0px";s.paddingTop="0px";s.paddingRight="0px";s.paddingBottom="0px";s.borderLeftWidth="0px";s.borderTopWidth="0px";s.borderRightWidth="0px";s.borderBottomWidth="0px";};var _5a6=function(n){if(n["getBoundingClientRect"]){var bcr=n.getBoundingClientRect();return bcr.width||(bcr.right-bcr.left);}else{return _5a3.getMarginBox(n).w;}};return lang.mixin(_5a4,{createText:{gfx:function(_5a7,_5a8,x,y,_5a9,text,font,_5aa){return _5a8.createText({x:x,y:y,text:text,align:_5a9}).setFont(font).setFill(_5aa);},html:function(_5ab,_5ac,x,y,_5ad,text,font,_5ae,_5af){var p=win.doc.createElement("div"),s=p.style,_5b0;if(_5ab.getTextDir){p.dir=_5ab.getTextDir(text);}_5a5(s);s.font=font;p.innerHTML=String(text).replace(/\s/g,"&nbsp;");s.color=_5ae;s.position="absolute";s.left="-10000px";win.body().appendChild(p);var size=g.normalizedLength(g.splitFontString(font).size);if(!_5af){_5b0=_5a6(p);}if(p.dir=="rtl"){x+=_5af?_5af:_5b0;}win.body().removeChild(p);s.position="relative";if(_5af){s.width=_5af+"px";switch(_5ad){case "middle":s.textAlign="center";s.left=(x-_5af/2)+"px";break;case "end":s.textAlign="right";s.left=(x-_5af)+"px";break;default:s.left=x+"px";s.textAlign="left";break;}}else{switch(_5ad){case "middle":s.left=Math.floor(x-_5b0/2)+"px";break;case "end":s.left=Math.floor(x-_5b0)+"px";break;default:s.left=Math.floor(x)+"px";break;}}s.top=Math.floor(y-size)+"px";s.whiteSpace="nowrap";var wrap=win.doc.createElement("div"),w=wrap.style;_5a5(w);w.width="0px";w.height="0px";wrap.appendChild(p);_5ab.node.insertBefore(wrap,_5ab.node.firstChild);return wrap;}}});});},"dojo/fx/easing":function(){define(["../_base/lang"],function(lang){var _5b1={linear:function(n){return n;},quadIn:function(n){return Math.pow(n,2);},quadOut:function(n){return n*(n-2)*-1;},quadInOut:function(n){n=n*2;if(n<1){return Math.pow(n,2)/2;}return -1*((--n)*(n-2)-1)/2;},cubicIn:function(n){return Math.pow(n,3);},cubicOut:function(n){return Math.pow(n-1,3)+1;},cubicInOut:function(n){n=n*2;if(n<1){return Math.pow(n,3)/2;}n-=2;return (Math.pow(n,3)+2)/2;},quartIn:function(n){return Math.pow(n,4);},quartOut:function(n){return -1*(Math.pow(n-1,4)-1);},quartInOut:function(n){n=n*2;if(n<1){return Math.pow(n,4)/2;}n-=2;return -1/2*(Math.pow(n,4)-2);},quintIn:function(n){return Math.pow(n,5);},quintOut:function(n){return Math.pow(n-1,5)+1;},quintInOut:function(n){n=n*2;if(n<1){return Math.pow(n,5)/2;}n-=2;return (Math.pow(n,5)+2)/2;},sineIn:function(n){return -1*Math.cos(n*(Math.PI/2))+1;},sineOut:function(n){return Math.sin(n*(Math.PI/2));},sineInOut:function(n){return -1*(Math.cos(Math.PI*n)-1)/2;},expoIn:function(n){return (n==0)?0:Math.pow(2,10*(n-1));},expoOut:function(n){return (n==1)?1:(-1*Math.pow(2,-10*n)+1);},expoInOut:function(n){if(n==0){return 0;}if(n==1){return 1;}n=n*2;if(n<1){return Math.pow(2,10*(n-1))/2;}--n;return (-1*Math.pow(2,-10*n)+2)/2;},circIn:function(n){return -1*(Math.sqrt(1-Math.pow(n,2))-1);},circOut:function(n){n=n-1;return Math.sqrt(1-Math.pow(n,2));},circInOut:function(n){n=n*2;if(n<1){return -1/2*(Math.sqrt(1-Math.pow(n,2))-1);}n-=2;return 1/2*(Math.sqrt(1-Math.pow(n,2))+1);},backIn:function(n){var s=1.70158;return Math.pow(n,2)*((s+1)*n-s);},backOut:function(n){n=n-1;var s=1.70158;return Math.pow(n,2)*((s+1)*n+s)+1;},backInOut:function(n){var s=1.70158*1.525;n=n*2;if(n<1){return (Math.pow(n,2)*((s+1)*n-s))/2;}n-=2;return (Math.pow(n,2)*((s+1)*n+s)+2)/2;},elasticIn:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;n=n-1;return -1*Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p);},elasticOut:function(n){if(n==0||n==1){return n;}var p=0.3;var s=p/4;return Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p)+1;},elasticInOut:function(n){if(n==0){return 0;}n=n*2;if(n==2){return 1;}var p=0.3*1.5;var s=p/4;if(n<1){n-=1;return -0.5*(Math.pow(2,10*n)*Math.sin((n-s)*(2*Math.PI)/p));}n-=1;return 0.5*(Math.pow(2,-10*n)*Math.sin((n-s)*(2*Math.PI)/p))+1;},bounceIn:function(n){return (1-_5b1.bounceOut(1-n));},bounceOut:function(n){var s=7.5625;var p=2.75;var l;if(n<(1/p)){l=s*Math.pow(n,2);}else{if(n<(2/p)){n-=(1.5/p);l=s*Math.pow(n,2)+0.75;}else{if(n<(2.5/p)){n-=(2.25/p);l=s*Math.pow(n,2)+0.9375;}else{n-=(2.625/p);l=s*Math.pow(n,2)+0.984375;}}}return l;},bounceInOut:function(n){if(n<0.5){return _5b1.bounceIn(n*2)/2;}return (_5b1.bounceOut(n*2-1)/2)+0.5;}};lang.setObject("dojo.fx.easing",_5b1);return _5b1;});},"dojox/charting/plot2d/StackedAreas":function(){define("dojox/charting/plot2d/StackedAreas",["dojo/_base/declare","./Stacked"],function(_5b2,_5b3){return _5b2("dojox.charting.plot2d.StackedAreas",_5b3,{constructor:function(){this.opt.lines=true;this.opt.areas=true;}});});},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(dojo,lang){lang.getObject("regexp",true,dojo);dojo.regexp.escapeString=function(str,_5b4){return str.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){if(_5b4&&_5b4.indexOf(ch)!=-1){return ch;}return "\\"+ch;});};dojo.regexp.buildGroupRE=function(arr,re,_5b5){if(!(arr instanceof Array)){return re(arr);}var b=[];for(var i=0;i<arr.length;i++){b.push(re(arr[i]));}return dojo.regexp.group(b.join("|"),_5b5);};dojo.regexp.group=function(_5b6,_5b7){return "("+(_5b7?"?:":"")+_5b6+")";};return dojo.regexp;});},"dojox/charting/themes/PlotKit/base":function(){define("dojox/charting/themes/PlotKit/base",["dojo/_base/kernel","dojo/_base/lang","../../Theme","../common"],function(dojo,lang,_5b8,_5b9){var pk=lang.getObject("PlotKit",true,_5b9);pk.base=new _5b8({chart:{stroke:null,fill:"yellow"},plotarea:{stroke:null,fill:"yellow"},axis:{stroke:{color:"#fff",width:1},line:{color:"#fff",width:0.5},majorTick:{color:"#fff",width:0.5,length:6},minorTick:{color:"#fff",width:0.5,length:3},tick:{font:"normal normal normal 7pt Helvetica,Arial,sans-serif",fontColor:"#999"}},series:{stroke:{width:2.5,color:"#fff"},fill:"#666",font:"normal normal normal 7.5pt Helvetica,Arial,sans-serif",fontColor:"#666"},marker:{stroke:{width:2},fill:"#333",font:"normal normal normal 7pt Helvetica,Arial,sans-serif",fontColor:"#666"},colors:["red","green","blue"]});pk.base.next=function(_5ba,_5bb,_5bc){var _5bd=_5b8.prototype.next.apply(this,arguments);if(_5ba=="line"){_5bd.marker.outline={width:2,color:"#fff"};_5bd.series.stroke.width=3.5;_5bd.marker.stroke.width=2;}else{if(_5ba=="candlestick"){_5bd.series.stroke.width=1;}else{_5bd.series.stroke.color="#fff";}}return _5bd;};return pk;});},"dojo/data/util/simpleFetch":function(){define(["dojo/_base/lang","dojo/_base/window","./sorter"],function(lang,_5be,_5bf){var _5c0=lang.getObject("dojo.data.util.simpleFetch",true);_5c0.fetch=function(_5c1){_5c1=_5c1||{};if(!_5c1.store){_5c1.store=this;}var self=this;var _5c2=function(_5c3,_5c4){if(_5c4.onError){var _5c5=_5c4.scope||_5be.global;_5c4.onError.call(_5c5,_5c3,_5c4);}};var _5c6=function(_5c7,_5c8){var _5c9=_5c8.abort||null;var _5ca=false;var _5cb=_5c8.start?_5c8.start:0;var _5cc=(_5c8.count&&(_5c8.count!==Infinity))?(_5cb+_5c8.count):_5c7.length;_5c8.abort=function(){_5ca=true;if(_5c9){_5c9.call(_5c8);}};var _5cd=_5c8.scope||_5be.global;if(!_5c8.store){_5c8.store=self;}if(_5c8.onBegin){_5c8.onBegin.call(_5cd,_5c7.length,_5c8);}if(_5c8.sort){_5c7.sort(_5bf.createSortFunction(_5c8.sort,self));}if(_5c8.onItem){for(var i=_5cb;(i<_5c7.length)&&(i<_5cc);++i){var item=_5c7[i];if(!_5ca){_5c8.onItem.call(_5cd,item,_5c8);}}}if(_5c8.onComplete&&!_5ca){var _5ce=null;if(!_5c8.onItem){_5ce=_5c7.slice(_5cb,_5cc);}_5c8.onComplete.call(_5cd,_5ce,_5c8);}};this._fetchItems(_5c1,_5c6,_5c2);return _5c1;};return _5c0;});},"dojox/charting/plot2d/_PlotEvents":function(){define("dojox/charting/plot2d/_PlotEvents",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/connect"],function(lang,arr,_5cf,hub){return _5cf("dojox.charting.plot2d._PlotEvents",null,{constructor:function(){this._shapeEvents=[];this._eventSeries={};},destroy:function(){this.resetEvents();this.inherited(arguments);},plotEvent:function(o){},raiseEvent:function(o){this.plotEvent(o);var t=lang.delegate(o);t.originalEvent=o.type;t.originalPlot=o.plot;t.type="onindirect";arr.forEach(this.chart.stack,function(plot){if(plot!==this&&plot.plotEvent){t.plot=plot;plot.plotEvent(t);}},this);},connect:function(_5d0,_5d1){this.dirty=true;return hub.connect(this,"plotEvent",_5d0,_5d1);},events:function(){return !!this.plotEvent.after;},resetEvents:function(){if(this._shapeEvents.length){arr.forEach(this._shapeEvents,function(item){item.shape.disconnect(item.handle);});this._shapeEvents=[];}this.raiseEvent({type:"onplotreset",plot:this});},_connectSingleEvent:function(o,_5d2){this._shapeEvents.push({shape:o.eventMask,handle:o.eventMask.connect(_5d2,this,function(e){o.type=_5d2;o.event=e;this.raiseEvent(o);o.event=null;})});},_connectEvents:function(o){if(o){o.chart=this.chart;o.plot=this;o.hAxis=this.hAxis||null;o.vAxis=this.vAxis||null;o.eventMask=o.eventMask||o.shape;this._connectSingleEvent(o,"onmouseover");this._connectSingleEvent(o,"onmouseout");this._connectSingleEvent(o,"onclick");}},_reconnectEvents:function(_5d3){var a=this._eventSeries[_5d3];if(a){arr.forEach(a,this._connectEvents,this);}},fireEvent:function(_5d4,_5d5,_5d6,_5d7){var s=this._eventSeries[_5d4];if(s&&s.length&&_5d6<s.length){var o=s[_5d6];o.type=_5d5;o.event=_5d7||null;this.raiseEvent(o);o.event=null;}}});});},"dojox/charting/Element":function(){define("dojox/charting/Element",["dojo/_base/lang","dojo/_base/array","dojo/dom-construct","dojo/_base/declare","dojox/gfx","dojox/gfx/utils","dojox/gfx/shape"],function(lang,arr,_5d8,_5d9,gfx,_5da,_5db){return _5d9("dojox.charting.Element",null,{chart:null,group:null,htmlElements:null,dirty:true,constructor:function(_5dc){this.chart=_5dc;this.group=null;this.htmlElements=[];this.dirty=true;this.trailingSymbol="...";this._events=[];},createGroup:function(_5dd){if(!_5dd){_5dd=this.chart.surface;}if(!this.group){this.group=_5dd.createGroup();}return this;},purgeGroup:function(){this.destroyHtmlElements();if(this.group){_5da.forEach(this.group,function(_5de){_5db.dispose(_5de);});this.group.clear();this.group.removeShape();this.group=null;}this.dirty=true;if(this._events.length){arr.forEach(this._events,function(item){item.shape.disconnect(item.handle);});this._events=[];}return this;},cleanGroup:function(_5df){this.destroyHtmlElements();if(!_5df){_5df=this.chart.surface;}if(this.group){this.group.clear();}else{this.group=_5df.createGroup();}this.dirty=true;return this;},destroyHtmlElements:function(){if(this.htmlElements.length){arr.forEach(this.htmlElements,_5d8.destroy);this.htmlElements=[];}},destroy:function(){this.purgeGroup();},getTextWidth:function(s,font){return gfx._base._getTextBox(s,{font:font}).w||0;},getTextWithLimitLength:function(s,font,_5e0,_5e1){if(!s||s.length<=0){return {text:"",truncated:_5e1||false};}if(!_5e0||_5e0<=0){return {text:s,truncated:_5e1||false};}var _5e2=2,_5e3=0.618,_5e4=s.substring(0,1)+this.trailingSymbol,_5e5=this.getTextWidth(_5e4,font);if(_5e0<=_5e5){return {text:_5e4,truncated:true};}var _5e6=this.getTextWidth(s,font);if(_5e6<=_5e0){return {text:s,truncated:_5e1||false};}else{var _5e7=0,end=s.length;while(_5e7<end){if(end-_5e7<=_5e2){while(this.getTextWidth(s.substring(0,_5e7)+this.trailingSymbol,font)>_5e0){_5e7-=1;}return {text:(s.substring(0,_5e7)+this.trailingSymbol),truncated:true};}var _5e8=_5e7+Math.round((end-_5e7)*_5e3),_5e9=this.getTextWidth(s.substring(0,_5e8),font);if(_5e9<_5e0){_5e7=_5e8;end=end;}else{_5e7=_5e7;end=_5e8;}}}},getTextWithLimitCharCount:function(s,font,_5ea,_5eb){if(!s||s.length<=0){return {text:"",truncated:_5eb||false};}if(!_5ea||_5ea<=0||s.length<=_5ea){return {text:s,truncated:_5eb||false};}return {text:s.substring(0,_5ea)+this.trailingSymbol,truncated:true};},_plotFill:function(fill,dim,_5ec){if(!fill||!fill.type||!fill.space){return fill;}var _5ed=fill.space;switch(fill.type){case "linear":if(_5ed==="plot"||_5ed==="shapeX"||_5ed==="shapeY"){fill=gfx.makeParameters(gfx.defaultLinearGradient,fill);fill.space=_5ed;if(_5ed==="plot"||_5ed==="shapeX"){var span=dim.height-_5ec.t-_5ec.b;fill.y1=_5ec.t+span*fill.y1/100;fill.y2=_5ec.t+span*fill.y2/100;}if(_5ed==="plot"||_5ed==="shapeY"){var span=dim.width-_5ec.l-_5ec.r;fill.x1=_5ec.l+span*fill.x1/100;fill.x2=_5ec.l+span*fill.x2/100;}}break;case "radial":if(_5ed==="plot"){fill=gfx.makeParameters(gfx.defaultRadialGradient,fill);fill.space=_5ed;var _5ee=dim.width-_5ec.l-_5ec.r,_5ef=dim.height-_5ec.t-_5ec.b;fill.cx=_5ec.l+_5ee*fill.cx/100;fill.cy=_5ec.t+_5ef*fill.cy/100;fill.r=fill.r*Math.sqrt(_5ee*_5ee+_5ef*_5ef)/200;}break;case "pattern":if(_5ed==="plot"||_5ed==="shapeX"||_5ed==="shapeY"){fill=gfx.makeParameters(gfx.defaultPattern,fill);fill.space=_5ed;if(_5ed==="plot"||_5ed==="shapeX"){var span=dim.height-_5ec.t-_5ec.b;fill.y=_5ec.t+span*fill.y/100;fill.height=span*fill.height/100;}if(_5ed==="plot"||_5ed==="shapeY"){var span=dim.width-_5ec.l-_5ec.r;fill.x=_5ec.l+span*fill.x/100;fill.width=span*fill.width/100;}}break;}return fill;},_shapeFill:function(fill,bbox){if(!fill||!fill.space){return fill;}var _5f0=fill.space;switch(fill.type){case "linear":if(_5f0==="shape"||_5f0==="shapeX"||_5f0==="shapeY"){fill=gfx.makeParameters(gfx.defaultLinearGradient,fill);fill.space=_5f0;if(_5f0==="shape"||_5f0==="shapeX"){var span=bbox.width;fill.x1=bbox.x+span*fill.x1/100;fill.x2=bbox.x+span*fill.x2/100;}if(_5f0==="shape"||_5f0==="shapeY"){var span=bbox.height;fill.y1=bbox.y+span*fill.y1/100;fill.y2=bbox.y+span*fill.y2/100;}}break;case "radial":if(_5f0==="shape"){fill=gfx.makeParameters(gfx.defaultRadialGradient,fill);fill.space=_5f0;fill.cx=bbox.x+bbox.width/2;fill.cy=bbox.y+bbox.height/2;fill.r=fill.r*bbox.width/200;}break;case "pattern":if(_5f0==="shape"||_5f0==="shapeX"||_5f0==="shapeY"){fill=gfx.makeParameters(gfx.defaultPattern,fill);fill.space=_5f0;if(_5f0==="shape"||_5f0==="shapeX"){var span=bbox.width;fill.x=bbox.x+span*fill.x/100;fill.width=span*fill.width/100;}if(_5f0==="shape"||_5f0==="shapeY"){var span=bbox.height;fill.y=bbox.y+span*fill.y/100;fill.height=span*fill.height/100;}}break;}return fill;},_pseudoRadialFill:function(fill,_5f1,_5f2,_5f3,end){if(!fill||fill.type!=="radial"||fill.space!=="shape"){return fill;}var _5f4=fill.space;fill=gfx.makeParameters(gfx.defaultRadialGradient,fill);fill.space=_5f4;if(arguments.length<4){fill.cx=_5f1.x;fill.cy=_5f1.y;fill.r=fill.r*_5f2/100;return fill;}var _5f5=arguments.length<5?_5f3:(end+_5f3)/2;return {type:"linear",x1:_5f1.x,y1:_5f1.y,x2:_5f1.x+fill.r*_5f2*Math.cos(_5f5)/100,y2:_5f1.y+fill.r*_5f2*Math.sin(_5f5)/100,colors:fill.colors};return fill;}});});},"esri/PopupBase":function(){define(["dijit","dojo","dojox"],function(_5f6,dojo,_5f7){dojo.provide("esri.PopupBase");dojo.declare("esri.PopupBase",null,{onSetFeatures:function(){},onClearFeatures:function(){},onSelectionChange:function(){},onDfdComplete:function(){var _5f8=this._marked;if(_5f8){this._marked=null;this.showClosestFirst(_5f8);}},initialize:function(){this.count=0;this.selectedIndex=-1;},cleanup:function(){this.features=this.deferreds=null;},setFeatures:function(arg){if(!arg||!arg.length){return;}this.clearFeatures();var _5f9,_5fa;if(arg[0] instanceof dojo.Deferred){_5fa=arg;}else{_5f9=arg;}if(_5f9){this._updateFeatures(null,_5f9);}else{this.deferreds=_5fa;_5fa=_5fa.slice(0);dojo.forEach(_5fa,function(dfd){dfd.addBoth(dojo.hitch(this,this._updateFeatures,dfd));},this);}},clearFeatures:function(){this.features=this.deferreds=this._marked=null;this.count=0;var _5fb=this.selectedIndex;this.selectedIndex=-1;if(_5fb>-1){this.onSelectionChange();}this.onClearFeatures();},getSelectedFeature:function(){var _5fc=this.features;if(_5fc){return _5fc[this.selectedIndex];}},select:function(_5fd){if(_5fd<0||_5fd>=this.count){return;}this.selectedIndex=_5fd;this.onSelectionChange();},enableHighlight:function(map){this._highlighted=map.graphics.add(new esri.Graphic(new esri.geometry.Point(0,0,map.spatialReference)));this._highlighted.hide();var ESYM=esri.symbol;if(!this.markerSymbol){var _5fe=(this.markerSymbol=new ESYM.SimpleMarkerSymbol());_5fe.setStyle(ESYM.SimpleMarkerSymbol.STYLE_TARGET);_5fe._setDim(16,16,7);_5fe.setOutline(new ESYM.CartographicLineSymbol(ESYM.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,255,255]),2,ESYM.CartographicLineSymbol.CAP_ROUND,ESYM.CartographicLineSymbol.JOIN_ROUND));_5fe.setColor(new dojo.Color([0,0,0,0]));}if(!this.lineSymbol){this.lineSymbol=new ESYM.SimpleLineSymbol(ESYM.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,255,255]),2);}if(!this.fillSymbol){this.fillSymbol=new ESYM.SimpleFillSymbol(ESYM.SimpleFillSymbol.STYLE_NULL,new ESYM.SimpleLineSymbol(ESYM.SimpleLineSymbol.STYLE_SOLID,new dojo.Color([0,255,255]),2),new dojo.Color([0,0,0,0]));}},disableHighlight:function(map){var _5ff=this._highlighted;if(_5ff){_5ff.hide();map.graphics.remove(_5ff);delete this._highlighted;}this.markerSymbol=this.lineSymbol=this.fillSymbol=null;},showHighlight:function(){if(this._highlighted&&this.features&&this.features[this.selectedIndex]){this._highlighted.show();}},hideHighlight:function(){if(this._highlighted){this._highlighted.hide();}},updateHighlight:function(map,_600){var _601=_600.geometry,_602=this._highlighted;if(!_601||!_602){return;}_602.hide();if(!_602.getLayer()&&map){map.graphics.add(_602);}_602.setGeometry(esri.geometry.fromJson(_601.toJson()));var _603;switch(_601.type){case "point":case "multipoint":_603=this.markerSymbol;_603.setOffset(0,0);_603.setAngle(0);var lyr=_600.getLayer();if(lyr){var _604=lyr._getSymbol(_600),_605,_606,xoff=0,yoff=0,_607=0;if(_604){switch(_604.type){case "simplemarkersymbol":_605=_606=(_604.size||0);break;case "picturemarkersymbol":_605=(_604.width||0);_606=(_604.height||0);break;}xoff=_604.xoffset||0;yoff=_604.yoffset||0;_607=_604.angle||0;}if(_605&&_606){_603._setDim(_605+1,_606+1,7);}_603.setOffset(xoff,yoff);_603.setAngle(_607);}break;case "polyline":_603=this.lineSymbol;break;case "polygon":_603=this.fillSymbol;break;}_602.setSymbol(_603);},showClosestFirst:function(_608){var _609=this.features;if(_609&&_609.length){if(_609.length>1){var i,_60a=Infinity,_60b=-1,geom,_60c=esri.geometry.getLength,_60d;for(i=_609.length-1;i>=0;i--){geom=_609[i].geometry;_60d=0;try{_60d=(geom.type==="point")?_60c(_608,geom):_60c(_608,geom.getExtent().getCenter());}catch(e){}if(_60d>0&&_60d<_60a){_60a=_60d;_60b=i;}}if(_60b>0){_609.splice(0,0,_609.splice(_60b,1)[0]);this.select(0);}}}else{if(this.deferreds){this._marked=_608;}}},_unbind:function(dfd){var _60e=dojo.indexOf(this.deferreds,dfd);if(_60e===-1){return;}this.deferreds.splice(_60e,1);if(!this.deferreds.length){this.deferreds=null;return 2;}return 1;},_updateFeatures:function(dfd,_60f){if(dfd){if(this.deferreds){var res=this._unbind(dfd);if(!res){return;}if(_60f&&_60f instanceof Error){this.onDfdComplete(_60f);if(res===2){this.onSetFeatures();}return;}if(_60f&&_60f.length){if(!this.features){this.features=_60f;this.count=_60f.length;this.selectedIndex=0;this.onDfdComplete();if(res===2){this.onSetFeatures();}this.select(0);}else{var _610=dojo.filter(_60f,function(_611){return dojo.indexOf(this.features,_611)===-1;},this);this.features=this.features.concat(_610);this.count=this.features.length;this.onDfdComplete();if(res===2){this.onSetFeatures();}}}else{this.onDfdComplete();if(res===2){this.onSetFeatures();}}}}else{this.features=_60f;this.count=_60f.length;this.selectedIndex=0;this.onSetFeatures();this.select(0);}}});dojo.declare("esri.PopupInfoTemplate",[esri.InfoTemplate],{"-chains-":{constructor:"manual"},initialize:function(json){if(!json){return;}this.info=json;this.title=this.getTitle;this.content=this.getContent;var _612=(this._fieldLabels={}),_613=(this._fieldsMap={});if(json.fieldInfos){dojo.forEach(json.fieldInfos,function(_614){_612[_614.fieldName]=_614.label;_613[_614.fieldName]=_614;});}},toJson:function(){return dojo.fromJson(dojo.toJson(this.info));},getTitle:function(){},getContent:function(){},getComponents:function(_615){var _616=this.info,_617=_615.getLayer(),_618=dojo.clone(_615.attributes)||{},_619=dojo.clone(_618),_61a=_616.fieldInfos,_61b="",_61c="",_61d,_61e,_61f,_620=_617&&_617._getDateOpts&&_617._getDateOpts().properties,_621={dateFormat:{properties:_620,formatter:"DateFormat"+this._dateFormats["shortDateShortTime"]}};if(_61a){dojo.forEach(_61a,function(_622){var _623=_622.fieldName,val=_619[_623];_619[_623]=this._formatValue(val,_623,_621);if(_620&&_622.format&&_622.format.dateFormat){var pos=dojo.indexOf(_620,_623);if(pos>-1){_620.splice(pos,1);}}},this);}if(_617){var _624=_617.types,_625=_617.typeIdField,_626=_625&&_618[_625];for(_61e in _618){_61f=_618[_61e];if(esri._isDefined(_61f)){var _627=this._getDomainName(_617,_624,_626,_61e,_61f);if(esri._isDefined(_627)){_619[_61e]=_627;}else{if(_61e===_625){var _628=this._getTypeName(_617,_61f);if(esri._isDefined(_628)){_619[_61e]=_628;}}}}}}if(_616.title){_61b=dojo.trim(esri.substitute(_619,this._fixTokens(_616.title),_621)||"");}if(_616.description){_61c=dojo.trim(esri.substitute(_619,this._fixTokens(_616.description),_621)||"");}if(_61a){_61d=[];dojo.forEach(_61a,function(_629){_61e=_629.fieldName;if(_61e&&_629.visible){_61d.push([_629.label||_61e,esri.substitute(_619,"${"+_61e+"}",_621)||""]);}});}var _62a,_62b;if(_616.mediaInfos){_62a=[];dojo.forEach(_616.mediaInfos,function(_62c){_62b=0;_61f=_62c.value;switch(_62c.type){case "image":var url=_61f.sourceURL;url=url&&dojo.trim(esri.substitute(_618,this._fixTokens(url)));_62b=!!url;break;case "piechart":case "linechart":case "columnchart":case "barchart":_62b=dojo.some(_61f.fields,function(_62d){return esri._isDefined(_618[_62d]);});break;default:return;}if(_62b){_62c=dojo.clone(_62c);_61f=_62c.value;_62c.title=_62c.title?dojo.trim(esri.substitute(_619,this._fixTokens(_62c.title),_621)||""):"";_62c.caption=_62c.caption?dojo.trim(esri.substitute(_619,this._fixTokens(_62c.caption),_621)||""):"";if(_62c.type==="image"){_61f.sourceURL=esri.substitute(_618,this._fixTokens(_61f.sourceURL));if(_61f.linkURL){_61f.linkURL=dojo.trim(esri.substitute(_618,this._fixTokens(_61f.linkURL))||"");}}else{var _62e=_618[_61f.normalizeField]||0;_61f.fields=dojo.map(_61f.fields,function(_62f){var data=_618[_62f];data=(data===undefined)?null:data;if(data&&_62e){data=data/_62e;}return {y:data,tooltip:(this._fieldLabels[_62f]||_62f)+":<br/>"+this._formatValue(data,_62f,_621,!!_62e)};},this);}_62a.push(_62c);}},this);}return {title:_61b,description:_61c,fields:(_61d&&_61d.length)?_61d:null,mediaInfos:(_62a&&_62a.length)?_62a:null,formatted:_619,editSummary:(_617&&_617.getEditSummary)?_617.getEditSummary(_615):""};},getAttachments:function(_630){var _631=_630.getLayer(),_632=_630.attributes;if(this.info.showAttachments&&_631&&_631.hasAttachments&&_631.objectIdField){var oid=_632&&_632[_631.objectIdField];if(oid){return _631.queryAttachmentInfos(oid);}}},_dateFormats:{"shortDate":"(datePattern: 'M/d/y', selector: 'date')","longMonthDayYear":"(datePattern: 'MMMM d, y', selector: 'date')","dayShortMonthYear":"(datePattern: 'd MMM y', selector: 'date')","longDate":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')","shortDateShortTime":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')","shortDateShortTime24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","longMonthYear":"(datePattern: 'MMMM y', selector: 'date')","shortMonthYear":"(datePattern: 'MMM y', selector: 'date')","year":"(datePattern: 'y', selector: 'date')"},_fixTokens:function(_633){return _633.replace(/(\{[^\{\r\n]+\})/g,"$$$1");},_formatValue:function(val,_634,_635,_636){var _637=this._fieldsMap[_634],fmt=_637&&_637.format;if(!esri._isDefined(val)||!_637||!esri._isDefined(fmt)){return val;}var _638="",_639=[],_63a=fmt.hasOwnProperty("places")||fmt.hasOwnProperty("digitSeparator"),_63b=fmt.hasOwnProperty("digitSeparator")?fmt.digitSeparator:true;if(_63a){_638="NumberFormat";_639.push("places: "+((esri._isDefined(fmt.places)&&(!_636||fmt.places>0))?Number(fmt.places):"Infinity"));if(_639.length){_638+=("("+_639.join(",")+")");}}else{if(fmt.dateFormat){_638="DateFormat"+(this._dateFormats[fmt.dateFormat]||this._dateFormats["shortDateShortTime"]);}else{return val;}}var _63c=esri.substitute({"myKey":val},"${myKey:"+_638+"}",_635)||"";if(_63a&&!_63b){var _63d=dojo.i18n.getLocalization("dojo.cldr","number");if(_63d.group){_63c=_63c.replace(new RegExp("\\"+_63d.group,"g"),"");}}return _63c;},_getDomainName:function(_63e,_63f,_640,_641,_642){var _643,stop;if(_63f&&esri._isDefined(_640)){dojo.some(_63f,function(_644){if(_644.id==_640){_643=_644.domains&&_644.domains[_641];if(_643&&_643.type==="inherited"){_643=this._getLayerDomain(_63e,_641);stop=true;}return true;}return false;},this);}if(!stop&&!_643){_643=this._getLayerDomain(_63e,_641);}if(_643&&_643.codedValues){var _645;dojo.some(_643.codedValues,function(_646){if(_646.code==_642){_645=_646.name;return true;}return false;});return _645;}},_getLayerDomain:function(_647,_648){var _649=_647.fields;if(_649){var _64a;dojo.some(_649,function(_64b){if(_64b.name===_648){_64a=_64b.domain;return true;}return false;});return _64a;}},_getTypeName:function(_64c,id){var _64d=_64c.types;if(_64d){var _64e;dojo.some(_64d,function(_64f){if(_64f.id==id){_64e=_64f.name;return true;}return false;});return _64e;}}});});},"dojox/charting/axis2d/Base":function(){define("dojox/charting/axis2d/Base",["dojo/_base/declare","../Element"],function(_650,_651){return _650("dojox.charting.axis2d.Base",_651,{constructor:function(_652,_653){this.vertical=_653&&_653.vertical;},clear:function(){return this;},initialized:function(){return false;},calculate:function(min,max,span){return this;},getScaler:function(){return null;},getTicks:function(){return null;},getOffsets:function(){return {l:0,r:0,t:0,b:0};},render:function(dim,_654){this.dirty=false;return this;}});});},"dojox/lang/functional/scan":function(){define("dojox/lang/functional/scan",["dojo/_base/kernel","dojo/_base/lang","./lambda"],function(d,_655,df){var _656={};d.mixin(df,{scanl:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t,n,i;if(d.isArray(a)){t=new Array((n=a.length)+1);t[0]=z;for(i=0;i<n;z=f.call(o,z,a[i],i,a),t[++i]=z){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){t=[z];for(i=0;a.hasNext();t.push(z=f.call(o,z,a.next(),i++,a))){}}else{t=[z];for(i in a){if(!(i in _656)){t.push(z=f.call(o,z,a[i],i,a));}}}}return t;},scanl1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var t,n,z,_657=true;if(d.isArray(a)){t=new Array(n=a.length);t[0]=z=a[0];for(var i=1;i<n;t[i]=z=f.call(o,z,a[i],i,a),++i){}}else{if(typeof a.hasNext=="function"&&typeof a.next=="function"){if(a.hasNext()){t=[z=a.next()];for(i=1;a.hasNext();t.push(z=f.call(o,z,a.next(),i++,a))){}}}else{for(i in a){if(!(i in _656)){if(_657){t=[z=a[i]];_657=false;}else{t.push(z=f.call(o,z,a[i],i,a));}}}}}return t;},scanr:function(a,f,z,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var n=a.length,t=new Array(n+1),i=n;t[n]=z;for(;i>0;--i,z=f.call(o,z,a[i],i,a),t[i]=z){}return t;},scanr1:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||d.global;f=df.lambda(f);var n=a.length,t=new Array(n),z=a[n-1],i=n-1;t[i]=z;for(;i>0;--i,z=f.call(o,z,a[i],i,a),t[i]=z){}return t;}});});},"esri/layers/wms":function(){define(["dijit","dojo","dojox","dojo/require!esri/layers/dynamic,esri/layers/agscommon"],function(_658,dojo,_659){dojo.provide("esri.layers.wms");dojo.require("esri.layers.dynamic");dojo.require("esri.layers.agscommon");dojo.declare("esri.layers.WMSLayer",[esri.layers.DynamicMapServiceLayer],{_CRS_TO_EPSG:{84:4326,83:4269,27:4267},_REVERSED_LAT_LONG_RANGES:[[4001,4999],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3416,3416],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]],_WEB_MERCATOR:[102100,3857,102113,900913],_WORLD_MERCATOR:[3395,54004],allExtents:[],constructor:function(url,_65a){url=this._stripParameters(url,["version","service","request","bbox","format","height","width","layers","srs","crs","styles","transparent","bgcolor","exceptions","time","elevation","sld","wfs"]);this.url=url;this._url=esri.urlToObject(url);this._getCapabilitiesURL=url;this._initLayer=dojo.hitch(this,this._initLayer);this._parseCapabilities=dojo.hitch(this,this._parseCapabilities);this._getCapabilitiesError=dojo.hitch(this,this._getCapabilitiesError);if(_65a){this.imageFormat=this._getImageFormat(_65a.format);this.imageTransparency=(_65a.transparent===false)?false:true;this.visibleLayers=_65a.visibleLayers?_65a.visibleLayers:[];if(_65a.resourceInfo){this._readResourceInfo(_65a.resourceInfo);}else{this._getCapabilities();}}else{this.imageFormat="image/png";this.imageTransparency=true;this.visibleLayers=[];this._getCapabilities();}this._blankImageURL=require.toUrl("esri/layers")+"/../../../images/pixel.png";},setVisibleLayers:function(_65b){_65b=this._checkVisibleLayersList(_65b);this.visibleLayers=(_65b)?_65b:[];this.refresh(true);},setImageFormat:function(_65c){this.imageFormat=this._getImageFormat(_65c);this.refresh(true);},setImageTransparency:function(_65d){this.imageTransparency=_65d;this.refresh(true);},getImageUrl:function(_65e,_65f,_660,_661){if(!this.visibleLayers||this.visibleLayers.length===0){_661(this._blankImageURL);return;}var wkid=_65e.spatialReference.wkid;if(dojo.some(this._WEB_MERCATOR,function(el){return el==wkid;})){var _662=dojo.filter(this.spatialReferences,function(el){return (dojo.some(this._WEB_MERCATOR,function(el2){return el2==el;}));},this);if(_662.length==0){_662=dojo.filter(this.spatialReferences,function(el){return (dojo.some(this._WORLD_MERCATOR,function(el2){return el2==el;}));},this);}if(_662.length>0){wkid=_662[0];}else{wkid=this._WEB_MERCATOR[0];}}var list=dojo.filter(this.spatialReferences,function(el){return el!==wkid;});this.spatialReferences=list;this.spatialReferences.unshift(wkid);var xmin=_65e.xmin;var xmax=_65e.xmax;var ymin=_65e.ymin;var ymax=_65e.ymax;var _663={};_663.SERVICE="WMS";_663.REQUEST="GetMap";_663.FORMAT=this.imageFormat;_663.TRANSPARENT=this.imageTransparency?"TRUE":"FALSE";_663.STYLES="";_663.VERSION=this.version;_663.LAYERS=this.visibleLayers?this.visibleLayers.toString():null;_663.WIDTH=_65f;_663.HEIGHT=_660;if(this.maxWidth<_65f){_663.WIDTH=this.maxWidth;}if(this.maxHeight<_660){_663.HEIGHT=this.maxHeight;}var _664=wkid?wkid:NaN;if(!isNaN(_664)){if(this.version=="1.3.0"){_663.CRS="EPSG:"+_664;}else{_663.SRS="EPSG:"+_664;}}if(this.version=="1.3.0"&&this._useLatLong(_664)){_663.BBOX=ymin+","+xmin+","+ymax+","+xmax;}else{_663.BBOX=xmin+","+ymin+","+xmax+","+ymax;}var _665=this.getMapURL;_665+=(_665.indexOf("?")==-1)?"?":"";for(var key in _663){_665+=(_665.substring(_665.length-1,_665.length)=="?")?"":"&";_665+=key+"="+_663[key];}_661(_665);},_initLayer:function(_666,io){this.spatialReference=new esri.SpatialReference(this.extent.spatialReference);this.initialExtent=new esri.geometry.Extent(this.extent);this.fullExtent=new esri.geometry.Extent(this.extent);this.visibleLayers=this._checkVisibleLayersList(this.visibleLayers);this.loaded=true;this.onLoad(this);var _667=this._loadCallback;if(_667){delete this._loadCallback;_667(this);}},_readResourceInfo:function(_668){if(!_668.extent){console.error("esri.layers.WMSLayer: unable to find the 'extent' property in resourceInfo");return;}if(!_668.layerInfos){console.error("esri.layers.WMSLayer: unable to find the 'layerInfos' property in resourceInfo");return;}this.extent=_668.extent;this.allExtents[0]=_668.extent;this.layerInfos=_668.layerInfos;this.description=_668.description?_668.description:"";this.copyright=_668.copyright?_668.copyright:"";this.title=_668.title?_668.title:"";this.getMapURL=_668.getMapURL?_668.getMapURL:this._getCapabilitiesURL;this.version=_668.version?_668.version:"1.3.0";this.maxWidth=_668.maxWidth?_668.maxWidth:5000;this.maxHeight=_668.maxHeight?_668.maxHeight:5000;this.spatialReferences=_668.spatialReferences?_668.spatialReferences:[];this.imageFormat=this._getImageFormat(_668.format);this._initLayer();},_getCapabilities:function(){var _669=this._url.query?this._url.query:{};_669.SERVICE="WMS";_669.REQUEST="GetCapabilities";var uri=this._url.path+"?";for(var key in _669){uri+=(uri.substring(uri.length-1,uri.length)=="?")?"":"&";uri+=key+"="+_669[key];}var _66a=esri.request({url:uri,handleAs:"xml",load:this._parseCapabilities,error:this._getCapabilitiesError},{usePost:false});},_parseCapabilities:function(xml){if(!xml){this.onError("GetCapabilities request for "+this._getCapabilitiesURL+" failed. (Response is null.)");return;}this.version=this._getAttributeValue("WMS_Capabilities","version",xml,null);if(!this.version){this.version=this._getAttributeValue("WMT_MS_Capabilities","version",xml,"1.3.0");}var _66b=this._getTag("Service",xml);this.title=this._getTagValue("Title",_66b,"");if(!this.title||this.title.length==0){this.title=this._getTagValue("Name",_66b,"");}this.copyright=this._getTagValue("AccessConstraints",_66b,"");this.description=this._getTagValue("Abstract",_66b,"");this.maxWidth=parseInt(this._getTagValue("MaxWidth",_66b,5000));this.maxHeight=parseInt(this._getTagValue("MaxHeight",_66b,5000));var _66c=this._getTag("Layer",xml);if(!_66c){this._getCapabilitiesError({"error":{"message":"Response does not contain any layers."}});return;}var _66d=this._getLayerInfo(_66c);if(_66d){this.layerInfos=_66d.subLayers;if(!this.layerInfos||this.layerInfos.length==0){this.layerInfos=[_66d];}this.extent=_66d.extent;this.allExtents=_66d.allExtents;this.spatialReferences=_66d.spatialReferences;if(this.spatialReferences.length==0&&this.layerInfos.length>0){this.spatialReferences=this.layerInfos[0].spatialReferences;}}this.getMapURL=this._getCapabilitiesURL;var _66e=dojo.query("DCPType",this._getTag("GetMap",xml));if(_66e&&_66e.length>0){var _66f=dojo.query("HTTP",_66e[0]);if(_66f&&_66f.length>0){var _670=dojo.query("Get",_66f[0]);if(_670&&_670.length>0){var _671=this._getAttributeValue("OnlineResource","xlink:href",_670[0],null);if(_671){if(_671.indexOf("&")==(_671.length-1)){_671=_671.substring(0,_671.length-1);}this.getMapURL=_671;}}}}this.getMapFormats=[];if(dojo.query("Operation",xml).length==0){dojo.forEach(dojo.query("Format",this._getTag("GetMap",xml)),function(_672){this.getMapFormats.push(_672.text?_672.text:_672.textContent);},this);}else{dojo.forEach(dojo.query("Operation",xml),function(_673){if(_673.getAttribute("name")=="GetMap"){dojo.forEach(dojo.query("Format",_673),function(_674){this.getMapFormats.push(_674.text?_674.text:_674.textContent);},this);}},this);}if(!dojo.some(this.getMapFormats,function(el){return el.indexOf(this.imageFormat)>-1;},this)){this.imageFormat=this.getMapFormats[0];}this._initLayer();},_getCapabilitiesError:function(_675,io){this.onError("GetCapabilities request for "+this._getCapabilitiesURL+" failed. ("+dojo.toJson(_675)+")");},_getLayerInfo:function(_676){if(!_676){return null;}var _677=new esri.layers.WMSLayerInfo();_677.name="";_677.title="";_677.description="";_677.allExtents=[];_677.spatialReferences=[];_677.subLayers=[];var _678=this._getTag("LatLonBoundingBox",_676);if(_678){_677.allExtents[0]=this._getExtent(_678,4326);}var _679=this._getTag("EX_GeographicBoundingBox",_676);if(_679){var _67a=new esri.geometry.Extent(0,0,0,0,new esri.SpatialReference({wkid:4326}));_67a.xmin=parseFloat(this._getTagValue("westBoundLongitude",_679,0));_67a.ymin=parseFloat(this._getTagValue("southBoundLatitude",_679,0));_67a.xmax=parseFloat(this._getTagValue("eastBoundLongitude",_679,0));_67a.ymax=parseFloat(this._getTagValue("northBoundLatitude",_679,0));_677.allExtents[0]=_67a;}_677.extent=_677.allExtents[0];var _67b=(dojo.indexOf(["1.0.0","1.1.0","1.1.1"],this.version)>-1)?"SRS":"CRS";dojo.forEach(_676.childNodes,function(_67c){if(_67c.nodeName=="Name"){_677.name=(_67c.text?_67c.text:_67c.textContent)||"";}else{if(_67c.nodeName=="Title"){_677.title=(_67c.text?_67c.text:_67c.textContent)||"";}else{if(_67c.nodeName=="Abstract"){_677.description=(_67c.text?_67c.text:_67c.textContent)||"";}else{if(_67c.nodeName=="BoundingBox"){srAttr=_67c.getAttribute(_67b);if(srAttr&&srAttr.indexOf("EPSG:")===0){wkid=parseInt(srAttr.substring(5));if(wkid!==0&&!isNaN(wkid)){var _67d;if(this.version=="1.3.0"){_67d=this._getExtent(_67c,wkid,this._useLatLong(wkid));}else{_67d=this._getExtent(_67c,wkid);}_677.allExtents[wkid]=_67d;if(!_677.extent){_677.extent=_67d;}}}else{if(srAttr&&srAttr.indexOf("CRS:")===0){wkid=parseInt(srAttr.substring(4));if(wkid!==0&&!isNaN(wkid)){if(this._CRS_TO_EPSG[wkid]){wkid=this._CRS_TO_EPSG[wkid];}_677.allExtents[wkid]=this._getExtent(_67c,wkid);}}else{wkid=parseInt(srAttr);if(wkid!==0&&!isNaN(wkid)){_677.allExtents[wkid]=this._getExtent(_67c,wkid);}}}}else{if(_67c.nodeName==_67b){var _67e=_67c.text?_67c.text:_67c.textContent;var arr=_67e.split(" ");dojo.forEach(arr,function(val){if(val.indexOf(":")>-1){val=parseInt(val.split(":")[1]);}else{val=parseInt(val);}if(val!==84&&val!==0&&!isNaN(val)){if(!dojo.some(_677.spatialReferences,function(el){return (el==val);})){_677.spatialReferences.push(val);}}},this);}else{if(_67c.nodeName=="Style"){var _67f=this._getTag("LegendURL",_67c);if(_67f){var _680=this._getTag("OnlineResource",_67f);if(_680){_677.legendURL=_680.getAttribute("xlink:href");}}}else{if(_67c.nodeName==="Layer"){_677.subLayers.push(this._getLayerInfo(_67c));}}}}}}}},this);return _677;},_getImageFormat:function(_681){var _682=_681?_681.toLowerCase():"";switch(_682){case "jpg":return "image/jpeg";case "bmp":return "image/bmp";case "gif":return "image/gif";case "svg":return "image/svg+xml";default:return "image/png";}},getImageFormat:function(){var _683=this.imageFormat?this.imageFormat.toLowerCase():"";switch(_683){case "image/jpeg":return "jpg";case "image/bmp":return "bmp";case "image/gif":return "gif";case "image/svg+xml":return "svg";default:return "png";}},_getExtent:function(_684,wkid,_685){var _686;if(_684){_686=new esri.geometry.Extent();var minx=parseFloat(_684.getAttribute("minx"));var miny=parseFloat(_684.getAttribute("miny"));var maxx=parseFloat(_684.getAttribute("maxx"));var maxy=parseFloat(_684.getAttribute("maxy"));if(_685){_686.xmin=isNaN(miny)?((-1)*Number.MAX_VALUE):miny;_686.ymin=isNaN(minx)?((-1)*Number.MAX_VALUE):minx;_686.xmax=isNaN(maxy)?Number.MAX_VALUE:maxy;_686.ymax=isNaN(maxx)?Number.MAX_VALUE:maxx;}else{_686.xmin=isNaN(minx)?((-1)*Number.MAX_VALUE):minx;_686.ymin=isNaN(miny)?((-1)*Number.MAX_VALUE):miny;_686.xmax=isNaN(maxx)?Number.MAX_VALUE:maxx;_686.ymax=isNaN(maxy)?Number.MAX_VALUE:maxy;}_686.spatialReference=new esri.SpatialReference({wkid:wkid});}return _686;},_useLatLong:function(wkid){var _687;for(var i=0;i<this._REVERSED_LAT_LONG_RANGES.length;i++){var _688=this._REVERSED_LAT_LONG_RANGES[i];if(wkid>=_688[0]&&wkid<=_688[1]){_687=true;break;}}return _687;},_getTag:function(_689,xml){var tags=dojo.query(_689,xml);if(tags&&tags.length>0){return tags[0];}else{return null;}},_getTagValue:function(_68a,xml,_68b){var _68c=dojo.query(_68a,xml);if(_68c&&_68c.length>0){if(_68c[0].text){return _68c[0].text;}else{return _68c[0].textContent;}}else{return _68b;}},_getAttributeValue:function(_68d,_68e,xml,_68f){var _690=dojo.query(_68d,xml);if(_690&&_690.length>0){return _690[0].getAttribute(_68e);}else{return _68f;}},_checkVisibleLayersList:function(_691){if(_691&&_691.length>0&&this.layerInfos&&this.layerInfos.length>0){if((typeof _691[0])=="number"){var list=[];dojo.forEach(_691,function(pos){if(pos<this.layerInfos.length){list.push(this.layerInfos[pos].name);}},this);_691=list;}}return _691;},_stripParameters:function(url,_692){var obj=esri.urlToObject(url);qs=[];for(var prop in obj.query){if(dojo.indexOf(_692,prop.toLowerCase())===-1){qs.push(prop+"="+obj.query[prop]);}}return obj.path+(qs.length?("?"+qs.join("&")):"");}});dojo.declare("esri.layers.WMSLayerInfo",null,{name:null,title:null,description:null,extent:null,legendURL:null,subLayers:[],allExtents:[],spatialReferences:[],constructor:function(_693){if(_693){this.name=_693.name;this.title=_693.title;this.description=_693.description;this.extent=_693.extent;this.legendURL=_693.legendURL;this.subLayers=_693.subLayers?_693.subLayers:[];this.allExtents=_693.allExtents?_693.allExtents:[];this.spatialReferences=_693.spatialReferences?_693.spatialReferences:[];}},clone:function(){var info={name:this.name,title:this.title,description:this.description,legendURL:this.legendURL};if(this.extent){info.extent=this.extent.getExtent();}info.subLayers=[];dojo.forEach(this.subLayers,function(_694){info.subLayers.push(_694.clone());});info.allExtents=[];for(var wkid in this.allExtents){wkid=parseInt(wkid);if(!isNaN(wkid)){info.allExtents[wkid]=this.allExtents[wkid].getExtent();}}info.spatialReferences=[];dojo.forEach(this.spatialReferences,function(wkid){info.spatialReferences.push(wkid);});return info;}});});},"dojox/charting/scaler/primitive":function(){define("dojox/charting/scaler/primitive",["dojo/_base/lang"],function(lang){var _695=lang.getObject("dojox.charting.scaler.primitive",true);return lang.mixin(_695,{buildScaler:function(min,max,span,_696){if(min==max){min-=0.5;max+=0.5;}return {bounds:{lower:min,upper:max,from:min,to:max,scale:span/(max-min),span:span},scaler:_695};},buildTicks:function(_697,_698){return {major:[],minor:[],micro:[]};},getTransformerFromModel:function(_699){var _69a=_699.bounds.from,_69b=_699.bounds.scale;return function(x){return (x-_69a)*_69b;};},getTransformerFromPlot:function(_69c){var _69d=_69c.bounds.from,_69e=_69c.bounds.scale;return function(x){return x/_69e+_69d;};}});});},"dojo/window":function(){define(["./_base/lang","./_base/sniff","./_base/window","./dom","./dom-geometry","./dom-style"],function(lang,has,_69f,dom,geom,_6a0){var _6a1=lang.getObject("dojo.window",true);_6a1.getBox=function(){var _6a2=(_69f.doc.compatMode=="BackCompat")?_69f.body():_69f.doc.documentElement,_6a3=geom.docScroll(),w,h;if(has("touch")){var _6a4=_69f.doc.parentWindow||_69f.doc.defaultView;w=_6a4.innerWidth||_6a2.clientWidth;h=_6a4.innerHeight||_6a2.clientHeight;}else{w=_6a2.clientWidth;h=_6a2.clientHeight;}return {l:_6a3.x,t:_6a3.y,w:w,h:h};};_6a1.get=function(doc){if(has("ie")&&_6a1!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc.parentWindow||doc.defaultView;};_6a1.scrollIntoView=function(node,pos){try{node=dom.byId(node);var doc=node.ownerDocument||_69f.doc,body=doc.body||_69f.body(),html=doc.documentElement||body.parentNode,isIE=has("ie"),isWK=has("webkit");if((!(has("mozilla")||isIE||isWK||has("opera"))||node==body||node==html)&&(typeof node.scrollIntoView!="undefined")){node.scrollIntoView(false);return;}var _6a5=doc.compatMode=="BackCompat",_6a6=(isIE>=9&&node.ownerDocument.parentWindow.frameElement)?((html.clientHeight>0&&html.clientWidth>0&&(body.clientHeight==0||body.clientWidth==0||body.clientHeight>html.clientHeight||body.clientWidth>html.clientWidth))?html:body):(_6a5?body:html),_6a7=isWK?body:_6a6,_6a8=_6a6.clientWidth,_6a9=_6a6.clientHeight,rtl=!geom.isBodyLtr(),_6aa=pos||geom.position(node),el=node.parentNode,_6ab=function(el){return ((isIE<=6||(isIE&&_6a5))?false:(_6a0.get(el,"position").toLowerCase()=="fixed"));};if(_6ab(node)){return;}while(el){if(el==body){el=_6a7;}var _6ac=geom.position(el),_6ad=_6ab(el);if(el==_6a7){_6ac.w=_6a8;_6ac.h=_6a9;if(_6a7==html&&isIE&&rtl){_6ac.x+=_6a7.offsetWidth-_6ac.w;}if(_6ac.x<0||!isIE){_6ac.x=0;}if(_6ac.y<0||!isIE){_6ac.y=0;}}else{var pb=geom.getPadBorderExtents(el);_6ac.w-=pb.w;_6ac.h-=pb.h;_6ac.x+=pb.l;_6ac.y+=pb.t;var _6ae=el.clientWidth,_6af=_6ac.w-_6ae;if(_6ae>0&&_6af>0){_6ac.w=_6ae;_6ac.x+=(rtl&&(isIE||el.clientLeft>pb.l))?_6af:0;}_6ae=el.clientHeight;_6af=_6ac.h-_6ae;if(_6ae>0&&_6af>0){_6ac.h=_6ae;}}if(_6ad){if(_6ac.y<0){_6ac.h+=_6ac.y;_6ac.y=0;}if(_6ac.x<0){_6ac.w+=_6ac.x;_6ac.x=0;}if(_6ac.y+_6ac.h>_6a9){_6ac.h=_6a9-_6ac.y;}if(_6ac.x+_6ac.w>_6a8){_6ac.w=_6a8-_6ac.x;}}var l=_6aa.x-_6ac.x,t=_6aa.y-Math.max(_6ac.y,0),r=l+_6aa.w-_6ac.w,bot=t+_6aa.h-_6ac.h;if(r*l>0){var s=Math[l<0?"max":"min"](l,r);if(rtl&&((isIE==8&&!_6a5)||isIE>=9)){s=-s;}_6aa.x+=el.scrollLeft;el.scrollLeft+=s;_6aa.x-=el.scrollLeft;}if(bot*t>0){_6aa.y+=el.scrollTop;el.scrollTop+=Math[t<0?"max":"min"](t,bot);_6aa.y-=el.scrollTop;}el=(el!=_6a7)&&!_6ad&&el.parentNode;}}catch(error){console.error("scrollIntoView: "+error);node.scrollIntoView(false);}};return _6a1;});},"dojo/number":function(){define(["./_base/kernel","./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(dojo,lang,i18n,_6b0,_6b1,_6b2){lang.getObject("number",true,dojo);dojo.number.format=function(_6b3,_6b4){_6b4=lang.mixin({},_6b4||{});var _6b5=i18n.normalizeLocale(_6b4.locale),_6b6=i18n.getLocalization("dojo.cldr","number",_6b5);_6b4.customs=_6b6;var _6b7=_6b4.pattern||_6b6[(_6b4.type||"decimal")+"Format"];if(isNaN(_6b3)||Math.abs(_6b3)==Infinity){return null;}return dojo.number._applyPattern(_6b3,_6b7,_6b4);};dojo.number._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;dojo.number._applyPattern=function(_6b8,_6b9,_6ba){_6ba=_6ba||{};var _6bb=_6ba.customs.group,_6bc=_6ba.customs.decimal,_6bd=_6b9.split(";"),_6be=_6bd[0];_6b9=_6bd[(_6b8<0)?1:0]||("-"+_6be);if(_6b9.indexOf("%")!=-1){_6b8*=100;}else{if(_6b9.indexOf("‰")!=-1){_6b8*=1000;}else{if(_6b9.indexOf("¤")!=-1){_6bb=_6ba.customs.currencyGroup||_6bb;_6bc=_6ba.customs.currencyDecimal||_6bc;_6b9=_6b9.replace(/\u00a4{1,3}/,function(_6bf){var prop=["symbol","currency","displayName"][_6bf.length-1];return _6ba[prop]||_6ba.currency||"";});}else{if(_6b9.indexOf("E")!=-1){throw new Error("exponential notation not supported");}}}}var _6c0=dojo.number._numberPatternRE;var _6c1=_6be.match(_6c0);if(!_6c1){throw new Error("unable to find a number expression in pattern: "+_6b9);}if(_6ba.fractional===false){_6ba.places=0;}return _6b9.replace(_6c0,dojo.number._formatAbsolute(_6b8,_6c1[0],{decimal:_6bc,group:_6bb,places:_6ba.places,round:_6ba.round}));};dojo.number.round=function(_6c2,_6c3,_6c4){var _6c5=10/(_6c4||10);return (_6c5*+_6c2).toFixed(_6c3)/_6c5;};if((0.9).toFixed()==0){var _6c6=dojo.number.round;dojo.number.round=function(v,p,m){var d=Math.pow(10,-p||0),a=Math.abs(v);if(!v||a>=d||a*Math.pow(10,p+1)<5){d=0;}return _6c6(v,p,m)+(v>0?d:-d);};}dojo.number._formatAbsolute=function(_6c7,_6c8,_6c9){_6c9=_6c9||{};if(_6c9.places===true){_6c9.places=0;}if(_6c9.places===Infinity){_6c9.places=6;}var _6ca=_6c8.split("."),_6cb=typeof _6c9.places=="string"&&_6c9.places.indexOf(","),_6cc=_6c9.places;if(_6cb){_6cc=_6c9.places.substring(_6cb+1);}else{if(!(_6cc>=0)){_6cc=(_6ca[1]||[]).length;}}if(!(_6c9.round<0)){_6c7=dojo.number.round(_6c7,_6cc,_6c9.round);}var _6cd=String(Math.abs(_6c7)).split("."),_6ce=_6cd[1]||"";if(_6ca[1]||_6c9.places){if(_6cb){_6c9.places=_6c9.places.substring(0,_6cb);}var pad=_6c9.places!==undefined?_6c9.places:(_6ca[1]&&_6ca[1].lastIndexOf("0")+1);if(pad>_6ce.length){_6cd[1]=_6b1.pad(_6ce,pad,"0",true);}if(_6cc<_6ce.length){_6cd[1]=_6ce.substr(0,_6cc);}}else{if(_6cd[1]){_6cd.pop();}}var _6cf=_6ca[0].replace(",","");pad=_6cf.indexOf("0");if(pad!=-1){pad=_6cf.length-pad;if(pad>_6cd[0].length){_6cd[0]=_6b1.pad(_6cd[0],pad);}if(_6cf.indexOf("#")==-1){_6cd[0]=_6cd[0].substr(_6cd[0].length-pad);}}var _6d0=_6ca[0].lastIndexOf(","),_6d1,_6d2;if(_6d0!=-1){_6d1=_6ca[0].length-_6d0-1;var _6d3=_6ca[0].substr(0,_6d0);_6d0=_6d3.lastIndexOf(",");if(_6d0!=-1){_6d2=_6d3.length-_6d0-1;}}var _6d4=[];for(var _6d5=_6cd[0];_6d5;){var off=_6d5.length-_6d1;_6d4.push((off>0)?_6d5.substr(off):_6d5);_6d5=(off>0)?_6d5.slice(0,off):"";if(_6d2){_6d1=_6d2;delete _6d2;}}_6cd[0]=_6d4.reverse().join(_6c9.group||",");return _6cd.join(_6c9.decimal||".");};dojo.number.regexp=function(_6d6){return dojo.number._parseInfo(_6d6).regexp;};dojo.number._parseInfo=function(_6d7){_6d7=_6d7||{};var _6d8=i18n.normalizeLocale(_6d7.locale),_6d9=i18n.getLocalization("dojo.cldr","number",_6d8),_6da=_6d7.pattern||_6d9[(_6d7.type||"decimal")+"Format"],_6db=_6d9.group,_6dc=_6d9.decimal,_6dd=1;if(_6da.indexOf("%")!=-1){_6dd/=100;}else{if(_6da.indexOf("‰")!=-1){_6dd/=1000;}else{var _6de=_6da.indexOf("¤")!=-1;if(_6de){_6db=_6d9.currencyGroup||_6db;_6dc=_6d9.currencyDecimal||_6dc;}}}var _6df=_6da.split(";");if(_6df.length==1){_6df.push("-"+_6df[0]);}var re=_6b2.buildGroupRE(_6df,function(_6e0){_6e0="(?:"+_6b2.escapeString(_6e0,".")+")";return _6e0.replace(dojo.number._numberPatternRE,function(_6e1){var _6e2={signed:false,separator:_6d7.strict?_6db:[_6db,""],fractional:_6d7.fractional,decimal:_6dc,exponent:false},_6e3=_6e1.split("."),_6e4=_6d7.places;if(_6e3.length==1&&_6dd!=1){_6e3[1]="###";}if(_6e3.length==1||_6e4===0){_6e2.fractional=false;}else{if(_6e4===undefined){_6e4=_6d7.pattern?_6e3[1].lastIndexOf("0")+1:Infinity;}if(_6e4&&_6d7.fractional==undefined){_6e2.fractional=true;}if(!_6d7.places&&(_6e4<_6e3[1].length)){_6e4+=","+_6e3[1].length;}_6e2.places=_6e4;}var _6e5=_6e3[0].split(",");if(_6e5.length>1){_6e2.groupSize=_6e5.pop().length;if(_6e5.length>1){_6e2.groupSize2=_6e5.pop().length;}}return "("+dojo.number._realNumberRegexp(_6e2)+")";});},true);if(_6de){re=re.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(_6e6,_6e7,_6e8,_6e9){var prop=["symbol","currency","displayName"][_6e8.length-1],_6ea=_6b2.escapeString(_6d7[prop]||_6d7.currency||"");_6e7=_6e7?"[\\s\\xa0]":"";_6e9=_6e9?"[\\s\\xa0]":"";if(!_6d7.strict){if(_6e7){_6e7+="*";}if(_6e9){_6e9+="*";}return "(?:"+_6e7+_6ea+_6e9+")?";}return _6e7+_6ea+_6e9;});}return {regexp:re.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:_6db,decimal:_6dc,factor:_6dd};};dojo.number.parse=function(_6eb,_6ec){var info=dojo.number._parseInfo(_6ec),_6ed=(new RegExp("^"+info.regexp+"$")).exec(_6eb);if(!_6ed){return NaN;}var _6ee=_6ed[1];if(!_6ed[1]){if(!_6ed[2]){return NaN;}_6ee=_6ed[2];info.factor*=-1;}_6ee=_6ee.replace(new RegExp("["+info.group+"\\s\\xa0"+"]","g"),"").replace(info.decimal,".");return _6ee*info.factor;};dojo.number._realNumberRegexp=function(_6ef){_6ef=_6ef||{};if(!("places" in _6ef)){_6ef.places=Infinity;}if(typeof _6ef.decimal!="string"){_6ef.decimal=".";}if(!("fractional" in _6ef)||/^0/.test(_6ef.places)){_6ef.fractional=[true,false];}if(!("exponent" in _6ef)){_6ef.exponent=[true,false];}if(!("eSigned" in _6ef)){_6ef.eSigned=[true,false];}var _6f0=dojo.number._integerRegexp(_6ef),_6f1=_6b2.buildGroupRE(_6ef.fractional,function(q){var re="";if(q&&(_6ef.places!==0)){re="\\"+_6ef.decimal;if(_6ef.places==Infinity){re="(?:"+re+"\\d+)?";}else{re+="\\d{"+_6ef.places+"}";}}return re;},true);var _6f2=_6b2.buildGroupRE(_6ef.exponent,function(q){if(q){return "([eE]"+dojo.number._integerRegexp({signed:_6ef.eSigned})+")";}return "";});var _6f3=_6f0+_6f1;if(_6f1){_6f3="(?:(?:"+_6f3+")|(?:"+_6f1+"))";}return _6f3+_6f2;};dojo.number._integerRegexp=function(_6f4){_6f4=_6f4||{};if(!("signed" in _6f4)){_6f4.signed=[true,false];}if(!("separator" in _6f4)){_6f4.separator="";}else{if(!("groupSize" in _6f4)){_6f4.groupSize=3;}}var _6f5=_6b2.buildGroupRE(_6f4.signed,function(q){return q?"[-+]":"";},true);var _6f6=_6b2.buildGroupRE(_6f4.separator,function(sep){if(!sep){return "(?:\\d+)";}sep=_6b2.escapeString(sep);if(sep==" "){sep="\\s";}else{if(sep==" "){sep="\\s\\xa0";}}var grp=_6f4.groupSize,grp2=_6f4.groupSize2;if(grp2){var _6f7="(?:0|[1-9]\\d{0,"+(grp2-1)+"}(?:["+sep+"]\\d{"+grp2+"})*["+sep+"]\\d{"+grp+"})";return ((grp-grp2)>0)?"(?:"+_6f7+"|(?:0|[1-9]\\d{0,"+(grp-1)+"}))":_6f7;}return "(?:0|[1-9]\\d{0,"+(grp-1)+"}(?:["+sep+"]\\d{"+grp+"})*)";},true);return _6f5+_6f6;};return dojo.number;});},"dojox/gfx/fx":function(){define("dojox/gfx/fx",["dojo/_base/lang","./_base","./matrix","dojo/_base/Color","dojo/_base/array","dojo/_base/fx","dojo/_base/connect"],function(lang,g,m,_6f8,arr,fx,Hub){var fxg=g.fx={};function _6f9(_6fa,end){this.start=_6fa,this.end=end;};_6f9.prototype.getValue=function(r){return (this.end-this.start)*r+this.start;};function _6fb(_6fc,end,_6fd){this.start=_6fc,this.end=end;this.units=_6fd;};_6fb.prototype.getValue=function(r){return (this.end-this.start)*r+this.start+this.units;};function _6fe(_6ff,end){this.start=_6ff,this.end=end;this.temp=new _6f8();};_6fe.prototype.getValue=function(r){return _6f8.blendColors(this.start,this.end,r,this.temp);};function _700(_701){this.values=_701;this.length=_701.length;};_700.prototype.getValue=function(r){return this.values[Math.min(Math.floor(r*this.length),this.length-1)];};function _702(_703,def){this.values=_703;this.def=def?def:{};};_702.prototype.getValue=function(r){var ret=lang.clone(this.def);for(var i in this.values){ret[i]=this.values[i].getValue(r);}return ret;};function _704(_705,_706){this.stack=_705;this.original=_706;};_704.prototype.getValue=function(r){var ret=[];arr.forEach(this.stack,function(t){if(t instanceof m.Matrix2D){ret.push(t);return;}if(t.name=="original"&&this.original){ret.push(this.original);return;}if(!(t.name in m)){return;}var f=m[t.name];if(typeof f!="function"){ret.push(f);return;}var val=arr.map(t.start,function(v,i){return (t.end[i]-v)*r+v;}),_707=f.apply(m,val);if(_707 instanceof m.Matrix2D){ret.push(_707);}},this);return ret;};var _708=new _6f8(0,0,0,0);function _709(prop,obj,name,def){if(prop.values){return new _700(prop.values);}var _70a,_70b,end;if(prop.start){_70b=g.normalizeColor(prop.start);}else{_70b=_70a=obj?(name?obj[name]:obj):def;}if(prop.end){end=g.normalizeColor(prop.end);}else{if(!_70a){_70a=obj?(name?obj[name]:obj):def;}end=_70a;}return new _6fe(_70b,end);};function _70c(prop,obj,name,def){if(prop.values){return new _700(prop.values);}var _70d,_70e,end;if(prop.start){_70e=prop.start;}else{_70e=_70d=obj?obj[name]:def;}if(prop.end){end=prop.end;}else{if(typeof _70d!="number"){_70d=obj?obj[name]:def;}end=_70d;}return new _6f9(_70e,end);};fxg.animateStroke=function(args){if(!args.easing){args.easing=fx._defaultEasing;}var anim=new fx.Animation(args),_70f=args.shape,_710;Hub.connect(anim,"beforeBegin",anim,function(){_710=_70f.getStroke();var prop=args.color,_711={},_712,_713,end;if(prop){_711.color=_709(prop,_710,"color",_708);}prop=args.style;if(prop&&prop.values){_711.style=new _700(prop.values);}prop=args.width;if(prop){_711.width=_70c(prop,_710,"width",1);}prop=args.cap;if(prop&&prop.values){_711.cap=new _700(prop.values);}prop=args.join;if(prop){if(prop.values){_711.join=new _700(prop.values);}else{_713=prop.start?prop.start:(_710&&_710.join||0);end=prop.end?prop.end:(_710&&_710.join||0);if(typeof _713=="number"&&typeof end=="number"){_711.join=new _6f9(_713,end);}}}this.curve=new _702(_711,_710);});Hub.connect(anim,"onAnimate",_70f,"setStroke");return anim;};fxg.animateFill=function(args){if(!args.easing){args.easing=fx._defaultEasing;}var anim=new fx.Animation(args),_714=args.shape,fill;Hub.connect(anim,"beforeBegin",anim,function(){fill=_714.getFill();var prop=args.color,_715={};if(prop){this.curve=_709(prop,fill,"",_708);}});Hub.connect(anim,"onAnimate",_714,"setFill");return anim;};fxg.animateFont=function(args){if(!args.easing){args.easing=fx._defaultEasing;}var anim=new fx.Animation(args),_716=args.shape,font;Hub.connect(anim,"beforeBegin",anim,function(){font=_716.getFont();var prop=args.style,_717={},_718,_719,end;if(prop&&prop.values){_717.style=new _700(prop.values);}prop=args.variant;if(prop&&prop.values){_717.variant=new _700(prop.values);}prop=args.weight;if(prop&&prop.values){_717.weight=new _700(prop.values);}prop=args.family;if(prop&&prop.values){_717.family=new _700(prop.values);}prop=args.size;if(prop&&prop.units){_719=parseFloat(prop.start?prop.start:(_716.font&&_716.font.size||"0"));end=parseFloat(prop.end?prop.end:(_716.font&&_716.font.size||"0"));_717.size=new _6fb(_719,end,prop.units);}this.curve=new _702(_717,font);});Hub.connect(anim,"onAnimate",_716,"setFont");return anim;};fxg.animateTransform=function(args){if(!args.easing){args.easing=fx._defaultEasing;}var anim=new fx.Animation(args),_71a=args.shape,_71b;Hub.connect(anim,"beforeBegin",anim,function(){_71b=_71a.getTransform();this.curve=new _704(args.transform,_71b);});Hub.connect(anim,"onAnimate",_71a,"setTransform");return anim;};return fxg;});},"dijit/_FocusMixin":function(){define("dijit/_FocusMixin",["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(_71c,_71d,_71e,lang){lang.extend(_71d,{focused:false,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus();},_onBlur:function(){this.onBlur();}});return _71e("dijit._FocusMixin",null,{_focusManager:_71c});});},"dijit/_WidgetsInTemplateMixin":function(){define("dijit/_WidgetsInTemplateMixin",["dojo/_base/array","dojo/_base/declare","dojo/parser","dijit/registry"],function(_71f,_720,_721,_722){return _720("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:false,widgetsInTemplate:true,_beforeFillContent:function(){if(this.widgetsInTemplate){var node=this.domNode;var cw=(this._startupWidgets=_721.parse(node,{noStart:!this._earlyTemplatedStartup,template:true,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,scope:"dojo"}));this._supportingWidgets=_722.findWidgets(node);this._attachTemplateNodes(cw,function(n,p){return n[p];});}},startup:function(){_71f.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);}});});},"dojox/charting/plot2d/StackedColumns":function(){define("dojox/charting/plot2d/StackedColumns",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Columns","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/functional/sequence"],function(lang,arr,_723,_724,dc,df,dfr,dfs){var _725=dfr.lambda("item.purgeGroup()");return _723("dojox.charting.plot2d.StackedColumns",_724,{getSeriesStats:function(){var _726=dc.collectStackedStats(this.series);this._maxRunLength=_726.hmax;_726.hmin-=0.5;_726.hmax+=0.5;return _726;},render:function(dim,_727){if(this._maxRunLength<=0){return this;}var acc=df.repeat(this._maxRunLength,"-> 0",0);for(var i=0;i<this.series.length;++i){var run=this.series[i];for(var j=0;j<run.data.length;++j){var _728=run.data[j];if(_728!==null){var v=typeof _728=="number"?_728:_728.y;if(isNaN(v)){v=0;}acc[j]+=v;}}}if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_727);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_725);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_729,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_72a=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_729=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _72b=t.next("column",[this.opt,run]),s=run.group,_72c=new Array(acc.length);for(var j=0;j<acc.length;++j){var _728=run.data[j];if(_728!==null){var v=acc[j],_72d=vt(v),_72e=typeof _728!="number"?t.addMixin(_72b,"column",_728,true):t.post(_72b,"column");if(_729>=1&&_72d>=0){var rect={x:_727.l+ht(j+0.5)+gap,y:dim.height-_727.b-vt(v),width:_729,height:_72d};var _72f=this._plotFill(_72e.series.fill,dim,_727);_72f=this._shapeFill(_72f,rect);var _730=s.createRect(rect).setFill(_72f).setStroke(_72e.series.stroke);run.dyn.fill=_730.getFill();run.dyn.stroke=_730.getStroke();if(_72a){var o={element:"column",index:j,run:run,shape:_730,x:j+0.5,y:v};this._connectEvents(o);_72c[j]=o;}if(this.animate){this._animateColumn(_730,dim.height-_727.b,_72d);}}}}this._eventSeries[run.name]=_72c;run.dirty=false;for(var j=0;j<run.data.length;++j){var _728=run.data[j];if(_728!==null){var v=typeof _728=="number"?_728:_728.y;if(isNaN(v)){v=0;}acc[j]-=v;}}}this.dirty=false;return this;}});});},"dojo/data/util/filter":function(){define(["dojo/_base/lang"],function(lang){var _731=lang.getObject("dojo.data.util.filter",true);_731.patternToRegExp=function(_732,_733){var rxp="^";var c=null;for(var i=0;i<_732.length;i++){c=_732.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=_732.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c;}}rxp+="$";if(_733){return new RegExp(rxp,"mi");}else{return new RegExp(rxp,"m");}};return _731;});},"dojox/charting/plot2d/OHLC":function(){define("dojox/charting/plot2d/OHLC",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Base","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(lang,arr,_734,Base,dc,df,dfr,du,fx){var _735=dfr.lambda("item.purgeGroup()");return _734("dojox.charting.plot2d.OHLC",Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:2,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_736,_737){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_737);du.updateWithPattern(this.opt,_737,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},collectStats:function(_738){var _739=lang.delegate(dc.defaultStats);for(var i=0;i<_738.length;i++){var run=_738[i];if(!run.data.length){continue;}var _73a=_739.vmin,_73b=_739.vmax;if(!("ymin" in run)||!("ymax" in run)){arr.forEach(run.data,function(val,idx){if(val!==null){var x=val.x||idx+1;_739.hmin=Math.min(_739.hmin,x);_739.hmax=Math.max(_739.hmax,x);_739.vmin=Math.min(_739.vmin,val.open,val.close,val.high,val.low);_739.vmax=Math.max(_739.vmax,val.open,val.close,val.high,val.low);}});}if("ymin" in run){_739.vmin=Math.min(_73a,run.ymin);}if("ymax" in run){_739.vmax=Math.max(_73b,run.ymax);}}return _739;},getSeriesStats:function(){var _73c=this.collectStats(this.series);_73c.hmin-=0.5;_73c.hmax+=0.5;return _73c;},render:function(dim,_73d){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_73d);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_735);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_73e,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_73f=Math.max(0,this._vScaler.bounds.lower),_740=vt(_73f),_741=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_73e=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _742=t.next("candlestick",[this.opt,run]),s=run.group,_743=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){var _744=t.addMixin(_742,"candlestick",v,true);var x=ht(v.x||(j+0.5))+_73d.l+gap,y=dim.height-_73d.b,open=vt(v.open),_745=vt(v.close),high=vt(v.high),low=vt(v.low);if(low>high){var tmp=high;high=low;low=tmp;}if(_73e>=1){var hl={x1:_73e/2,x2:_73e/2,y1:y-high,y2:y-low},op={x1:0,x2:((_73e/2)+((_744.series.stroke.width||1)/2)),y1:y-open,y2:y-open},cl={x1:((_73e/2)-((_744.series.stroke.width||1)/2)),x2:_73e,y1:y-_745,y2:y-_745};var _746=s.createGroup();_746.setTransform({dx:x,dy:0});var _747=_746.createGroup();_747.createLine(hl).setStroke(_744.series.stroke);_747.createLine(op).setStroke(_744.series.stroke);_747.createLine(cl).setStroke(_744.series.stroke);run.dyn.stroke=_744.series.stroke;if(_741){var o={element:"candlestick",index:j,run:run,shape:_747,x:x,y:y-Math.max(open,_745),cx:_73e/2,cy:(y-Math.max(open,_745))+(Math.max(open>_745?open-_745:_745-open,1)/2),width:_73e,height:Math.max(open>_745?open-_745:_745-open,1),data:v};this._connectEvents(o);_743[j]=o;}}if(this.animate){this._animateOHLC(_746,y-low,high-low);}}}this._eventSeries[run.name]=_743;run.dirty=false;}this.dirty=false;return this;},_animateOHLC:function(_748,_749,_74a){fx.animateTransform(lang.delegate({shape:_748,duration:1200,transform:[{name:"translate",start:[0,_749-(_749/_74a)],end:[0,0]},{name:"scale",start:[1,1/_74a],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojo/data/util/sorter":function(){define(["dojo/_base/lang"],function(lang){var _74b=lang.getObject("dojo.data.util.sorter",true);_74b.basicComparator=function(a,b){var r=-1;if(a===null){a=undefined;}if(b===null){b=undefined;}if(a==b){r=0;}else{if(a>b||a==null){r=1;}}return r;};_74b.createSortFunction=function(_74c,_74d){var _74e=[];function _74f(attr,dir,comp,s){return function(_750,_751){var a=s.getValue(_750,attr);var b=s.getValue(_751,attr);return dir*comp(a,b);};};var _752;var map=_74d.comparatorMap;var bc=_74b.basicComparator;for(var i=0;i<_74c.length;i++){_752=_74c[i];var attr=_752.attribute;if(attr){var dir=(_752.descending)?-1:1;var comp=bc;if(map){if(typeof attr!=="string"&&("toString" in attr)){attr=attr.toString();}comp=map[attr]||bc;}_74e.push(_74f(attr,dir,comp,_74d));}}return function(rowA,rowB){var i=0;while(i<_74e.length){var ret=_74e[i++](rowA,rowB);if(ret!==0){return ret;}}return 0;};};return _74b;});},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(dojo,lang,_753,_754){var _755=lang.getObject("dojo.colors",true);var _756=function(m1,m2,h){if(h<0){++h;}if(h>1){--h;}var h6=6*h;if(h6<1){return m1+(m2-m1)*h6;}if(2*h<1){return m2;}if(3*h<2){return m1+(m2-m1)*(2/3-h)*6;}return m1;};dojo.colorFromRgb=_753.fromRgb=function(_757,obj){var m=_757.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(m){var c=m[2].split(/\s*,\s*/),l=c.length,t=m[1],a;if((t=="rgb"&&l==3)||(t=="rgba"&&l==4)){var r=c[0];if(r.charAt(r.length-1)=="%"){a=_754.map(c,function(x){return parseFloat(x)*2.56;});if(l==4){a[3]=c[3];}return _753.fromArray(a,obj);}return _753.fromArray(c,obj);}if((t=="hsl"&&l==3)||(t=="hsla"&&l==4)){var H=((parseFloat(c[0])%360)+360)%360/360,S=parseFloat(c[1])/100,L=parseFloat(c[2])/100,m2=L<=0.5?L*(S+1):L+S-L*S,m1=2*L-m2;a=[_756(m1,m2,H+1/3)*256,_756(m1,m2,H)*256,_756(m1,m2,H-1/3)*256,1];if(l==4){a[3]=c[3];}return _753.fromArray(a,obj);}}return null;};var _758=function(c,low,high){c=Number(c);return isNaN(c)?high:c<low?low:c>high?high:c;};_753.prototype.sanitize=function(){var t=this;t.r=Math.round(_758(t.r,0,255));t.g=Math.round(_758(t.g,0,255));t.b=Math.round(_758(t.b,0,255));t.a=_758(t.a,0,1);return this;};_755.makeGrey=_753.makeGrey=function(g,a){return _753.fromArray([g,g,g,a]);};lang.mixin(_753.named,{"aliceblue":[240,248,255],"antiquewhite":[250,235,215],"aquamarine":[127,255,212],"azure":[240,255,255],"beige":[245,245,220],"bisque":[255,228,196],"blanchedalmond":[255,235,205],"blueviolet":[138,43,226],"brown":[165,42,42],"burlywood":[222,184,135],"cadetblue":[95,158,160],"chartreuse":[127,255,0],"chocolate":[210,105,30],"coral":[255,127,80],"cornflowerblue":[100,149,237],"cornsilk":[255,248,220],"crimson":[220,20,60],"cyan":[0,255,255],"darkblue":[0,0,139],"darkcyan":[0,139,139],"darkgoldenrod":[184,134,11],"darkgray":[169,169,169],"darkgreen":[0,100,0],"darkgrey":[169,169,169],"darkkhaki":[189,183,107],"darkmagenta":[139,0,139],"darkolivegreen":[85,107,47],"darkorange":[255,140,0],"darkorchid":[153,50,204],"darkred":[139,0,0],"darksalmon":[233,150,122],"darkseagreen":[143,188,143],"darkslateblue":[72,61,139],"darkslategray":[47,79,79],"darkslategrey":[47,79,79],"darkturquoise":[0,206,209],"darkviolet":[148,0,211],"deeppink":[255,20,147],"deepskyblue":[0,191,255],"dimgray":[105,105,105],"dimgrey":[105,105,105],"dodgerblue":[30,144,255],"firebrick":[178,34,34],"floralwhite":[255,250,240],"forestgreen":[34,139,34],"gainsboro":[220,220,220],"ghostwhite":[248,248,255],"gold":[255,215,0],"goldenrod":[218,165,32],"greenyellow":[173,255,47],"grey":[128,128,128],"honeydew":[240,255,240],"hotpink":[255,105,180],"indianred":[205,92,92],"indigo":[75,0,130],"ivory":[255,255,240],"khaki":[240,230,140],"lavender":[230,230,250],"lavenderblush":[255,240,245],"lawngreen":[124,252,0],"lemonchiffon":[255,250,205],"lightblue":[173,216,230],"lightcoral":[240,128,128],"lightcyan":[224,255,255],"lightgoldenrodyellow":[250,250,210],"lightgray":[211,211,211],"lightgreen":[144,238,144],"lightgrey":[211,211,211],"lightpink":[255,182,193],"lightsalmon":[255,160,122],"lightseagreen":[32,178,170],"lightskyblue":[135,206,250],"lightslategray":[119,136,153],"lightslategrey":[119,136,153],"lightsteelblue":[176,196,222],"lightyellow":[255,255,224],"limegreen":[50,205,50],"linen":[250,240,230],"magenta":[255,0,255],"mediumaquamarine":[102,205,170],"mediumblue":[0,0,205],"mediumorchid":[186,85,211],"mediumpurple":[147,112,219],"mediumseagreen":[60,179,113],"mediumslateblue":[123,104,238],"mediumspringgreen":[0,250,154],"mediumturquoise":[72,209,204],"mediumvioletred":[199,21,133],"midnightblue":[25,25,112],"mintcream":[245,255,250],"mistyrose":[255,228,225],"moccasin":[255,228,181],"navajowhite":[255,222,173],"oldlace":[253,245,230],"olivedrab":[107,142,35],"orange":[255,165,0],"orangered":[255,69,0],"orchid":[218,112,214],"palegoldenrod":[238,232,170],"palegreen":[152,251,152],"paleturquoise":[175,238,238],"palevioletred":[219,112,147],"papayawhip":[255,239,213],"peachpuff":[255,218,185],"peru":[205,133,63],"pink":[255,192,203],"plum":[221,160,221],"powderblue":[176,224,230],"rosybrown":[188,143,143],"royalblue":[65,105,225],"saddlebrown":[139,69,19],"salmon":[250,128,114],"sandybrown":[244,164,96],"seagreen":[46,139,87],"seashell":[255,245,238],"sienna":[160,82,45],"skyblue":[135,206,235],"slateblue":[106,90,205],"slategray":[112,128,144],"slategrey":[112,128,144],"snow":[255,250,250],"springgreen":[0,255,127],"steelblue":[70,130,180],"tan":[210,180,140],"thistle":[216,191,216],"tomato":[255,99,71],"turquoise":[64,224,208],"violet":[238,130,238],"wheat":[245,222,179],"whitesmoke":[245,245,245],"yellowgreen":[154,205,50]});return _753;});},"dojox/lang/functional/reversed":function(){define("dojox/lang/functional/reversed",["dojo/_base/lang","dojo/_base/window","./lambda"],function(lang,win,df){lang.mixin(df,{filterRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var t=[],v,i=a.length-1;for(;i>=0;--i){v=a[i];if(f.call(o,v,i,a)){t.push(v);}}return t;},forEachRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);for(var i=a.length-1;i>=0;f.call(o,a[i],i,a),--i){}},mapRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);var n=a.length,t=new Array(n),i=n-1,j=0;for(;i>=0;t[j++]=f.call(o,a[i],i,a),--i){}return t;},everyRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);for(var i=a.length-1;i>=0;--i){if(!f.call(o,a[i],i,a)){return false;}}return true;},someRev:function(a,f,o){if(typeof a=="string"){a=a.split("");}o=o||win.global;f=df.lambda(f);for(var i=a.length-1;i>=0;--i){if(f.call(o,a[i],i,a)){return true;}}return false;}});return df;});},"dojo/date/locale":function(){define(["../_base/kernel","../_base/lang","../_base/array","../date","../cldr/supplemental","../regexp","../string","../i18n!../cldr/nls/gregorian"],function(dojo,lang,_759,date,cldr,_75a,_75b,_75c){lang.getObject("date.locale",true,dojo);function _75d(_75e,_75f,_760,_761){return _761.replace(/([a-z])\1*/ig,function(_762){var s,pad,c=_762.charAt(0),l=_762.length,_763=["abbr","wide","narrow"];switch(c){case "G":s=_75f[(l<4)?"eraAbbr":"eraNames"][_75e.getFullYear()<0?0:1];break;case "y":s=_75e.getFullYear();switch(l){case 1:break;case 2:if(!_760.fullYear){s=String(s);s=s.substr(s.length-2);break;}default:pad=true;}break;case "Q":case "q":s=Math.ceil((_75e.getMonth()+1)/3);pad=true;break;case "M":var m=_75e.getMonth();if(l<3){s=m+1;pad=true;}else{var _764=["months","format",_763[l-3]].join("-");s=_75f[_764][m];}break;case "w":var _765=0;s=dojo.date.locale._getWeekOfYear(_75e,_765);pad=true;break;case "d":s=_75e.getDate();pad=true;break;case "D":s=dojo.date.locale._getDayOfYear(_75e);pad=true;break;case "E":var d=_75e.getDay();if(l<3){s=d+1;pad=true;}else{var _766=["days","format",_763[l-3]].join("-");s=_75f[_766][d];}break;case "a":var _767=(_75e.getHours()<12)?"am":"pm";s=_760[_767]||_75f["dayPeriods-format-wide-"+_767];break;case "h":case "H":case "K":case "k":var h=_75e.getHours();switch(c){case "h":s=(h%12)||12;break;case "H":s=h;break;case "K":s=(h%12);break;case "k":s=h||24;break;}pad=true;break;case "m":s=_75e.getMinutes();pad=true;break;case "s":s=_75e.getSeconds();pad=true;break;case "S":s=Math.round(_75e.getMilliseconds()*Math.pow(10,l-3));pad=true;break;case "v":case "z":s=dojo.date.locale._getZone(_75e,true,_760);if(s){break;}l=4;case "Z":var _768=dojo.date.locale._getZone(_75e,false,_760);var tz=[(_768<=0?"+":"-"),_75b.pad(Math.floor(Math.abs(_768)/60),2),_75b.pad(Math.abs(_768)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":");}s=tz.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+_761);}if(pad){s=_75b.pad(s,l);}return s;});};dojo.date.locale._getZone=function(_769,_76a,_76b){if(_76a){return date.getTimezoneName(_769);}else{return _769.getTimezoneOffset();}};dojo.date.locale.format=function(_76c,_76d){_76d=_76d||{};var _76e=dojo.i18n.normalizeLocale(_76d.locale),_76f=_76d.formatLength||"short",_770=dojo.date.locale._getGregorianBundle(_76e),str=[],_771=lang.hitch(this,_75d,_76c,_770,_76d);if(_76d.selector=="year"){return _772(_770["dateFormatItem-yyyy"]||"yyyy",_771);}var _773;if(_76d.selector!="date"){_773=_76d.timePattern||_770["timeFormat-"+_76f];if(_773){str.push(_772(_773,_771));}}if(_76d.selector!="time"){_773=_76d.datePattern||_770["dateFormat-"+_76f];if(_773){str.push(_772(_773,_771));}}return str.length==1?str[0]:_770["dateTimeFormat-"+_76f].replace(/\{(\d+)\}/g,function(_774,key){return str[key];});};dojo.date.locale.regexp=function(_775){return dojo.date.locale._parseInfo(_775).regexp;};dojo.date.locale._parseInfo=function(_776){_776=_776||{};var _777=dojo.i18n.normalizeLocale(_776.locale),_778=dojo.date.locale._getGregorianBundle(_777),_779=_776.formatLength||"short",_77a=_776.datePattern||_778["dateFormat-"+_779],_77b=_776.timePattern||_778["timeFormat-"+_779],_77c;if(_776.selector=="date"){_77c=_77a;}else{if(_776.selector=="time"){_77c=_77b;}else{_77c=_778["dateTimeFormat-"+_779].replace(/\{(\d+)\}/g,function(_77d,key){return [_77b,_77a][key];});}}var _77e=[],re=_772(_77c,lang.hitch(this,_77f,_77e,_778,_776));return {regexp:re,tokens:_77e,bundle:_778};};dojo.date.locale.parse=function(_780,_781){var _782=/[\u200E\u200F\u202A\u202E]/g,info=dojo.date.locale._parseInfo(_781),_783=info.tokens,_784=info.bundle,re=new RegExp("^"+info.regexp.replace(_782,"")+"$",info.strict?"":"i"),_785=re.exec(_780&&_780.replace(_782,""));if(!_785){return null;}var _786=["abbr","wide","narrow"],_787=[1970,0,1,0,0,0,0],amPm="",_788=dojo.every(_785,function(v,i){if(!i){return true;}var _789=_783[i-1];var l=_789.length;switch(_789.charAt(0)){case "y":if(l!=2&&_781.strict){_787[0]=v;}else{if(v<100){v=Number(v);var year=""+new Date().getFullYear(),_78a=year.substring(0,2)*100,_78b=Math.min(Number(year.substring(2,4))+20,99);_787[0]=(v<_78b)?_78a+v:_78a-100+v;}else{if(_781.strict){return false;}_787[0]=v;}}break;case "M":if(l>2){var _78c=_784["months-format-"+_786[l-3]].concat();if(!_781.strict){v=v.replace(".","").toLowerCase();_78c=dojo.map(_78c,function(s){return s.replace(".","").toLowerCase();});}v=dojo.indexOf(_78c,v);if(v==-1){return false;}}else{v--;}_787[1]=v;break;case "E":case "e":var days=_784["days-format-"+_786[l-3]].concat();if(!_781.strict){v=v.toLowerCase();days=dojo.map(days,function(d){return d.toLowerCase();});}v=dojo.indexOf(days,v);if(v==-1){return false;}break;case "D":_787[1]=0;case "d":_787[2]=v;break;case "a":var am=_781.am||_784["dayPeriods-format-wide-am"],pm=_781.pm||_784["dayPeriods-format-wide-pm"];if(!_781.strict){var _78d=/\./g;v=v.replace(_78d,"").toLowerCase();am=am.replace(_78d,"").toLowerCase();pm=pm.replace(_78d,"").toLowerCase();}if(_781.strict&&v!=am&&v!=pm){return false;}amPm=(v==pm)?"p":(v==am)?"a":"";break;case "K":if(v==24){v=0;}case "h":case "H":case "k":if(v>23){return false;}_787[3]=v;break;case "m":_787[4]=v;break;case "s":_787[5]=v;break;case "S":_787[6]=v;}return true;});var _78e=+_787[3];if(amPm==="p"&&_78e<12){_787[3]=_78e+12;}else{if(amPm==="a"&&_78e==12){_787[3]=0;}}var _78f=new Date(_787[0],_787[1],_787[2],_787[3],_787[4],_787[5],_787[6]);if(_781.strict){_78f.setFullYear(_787[0]);}var _790=_783.join(""),_791=_790.indexOf("d")!=-1,_792=_790.indexOf("M")!=-1;if(!_788||(_792&&_78f.getMonth()>_787[1])||(_791&&_78f.getDate()>_787[2])){return null;}if((_792&&_78f.getMonth()<_787[1])||(_791&&_78f.getDate()<_787[2])){_78f=date.add(_78f,"hour",1);}return _78f;};function _772(_793,_794,_795,_796){var _797=function(x){return x;};_794=_794||_797;_795=_795||_797;_796=_796||_797;var _798=_793.match(/(''|[^'])+/g),_799=_793.charAt(0)=="'";dojo.forEach(_798,function(_79a,i){if(!_79a){_798[i]="";}else{_798[i]=(_799?_795:_794)(_79a.replace(/''/g,"'"));_799=!_799;}});return _796(_798.join(""));};function _77f(_79b,_79c,_79d,_79e){_79e=_75a.escapeString(_79e);if(!_79d.strict){_79e=_79e.replace(" a"," ?a");}return _79e.replace(/([a-z])\1*/ig,function(_79f){var s,c=_79f.charAt(0),l=_79f.length,p2="",p3="";if(_79d.strict){if(l>1){p2="0"+"{"+(l-1)+"}";}if(l>2){p3="0"+"{"+(l-2)+"}";}}else{p2="0?";p3="0{0,2}";}switch(c){case "y":s="\\d{2,4}";break;case "M":s=(l>2)?"\\S+?":"1[0-2]|"+p2+"[1-9]";break;case "D":s="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+p2+"[1-9][0-9]|"+p3+"[1-9]";break;case "d":s="3[01]|[12]\\d|"+p2+"[1-9]";break;case "w":s="[1-4][0-9]|5[0-3]|"+p2+"[1-9]";break;case "E":s="\\S+";break;case "h":s="1[0-2]|"+p2+"[1-9]";break;case "k":s="1[01]|"+p2+"\\d";break;case "H":s="1\\d|2[0-3]|"+p2+"\\d";break;case "K":s="1\\d|2[0-4]|"+p2+"[1-9]";break;case "m":case "s":s="[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=_79d.am||_79c["dayPeriods-format-wide-am"],pm=_79d.pm||_79c["dayPeriods-format-wide-pm"];s=am+"|"+pm;if(!_79d.strict){if(am!=am.toLowerCase()){s+="|"+am.toLowerCase();}if(pm!=pm.toLowerCase()){s+="|"+pm.toLowerCase();}if(s.indexOf(".")!=-1){s+="|"+s.replace(/\./g,"");}}s=s.replace(/\./g,"\\.");break;default:s=".*";}if(_79b){_79b.push(_79f);}return "("+s+")";}).replace(/[\xa0 ]/g,"[\\s\\xa0]");};var _7a0=[];dojo.date.locale.addCustomFormats=function(_7a1,_7a2){_7a0.push({pkg:_7a1,name:_7a2});};dojo.date.locale._getGregorianBundle=function(_7a3){var _7a4={};dojo.forEach(_7a0,function(desc){var _7a5=dojo.i18n.getLocalization(desc.pkg,desc.name,_7a3);_7a4=lang.mixin(_7a4,_7a5);},this);return _7a4;};dojo.date.locale.addCustomFormats("dojo.cldr","gregorian");dojo.date.locale.getNames=function(item,type,_7a6,_7a7){var _7a8,_7a9=dojo.date.locale._getGregorianBundle(_7a7),_7aa=[item,_7a6,type];if(_7a6=="standAlone"){var key=_7aa.join("-");_7a8=_7a9[key];if(_7a8[0]==1){_7a8=undefined;}}_7aa[1]="format";return (_7a8||_7a9[_7aa.join("-")]).concat();};dojo.date.locale.isWeekend=function(_7ab,_7ac){var _7ad=cldr.getWeekend(_7ac),day=(_7ab||new Date()).getDay();if(_7ad.end<_7ad.start){_7ad.end+=7;if(day<_7ad.start){day+=7;}}return day>=_7ad.start&&day<=_7ad.end;};dojo.date.locale._getDayOfYear=function(_7ae){return date.difference(new Date(_7ae.getFullYear(),0,1,_7ae.getHours()),_7ae)+1;};dojo.date.locale._getWeekOfYear=function(_7af,_7b0){if(arguments.length==1){_7b0=0;}var _7b1=new Date(_7af.getFullYear(),0,1).getDay(),adj=(_7b1-_7b0+7)%7,week=Math.floor((dojo.date.locale._getDayOfYear(_7af)+adj-1)/7);if(_7b1==_7b0){week++;}return week;};return dojo.date.locale;});},"dojox/charting/Chart":function(){define("dojox/charting/Chart",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","dojo/_base/html","dojo/dom","dojo/dom-geometry","dojo/dom-construct","dojo/_base/Color","dojo/_base/sniff","./Element","./Theme","./Series","./axis2d/common","dojox/gfx","dojox/lang/functional","dojox/lang/functional/fold","dojox/lang/functional/reversed"],function(lang,arr,_7b2,html,dom,_7b3,_7b4,_7b5,has,_7b6,_7b7,_7b8,_7b9,g,func,_7ba,_7bb){var dc=dojox.charting,_7bc=func.lambda("item.clear()"),_7bd=func.lambda("item.purgeGroup()"),_7be=func.lambda("item.destroy()"),_7bf=func.lambda("item.dirty = false"),_7c0=func.lambda("item.dirty = true"),_7c1=func.lambda("item.name");_7b2("dojox.charting.Chart",null,{constructor:function(node,_7c2){if(!_7c2){_7c2={};}this.margins=_7c2.margins?_7c2.margins:{l:10,t:10,r:10,b:10};this.stroke=_7c2.stroke;this.fill=_7c2.fill;this.delayInMs=_7c2.delayInMs||200;this.title=_7c2.title;this.titleGap=_7c2.titleGap;this.titlePos=_7c2.titlePos;this.titleFont=_7c2.titleFont;this.titleFontColor=_7c2.titleFontColor;this.chartTitle=null;this.theme=null;this.axes={};this.stack=[];this.plots={};this.series=[];this.runs={};this.dirty=true;this.coords=null;this.node=dom.byId(node);var box=_7b3.getMarginBox(node);this.surface=g.createSurface(this.node,box.w||400,box.h||300);},destroy:function(){arr.forEach(this.series,_7be);arr.forEach(this.stack,_7be);func.forIn(this.axes,_7be);if(this.chartTitle&&this.chartTitle.tagName){_7b4.destroy(this.chartTitle);}this.surface.destroy();},getCoords:function(){return html.coords(this.node,true);},setTheme:function(_7c3){this.theme=_7c3.clone();this.dirty=true;return this;},addAxis:function(name,_7c4){var axis,_7c5=_7c4&&_7c4.type||"Default";if(typeof _7c5=="string"){if(!dc.axis2d||!dc.axis2d[_7c5]){throw Error("Can't find axis: "+_7c5+" - Check "+"require() dependencies.");}axis=new dc.axis2d[_7c5](this,_7c4);}else{axis=new _7c5(this,_7c4);}axis.name=name;axis.dirty=true;if(name in this.axes){this.axes[name].destroy();}this.axes[name]=axis;this.dirty=true;return this;},getAxis:function(name){return this.axes[name];},removeAxis:function(name){if(name in this.axes){this.axes[name].destroy();delete this.axes[name];this.dirty=true;}return this;},addPlot:function(name,_7c6){var plot,_7c7=_7c6&&_7c6.type||"Default";if(typeof _7c7=="string"){if(!dc.plot2d||!dc.plot2d[_7c7]){throw Error("Can't find plot: "+_7c7+" - didn't you forget to dojo"+".require() it?");}plot=new dc.plot2d[_7c7](this,_7c6);}else{plot=new _7c7(this,_7c6);}plot.name=name;plot.dirty=true;if(name in this.plots){this.stack[this.plots[name]].destroy();this.stack[this.plots[name]]=plot;}else{this.plots[name]=this.stack.length;this.stack.push(plot);}this.dirty=true;return this;},getPlot:function(name){return this.stack[this.plots[name]];},removePlot:function(name){if(name in this.plots){var _7c8=this.plots[name];delete this.plots[name];this.stack[_7c8].destroy();this.stack.splice(_7c8,1);func.forIn(this.plots,function(idx,name,_7c9){if(idx>_7c8){_7c9[name]=idx-1;}});var ns=arr.filter(this.series,function(run){return run.plot!=name;});if(ns.length<this.series.length){arr.forEach(this.series,function(run){if(run.plot==name){run.destroy();}});this.runs={};arr.forEach(ns,function(run,_7ca){this.runs[run.plot]=_7ca;},this);this.series=ns;}this.dirty=true;}return this;},getPlotOrder:function(){return func.map(this.stack,_7c1);},setPlotOrder:function(_7cb){var _7cc={},_7cd=func.filter(_7cb,function(name){if(!(name in this.plots)||(name in _7cc)){return false;}_7cc[name]=1;return true;},this);if(_7cd.length<this.stack.length){func.forEach(this.stack,function(plot){var name=plot.name;if(!(name in _7cc)){_7cd.push(name);}});}var _7ce=func.map(_7cd,function(name){return this.stack[this.plots[name]];},this);func.forEach(_7ce,function(plot,i){this.plots[plot.name]=i;},this);this.stack=_7ce;this.dirty=true;return this;},movePlotToFront:function(name){if(name in this.plots){var _7cf=this.plots[name];if(_7cf){var _7d0=this.getPlotOrder();_7d0.splice(_7cf,1);_7d0.unshift(name);return this.setPlotOrder(_7d0);}}return this;},movePlotToBack:function(name){if(name in this.plots){var _7d1=this.plots[name];if(_7d1<this.stack.length-1){var _7d2=this.getPlotOrder();_7d2.splice(_7d1,1);_7d2.push(name);return this.setPlotOrder(_7d2);}}return this;},addSeries:function(name,data,_7d3){var run=new _7b8(this,data,_7d3);run.name=name;if(name in this.runs){this.series[this.runs[name]].destroy();this.series[this.runs[name]]=run;}else{this.runs[name]=this.series.length;this.series.push(run);}this.dirty=true;if(!("ymin" in run)&&"min" in run){run.ymin=run.min;}if(!("ymax" in run)&&"max" in run){run.ymax=run.max;}return this;},getSeries:function(name){return this.series[this.runs[name]];},removeSeries:function(name){if(name in this.runs){var _7d4=this.runs[name];delete this.runs[name];this.series[_7d4].destroy();this.series.splice(_7d4,1);func.forIn(this.runs,function(idx,name,runs){if(idx>_7d4){runs[name]=idx-1;}});this.dirty=true;}return this;},updateSeries:function(name,data){if(name in this.runs){var run=this.series[this.runs[name]];run.update(data);this._invalidateDependentPlots(run.plot,false);this._invalidateDependentPlots(run.plot,true);}return this;},getSeriesOrder:function(_7d5){return func.map(func.filter(this.series,function(run){return run.plot==_7d5;}),_7c1);},setSeriesOrder:function(_7d6){var _7d7,_7d8={},_7d9=func.filter(_7d6,function(name){if(!(name in this.runs)||(name in _7d8)){return false;}var run=this.series[this.runs[name]];if(_7d7){if(run.plot!=_7d7){return false;}}else{_7d7=run.plot;}_7d8[name]=1;return true;},this);func.forEach(this.series,function(run){var name=run.name;if(!(name in _7d8)&&run.plot==_7d7){_7d9.push(name);}});var _7da=func.map(_7d9,function(name){return this.series[this.runs[name]];},this);this.series=_7da.concat(func.filter(this.series,function(run){return run.plot!=_7d7;}));func.forEach(this.series,function(run,i){this.runs[run.name]=i;},this);this.dirty=true;return this;},moveSeriesToFront:function(name){if(name in this.runs){var _7db=this.runs[name],_7dc=this.getSeriesOrder(this.series[_7db].plot);if(name!=_7dc[0]){_7dc.splice(_7db,1);_7dc.unshift(name);return this.setSeriesOrder(_7dc);}}return this;},moveSeriesToBack:function(name){if(name in this.runs){var _7dd=this.runs[name],_7de=this.getSeriesOrder(this.series[_7dd].plot);if(name!=_7de[_7de.length-1]){_7de.splice(_7dd,1);_7de.push(name);return this.setSeriesOrder(_7de);}}return this;},resize:function(_7df,_7e0){var box;switch(arguments.length){case 1:box=lang.mixin({},_7df);_7b3.setMarginBox(this.node,box);break;case 2:box={w:_7df,h:_7e0};_7b3.setMarginBox(this.node,box);break;}box=_7b3.getMarginBox(this.node);var d=this.surface.getDimensions();if(d.width!=box.w||d.height!=box.h){this.surface.setDimensions(box.w,box.h);this.dirty=true;return this.render();}else{return this;}},getGeometry:function(){var ret={};func.forIn(this.axes,function(axis){if(axis.initialized()){ret[axis.name]={name:axis.name,vertical:axis.vertical,scaler:axis.scaler,ticks:axis.ticks};}});return ret;},setAxisWindow:function(name,_7e1,_7e2,zoom){var axis=this.axes[name];if(axis){axis.setWindow(_7e1,_7e2);arr.forEach(this.stack,function(plot){if(plot.hAxis==name||plot.vAxis==name){plot.zoom=zoom;}});}return this;},setWindow:function(sx,sy,dx,dy,zoom){if(!("plotArea" in this)){this.calculateGeometry();}func.forIn(this.axes,function(axis){var _7e3,_7e4,_7e5=axis.getScaler().bounds,s=_7e5.span/(_7e5.upper-_7e5.lower);if(axis.vertical){_7e3=sy;_7e4=dy/s/_7e3;}else{_7e3=sx;_7e4=dx/s/_7e3;}axis.setWindow(_7e3,_7e4);});arr.forEach(this.stack,function(plot){plot.zoom=zoom;});return this;},zoomIn:function(name,_7e6){var axis=this.axes[name];if(axis){var _7e7,_7e8,_7e9=axis.getScaler().bounds;var _7ea=Math.min(_7e6[0],_7e6[1]);var _7eb=Math.max(_7e6[0],_7e6[1]);_7ea=_7e6[0]<_7e9.lower?_7e9.lower:_7ea;_7eb=_7e6[1]>_7e9.upper?_7e9.upper:_7eb;_7e7=(_7e9.upper-_7e9.lower)/(_7eb-_7ea);_7e8=_7ea-_7e9.lower;this.setAxisWindow(name,_7e7,_7e8);this.render();}},calculateGeometry:function(){if(this.dirty){return this.fullGeometry();}var _7ec=arr.filter(this.stack,function(plot){return plot.dirty||(plot.hAxis&&this.axes[plot.hAxis].dirty)||(plot.vAxis&&this.axes[plot.vAxis].dirty);},this);_7ed(_7ec,this.plotArea);return this;},fullGeometry:function(){this._makeDirty();arr.forEach(this.stack,_7bc);if(!this.theme){this.setTheme(new _7b7(dojox.charting._def));}arr.forEach(this.series,function(run){if(!(run.plot in this.plots)){if(!dc.plot2d||!dc.plot2d.Default){throw Error("Can't find plot: Default - didn't you forget to dojo"+".require() it?");}var plot=new dc.plot2d.Default(this,{});plot.name=run.plot;this.plots[run.plot]=this.stack.length;this.stack.push(plot);}this.stack[this.plots[run.plot]].addSeries(run);},this);arr.forEach(this.stack,function(plot){if(plot.hAxis){plot.setAxis(this.axes[plot.hAxis]);}if(plot.vAxis){plot.setAxis(this.axes[plot.vAxis]);}},this);var dim=this.dim=this.surface.getDimensions();dim.width=g.normalizedLength(dim.width);dim.height=g.normalizedLength(dim.height);func.forIn(this.axes,_7bc);_7ed(this.stack,dim);var _7ee=this.offsets={l:0,r:0,t:0,b:0};func.forIn(this.axes,function(axis){func.forIn(axis.getOffsets(),function(o,i){_7ee[i]+=o;});});if(this.title){this.titleGap=(this.titleGap==0)?0:this.titleGap||this.theme.chart.titleGap||20;this.titlePos=this.titlePos||this.theme.chart.titlePos||"top";this.titleFont=this.titleFont||this.theme.chart.titleFont;this.titleFontColor=this.titleFontColor||this.theme.chart.titleFontColor||"black";var _7ef=g.normalizedLength(g.splitFontString(this.titleFont).size);_7ee[this.titlePos=="top"?"t":"b"]+=(_7ef+this.titleGap);}func.forIn(this.margins,function(o,i){_7ee[i]+=o;});this.plotArea={width:dim.width-_7ee.l-_7ee.r,height:dim.height-_7ee.t-_7ee.b};func.forIn(this.axes,_7bc);_7ed(this.stack,this.plotArea);return this;},render:function(){if(this.theme){this.theme.clear();}if(this.dirty){return this.fullRender();}this.calculateGeometry();func.forEachRev(this.stack,function(plot){plot.render(this.dim,this.offsets);},this);func.forIn(this.axes,function(axis){axis.render(this.dim,this.offsets);},this);this._makeClean();if(this.surface.render){this.surface.render();}return this;},fullRender:function(){this.fullGeometry();var _7f0=this.offsets,dim=this.dim,rect;arr.forEach(this.series,_7bd);func.forIn(this.axes,_7bd);arr.forEach(this.stack,_7bd);if(this.chartTitle&&this.chartTitle.tagName){_7b4.destroy(this.chartTitle);}this.surface.clear();this.chartTitle=null;var t=this.theme,fill=t.plotarea&&t.plotarea.fill,_7f1=t.plotarea&&t.plotarea.stroke,w=Math.max(0,dim.width-_7f0.l-_7f0.r),h=Math.max(0,dim.height-_7f0.t-_7f0.b),rect={x:_7f0.l-1,y:_7f0.t-1,width:w+2,height:h+2};if(fill){fill=_7b6.prototype._shapeFill(_7b6.prototype._plotFill(fill,dim,_7f0),rect);this.surface.createRect(rect).setFill(fill);}if(_7f1){this.surface.createRect({x:_7f0.l,y:_7f0.t,width:w+1,height:h+1}).setStroke(_7f1);}func.foldr(this.stack,function(z,plot){return plot.render(dim,_7f0),0;},0);fill=this.fill!==undefined?this.fill:(t.chart&&t.chart.fill);_7f1=this.stroke!==undefined?this.stroke:(t.chart&&t.chart.stroke);if(fill=="inherit"){var node=this.node,fill=new _7b5(html.style(node,"backgroundColor"));while(fill.a==0&&node!=document.documentElement){fill=new _7b5(html.style(node,"backgroundColor"));node=node.parentNode;}}if(fill){fill=_7b6.prototype._plotFill(fill,dim,_7f0);if(_7f0.l){rect={width:_7f0.l,height:dim.height+1};this.surface.createRect(rect).setFill(_7b6.prototype._shapeFill(fill,rect));}if(_7f0.r){rect={x:dim.width-_7f0.r,width:_7f0.r+1,height:dim.height+2};this.surface.createRect(rect).setFill(_7b6.prototype._shapeFill(fill,rect));}if(_7f0.t){rect={width:dim.width+1,height:_7f0.t};this.surface.createRect(rect).setFill(_7b6.prototype._shapeFill(fill,rect));}if(_7f0.b){rect={y:dim.height-_7f0.b,width:dim.width+1,height:_7f0.b+2};this.surface.createRect(rect).setFill(_7b6.prototype._shapeFill(fill,rect));}}if(_7f1){this.surface.createRect({width:dim.width-1,height:dim.height-1}).setStroke(_7f1);}if(this.title){var _7f2=(g.renderer=="canvas"),_7f3=_7f2||!has("ie")&&!has("opera")?"html":"gfx",_7f4=g.normalizedLength(g.splitFontString(this.titleFont).size);this.chartTitle=_7b9.createText[_7f3](this,this.surface,dim.width/2,this.titlePos=="top"?_7f4+this.margins.t:dim.height-this.margins.b,"middle",this.title,this.titleFont,this.titleFontColor);}func.forIn(this.axes,function(axis){axis.render(dim,_7f0);});this._makeClean();if(this.surface.render){this.surface.render();}return this;},delayedRender:function(){if(!this._delayedRenderHandle){this._delayedRenderHandle=setTimeout(lang.hitch(this,function(){clearTimeout(this._delayedRenderHandle);this._delayedRenderHandle=null;this.render();}),this.delayInMs);}return this;},connectToPlot:function(name,_7f5,_7f6){return name in this.plots?this.stack[this.plots[name]].connect(_7f5,_7f6):null;},fireEvent:function(_7f7,_7f8,_7f9){if(_7f7 in this.runs){var _7fa=this.series[this.runs[_7f7]].plot;if(_7fa in this.plots){var plot=this.stack[this.plots[_7fa]];if(plot){plot.fireEvent(_7f7,_7f8,_7f9);}}}return this;},_makeClean:function(){arr.forEach(this.axes,_7bf);arr.forEach(this.stack,_7bf);arr.forEach(this.series,_7bf);this.dirty=false;},_makeDirty:function(){arr.forEach(this.axes,_7c0);arr.forEach(this.stack,_7c0);arr.forEach(this.series,_7c0);this.dirty=true;},_invalidateDependentPlots:function(_7fb,_7fc){if(_7fb in this.plots){var plot=this.stack[this.plots[_7fb]],axis,_7fd=_7fc?"vAxis":"hAxis";if(plot[_7fd]){axis=this.axes[plot[_7fd]];if(axis&&axis.dependOnData()){axis.dirty=true;arr.forEach(this.stack,function(p){if(p[_7fd]&&p[_7fd]==plot[_7fd]){p.dirty=true;}});}}else{plot.dirty=true;}}}});function _7fe(_7ff){return {min:_7ff.hmin,max:_7ff.hmax};};function _800(_801){return {min:_801.vmin,max:_801.vmax};};function _802(_803,h){_803.hmin=h.min;_803.hmax=h.max;};function _804(_805,v){_805.vmin=v.min;_805.vmax=v.max;};function _806(_807,_808){if(_807&&_808){_807.min=Math.min(_807.min,_808.min);_807.max=Math.max(_807.max,_808.max);}return _807||_808;};function _7ed(_809,_80a){var _80b={},axes={};arr.forEach(_809,function(plot){var _80c=_80b[plot.name]=plot.getSeriesStats();if(plot.hAxis){axes[plot.hAxis]=_806(axes[plot.hAxis],_7fe(_80c));}if(plot.vAxis){axes[plot.vAxis]=_806(axes[plot.vAxis],_800(_80c));}});arr.forEach(_809,function(plot){var _80d=_80b[plot.name];if(plot.hAxis){_802(_80d,axes[plot.hAxis]);}if(plot.vAxis){_804(_80d,axes[plot.vAxis]);}plot.initializeScalers(_80a,_80d);});};return dojox.charting.Chart;});},"dojox/charting/plot2d/Candlesticks":function(){define("dojox/charting/plot2d/Candlesticks",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","./Base","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(lang,_80e,arr,Base,dc,df,dfr,du,fx){var _80f=dfr.lambda("item.purgeGroup()");return _80e("dojox.charting.plot2d.Candlesticks",Base,{defaultParams:{hAxis:"x",vAxis:"y",gap:2,animate:null},optionalParams:{minBarSize:1,maxBarSize:1,stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_810,_811){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_811);du.updateWithPattern(this.opt,_811,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},collectStats:function(_812){var _813=lang.delegate(dc.defaultStats);for(var i=0;i<_812.length;i++){var run=_812[i];if(!run.data.length){continue;}var _814=_813.vmin,_815=_813.vmax;if(!("ymin" in run)||!("ymax" in run)){arr.forEach(run.data,function(val,idx){if(val!==null){var x=val.x||idx+1;_813.hmin=Math.min(_813.hmin,x);_813.hmax=Math.max(_813.hmax,x);_813.vmin=Math.min(_813.vmin,val.open,val.close,val.high,val.low);_813.vmax=Math.max(_813.vmax,val.open,val.close,val.high,val.low);}});}if("ymin" in run){_813.vmin=Math.min(_814,run.ymin);}if("ymax" in run){_813.vmax=Math.max(_815,run.ymax);}}return _813;},getSeriesStats:function(){var _816=this.collectStats(this.series);_816.hmin-=0.5;_816.hmax+=0.5;return _816;},render:function(dim,_817){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_817);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_80f);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_818,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_819=Math.max(0,this._vScaler.bounds.lower),_81a=vt(_819),_81b=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt);gap=f.gap;_818=f.size;for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _81c=t.next("candlestick",[this.opt,run]),s=run.group,_81d=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var v=run.data[j];if(v!==null){var _81e=t.addMixin(_81c,"candlestick",v,true);var x=ht(v.x||(j+0.5))+_817.l+gap,y=dim.height-_817.b,open=vt(v.open),_81f=vt(v.close),high=vt(v.high),low=vt(v.low);if("mid" in v){var mid=vt(v.mid);}if(low>high){var tmp=high;high=low;low=tmp;}if(_818>=1){var _820=open>_81f;var line={x1:_818/2,x2:_818/2,y1:y-high,y2:y-low},rect={x:0,y:y-Math.max(open,_81f),width:_818,height:Math.max(_820?open-_81f:_81f-open,1)};var _821=s.createGroup();_821.setTransform({dx:x,dy:0});var _822=_821.createGroup();_822.createLine(line).setStroke(_81e.series.stroke);_822.createRect(rect).setStroke(_81e.series.stroke).setFill(_820?_81e.series.fill:"white");if("mid" in v){_822.createLine({x1:(_81e.series.stroke.width||1),x2:_818-(_81e.series.stroke.width||1),y1:y-mid,y2:y-mid}).setStroke(_820?"white":_81e.series.stroke);}run.dyn.fill=_81e.series.fill;run.dyn.stroke=_81e.series.stroke;if(_81b){var o={element:"candlestick",index:j,run:run,shape:_822,x:x,y:y-Math.max(open,_81f),cx:_818/2,cy:(y-Math.max(open,_81f))+(Math.max(_820?open-_81f:_81f-open,1)/2),width:_818,height:Math.max(_820?open-_81f:_81f-open,1),data:v};this._connectEvents(o);_81d[j]=o;}}if(this.animate){this._animateCandlesticks(_821,y-low,high-low);}}}this._eventSeries[run.name]=_81d;run.dirty=false;}this.dirty=false;return this;},_animateCandlesticks:function(_823,_824,_825){fx.animateTransform(lang.delegate({shape:_823,duration:1200,transform:[{name:"translate",start:[0,_824-(_824/_825)],end:[0,0]},{name:"scale",start:[1,1/_825],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojox/charting/axis2d/Default":function(){define("dojox/charting/axis2d/Default",["dojo/_base/lang","dojo/_base/array","dojo/_base/sniff","dojo/_base/declare","dojo/_base/connect","dojo/_base/html","dojo/dom-geometry","./Invisible","../scaler/common","../scaler/linear","./common","dojox/gfx","dojox/lang/utils"],function(lang,arr,has,_826,_827,html,_828,_829,_82a,lin,_82b,g,du){var _82c=4,_82d=45;return _826("dojox.charting.axis2d.Default",_829,{defaultParams:{vertical:false,fixUpper:"none",fixLower:"none",natural:false,leftBottom:true,includeZero:false,fixed:true,majorLabels:true,minorTicks:true,minorLabels:true,microTicks:false,rotation:0,htmlLabels:true,enableCache:false},optionalParams:{min:0,max:1,from:0,to:1,majorTickStep:4,minorTickStep:2,microTickStep:1,labels:[],labelFunc:null,maxLabelSize:0,maxLabelCharCount:0,trailingSymbol:null,stroke:{},majorTick:{},minorTick:{},microTick:{},tick:{},font:"",fontColor:"",title:"",titleGap:0,titleFont:"",titleFontColor:"",titleOrientation:""},constructor:function(_82e,_82f){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_82f);du.updateWithPattern(this.opt,_82f,this.optionalParams);if(this.opt.enableCache){this._textFreePool=[];this._lineFreePool=[];this._textUsePool=[];this._lineUsePool=[];}},getOffsets:function(){var s=this.scaler,_830={l:0,r:0,t:0,b:0};if(!s){return _830;}var o=this.opt,_831=0,a,b,c,d,gl=_82a.getNumericLabel,_832=0,ma=s.major,mi=s.minor,ta=this.chart.theme.axis,_833=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font),_834=o.titleFont||(ta.tick&&ta.tick.titleFont),_835=(o.titleGap==0)?0:o.titleGap||(ta.tick&&ta.tick.titleGap)||15,_836=this.chart.theme.getTick("major",o),_837=this.chart.theme.getTick("minor",o),size=_833?g.normalizedLength(g.splitFontString(_833).size):0,_838=_834?g.normalizedLength(g.splitFontString(_834).size):0,_839=o.rotation%360,_83a=o.leftBottom,cosr=Math.abs(Math.cos(_839*Math.PI/180)),sinr=Math.abs(Math.sin(_839*Math.PI/180));this.trailingSymbol=(o.trailingSymbol===undefined||o.trailingSymbol===null)?this.trailingSymbol:o.trailingSymbol;if(_839<0){_839+=360;}if(size){if(this.labels){_831=this._groupLabelWidth(this.labels,_833,o.maxLabelCharCount);}else{_831=this._groupLabelWidth([gl(ma.start,ma.prec,o),gl(ma.start+ma.count*ma.tick,ma.prec,o),gl(mi.start,mi.prec,o),gl(mi.start+mi.count*mi.tick,mi.prec,o)],_833,o.maxLabelCharCount);}_831=o.maxLabelSize?Math.min(o.maxLabelSize,_831):_831;if(this.vertical){var side=_83a?"l":"r";switch(_839){case 0:case 180:_830[side]=_831;_830.t=_830.b=size/2;break;case 90:case 270:_830[side]=size;_830.t=_830.b=_831/2;break;default:if(_839<=_82d||(180<_839&&_839<=(180+_82d))){_830[side]=size*sinr/2+_831*cosr;_830[_83a?"t":"b"]=size*cosr/2+_831*sinr;_830[_83a?"b":"t"]=size*cosr/2;}else{if(_839>(360-_82d)||(180>_839&&_839>(180-_82d))){_830[side]=size*sinr/2+_831*cosr;_830[_83a?"b":"t"]=size*cosr/2+_831*sinr;_830[_83a?"t":"b"]=size*cosr/2;}else{if(_839<90||(180<_839&&_839<270)){_830[side]=size*sinr+_831*cosr;_830[_83a?"t":"b"]=size*cosr+_831*sinr;}else{_830[side]=size*sinr+_831*cosr;_830[_83a?"b":"t"]=size*cosr+_831*sinr;}}}break;}_830[side]+=_82c+Math.max(_836.length,_837.length)+(o.title?(_838+_835):0);}else{var side=_83a?"b":"t";switch(_839){case 0:case 180:_830[side]=size;_830.l=_830.r=_831/2;break;case 90:case 270:_830[side]=_831;_830.l=_830.r=size/2;break;default:if((90-_82d)<=_839&&_839<=90||(270-_82d)<=_839&&_839<=270){_830[side]=size*sinr/2+_831*cosr;_830[_83a?"r":"l"]=size*cosr/2+_831*sinr;_830[_83a?"l":"r"]=size*cosr/2;}else{if(90<=_839&&_839<=(90+_82d)||270<=_839&&_839<=(270+_82d)){_830[side]=size*sinr/2+_831*cosr;_830[_83a?"l":"r"]=size*cosr/2+_831*sinr;_830[_83a?"r":"l"]=size*cosr/2;}else{if(_839<_82d||(180<_839&&_839<(180-_82d))){_830[side]=size*sinr+_831*cosr;_830[_83a?"r":"l"]=size*cosr+_831*sinr;}else{_830[side]=size*sinr+_831*cosr;_830[_83a?"l":"r"]=size*cosr+_831*sinr;}}}break;}_830[side]+=_82c+Math.max(_836.length,_837.length)+(o.title?(_838+_835):0);}}if(_831){this._cachedLabelWidth=_831;}return _830;},cleanGroup:function(_83b){if(this.opt.enableCache&&this.group){this._lineFreePool=this._lineFreePool.concat(this._lineUsePool);this._lineUsePool=[];this._textFreePool=this._textFreePool.concat(this._textUsePool);this._textUsePool=[];}this.inherited(arguments);},createText:function(_83c,_83d,x,y,_83e,_83f,font,_840,_841){if(!this.opt.enableCache||_83c=="html"){return _82b.createText[_83c](this.chart,_83d,x,y,_83e,_83f,font,_840,_841);}var text;if(this._textFreePool.length>0){text=this._textFreePool.pop();text.setShape({x:x,y:y,text:_83f,align:_83e});_83d.add(text);}else{text=_82b.createText[_83c](this.chart,_83d,x,y,_83e,_83f,font,_840,_841);}this._textUsePool.push(text);return text;},createLine:function(_842,_843){var line;if(this.opt.enableCache&&this._lineFreePool.length>0){line=this._lineFreePool.pop();line.setShape(_843);_842.add(line);}else{line=_842.createLine(_843);}if(this.opt.enableCache){this._lineUsePool.push(line);}return line;},render:function(dim,_844){if(!this.dirty){return this;}var o=this.opt,ta=this.chart.theme.axis,_845=o.leftBottom,_846=o.rotation%360,_847,stop,_848,_849=0,_84a,_84b,_84c,_84d,_84e,_84f,_850=o.font||(ta.majorTick&&ta.majorTick.font)||(ta.tick&&ta.tick.font),_851=o.titleFont||(ta.tick&&ta.tick.titleFont),_852=o.fontColor||(ta.majorTick&&ta.majorTick.fontColor)||(ta.tick&&ta.tick.fontColor)||"black",_853=o.titleFontColor||(ta.tick&&ta.tick.titleFontColor)||"black",_854=(o.titleGap==0)?0:o.titleGap||(ta.tick&&ta.tick.titleGap)||15,_855=o.titleOrientation||(ta.tick&&ta.tick.titleOrientation)||"axis",_856=this.chart.theme.getTick("major",o),_857=this.chart.theme.getTick("minor",o),_858=this.chart.theme.getTick("micro",o),_859=Math.max(_856.length,_857.length,_858.length),_85a="stroke" in o?o.stroke:ta.stroke,size=_850?g.normalizedLength(g.splitFontString(_850).size):0,cosr=Math.abs(Math.cos(_846*Math.PI/180)),sinr=Math.abs(Math.sin(_846*Math.PI/180)),_85b=_851?g.normalizedLength(g.splitFontString(_851).size):0;if(_846<0){_846+=360;}if(this.vertical){_847={y:dim.height-_844.b};stop={y:_844.t};_848={y:(dim.height-_844.b+_844.t)/2};_84a=size*sinr+(this._cachedLabelWidth||0)*cosr+_82c+Math.max(_856.length,_857.length)+_85b+_854;_84b={x:0,y:-1};_84e={x:0,y:0};_84c={x:1,y:0};_84d={x:_82c,y:0};switch(_846){case 0:_84f="end";_84e.y=size*0.4;break;case 90:_84f="middle";_84e.x=-size;break;case 180:_84f="start";_84e.y=-size*0.4;break;case 270:_84f="middle";break;default:if(_846<_82d){_84f="end";_84e.y=size*0.4;}else{if(_846<90){_84f="end";_84e.y=size*0.4;}else{if(_846<(180-_82d)){_84f="start";}else{if(_846<(180+_82d)){_84f="start";_84e.y=-size*0.4;}else{if(_846<270){_84f="start";_84e.x=_845?0:size*0.4;}else{if(_846<(360-_82d)){_84f="end";_84e.x=_845?0:size*0.4;}else{_84f="end";_84e.y=size*0.4;}}}}}}}if(_845){_847.x=stop.x=_844.l;_849=(_855&&_855=="away")?90:270;_848.x=_844.l-_84a+(_849==270?_85b:0);_84c.x=-1;_84d.x=-_84d.x;}else{_847.x=stop.x=dim.width-_844.r;_849=(_855&&_855=="axis")?90:270;_848.x=dim.width-_844.r+_84a-(_849==270?0:_85b);switch(_84f){case "start":_84f="end";break;case "end":_84f="start";break;case "middle":_84e.x+=size;break;}}}else{_847={x:_844.l};stop={x:dim.width-_844.r};_848={x:(dim.width-_844.r+_844.l)/2};_84a=size*cosr+(this._cachedLabelWidth||0)*sinr+_82c+Math.max(_856.length,_857.length)+_85b+_854;_84b={x:1,y:0};_84e={x:0,y:0};_84c={x:0,y:1};_84d={x:0,y:_82c};switch(_846){case 0:_84f="middle";_84e.y=size;break;case 90:_84f="start";_84e.x=-size*0.4;break;case 180:_84f="middle";break;case 270:_84f="end";_84e.x=size*0.4;break;default:if(_846<(90-_82d)){_84f="start";_84e.y=_845?size:0;}else{if(_846<(90+_82d)){_84f="start";_84e.x=-size*0.4;}else{if(_846<180){_84f="start";_84e.y=_845?0:-size;}else{if(_846<(270-_82d)){_84f="end";_84e.y=_845?0:-size;}else{if(_846<(270+_82d)){_84f="end";_84e.y=_845?size*0.4:0;}else{_84f="end";_84e.y=_845?size:0;}}}}}}if(_845){_847.y=stop.y=dim.height-_844.b;_849=(_855&&_855=="axis")?180:0;_848.y=dim.height-_844.b+_84a-(_849?_85b:0);}else{_847.y=stop.y=_844.t;_849=(_855&&_855=="away")?180:0;_848.y=_844.t-_84a+(_849?0:_85b);_84c.y=-1;_84d.y=-_84d.y;switch(_84f){case "start":_84f="end";break;case "end":_84f="start";break;case "middle":_84e.y-=size;break;}}}this.cleanGroup();try{var s=this.group,c=this.scaler,t=this.ticks,_85c,f=lin.getTransformerFromModel(this.scaler),_85d=(!o.title||!_849)&&!_846&&this.opt.htmlLabels&&!has("ie")&&!has("opera")?"html":"gfx",dx=_84c.x*_856.length,dy=_84c.y*_856.length;s.createLine({x1:_847.x,y1:_847.y,x2:stop.x,y2:stop.y}).setStroke(_85a);if(o.title){var _85e=_82b.createText[_85d](this.chart,s,_848.x,_848.y,"middle",o.title,_851,_853);if(_85d=="html"){this.htmlElements.push(_85e);}else{_85e.setTransform(g.matrix.rotategAt(_849,_848.x,_848.y));}}if(t==null){this.dirty=false;return this;}arr.forEach(t.major,function(tick){var _85f=f(tick.value),elem,x=_847.x+_84b.x*_85f,y=_847.y+_84b.y*_85f;this.createLine(s,{x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_856);if(tick.label){var _860=o.maxLabelCharCount?this.getTextWithLimitCharCount(tick.label,_850,o.maxLabelCharCount):{text:tick.label,truncated:false};_860=o.maxLabelSize?this.getTextWithLimitLength(_860.text,_850,o.maxLabelSize,_860.truncated):_860;elem=this.createText(_85d,s,x+dx+_84d.x+(_846?0:_84e.x),y+dy+_84d.y+(_846?0:_84e.y),_84f,_860.text,_850,_852);if(this.chart.truncateBidi&&_860.truncated){this.chart.truncateBidi(elem,tick.label,_85d);}_860.truncated&&this.labelTooltip(elem,this.chart,tick.label,_860.text,_850,_85d);if(_85d=="html"){this.htmlElements.push(elem);}else{if(_846){elem.setTransform([{dx:_84e.x,dy:_84e.y},g.matrix.rotategAt(_846,x+dx+_84d.x,y+dy+_84d.y)]);}}}},this);dx=_84c.x*_857.length;dy=_84c.y*_857.length;_85c=c.minMinorStep<=c.minor.tick*c.bounds.scale;arr.forEach(t.minor,function(tick){var _861=f(tick.value),elem,x=_847.x+_84b.x*_861,y=_847.y+_84b.y*_861;this.createLine(s,{x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_857);if(_85c&&tick.label){var _862=o.maxLabelCharCount?this.getTextWithLimitCharCount(tick.label,_850,o.maxLabelCharCount):{text:tick.label,truncated:false};_862=o.maxLabelSize?this.getTextWithLimitLength(_862.text,_850,o.maxLabelSize,_862.truncated):_862;elem=this.createText(_85d,s,x+dx+_84d.x+(_846?0:_84e.x),y+dy+_84d.y+(_846?0:_84e.y),_84f,_862.text,_850,_852);if(this.chart.getTextDir&&_862.truncated){this.chart.truncateBidi(elem,tick.label,_85d);}_862.truncated&&this.labelTooltip(elem,this.chart,tick.label,_862.text,_850,_85d);if(_85d=="html"){this.htmlElements.push(elem);}else{if(_846){elem.setTransform([{dx:_84e.x,dy:_84e.y},g.matrix.rotategAt(_846,x+dx+_84d.x,y+dy+_84d.y)]);}}}},this);dx=_84c.x*_858.length;dy=_84c.y*_858.length;arr.forEach(t.micro,function(tick){var _863=f(tick.value),elem,x=_847.x+_84b.x*_863,y=_847.y+_84b.y*_863;this.createLine(s,{x1:x,y1:y,x2:x+dx,y2:y+dy}).setStroke(_858);},this);}catch(e){}this.dirty=false;return this;},labelTooltip:function(elem,_864,_865,_866,font,_867){var _868=["dijit/Tooltip"];var _869={type:"rect"},_86a=["above","below"],_86b=g._base._getTextBox(_866,{font:font}).w||0,_86c=font?g.normalizedLength(g.splitFontString(font).size):0;if(_867=="html"){lang.mixin(_869,html.coords(elem.firstChild,true));_869.width=Math.ceil(_86b);_869.height=Math.ceil(_86c);this._events.push({shape:dojo,handle:_827.connect(elem.firstChild,"onmouseover",this,function(e){require(_868,function(_86d){_86d.show(_865,_869,_86a);});})});this._events.push({shape:dojo,handle:_827.connect(elem.firstChild,"onmouseout",this,function(e){require(_868,function(_86e){_86e.hide(_869);});})});}else{var shp=elem.getShape(),lt=html.coords(_864.node,true);_869=lang.mixin(_869,{x:shp.x-_86b/2,y:shp.y});_869.x+=lt.x;_869.y+=lt.y;_869.x=Math.round(_869.x);_869.y=Math.round(_869.y);_869.width=Math.ceil(_86b);_869.height=Math.ceil(_86c);this._events.push({shape:elem,handle:elem.connect("onmouseenter",this,function(e){require(_868,function(_86f){_86f.show(_865,_869,_86a);});})});this._events.push({shape:elem,handle:elem.connect("onmouseleave",this,function(e){require(_868,function(_870){_870.hide(_869);});})});}}});});},"dojox/charting/plot2d/Scatter":function(){define("dojox/charting/plot2d/Scatter",["dojo/_base/lang","dojo/_base/array","dojo/_base/declare","./Base","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx","dojox/gfx/gradutils"],function(lang,arr,_871,Base,dc,df,dfr,du,fx,_872){var _873=dfr.lambda("item.purgeGroup()");return _871("dojox.charting.plot2d.Scatter",Base,{defaultParams:{hAxis:"x",vAxis:"y",shadows:null,animate:null},optionalParams:{markerStroke:{},markerOutline:{},markerShadow:{},markerFill:{},markerFont:"",markerFontColor:""},constructor:function(_874,_875){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_875);du.updateWithPattern(this.opt,_875,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},render:function(dim,_876){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_876);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_873);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,_877=this.events();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(!run.data.length){run.dirty=false;t.skip();continue;}var _878=t.next("marker",[this.opt,run]),s=run.group,_879,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler);if(typeof run.data[0]=="number"){_879=arr.map(run.data,function(v,i){return {x:ht(i+1)+_876.l,y:dim.height-_876.b-vt(v)};},this);}else{_879=arr.map(run.data,function(v,i){return {x:ht(v.x)+_876.l,y:dim.height-_876.b-vt(v.y)};},this);}var _87a=new Array(_879.length),_87b=new Array(_879.length),_87c=new Array(_879.length);arr.forEach(_879,function(c,i){var _87d=typeof run.data[i]=="number"?t.post(_878,"marker"):t.addMixin(_878,"marker",run.data[i],true),path="M"+c.x+" "+c.y+" "+_87d.symbol;if(_87d.marker.shadow){_87a[i]=s.createPath("M"+(c.x+_87d.marker.shadow.dx)+" "+(c.y+_87d.marker.shadow.dy)+" "+_87d.symbol).setStroke(_87d.marker.shadow).setFill(_87d.marker.shadow.color);if(this.animate){this._animateScatter(_87a[i],dim.height-_876.b);}}if(_87d.marker.outline){var _87e=dc.makeStroke(_87d.marker.outline);_87e.width=2*_87e.width+_87d.marker.stroke.width;_87c[i]=s.createPath(path).setStroke(_87e);if(this.animate){this._animateScatter(_87c[i],dim.height-_876.b);}}var _87f=dc.makeStroke(_87d.marker.stroke),fill=this._plotFill(_87d.marker.fill,dim,_876);if(fill&&(fill.type==="linear"||fill.type=="radial")){var _880=_872.getColor(fill,{x:c.x,y:c.y});if(_87f){_87f.color=_880;}_87b[i]=s.createPath(path).setStroke(_87f).setFill(_880);}else{_87b[i]=s.createPath(path).setStroke(_87f).setFill(fill);}if(this.animate){this._animateScatter(_87b[i],dim.height-_876.b);}},this);if(_87b.length){run.dyn.stroke=_87b[_87b.length-1].getStroke();run.dyn.fill=_87b[_87b.length-1].getFill();}if(_877){var _881=new Array(_87b.length);arr.forEach(_87b,function(s,i){var o={element:"marker",index:i,run:run,shape:s,outline:_87c&&_87c[i]||null,shadow:_87a&&_87a[i]||null,cx:_879[i].x,cy:_879[i].y};if(typeof run.data[0]=="number"){o.x=i+1;o.y=run.data[i];}else{o.x=run.data[i].x;o.y=run.data[i].y;}this._connectEvents(o);_881[i]=o;},this);this._eventSeries[run.name]=_881;}else{delete this._eventSeries[run.name];}run.dirty=false;}this.dirty=false;return this;},_animateScatter:function(_882,_883){fx.animateTransform(lang.delegate({shape:_882,duration:1200,transform:[{name:"translate",start:[0,_883],end:[0,0]},{name:"scale",start:[0,0],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"dojox/data/CsvStore":function(){define("dojox/data/CsvStore",["dojo/_base/lang","dojo/_base/declare","dojo/_base/xhr","dojo/_base/window","dojo/data/util/filter","dojo/data/util/simpleFetch"],function(lang,_884,xhr,_885,_886,_887){var _888=_884("dojox.data.CsvStore",null,{constructor:function(_889){this._attributes=[];this._attributeIndexes={};this._dataArray=[];this._arrayOfAllItems=[];this._loadFinished=false;if(_889.url){this.url=_889.url;}this._csvData=_889.data;if(_889.label){this.label=_889.label;}else{if(this.label===""){this.label=undefined;}}this._storeProp="_csvStore";this._idProp="_csvId";this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._loadInProgress=false;this._queuedFetches=[];this.identifier=_889.identifier;if(this.identifier===""){delete this.identifier;}else{this._idMap={};}if("separator" in _889){this.separator=_889.separator;}if("urlPreventCache" in _889){this.urlPreventCache=_889.urlPreventCache?true:false;}},url:"",label:"",identifier:"",separator:",",urlPreventCache:false,_assertIsItem:function(item){if(!this.isItem(item)){throw new Error(this.declaredClass+": a function was passed an item argument that was not an item");}},_getIndex:function(item){var idx=this.getIdentity(item);if(this.identifier){idx=this._idMap[idx];}return idx;},getValue:function(item,_88a,_88b){this._assertIsItem(item);var _88c=_88b;if(typeof _88a==="string"){var ai=this._attributeIndexes[_88a];if(ai!=null){var _88d=this._dataArray[this._getIndex(item)];_88c=_88d[ai]||_88b;}}else{throw new Error(this.declaredClass+": a function was passed an attribute argument that was not a string");}return _88c;},getValues:function(item,_88e){var _88f=this.getValue(item,_88e);return (_88f?[_88f]:[]);},getAttributes:function(item){this._assertIsItem(item);var _890=[];var _891=this._dataArray[this._getIndex(item)];for(var i=0;i<_891.length;i++){if(_891[i]!==""){_890.push(this._attributes[i]);}}return _890;},hasAttribute:function(item,_892){this._assertIsItem(item);if(typeof _892==="string"){var _893=this._attributeIndexes[_892];var _894=this._dataArray[this._getIndex(item)];return (typeof _893!=="undefined"&&_893<_894.length&&_894[_893]!=="");}else{throw new Error(this.declaredClass+": a function was passed an attribute argument that was not a string");}},containsValue:function(item,_895,_896){var _897=undefined;if(typeof _896==="string"){_897=_886.patternToRegExp(_896,false);}return this._containsValue(item,_895,_896,_897);},_containsValue:function(item,_898,_899,_89a){var _89b=this.getValues(item,_898);for(var i=0;i<_89b.length;++i){var _89c=_89b[i];if(typeof _89c==="string"&&_89a){return (_89c.match(_89a)!==null);}else{if(_899===_89c){return true;}}}return false;},isItem:function(_89d){if(_89d&&_89d[this._storeProp]===this){var _89e=_89d[this._idProp];if(this.identifier){var data=this._dataArray[this._idMap[_89e]];if(data){return true;}}else{if(_89e>=0&&_89e<this._dataArray.length){return true;}}}return false;},isItemLoaded:function(_89f){return this.isItem(_89f);},loadItem:function(item){},getFeatures:function(){return this._features;},getLabel:function(item){if(this.label&&this.isItem(item)){return this.getValue(item,this.label);}return undefined;},getLabelAttributes:function(item){if(this.label){return [this.label];}return null;},_fetchItems:function(_8a0,_8a1,_8a2){var self=this;var _8a3=function(_8a4,_8a5){var _8a6=null;if(_8a4.query){var key,_8a7;_8a6=[];var _8a8=_8a4.queryOptions?_8a4.queryOptions.ignoreCase:false;var _8a9={};for(key in _8a4.query){_8a7=_8a4.query[key];if(typeof _8a7==="string"){_8a9[key]=_886.patternToRegExp(_8a7,_8a8);}}for(var i=0;i<_8a5.length;++i){var _8aa=true;var _8ab=_8a5[i];for(key in _8a4.query){_8a7=_8a4.query[key];if(!self._containsValue(_8ab,key,_8a7,_8a9[key])){_8aa=false;}}if(_8aa){_8a6.push(_8ab);}}}else{_8a6=_8a5.slice(0,_8a5.length);}_8a1(_8a6,_8a4);};if(this._loadFinished){_8a3(_8a0,this._arrayOfAllItems);}else{if(this.url!==""){if(this._loadInProgress){this._queuedFetches.push({args:_8a0,filter:_8a3});}else{this._loadInProgress=true;var _8ac={url:self.url,handleAs:"text",preventCache:self.urlPreventCache};var _8ad=xhr.get(_8ac);_8ad.addCallback(function(data){try{self._processData(data);_8a3(_8a0,self._arrayOfAllItems);self._handleQueuedFetches();}catch(e){_8a2(e,_8a0);}});_8ad.addErrback(function(_8ae){self._loadInProgress=false;if(_8a2){_8a2(_8ae,_8a0);}else{throw _8ae;}});var _8af=null;if(_8a0.abort){_8af=_8a0.abort;}_8a0.abort=function(){var df=_8ad;if(df&&df.fired===-1){df.cancel();df=null;}if(_8af){_8af.call(_8a0);}};}}else{if(this._csvData){try{this._processData(this._csvData);this._csvData=null;_8a3(_8a0,this._arrayOfAllItems);}catch(e){_8a2(e,_8a0);}}else{var _8b0=new Error(this.declaredClass+": No CSV source data was provided as either URL or String data input.");if(_8a2){_8a2(_8b0,_8a0);}else{throw _8b0;}}}}},close:function(_8b1){},_getArrayOfArraysFromCsvFileContents:function(_8b2){if(lang.isString(_8b2)){var _8b3=new RegExp("^\\s+","g");var _8b4=new RegExp("\\s+$","g");var _8b5=new RegExp("\"\"","g");var _8b6=[];var i;var _8b7=this._splitLines(_8b2);for(i=0;i<_8b7.length;++i){var _8b8=_8b7[i];if(_8b8.length>0){var _8b9=_8b8.split(this.separator);var j=0;while(j<_8b9.length){var _8ba=_8b9[j];var _8bb=_8ba.replace(_8b3,"");var _8bc=_8bb.replace(_8b4,"");var _8bd=_8bc.charAt(0);var _8be=_8bc.charAt(_8bc.length-1);var _8bf=_8bc.charAt(_8bc.length-2);var _8c0=_8bc.charAt(_8bc.length-3);if(_8bc.length===2&&_8bc=="\"\""){_8b9[j]="";}else{if((_8bd=="\"")&&((_8be!="\"")||((_8be=="\"")&&(_8bf=="\"")&&(_8c0!="\"")))){if(j+1===_8b9.length){return;}var _8c1=_8b9[j+1];_8b9[j]=_8bb+this.separator+_8c1;_8b9.splice(j+1,1);}else{if((_8bd=="\"")&&(_8be=="\"")){_8bc=_8bc.slice(1,(_8bc.length-1));_8bc=_8bc.replace(_8b5,"\"");}_8b9[j]=_8bc;j+=1;}}}_8b6.push(_8b9);}}this._attributes=_8b6.shift();for(i=0;i<this._attributes.length;i++){this._attributeIndexes[this._attributes[i]]=i;}this._dataArray=_8b6;}},_splitLines:function(_8c2){var _8c3=[];var i;var line="";var _8c4=false;for(i=0;i<_8c2.length;i++){var c=_8c2.charAt(i);switch(c){case "\"":_8c4=!_8c4;line+=c;break;case "\r":if(_8c4){line+=c;}else{_8c3.push(line);line="";if(i<(_8c2.length-1)&&_8c2.charAt(i+1)=="\n"){i++;}}break;case "\n":if(_8c4){line+=c;}else{_8c3.push(line);line="";}break;default:line+=c;}}if(line!==""){_8c3.push(line);}return _8c3;},_processData:function(data){this._getArrayOfArraysFromCsvFileContents(data);this._arrayOfAllItems=[];if(this.identifier){if(this._attributeIndexes[this.identifier]===undefined){throw new Error(this.declaredClass+": Identity specified is not a column header in the data set.");}}for(var i=0;i<this._dataArray.length;i++){var id=i;if(this.identifier){var _8c5=this._dataArray[i];id=_8c5[this._attributeIndexes[this.identifier]];this._idMap[id]=i;}this._arrayOfAllItems.push(this._createItemFromIdentity(id));}this._loadFinished=true;this._loadInProgress=false;},_createItemFromIdentity:function(_8c6){var item={};item[this._storeProp]=this;item[this._idProp]=_8c6;return item;},getIdentity:function(item){if(this.isItem(item)){return item[this._idProp];}return null;},fetchItemByIdentity:function(_8c7){var item;var _8c8=_8c7.scope?_8c7.scope:_885.global;if(!this._loadFinished){var self=this;if(this.url!==""){if(this._loadInProgress){this._queuedFetches.push({args:_8c7});}else{this._loadInProgress=true;var _8c9={url:self.url,handleAs:"text"};var _8ca=xhr.get(_8c9);_8ca.addCallback(function(data){try{self._processData(data);var item=self._createItemFromIdentity(_8c7.identity);if(!self.isItem(item)){item=null;}if(_8c7.onItem){_8c7.onItem.call(_8c8,item);}self._handleQueuedFetches();}catch(error){if(_8c7.onError){_8c7.onError.call(_8c8,error);}}});_8ca.addErrback(function(_8cb){this._loadInProgress=false;if(_8c7.onError){_8c7.onError.call(_8c8,_8cb);}});}}else{if(this._csvData){try{self._processData(self._csvData);self._csvData=null;item=self._createItemFromIdentity(_8c7.identity);if(!self.isItem(item)){item=null;}if(_8c7.onItem){_8c7.onItem.call(_8c8,item);}}catch(e){if(_8c7.onError){_8c7.onError.call(_8c8,e);}}}}}else{item=this._createItemFromIdentity(_8c7.identity);if(!this.isItem(item)){item=null;}if(_8c7.onItem){_8c7.onItem.call(_8c8,item);}}},getIdentityAttributes:function(item){if(this.identifier){return [this.identifier];}else{return null;}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _8cc=this._queuedFetches[i];var _8cd=_8cc.filter;var _8ce=_8cc.args;if(_8cd){_8cd(_8ce,this._arrayOfAllItems);}else{this.fetchItemByIdentity(_8cc.args);}}this._queuedFetches=[];}}});lang.extend(_888,_887);return _888;});},"dojox/charting/plot2d/ClusteredColumns":function(){define("dojox/charting/plot2d/ClusteredColumns",["dojo/_base/array","dojo/_base/declare","./Columns","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils"],function(arr,_8cf,_8d0,dc,df,dfr,du){var _8d1=dfr.lambda("item.purgeGroup()");return _8cf("dojox.charting.plot2d.ClusteredColumns",_8d0,{render:function(dim,_8d2){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_8d2);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_8d1);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,f,gap,_8d3,_8d4,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_8d5=Math.max(0,this._vScaler.bounds.lower),_8d6=vt(_8d5),_8d7=this.events();f=dc.calculateBarSize(this._hScaler.bounds.scale,this.opt,this.series.length);gap=f.gap;_8d3=_8d4=f.size;for(var i=0;i<this.series.length;++i){var run=this.series[i],_8d8=_8d4*i;if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();var _8d9=t.next("column",[this.opt,run]),s=run.group,_8da=new Array(run.data.length);for(var j=0;j<run.data.length;++j){var _8db=run.data[j];if(_8db!==null){var v=typeof _8db=="number"?_8db:_8db.y,vv=vt(v),_8dc=vv-_8d6,h=Math.abs(_8dc),_8dd=typeof _8db!="number"?t.addMixin(_8d9,"column",_8db,true):t.post(_8d9,"column");if(_8d3>=1&&h>=0){var rect={x:_8d2.l+ht(j+0.5)+gap+_8d8,y:dim.height-_8d2.b-(v>_8d5?vv:_8d6),width:_8d3,height:h};var _8de=this._plotFill(_8dd.series.fill,dim,_8d2);_8de=this._shapeFill(_8de,rect);var _8df=s.createRect(rect).setFill(_8de).setStroke(_8dd.series.stroke);run.dyn.fill=_8df.getFill();run.dyn.stroke=_8df.getStroke();if(_8d7){var o={element:"column",index:j,run:run,shape:_8df,x:j+0.5,y:v};this._connectEvents(o);_8da[j]=o;}if(this.animate){this._animateColumn(_8df,dim.height-_8d2.b-_8d6,h);}}}}this._eventSeries[run.name]=_8da;run.dirty=false;}this.dirty=false;return this;}});});},"dojo/DeferredList":function(){define(["./_base/kernel","./_base/Deferred","./_base/array"],function(dojo,_8e0,_8e1){dojo.DeferredList=function(list,_8e2,_8e3,_8e4,_8e5){var _8e6=[];_8e0.call(this);var self=this;if(list.length===0&&!_8e2){this.resolve([0,[]]);}var _8e7=0;_8e1.forEach(list,function(item,i){item.then(function(_8e8){if(_8e2){self.resolve([i,_8e8]);}else{_8e9(true,_8e8);}},function(_8ea){if(_8e3){self.reject(_8ea);}else{_8e9(false,_8ea);}if(_8e4){return null;}throw _8ea;});function _8e9(_8eb,_8ec){_8e6[i]=[_8eb,_8ec];_8e7++;if(_8e7===list.length){self.resolve(_8e6);}};});};dojo.DeferredList.prototype=new _8e0();dojo.DeferredList.prototype.gatherResults=function(_8ed){var d=new dojo.DeferredList(_8ed,false,true,false);d.addCallback(function(_8ee){var ret=[];_8e1.forEach(_8ee,function(_8ef){ret.push(_8ef[1]);});return ret;});return d;};return dojo.DeferredList;});},"esri/tasks/geometry":function(){define(["dijit","dojo","dojox","dojo/require!esri/tasks/_task"],function(_8f0,dojo,_8f1){dojo.provide("esri.tasks.geometry");dojo.require("esri.tasks._task");dojo.declare("esri.tasks.GeometryService",esri.tasks._Task,{constructor:function(url){var _8f2=dojo.hitch;this._projectHandler=_8f2(this,this._projectHandler);this._simplifyHandler=_8f2(this,this._simplifyHandler);this._bufferHandler=_8f2(this,this._bufferHandler);this._areasAndLengthsHandler=_8f2(this,this._areasAndLengthsHandler);this._lengthsHandler=_8f2(this,this._lengthsHandler);this._labelPointsHandler=_8f2(this,this._labelPointsHandler);this._relationHandler=_8f2(this,this._relationHandler);this._convexHullHandler=_8f2(this,this._convexHullHandler);this._unionHandler=_8f2(this,this._unionHandler);this._autoCompleteHandler=_8f2(this,this._autoCompleteHandler);this._reshapeHandler=_8f2(this,this._reshapeHandler);this._cutHandler=_8f2(this,this._cutHandler);this._intersectHandler=_8f2(this,this._intersectHandler);this._differenceHandler=_8f2(this,this._differenceHandler);this._trimExtendHandler=_8f2(this,this._trimExtendHandler);this._densifyHandler=_8f2(this,this._densifyHandler);this._generalizeHandler=_8f2(this,this._densifyHandler);this._offsetHandler=_8f2(this,this._offsetHandler);this._distanceHandler=_8f2(this,this._distanceHandler);},_encodeGeometries:function(_8f3){var gs=[];for(var i=0,il=_8f3.length;i<il;i++){gs.push(_8f3[i].toJson());}return {geometryType:esri.geometry.getJsonType(_8f3[0]),geometries:gs};},_decodeGeometries:function(_8f4,_8f5,sr){var _8f6=esri.geometry.getGeometryType(_8f5),_8f7=_8f4.geometries,fs=[],_8f8={spatialReference:sr.toJson()},_8f9=dojo.mixin;dojo.forEach(_8f7,function(g,i){fs[i]=new _8f6(_8f9(g,_8f8));});return fs;},_toProjectGeometry:function(_8fa){var sr=_8fa.spatialReference.toJson();if(_8fa instanceof esri.geometry.Extent){return new esri.geometry.Polygon({rings:[[[_8fa.xmin,_8fa.ymin],[_8fa.xmin,_8fa.ymax],[_8fa.xmax,_8fa.ymax],[_8fa.xmax,_8fa.ymin],[_8fa.xmin,_8fa.ymin]]],spatialReference:sr});}else{return new esri.geometry.Polyline({paths:[[].concat(_8fa.points)],spatialReference:sr});}},_fromProjectedGeometry:function(_8fb,_8fc,_8fd){if(_8fc==="esriGeometryEnvelope"){var ring=_8fb.rings[0];return new esri.geometry.Extent(ring[0][0],ring[0][1],ring[2][0],ring[2][1],_8fd);}else{return new esri.geometry.Multipoint({points:_8fb.paths[0],spatialReference:_8fd.toJson()});}},project:function(_8fe,_8ff,_900,_901){var _902=dojo.mixin({},this._url.query,{f:"json"}),_903;if(!_8fe.geometries){_903=_8fe[0];_902=dojo.mixin(_902,{outSR:_8ff.wkid||dojo.toJson(_8ff.toJson()),inSR:_903.spatialReference.wkid||dojo.toJson(_903.spatialReference.toJson()),geometries:dojo.toJson(this._encodeGeometries(_8fe))});}else{_901=_900;_900=_8ff;_8ff=_8fe.outSR;_903=_8fe.geometries[0];_902=dojo.mixin(_902,_8fe.toJson());}var _904=esri.geometry.getJsonType(_903),_905=this._projectHandler,_906=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/project",content:_902,callbackParamName:"callback",load:(function(r,i){_905(r,i,_904,_8ff,_900,_901,dfd);}),error:(function(r){_906(r,_901,dfd);})});return dfd;},_projectHandler:function(_907,io,_908,_909,_90a,_90b,dfd){try{var fs=this._decodeGeometries(_907,_908,_909);this._successHandler([fs],"onProjectComplete",_90a,dfd);}catch(err){this._errorHandler(err,_90b,dfd);}},onProjectComplete:function(){},simplify:function(_90c,_90d,_90e){var _90f=_90c[0].spatialReference;var _910=dojo.mixin({},this._url.query,{f:"json",sr:_90f.wkid?_90f.wkid:dojo.toJson(_90f.toJson()),geometries:dojo.toJson(this._encodeGeometries(_90c))}),_911=esri.geometry.getJsonType(_90c[0]),_912=this._simplifyHandler,_913=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/simplify",content:_910,callbackParamName:"callback",load:(function(r,i){_912(r,i,_911,_90f,_90d,_90e,dfd);}),error:(function(r){_913(r,_90e,dfd);})});return dfd;},_simplifyHandler:function(_914,io,_915,sr,_916,_917,dfd){try{var fs=this._decodeGeometries(_914,_915,sr);this._successHandler([fs],"onSimplifyComplete",_916,dfd);}catch(err){this._errorHandler(err,_917,dfd);}},onSimplifyComplete:function(){},convexHull:function(_918,_919,_91a){var _91b=_918[0].spatialReference;var _91c=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_91b.toJson()),geometries:dojo.toJson(this._encodeGeometries(_918))}),_91d=this._convexHullHandler,_91e=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/convexHull",content:_91c,callbackParamName:"callback",load:(function(r,i){_91d(r,i,_91b,_919,_91a,dfd);}),error:(function(r){_91e(r,_91a,dfd);})});return dfd;},_convexHullHandler:function(_91f,io,_920,_921,_922,dfd){try{var geom=esri.geometry.fromJson(_91f.geometry).setSpatialReference(_920);this._successHandler([geom],"onConvexHullComplete",_921,dfd);}catch(err){this._errorHandler(err,_922,dfd);}},onConvexHullComplete:function(){},union:function(_923,_924,_925){var _926=_923[0].spatialReference;var _927=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_926.toJson()),geometries:dojo.toJson(this._encodeGeometries(_923))}),_928=this._unionHandler,_929=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/union",content:_927,callbackParamName:"callback",load:(function(r,i){_928(r,i,_926,_924,_925,dfd);}),error:(function(r){_929(r,_925,dfd);})});return dfd;},_unionHandler:function(_92a,io,_92b,_92c,_92d,dfd){try{var geom=esri.geometry.fromJson(_92a.geometry).setSpatialReference(_92b);this._successHandler([geom],"onUnionComplete",_92c,dfd);}catch(err){this._errorHandler(err,_92d,dfd);}},onUnionComplete:function(){},autoComplete:function(_92e,_92f,_930,_931){var _932=_92e[0].spatialReference;var _933=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_932.toJson()),polygons:dojo.toJson(this._encodeGeometries(_92e).geometries),polylines:dojo.toJson(this._encodeGeometries(_92f).geometries)}),_934=this._autoCompleteHandler,_935=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/autoComplete",content:_933,callbackParamName:"callback",load:(function(r,i){_934(r,i,_932,_930,_931,dfd);}),error:(function(r){_935(r,_931,dfd);})});return dfd;},_autoCompleteHandler:function(_936,io,_937,_938,_939,dfd){try{var Pgon=esri.geometry.Polygon,_93a=_936.geometries,_93b=[];for(var i=0,il=_93a.length;i<il;i++){_93b[i]=new Pgon({spatialReference:_937,rings:_93a[i].rings});}this._successHandler([_93b],"onAutoCompleteComplete",_938,dfd);}catch(err){this._errorHandler(err,_939,dfd);}},onAutoCompleteComplete:function(){},reshape:function(_93c,_93d,_93e,_93f){var _940=_93c.spatialReference;var _941=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_940.toJson()),target:dojo.toJson({geometryType:esri.geometry.getJsonType(_93c),geometry:_93c.toJson()}),reshaper:dojo.toJson(_93d.toJson())}),_942=this._reshapeHandler,_943=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/reshape",content:_941,callbackParamName:"callback",load:(function(r,i){_942(r,i,_940,_93e,_93f,dfd);}),error:(function(r){_943(r,_93f,dfd);})});return dfd;},_reshapeHandler:function(_944,io,_945,_946,_947,dfd){try{var geom=esri.geometry.fromJson(_944.geometry).setSpatialReference(_945);this._successHandler([geom],"onReshapeComplete",_946,dfd);}catch(err){this._errorHandler(err,_947,dfd);}},onReshapeComplete:function(){},cut:function(_948,_949,_94a,_94b){var _94c=_948[0].spatialReference;var _94d=dojo.map(_948,function(_94e){return _94e.toJson();});var _94f=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_94c.toJson()),target:dojo.toJson({geometryType:esri.geometry.getJsonType(_948[0]),geometries:_94d}),cutter:dojo.toJson(_949.toJson())}),_950=this._cutHandler,_951=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/cut",content:_94f,callbackParamName:"callback",load:(function(r,i){_950(r,i,_94c,_94a,_94b,dfd);}),error:(function(r){_951(r,_94b,dfd);})});return dfd;},_cutHandler:function(_952,io,_953,_954,_955,dfd){try{var _956=_952.geometries;var _957={};_957.cutIndexes=_952.cutIndexes;_957.geometries=[];dojo.forEach(_956,function(geom){_957.geometries.push(esri.geometry.fromJson(geom).setSpatialReference(_953));});this._successHandler([_957],"onCutComplete",_954,dfd);}catch(err){this._errorHandler(err,_955,dfd);}},onCutComplete:function(){},intersect:function(_958,_959,_95a,_95b){var _95c=_958[0].spatialReference;var _95d=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_95c.toJson()),geometries:dojo.toJson(this._encodeGeometries(_958)),geometry:dojo.toJson({geometryType:esri.geometry.getJsonType(_959),geometry:_959.toJson()})}),_95e=this._intersectHandler,_95f=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/intersect",content:_95d,callbackParamName:"callback",load:(function(r,i){_95e(r,i,_95c,_95a,_95b,dfd);}),error:(function(r){_95f(r,_95b,dfd);})});return dfd;},_intersectHandler:function(_960,io,_961,_962,_963,dfd){try{var _964=_960.geometries,_965=[];dojo.forEach(_964,function(geom){_965.push(esri.geometry.fromJson(geom).setSpatialReference(_961));});this._successHandler([_965],"onIntersectComplete",_962,dfd);}catch(err){this._errorHandler(err,_963,dfd);}},onIntersectComplete:function(){},difference:function(_966,_967,_968,_969){var _96a=_966[0].spatialReference;var _96b=dojo.mixin({},this._url.query,{f:"json",sr:dojo.toJson(_96a.toJson()),geometries:dojo.toJson(this._encodeGeometries(_966)),geometry:dojo.toJson({geometryType:esri.geometry.getJsonType(_967),geometry:_967.toJson()})}),_96c=this._differenceHandler,_96d=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/difference",content:_96b,callbackParamName:"callback",load:(function(r,i){_96c(r,i,_96a,_968,_969,dfd);}),error:(function(r){_96d(r,_969,dfd);})});return dfd;},_differenceHandler:function(_96e,io,_96f,_970,_971,dfd){try{var _972=_96e.geometries,_973=[];dojo.forEach(_972,function(geom){_973.push(esri.geometry.fromJson(geom).setSpatialReference(_96f));});this._successHandler([_973],"onDifferenceComplete",_970,dfd);}catch(err){this._errorHandler(err,_971,dfd);}},onDifferenceComplete:function(){},buffer:function(_974,_975,_976){var _977=dojo.mixin({},this._url.query,{f:"json"},_974.toJson()),sr=_974.outSpatialReference||_974.geometries[0].spatialReference,_978=this._bufferHandler,_979=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/buffer",content:_977,callbackParamName:"callback",load:(function(r,i){_978(r,i,sr,_975,_976,dfd);}),error:(function(r){_979(r,_976,dfd);})});return dfd;},_bufferHandler:function(_97a,io,sr,_97b,_97c,dfd){try{var Pgon=esri.geometry.Polygon,_97d=_97a.geometries,_97e=[];for(var i=0,il=_97d.length;i<il;i++){_97e[i]=new Pgon({spatialReference:sr,rings:_97d[i].rings});}this._successHandler([_97e],"onBufferComplete",_97b,dfd);}catch(err){this._errorHandler(err,_97c,dfd);}},onBufferComplete:function(){},areasAndLengths:function(_97f,_980,_981){var _982=dojo.mixin({},this._url.query,{f:"json"},_97f.toJson()),_983=this._areasAndLengthsHandler,_984=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/areasAndLengths",content:_982,callbackParamName:"callback",load:(function(r,i){_983(r,i,_980,_981,dfd);}),error:(function(r){_984(r,_981,dfd);})});return dfd;},_areasAndLengthsHandler:function(_985,io,_986,_987,dfd){try{this._successHandler([_985],"onAreasAndLengthsComplete",_986,dfd);}catch(err){this._errorHandler(err,_987,dfd);}},onAreasAndLengthsComplete:function(){},lengths:function(_988,_989,_98a){var _98b=dojo.mixin({},this._url.query,{f:"json"},_988.toJson()),_98c=this._lengthsHandler,_98d=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/lengths",content:_98b,callbackParamName:"callback",load:(function(r,i){_98c(r,i,_989,_98a,dfd);}),error:(function(r){_98d(r,_98a,dfd);})});return dfd;},_lengthsHandler:function(_98e,io,_98f,_990,dfd){try{this._successHandler([_98e],"onLengthsComplete",_98f,dfd);}catch(err){this._errorHandler(err,_990,dfd);}},onLengthsComplete:function(){},labelPoints:function(_991,_992,_993){var _994=dojo.map(_991,function(geom){return geom.toJson();});var sr=_991[0].spatialReference,_995=dojo.mixin({},this._url.query,{f:"json",sr:sr.wkid?sr.wkid:dojo.toJson(sr.toJson()),polygons:dojo.toJson(_994)}),_996=this._labelPointsHandler,_997=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/labelPoints",content:_995,callbackParamName:"callback",load:(function(r,i){_996(r,i,_991,sr,_992,_993,dfd);}),error:(function(r){_997(r,_993,dfd);})});return dfd;},_labelPointsHandler:function(_998,io,_999,sr,_99a,_99b,dfd){try{var _99c=_998.labelPoints,_99d=[];dojo.forEach(_99c,function(geom){_99d.push(esri.geometry.fromJson(geom).setSpatialReference(sr));});this._successHandler([_99d],"onLabelPointsComplete",_99a,dfd);}catch(err){this._errorHandler(err,_99b,dfd);}},onLabelPointsComplete:function(){},relation:function(_99e,_99f,_9a0){var _9a1=dojo.mixin({},this._url.query,{f:"json"},_99e.toJson()),_9a2=this._relationHandler,_9a3=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/relation",content:_9a1,callbackParamName:"callback",load:(function(r,i){_9a2(r,i,_99f,_9a0,dfd);}),error:(function(r){_9a3(r,_9a0,dfd);})});return dfd;},_relationHandler:function(_9a4,io,_9a5,_9a6,dfd){try{var _9a7=_9a4.relations;this._successHandler([_9a7],"onRelationComplete",_9a5,dfd);}catch(err){this._errorHandler(err,_9a6,dfd);}},onRelationComplete:function(){},trimExtend:function(_9a8,_9a9,_9aa){var _9ab=dojo.mixin({},this._url.query,{f:"json"},_9a8.toJson()),_9ac=_9a8.sr,_9ad=this._trimExtendHandler,_9ae=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/trimExtend",content:_9ab,callbackParamName:"callback",load:(function(r,i){_9ad(r,i,_9ac,_9a9,_9aa,dfd);}),error:(function(r){_9ae(r,_9aa,dfd);})});return dfd;},_trimExtendHandler:function(_9af,io,_9b0,_9b1,_9b2,dfd){try{var _9b3=esri.geometry.Polyline,_9b4=_9af.geometries,_9b5=[];for(var i=0,il=_9b4.length;i<il;i++){_9b5[i]=new _9b3({spatialReference:_9b0,paths:_9b4[i].paths});}this._successHandler([_9b5],"onTrimExtendComplete",_9b1,dfd);}catch(err){this._errorHandler(err,_9b2,dfd);}},onTrimExtendComplete:function(){},densify:function(_9b6,_9b7,_9b8){var _9b9=dojo.mixin({},this._url.query,{f:"json"},_9b6.toJson()),_9ba=_9b6.geometries[0].spatialReference,_9bb=this._densifyHandler,_9bc=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/densify",content:_9b9,callbackParamName:"callback",load:(function(r,i){_9bb(r,i,_9ba,_9b7,_9b8,dfd);}),error:(function(r){_9bc(r,_9b8,dfd);})});return dfd;},_densifyHandler:function(_9bd,io,_9be,_9bf,_9c0,dfd){try{var _9c1=_9bd.geometries,_9c2=[];dojo.forEach(_9c1,function(geom){_9c2.push(esri.geometry.fromJson(geom).setSpatialReference(_9be));});this._successHandler([_9c2],"onDensifyComplete",_9bf,dfd);}catch(err){this._errorHandler(err,_9c0,dfd);}},onDensifyComplete:function(){},generalize:function(_9c3,_9c4,_9c5){var _9c6=dojo.mixin({},this._url.query,{f:"json"},_9c3.toJson()),_9c7=_9c3.geometries[0].spatialReference,_9c8=this._generalizeHandler,_9c9=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/generalize",content:_9c6,callbackParamName:"callback",load:(function(r,i){_9c8(r,i,_9c7,_9c4,_9c5,dfd);}),error:(function(r){_9c9(r,_9c5,dfd);})});return dfd;},_generalizeHandler:function(_9ca,io,_9cb,_9cc,_9cd,dfd){try{var _9ce=_9ca.geometries,_9cf=[];dojo.forEach(_9ce,function(geom){_9cf.push(esri.geometry.fromJson(geom).setSpatialReference(_9cb));});this._successHandler([_9cf],"onGeneralizeComplete",_9cc,dfd);}catch(err){this._errorHandler(err,_9cd,dfd);}},onGeneralizeComplete:function(){},offset:function(_9d0,_9d1,_9d2){var _9d3=dojo.mixin({},this._url.query,{f:"json"},_9d0.toJson()),_9d4=_9d0.geometries[0].spatialReference,_9d5=this._offsetHandler,_9d6=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/offset",content:_9d3,callbackParamName:"callback",load:(function(r,i){_9d5(r,i,_9d4,_9d1,_9d2,dfd);}),error:(function(r){_9d6(r,_9d2,dfd);})});return dfd;},_offsetHandler:function(_9d7,io,_9d8,_9d9,_9da,dfd){try{var _9db=_9d7.geometries,_9dc=[];dojo.forEach(_9db,function(geom){_9dc.push(esri.geometry.fromJson(geom).setSpatialReference(_9d8));});this._successHandler([_9dc],"onOffsetComplete",_9d9,dfd);}catch(err){this._errorHandler(err,_9da,dfd);}},onOffsetComplete:function(){},distance:function(_9dd,_9de,_9df){var _9e0=dojo.mixin({},this._url.query,{f:"json"},_9dd.toJson()),_9e1=_9dd.geometry1.spatialReference,_9e2=this._distanceHandler,_9e3=this._errorHandler,dfd=new dojo.Deferred(esri._dfdCanceller);dfd._pendingDfd=esri.request({url:this._url.path+"/distance",content:_9e0,callbackParamName:"callback",load:(function(r,i){_9e2(r,i,_9e1,_9de,_9df,dfd);}),error:(function(r){_9e3(r,_9df,dfd);})});return dfd;},_distanceHandler:function(_9e4,io,_9e5,_9e6,_9e7,dfd){try{_9e4=_9e4&&_9e4.distance;this._successHandler([_9e4],"onDistanceComplete",_9e6,dfd);}catch(err){this._errorHandler(err,_9e7,dfd);}},onDistanceComplete:function(){}});dojo.declare("esri.tasks.TrimExtendParameters",null,{polylines:null,trimExtendTo:null,extendHow:null,toJson:function(){var _9e8=dojo.map(this.polylines,function(geom){return geom.toJson();});var json={};json.polylines=dojo.toJson(_9e8);json.trimExtendTo=dojo.toJson(this.trimExtendTo.toJson());json.sr=dojo.toJson(this.polylines[0].spatialReference.toJson());json.extendHow=this.extendHow||0;return json;}});dojo.mixin(esri.tasks.TrimExtendParameters,{DEFAULT_CURVE_EXTENSION:0,RELOCATE_ENDS:1,KEEP_END_ATTRIBUTES:2,NO_END_ATTRIBUTES:4,NO_EXTEND_AT_FROM:8,NO_EXTEND_AT_TO:16});dojo.declare("esri.tasks.BufferParameters",null,{geometries:null,outSpatialReference:null,bufferSpatialReference:null,distances:null,unit:null,unionResults:false,geodesic:false,toJson:function(){var json={unit:this.unit,unionResults:this.unionResults,geodesic:this.geodesic},dt=this.distances,_9e9=this.outSpatialReference,_9ea=this.bufferSpatialReference;var _9eb=dojo.map(this.geometries,function(geom){geom=(geom.type==="extent")?this._extentToPolygon(geom):geom;return geom.toJson();},this);var _9ec=this.geometries;if(_9ec&&_9ec.length>0){var _9ed=_9ec[0].type==="extent"?"esriGeometryPolygon":esri.geometry.getJsonType(_9ec[0]);json.geometries=dojo.toJson({geometryType:_9ed,geometries:_9eb});json.inSR=_9ec[0].spatialReference.wkid?_9ec[0].spatialReference.wkid:dojo.toJson(_9ec[0].spatialReference.toJson());}if(dt){json.distances=dt.join(",");}if(_9e9){json.outSR=_9e9.wkid?_9e9.wkid:dojo.toJson(_9e9.toJson());}if(_9ea){json.bufferSR=_9ea.wkid?_9ea.wkid:dojo.toJson(_9ea.toJson());}return json;},_extentToPolygon:function(_9ee){var xmin=_9ee.xmin,ymin=_9ee.ymin,xmax=_9ee.xmax,ymax=_9ee.ymax;return new esri.geometry.Polygon({"rings":[[[xmin,ymin],[xmin,ymax],[xmax,ymax],[xmax,ymin],[xmin,ymin]]],"spatialReference":_9ee.spatialReference.toJson()});}});dojo.mixin(esri.tasks.GeometryService,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});dojo.declare("esri.tasks.AreasAndLengthsParameters",null,{polygons:null,lengthUnit:null,areaUnit:null,calculationType:null,toJson:function(){var _9ef=dojo.map(this.polygons,function(geom){return geom.toJson();});var json={};json.polygons=dojo.toJson(_9ef);var _9f0=this.polygons[0].spatialReference;json.sr=_9f0.wkid?_9f0.wkid:dojo.toJson(_9f0.toJson());if(this.lengthUnit){json.lengthUnit=this.lengthUnit;}if(this.areaUnit){if(dojo.isString(this.areaUnit)){json.areaUnit=dojo.toJson({"areaUnit":this.areaUnit});}else{json.areaUnit=this.areaUnit;}}if(this.calculationType){json.calculationType=this.calculationType;}return json;}});dojo.declare("esri.tasks.LengthsParameters",null,{polylines:null,lengthUnit:null,geodesic:null,calculationType:null,toJson:function(){var _9f1=dojo.map(this.polylines,function(geom){return geom.toJson();});var json={};json.polylines=dojo.toJson(_9f1);var _9f2=this.polylines[0].spatialReference;json.sr=_9f2.wkid?_9f2.wkid:dojo.toJson(_9f2.toJson());if(this.lengthUnit){json.lengthUnit=this.lengthUnit;}if(this.geodesic){json.geodesic=this.geodesic;}if(this.calculationType){json.calculationType=this.calculationType;}return json;}});dojo.declare("esri.tasks.RelationParameters",null,{geometries1:null,geometries2:null,relation:null,relationParam:null,toJson:function(){var _9f3=dojo.map(this.geometries1,function(geom){return geom.toJson();});var _9f4=dojo.map(this.geometries2,function(geom){return geom.toJson();});var json={};var _9f5=this.geometries1;if(_9f5&&_9f5.length>0){json.geometries1=dojo.toJson({geometryType:esri.geometry.getJsonType(_9f5[0]),geometries:_9f3});var _9f6=this.geometries1[0].spatialReference;json.sr=_9f6.wkid?_9f6.wkid:dojo.toJson(_9f6.toJson());}var _9f7=this.geometries2;if(_9f7&&_9f7.length>0){json.geometries2=dojo.toJson({geometryType:esri.geometry.getJsonType(_9f7[0]),geometries:_9f4});}if(this.relation){json.relation=this.relation;}if(this.relationParam){json.relationParam=dojo.toJson(this.relationParam);}return json;}});dojo.mixin(esri.tasks.RelationParameters,{SPATIAL_REL_CROSS:"esriGeometryRelationCross",SPATIAL_REL_DISJOINT:"esriGeometryRelationDisjoint",SPATIAL_REL_IN:"esriGeometryRelationIn",SPATIAL_REL_INTERIORINTERSECTION:"esriGeometryRelationInteriorIntersection",SPATIAL_REL_INTERSECTION:"esriGeometryRelationIntersection",SPATIAL_REL_COINCIDENCE:"esriGeometryRelationLineCoincidence",SPATIAL_REL_LINETOUCH:"esriGeometryRelationLineTouch",SPATIAL_REL_OVERLAP:"esriGeometryRelationOverlap",SPATIAL_REL_POINTTOUCH:"esriGeometryRelationPointTouch",SPATIAL_REL_TOUCH:"esriGeometryRelationTouch",SPATIAL_REL_WITHIN:"esriGeometryRelationWithin",SPATIAL_REL_RELATION:"esriGeometryRelationRelation"});dojo.declare("esri.tasks.DensifyParameters",null,{geometries:null,geodesic:null,lengthUnit:null,maxSegmentLength:null,toJson:function(){var _9f8=dojo.map(this.geometries,function(geom){return geom.toJson();});var json={};if(this.geometries&&this.geometries.length>0){json.geometries=dojo.toJson({geometryType:esri.geometry.getJsonType(this.geometries[0]),geometries:_9f8});json.sr=dojo.toJson(this.geometries[0].spatialReference.toJson());}if(this.geodesic){json.geodesic=this.geodesic;}if(this.lengthUnit){json.lengthUnit=this.lengthUnit;}if(this.maxSegmentLength){json.maxSegmentLength=this.maxSegmentLength;}return json;}});dojo.declare("esri.tasks.GeneralizeParameters",null,{geometries:null,deviationUnit:null,maxDeviation:null,toJson:function(){var _9f9=dojo.map(this.geometries,function(geom){return geom.toJson();});var json={};if(this.geometries&&this.geometries.length>0){json.geometries=dojo.toJson({geometryType:esri.geometry.getJsonType(this.geometries[0]),geometries:_9f9});json.sr=dojo.toJson(this.geometries[0].spatialReference.toJson());}if(this.deviationUnit){json.deviationUnit=this.deviationUnit;}if(this.maxDeviation){json.maxDeviation=this.maxDeviation;}return json;}});dojo.declare("esri.tasks.OffsetParameters",null,{geometries:null,bevelRatio:null,offsetDistance:null,offsetHow:null,offsetUnit:null,toJson:function(){var _9fa=dojo.map(this.geometries,function(geom){return geom.toJson();});var json={};if(this.geometries&&this.geometries.length>0){json.geometries=dojo.toJson({geometryType:esri.geometry.getJsonType(this.geometries[0]),geometries:_9fa});json.sr=dojo.toJson(this.geometries[0].spatialReference.toJson());}if(this.bevelRatio){json.bevelRatio=this.bevelRatio;}if(this.offsetDistance){json.offsetDistance=this.offsetDistance;}if(this.offsetHow){json.offsetHow=this.offsetHow;}if(this.offsetUnit){json.offsetUnit=this.offsetUnit;}return json;}});dojo.mixin(esri.tasks.OffsetParameters,{OFFSET_BEVELLED:"esriGeometryOffsetBevelled",OFFSET_MITERED:"esriGeometryOffsetMitered",OFFSET_ROUNDED:"esriGeometryOffsetRounded"});dojo.declare("esri.tasks.DistanceParameters",null,{geometry1:null,geometry2:null,distanceUnit:null,geodesic:null,toJson:function(){var json={};var _9fb=this.geometry1;if(_9fb){json.geometry1=dojo.toJson({geometryType:esri.geometry.getJsonType(_9fb),geometry:_9fb});}var _9fc=this.geometry2;if(_9fc){json.geometry2=dojo.toJson({geometryType:esri.geometry.getJsonType(_9fc),geometry:_9fc});}json.sr=dojo.toJson(this.geometry1.spatialReference.toJson());if(this.distanceUnit){json.distanceUnit=this.distanceUnit;}if(this.geodesic){json.geodesic=this.geodesic;}return json;}});dojo.declare("esri.tasks.ProjectParameters",null,{geometries:null,outSR:null,transformation:null,transformationForward:null,toJson:function(){var _9fd=dojo.map(this.geometries,function(geom){return geom.toJson();});var json={};json.outSR=this.outSR.wkid||dojo.toJson(this.outSR.toJson());json.inSR=this.geometries[0].spatialReference.wkid||dojo.toJson(this.geometries[0].spatialReference.toJson());json.geometries=dojo.toJson({geometryType:esri.geometry.getJsonType(this.geometries[0]),geometries:_9fd});if(this.transformation){json.transformation=this.transformation.wkid||dojo.toJson(this.transformation);}if(this.tranformationForward){json.transformationForward=this.transformationForward;}return json;}});});},"dojo/io/iframe":function(){define(["../main","require"],function(dojo,_9fe){dojo.getObject("io",true,dojo);dojo.io.iframe={create:function(_9ff,_a00,uri){if(window[_9ff]){return window[_9ff];}if(window.frames[_9ff]){return window.frames[_9ff];}var turi=uri;if(!turi){if(dojo.config["useXDomain"]&&!dojo.config["dojoBlankHtmlUrl"]){console.warn("dojo.io.iframe.create: When using cross-domain Dojo builds,"+" please save dojo/resources/blank.html to your domain and set djConfig.dojoBlankHtmlUrl"+" to the path on your domain to blank.html");}turi=(dojo.config["dojoBlankHtmlUrl"]||_9fe.toUrl("../resources/blank.html"));}var _a01=dojo.place("<iframe id=\""+_9ff+"\" name=\""+_9ff+"\" src=\""+turi+"\" onload=\""+_a00+"\" style=\"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden\">",dojo.body());window[_9ff]=_a01;return _a01;},setSrc:function(_a02,src,_a03){try{if(!_a03){if(dojo.isWebKit){_a02.location=src;}else{frames[_a02.name].location=src;}}else{var idoc;if(dojo.isIE||dojo.isWebKit){idoc=_a02.contentWindow.document;}else{idoc=_a02.contentWindow;}if(!idoc){_a02.location=src;}else{idoc.location.replace(src);}}}catch(e){console.log("dojo.io.iframe.setSrc: ",e);}},doc:function(_a04){return _a04.contentDocument||(((_a04.name)&&(_a04.document)&&(dojo.doc.getElementsByTagName("iframe")[_a04.name].contentWindow)&&(dojo.doc.getElementsByTagName("iframe")[_a04.name].contentWindow.document)))||((_a04.name)&&(dojo.doc.frames[_a04.name])&&(dojo.doc.frames[_a04.name].document))||null;},send:function(args){if(!this["_frame"]){this._frame=this.create(this._iframeName,dojo._scopeName+".io.iframe._iframeOnload();");}var dfd=dojo._ioSetArgs(args,function(dfd){dfd.canceled=true;dfd.ioArgs._callNext();},function(dfd){var _a05=null;try{var _a06=dfd.ioArgs;var dii=dojo.io.iframe;var ifd=dii.doc(dii._frame);var _a07=_a06.handleAs;_a05=ifd;if(_a07!="html"){if(_a07=="xml"){if(dojo.isIE<9||(dojo.isIE&&dojo.isQuirks)){dojo.query("a",dii._frame.contentWindow.document.documentElement).orphan();var _a08=(dii._frame.contentWindow.document).documentElement.innerText;_a08=_a08.replace(/>\s+</g,"><");_a08=dojo.trim(_a08);var _a09={responseText:_a08};_a05=dojo._contentHandlers["xml"](_a09);}}else{_a05=ifd.getElementsByTagName("textarea")[0].value;if(_a07=="json"){_a05=dojo.fromJson(_a05);}else{if(_a07=="javascript"){_a05=dojo.eval(_a05);}}}}}catch(e){_a05=e;}finally{_a06._callNext();}return _a05;},function(_a0a,dfd){dfd.ioArgs._hasError=true;dfd.ioArgs._callNext();return _a0a;});dfd.ioArgs._callNext=function(){if(!this["_calledNext"]){this._calledNext=true;dojo.io.iframe._currentDfd=null;dojo.io.iframe._fireNextRequest();}};this._dfdQueue.push(dfd);this._fireNextRequest();dojo._ioWatch(dfd,function(dfd){return !dfd.ioArgs["_hasError"];},function(dfd){return (!!dfd.ioArgs["_finished"]);},function(dfd){if(dfd.ioArgs._finished){dfd.callback(dfd);}else{dfd.errback(new Error("Invalid dojo.io.iframe request state"));}});return dfd;},_currentDfd:null,_dfdQueue:[],_iframeName:dojo._scopeName+"IoIframe",_fireNextRequest:function(){try{if((this._currentDfd)||(this._dfdQueue.length==0)){return;}do{var dfd=this._currentDfd=this._dfdQueue.shift();}while(dfd&&dfd.canceled&&this._dfdQueue.length);if(!dfd||dfd.canceled){this._currentDfd=null;return;}var _a0b=dfd.ioArgs;var args=_a0b.args;_a0b._contentToClean=[];var fn=dojo.byId(args["form"]);var _a0c=args["content"]||{};if(fn){if(_a0c){var _a0d=function(name,_a0e){dojo.create("input",{type:"hidden",name:name,value:_a0e},fn);_a0b._contentToClean.push(name);};for(var x in _a0c){var val=_a0c[x];if(dojo.isArray(val)&&val.length>1){var i;for(i=0;i<val.length;i++){_a0d(x,val[i]);}}else{if(!fn[x]){_a0d(x,val);}else{fn[x].value=val;}}}}var _a0f=fn.getAttributeNode("action");var _a10=fn.getAttributeNode("method");var _a11=fn.getAttributeNode("target");if(args["url"]){_a0b._originalAction=_a0f?_a0f.value:null;if(_a0f){_a0f.value=args.url;}else{fn.setAttribute("action",args.url);}}if(!_a10||!_a10.value){if(_a10){_a10.value=(args["method"])?args["method"]:"post";}else{fn.setAttribute("method",(args["method"])?args["method"]:"post");}}_a0b._originalTarget=_a11?_a11.value:null;if(_a11){_a11.value=this._iframeName;}else{fn.setAttribute("target",this._iframeName);}fn.target=this._iframeName;dojo._ioNotifyStart(dfd);fn.submit();}else{var _a12=args.url+(args.url.indexOf("?")>-1?"&":"?")+_a0b.query;dojo._ioNotifyStart(dfd);this.setSrc(this._frame,_a12,true);}}catch(e){dfd.errback(e);}},_iframeOnload:function(){var dfd=this._currentDfd;if(!dfd){this._fireNextRequest();return;}var _a13=dfd.ioArgs;var args=_a13.args;var _a14=dojo.byId(args.form);if(_a14){var _a15=_a13._contentToClean;for(var i=0;i<_a15.length;i++){var key=_a15[i];for(var j=0;j<_a14.childNodes.length;j++){var _a16=_a14.childNodes[j];if(_a16.name==key){dojo.destroy(_a16);break;}}}if(_a13["_originalAction"]){_a14.setAttribute("action",_a13._originalAction);}if(_a13["_originalTarget"]){_a14.setAttribute("target",_a13._originalTarget);_a14.target=_a13._originalTarget;}}_a13._finished=true;}};return dojo.io.iframe;});},"dojox/lang/functional/lambda":function(){define("dojox/lang/functional/lambda",["../..","dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(_a17,dojo,lang,arr){var df=lang.getObject("lang.functional",true,_a17);var _a18={};var _a19="ab".split(/a*/).length>1?String.prototype.split:function(sep){var r=this.split.call(this,sep),m=sep.exec(this);if(m&&m.index==0){r.unshift("");}return r;};var _a1a=function(s){var args=[],_a1b=_a19.call(s,/\s*->\s*/m);if(_a1b.length>1){while(_a1b.length){s=_a1b.pop();args=_a1b.pop().split(/\s*,\s*|\s+/m);if(_a1b.length){_a1b.push("(function("+args+"){return ("+s+")})");}}}else{if(s.match(/\b_\b/)){args=["_"];}else{var l=s.match(/^\s*(?:[+*\/%&|\^\.=<>]|!=)/m),r=s.match(/[+\-*\/%&|\^\.=<>!]\s*$/m);if(l||r){if(l){args.push("$1");s="$1"+s;}if(r){args.push("$2");s=s+"$2";}}else{var vars=s.replace(/(?:\b[A-Z]|\.[a-zA-Z_$])[a-zA-Z_$\d]*|[a-zA-Z_$][a-zA-Z_$\d]*:|this|true|false|null|undefined|typeof|instanceof|in|delete|new|void|arguments|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|escape|eval|isFinite|isNaN|parseFloat|parseInt|unescape|dojo|dijit|dojox|window|document|'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"/g,"").match(/([a-z_$][a-z_$\d]*)/gi)||[],t={};arr.forEach(vars,function(v){if(!(v in t)){args.push(v);t[v]=1;}});}}}return {args:args,body:s};};var _a1c=function(a){return a.length?function(){var i=a.length-1,x=df.lambda(a[i]).apply(this,arguments);for(--i;i>=0;--i){x=df.lambda(a[i]).call(this,x);}return x;}:function(x){return x;};};lang.mixin(df,{rawLambda:function(s){return _a1a(s);},buildLambda:function(s){s=_a1a(s);return "function("+s.args.join(",")+"){return ("+s.body+");}";},lambda:function(s){if(typeof s=="function"){return s;}if(s instanceof Array){return _a1c(s);}if(s in _a18){return _a18[s];}s=_a1a(s);return _a18[s]=new Function(s.args,"return ("+s.body+");");},clearLambdaCache:function(){_a18={};}});return df;});},"dijit/a11y":function(){define("dijit/a11y",["dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/_base/sniff","./_base/manager","."],function(_a1d,_a1e,_a1f,dom,_a20,_a21,has,_a22,_a23){var _a24=(_a23._isElementShown=function(elem){var s=_a21.get(elem);return (s.visibility!="hidden")&&(s.visibility!="collapsed")&&(s.display!="none")&&(_a20.get(elem,"type")!="hidden");});_a23.hasDefaultTabStop=function(elem){switch(elem.nodeName.toLowerCase()){case "a":return _a20.has(elem,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":var body;try{var _a25=elem.contentDocument;if("designMode" in _a25&&_a25.designMode=="on"){return true;}body=_a25.body;}catch(e1){try{body=elem.contentWindow.document.body;}catch(e2){return false;}}return body&&(body.contentEditable=="true"||(body.firstChild&&body.firstChild.contentEditable=="true"));default:return elem.contentEditable=="true";}};var _a26=(_a23.isTabNavigable=function(elem){if(_a20.get(elem,"disabled")){return false;}else{if(_a20.has(elem,"tabIndex")){return _a20.get(elem,"tabIndex")>=0;}else{return _a23.hasDefaultTabStop(elem);}}});_a23._getTabNavigable=function(root){var _a27,last,_a28,_a29,_a2a,_a2b,_a2c={};function _a2d(node){return node&&node.tagName.toLowerCase()=="input"&&node.type&&node.type.toLowerCase()=="radio"&&node.name&&node.name.toLowerCase();};var _a2e=function(_a2f){for(var _a30=_a2f.firstChild;_a30;_a30=_a30.nextSibling){if(_a30.nodeType!=1||(has("ie")&&_a30.scopeName!=="HTML")||!_a24(_a30)){continue;}if(_a26(_a30)){var _a31=_a20.get(_a30,"tabIndex");if(!_a20.has(_a30,"tabIndex")||_a31==0){if(!_a27){_a27=_a30;}last=_a30;}else{if(_a31>0){if(!_a28||_a31<_a29){_a29=_a31;_a28=_a30;}if(!_a2a||_a31>=_a2b){_a2b=_a31;_a2a=_a30;}}}var rn=_a2d(_a30);if(_a20.get(_a30,"checked")&&rn){_a2c[rn]=_a30;}}if(_a30.nodeName.toUpperCase()!="SELECT"){_a2e(_a30);}}};if(_a24(root)){_a2e(root);}function rs(node){return _a2c[_a2d(node)]||node;};return {first:rs(_a27),last:rs(last),lowest:rs(_a28),highest:rs(_a2a)};};_a23.getFirstInTabbingOrder=function(root){var _a32=_a23._getTabNavigable(dom.byId(root));return _a32.lowest?_a32.lowest:_a32.first;};_a23.getLastInTabbingOrder=function(root){var _a33=_a23._getTabNavigable(dom.byId(root));return _a33.last?_a33.last:_a33.highest;};return {hasDefaultTabStop:_a23.hasDefaultTabStop,isTabNavigable:_a23.isTabNavigable,_getTabNavigable:_a23._getTabNavigable,getFirstInTabbingOrder:_a23.getFirstInTabbingOrder,getLastInTabbingOrder:_a23.getLastInTabbingOrder};});},"dojox/charting/themes/common":function(){define("dojox/charting/themes/common",["dojo/_base/lang"],function(lang){return lang.getObject("dojox.charting.themes",true);});},"dojox/charting/plot2d/MarkersOnly":function(){define("dojox/charting/plot2d/MarkersOnly",["dojo/_base/declare","./Default"],function(_a34,_a35){return _a34("dojox.charting.plot2d.MarkersOnly",_a35,{constructor:function(){this.opt.lines=false;this.opt.markers=true;}});});},"dijit/_Widget":function(){define("dijit/_Widget",["dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/ready","./registry","./_WidgetBase","./_OnDijitClickMixin","./_FocusMixin","dojo/uacss","./hccss"],function(_a36,_a37,_a38,_a39,_a3a,lang,_a3b,_a3c,_a3d,_a3e,_a3f,_a40){function _a41(){};function _a42(_a43){return function(obj,_a44,_a45,_a46){if(obj&&typeof _a44=="string"&&obj[_a44]==_a41){return obj.on(_a44.substring(2).toLowerCase(),lang.hitch(_a45,_a46));}return _a43.apply(_a38,arguments);};};_a36.around(_a38,"connect",_a42);if(_a3a.connect){_a36.around(_a3a,"connect",_a42);}var _a47=_a39("dijit._Widget",[_a3e,_a3f,_a40],{onClick:_a41,onDblClick:_a41,onKeyDown:_a41,onKeyPress:_a41,onKeyUp:_a41,onMouseDown:_a41,onMouseMove:_a41,onMouseOut:_a41,onMouseOver:_a41,onMouseLeave:_a41,onMouseEnter:_a41,onMouseUp:_a41,constructor:function(_a48){this._toConnect={};for(var name in _a48){if(this[name]===_a41){this._toConnect[name.replace(/^on/,"").toLowerCase()]=_a48[name];delete _a48[name];}}},postCreate:function(){this.inherited(arguments);for(var name in this._toConnect){this.on(name,this._toConnect[name]);}delete this._toConnect;},on:function(type,func){if(this[this._onMap(type)]===_a41){return _a38.connect(this.domNode,type.toLowerCase(),this,func);}return this.inherited(arguments);},_setFocusedAttr:function(val){this._focused=val;this._set("focused",val);},setAttribute:function(attr,_a49){_a3a.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(attr,_a49);},attr:function(name,_a4a){if(_a37.isDebug){var _a4b=arguments.callee._ach||(arguments.callee._ach={}),_a4c=(arguments.callee.caller||"unknown caller").toString();if(!_a4b[_a4c]){_a3a.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+_a4c,"","2.0");_a4b[_a4c]=true;}}var args=arguments.length;if(args>=2||typeof name==="object"){return this.set.apply(this,arguments);}else{return this.get(name);}},getDescendants:function(){_a3a.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?_a3b("[widgetId]",this.containerNode).map(_a3d.byNode):[];},_onShow:function(){this.onShow();},onShow:function(){},onHide:function(){},onClose:function(){return true;}});if(!_a3a.isAsync){_a3c(0,function(){var _a4d=["dijit/_base"];require(_a4d);});}return _a47;});},"dojo/touch":function(){define(["./_base/kernel","./on","./has","./mouse"],function(dojo,on,has,_a4e){function _a4f(type){return function(node,_a50){return on(node,type,_a50);};};var _a51=has("touch");dojo.touch={press:_a4f(_a51?"touchstart":"mousedown"),move:_a4f(_a51?"touchmove":"mousemove"),release:_a4f(_a51?"touchend":"mouseup"),cancel:_a51?_a4f("touchcancel"):_a4e.leave};return dojo.touch;});},"esri/dijit/Popup":function(){define(["dijit","dojo","dojox","dojo/require!esri/InfoWindowBase,esri/PopupBase,esri/utils,dijit/_Widget,dijit/_Templated,dojo/number,dojo/date/locale,dojox/charting/Chart2D,dojox/charting/themes/PlotKit/base,dojox/charting/action2d/Tooltip,dojo/i18n"],function(_a52,dojo,_a53){dojo.provide("esri.dijit.Popup");dojo.require("esri.InfoWindowBase");dojo.require("esri.PopupBase");dojo.require("esri.utils");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.require("dojo.number");dojo.require("dojo.date.locale");dojo.require("dojox.charting.Chart2D");dojo.require("dojox.charting.themes.PlotKit.base");dojo.require("dojox.charting.action2d.Tooltip");dojo.require("dojo.i18n");(function(){var dc=_a53.charting,pk=dc.themes.PlotKit;pk.popup=pk.base.clone();pk.popup.chart.fill=pk.popup.plotarea.fill="#e7eef6";pk.popup.colors=["#284B70","#702828","#5F7143","#F6BC0C","#382C6C","#50224F","#1D7554","#4C4C4C","#0271AE","#706E41","#446A73","#0C3E69","#757575","#B7B7B7","#A3A3A3"];pk.popup.series.stroke.width=1;pk.popup.marker.stroke.width=1;}());dojo.declare("esri.dijit.Popup",[esri.InfoWindowBase,esri.PopupBase],{offsetX:3,offsetY:3,zoomFactor:4,marginLeft:25,marginTop:25,highlight:true,constructor:function(_a54,_a55){this.initialize();dojo.mixin(this,_a54);this.domNode=dojo.byId(_a55);var nls=this._nls=dojo.mixin({},esri.bundle.widgets.popup);var _a56=this.domNode;dojo.addClass(_a56,"esriPopup");var _a57="<div class='esriPopupWrapper' style='position: absolute;'>"+"<div class='sizer'>"+"<div class='titlePane'>"+"<div class='spinner hidden' title='"+nls.NLS_searching+"...'></div>"+"<div class='title'></div>"+"<div class='titleButton prev hidden' title='"+nls.NLS_prevFeature+"'></div>"+"<div class='titleButton next hidden' title='"+nls.NLS_nextFeature+"'></div>"+"<div class='titleButton maximize' title='"+nls.NLS_maximize+"'></div>"+"<div class='titleButton close' title='"+nls.NLS_close+"'></div>"+"</div>"+"</div>"+"<div class='sizer content'>"+"<div class='contentPane'>"+"</div>"+"</div>"+"<div class='sizer'>"+"<div class='actionsPane'>"+"<div class='actionList hidden'>"+"<a class='action zoomTo' href='javascript:void(0);'>"+nls.NLS_zoomTo+"</a>"+"</div>"+"</div>"+"</div>"+"<div class='pointer hidden'></div>"+"</div>"+"<div class='outerPointer hidden'></div>";dojo.attr(_a56,"innerHTML",_a57);this._sizers=dojo.query(".sizer",_a56);var _a58=dojo.query(".titlePane",_a56)[0];dojo.setSelectable(_a58,false);this._title=dojo.query(".title",_a58)[0];this._prevFeatureButton=dojo.query(".prev",_a58)[0];this._nextFeatureButton=dojo.query(".next",_a58)[0];this._maxButton=dojo.query(".maximize",_a58)[0];this._spinner=dojo.query(".spinner",_a58)[0];this._contentPane=dojo.query(".contentPane",_a56)[0];this._positioner=dojo.query(".esriPopupWrapper",_a56)[0];this._pointer=dojo.query(".pointer",_a56)[0];this._outerPointer=dojo.query(".outerPointer",_a56)[0];this._actionList=dojo.query(".actionsPane .actionList",_a56)[0];this._eventConnections=[dojo.connect(dojo.query(".close",_a58)[0],"onclick",this,this.hide),dojo.connect(this._prevFeatureButton,"onclick",this,this.selectPrevious),dojo.connect(this._nextFeatureButton,"onclick",this,this.selectNext),dojo.connect(this._maxButton,"onclick",this,this._toggleSize),dojo.connect(dojo.query(".zoomTo",this._actionList)[0],"onclick",this,this._zoomToFeature)];if(esri.isTouchEnabled){var _a59=esri.setScrollable(this._contentPane);this._eventConnections.push(_a59[0],_a59[1]);}this._setVisibility(false);this.isShowing=false;},setMap:function(map){this.inherited(arguments);dojo.place(this.domNode,map.root);if(this.highlight){this.enableHighlight(map);}this._maxHeight=dojo.style(this._contentPane,"maxHeight");},unsetMap:function(){this.disableHighlight(this.map);this.inherited(arguments);},setTitle:function(_a5a){if(!esri._isDefined(_a5a)||_a5a===""){_a5a="&nbsp;";}this.destroyDijits(this._title);this.place(_a5a,this._title);if(this.isShowing){this.startupDijits(this._title);this.reposition();}},setContent:function(_a5b){if(!esri._isDefined(_a5b)||_a5b===""){_a5b="&nbsp;";}this.destroyDijits(this._contentPane);this.place(_a5b,this._contentPane);if(this.isShowing){this.startupDijits(this._contentPane);this.reposition();}},show:function(_a5c,_a5d){if(!_a5c){this._setVisibility(true);this.isShowing=true;return;}var map=this.map,_a5e;if(_a5c.spatialReference){this._location=_a5c;_a5e=map.toScreen(_a5c);}else{this._location=map.toMap(_a5c);_a5e=_a5c;}var _a5f=map._getFrameWidth();if(_a5f!==-1){_a5e.x=_a5e.x%_a5f;if(_a5e.x<0){_a5e.x+=_a5f;}if(map.width>_a5f){var _a60=(map.width-_a5f)/2;while(_a5e.x<_a60){_a5e.x+=_a5f;}}}if(this._maximized){this.restore();}else{this._setPosition(_a5e);}if(_a5d&&_a5d.closestFirst){this.showClosestFirst(this._location);}if(!this.isShowing){this._setVisibility(true);this.isShowing=true;this.onShow();}},hide:function(){if(this.isShowing){this._setVisibility(false);this.isShowing=false;this.onHide();}},resize:function(_a61,_a62){this._sizers.style({width:_a61+"px"});dojo.style(this._contentPane,"maxHeight",_a62+"px");this._maxHeight=_a62;if(this.isShowing){this.reposition();}},reposition:function(){if(this.map&&this._location&&!this._maximized&&this.isShowing){this._setPosition(this.map.toScreen(this._location));}},onShow:function(){this._followMap();this.startupDijits(this._title);this.startupDijits(this._contentPane);this.reposition();this.showHighlight();},onHide:function(){this._unfollowMap();this.hideHighlight();},maximize:function(){var map=this.map;if(!map||this._maximized){return;}this._maximized=true;var max=this._maxButton;dojo.removeClass(max,"maximize");dojo.addClass(max,"restore");dojo.attr(max,"title",this._nls.NLS_restore);var _a63=this.marginLeft,_a64=this.marginTop,_a65=map.width-(2*_a63),_a66=map.height-(2*_a64),_a67=this.domNode;dojo.style(_a67,{left:_a63+"px",right:null,top:_a64+"px",bottom:null});dojo.style(this._positioner,{left:null,right:null,top:null,bottom:null});this._savedWidth=dojo.style(this._sizers[0],"width");this._savedHeight=dojo.style(this._contentPane,"maxHeight");this._sizers.style({width:_a65+"px"});dojo.style(this._contentPane,{maxHeight:(_a66-65)+"px",height:(_a66-65)+"px"});this._showPointer("");this._unfollowMap();dojo.addClass(this.domNode,"esriPopupMaximized");this.onMaximize();},restore:function(){var map=this.map;if(!map||!this._maximized){return;}this._maximized=false;var max=this._maxButton;dojo.removeClass(max,"restore");dojo.addClass(max,"maximize");dojo.attr(max,"title",this._nls.NLS_maximize);dojo.style(this._contentPane,"height",null);this.resize(this._savedWidth,this._savedHeight);this._savedWidth=this._savedHeight=null;this.show(this._location);this._followMap();dojo.removeClass(this.domNode,"esriPopupMaximized");this.onRestore();},destroy:function(){if(this.map){this.unsetMap();}this.cleanup();if(this.isShowing){this.hide();}this.destroyDijits(this._title);this.destroyDijits(this._content);dojo.forEach(this._eventConnections,dojo.disconnect);dojo.destroy(this.domNode);this._sizers=this._contentPane=this._actionList=this._positioner=this._pointer=this._outerPointer=this._title=this._prevFeatureButton=this._nextFeatureButton=this._spinner=this._eventConnections=this._pagerScope=this._targetLocation=this._nls=this._maxButton=null;},selectNext:function(){this.select(this.selectedIndex+1);},selectPrevious:function(){this.select(this.selectedIndex-1);},setFeatures:function(){this.inherited(arguments);this._updateUI();},onSetFeatures:function(){},onClearFeatures:function(){this.setTitle("&nbsp;");this.setContent("&nbsp;");this._setPagerCallbacks(this);this._updateUI();this.hideHighlight();},onSelectionChange:function(){var ptr=this.selectedIndex;this._updateUI();if(ptr>=0){this.setContent(this.features[ptr].getContent());this.updateHighlight(this.map,this.features[ptr]);if(this.isShowing){this.showHighlight();}}},onDfdComplete:function(){this.inherited(arguments);this._updateUI();},onMaximize:function(){},onRestore:function(){},_setVisibility:function(_a68){dojo.style(this.domNode,"visibility",_a68?"visible":"hidden");},_followMap:function(){this._unfollowMap();var map=this.map;this._handles=[dojo.connect(map,"onPanStart",this,this._onPanStart),dojo.connect(map,"onPan",this,this._onPan),dojo.connect(map,"onZoomStart",this,this._onZoomStart),dojo.connect(map,"onExtentChange",this,this._onExtentChange)];},_unfollowMap:function(){var _a69=this._handles;if(_a69){dojo.forEach(_a69,dojo.disconnect,dojo);this._handles=null;}},_onPanStart:function(){var _a6a=this.domNode.style;this._panOrigin={left:_a6a.left,top:_a6a.top,right:_a6a.right,bottom:_a6a.bottom};},_onPan:function(_a6b,_a6c){var _a6d=this._panOrigin,dx=_a6c.x,dy=_a6c.y,left=_a6d.left,top=_a6d.top,_a6e=_a6d.right,_a6f=_a6d.bottom;if(left){left=(parseFloat(left)+dx)+"px";}if(top){top=(parseFloat(top)+dy)+"px";}if(_a6e){_a6e=(parseFloat(_a6e)-dx)+"px";}if(_a6f){_a6f=(parseFloat(_a6f)-dy)+"px";}dojo.style(this.domNode,{left:left,top:top,right:_a6e,bottom:_a6f});},_onZoomStart:function(){this._setVisibility(false);},_onExtentChange:function(_a70,_a71,_a72){if(_a72){this._setVisibility(true);this.show(this._targetLocation||this._location);}this._targetLocation=null;},_toggleSize:function(){if(this._maximized){this.restore();}else{this.maximize();}},_setPosition:function(_a73){var posX=_a73.x,posY=_a73.y,offX=this.offsetX||0,offY=this.offsetY||0,_a74=0,_a75=0,_a76=dojo.position(this.map.container,true),_a77=_a76.w,_a78=_a76.h,_a79="Left",_a7a="bottom",_a7b=dojo.contentBox(this._positioner),_a7c=_a7b.w/2,_a7d=_a7b.h/2,maxH=dojo.style(this._sizers[0],"height")+this._maxHeight+dojo.style(this._sizers[2],"height"),_a7e=maxH/2,xmin=0,ymin=0,xmax=_a77,ymax=_a78,_a7f=posX,_a80=posY;var _a81=dojo.getObject("dojo.window.getBox");if(_a81){_a81=_a81();xmin=Math.max(_a81.l,_a76.x);xmax=Math.min(_a81.l+_a81.w,_a76.x+_a76.w);ymin=Math.max(_a81.t,_a76.y);ymax=Math.min(_a81.t+_a81.h,_a76.y+_a76.h);_a7f+=_a76.x;_a80+=_a76.y;}if(((_a80-ymin)>_a7e)&&((ymax-_a80)>=_a7e)){if((xmax-_a7f)>=_a7b.w){_a7a="";_a79="Left";}else{if((_a7f-xmin)>=_a7b.w){_a7a="";_a79="Right";}}}if(_a79&&_a7a){if(((_a7f-xmin)>_a7c)&&((xmax-_a7f)>=_a7c)){if((_a80-ymin)>=maxH){_a79="";_a7a="bottom";}else{if((ymax-_a80)>=maxH){_a79="";_a7a="top";}}}}if(_a79&&_a7a){if(_a7f<=xmax/2){_a79="Left";}else{if(_a7f<=xmax){_a79="Right";}}if(_a80<=ymax/2){_a7a="top";}else{if(_a80<=ymax){_a7a="bottom";}}}var _a82=_a7a+_a79;switch(_a82){case "top":case "bottom":_a75=14;break;case "Left":case "Right":_a74=13;break;case "topLeft":case "topRight":case "bottomLeft":case "bottomRight":_a75=45;break;}dojo.style(this.domNode,{left:posX+"px",top:posY+"px",right:null,bottom:null});var _a83={left:null,right:null,top:null,bottom:null};if(_a79){_a83[_a79.toLowerCase()]=(_a74+offX)+"px";}else{_a83.left=(-_a7c)+"px";}if(_a7a){_a83[_a7a]=(_a75+offY)+"px";}else{_a83.top=(-_a7d)+"px";}dojo.style(this._positioner,_a83);this._showPointer(_a82);},_showPointer:function(_a84){dojo.removeClass(this._pointer,["top","bottom","right","left","topLeft","topRight","bottomRight","bottomLeft","hidden"]);dojo.removeClass(this._outerPointer,["right","left","hidden"]);if(_a84==="Right"||_a84==="Left"){_a84=_a84.toLowerCase();dojo.addClass(this._outerPointer,_a84);}else{dojo.addClass(this._pointer,_a84);}},_setPagerCallbacks:function(_a85,_a86,_a87){if(_a85===this&&(!this._pagerScope||this._pagerScope===this)){return;}if(_a85===this._pagerScope){return;}this._pagerScope=_a85;if(_a85===this){_a86=this.selectPrevious;_a87=this.selectNext;}var _a88=this._eventConnections;dojo.disconnect(_a88[1]);dojo.disconnect(_a88[2]);if(_a86){_a88[1]=dojo.connect(this._prevFeatureButton,"onclick",_a85,_a86);}if(_a87){_a88[2]=dojo.connect(this._nextFeatureButton,"onclick",_a85,_a87);}},_zoomToFeature:function(){var _a89=this.features,ptr=this.selectedIndex,map=this.map;if(_a89){var _a8a=_a89[ptr].geometry,_a8b,_a8c,_a8d=0,_a8e;if(_a8a){switch(_a8a.type){case "point":_a8b=_a8a;break;case "multipoint":_a8b=_a8a.getPoint(0);_a8c=_a8a.getExtent();break;case "polyline":_a8b=_a8a.getPoint(0,0);_a8c=_a8a.getExtent();if(map._getFrameWidth()!==-1){dojo.forEach(_a8a.paths,function(path){var _a8f={"paths":[path,map.spatialReference]},_a90=new esri.geometry.Polyline(_a8f),_a91=_a90.getExtent(),_a92=Math.abs(_a91.ymax-_a91.ymin),_a93=Math.abs(_a91.xmax-_a91.xmin),_a94=(_a93>_a92)?_a93:_a92;if(_a94>_a8d){_a8d=_a94;_a8e=_a91;}});_a8e.spatialReference=_a8c.spatialReference;_a8c=_a8e;}break;case "polygon":_a8b=_a8a.getPoint(0,0);_a8c=_a8a.getExtent();if(map._getFrameWidth()!==-1){dojo.forEach(_a8a.rings,function(ring){var _a95={"rings":[ring,map.spatialReference]},_a96=new esri.geometry.Polygon(_a95),_a97=_a96.getExtent(),_a98=Math.abs(_a97.ymax-_a97.ymin),_a99=Math.abs(_a97.xmax-_a97.xmin),_a9a=(_a99>_a98)?_a99:_a98;if(_a9a>_a8d){_a8d=_a9a;_a8e=_a97;}});_a8e.spatialReference=_a8c.spatialReference;_a8c=_a8e;}break;}}if(!_a8b){_a8b=this._location;}if(!_a8c||!_a8c.intersects(this._location)){this._location=_a8b;}if(_a8c){map.setExtent(_a8c,true);}else{var _a9b=map.getNumLevels(),_a9c=map.getLevel(),last=_a9b-1,_a9d=this.zoomFactor||1;if(_a9b>0){if(_a9c===last){return;}var _a9e=_a9c+_a9d;if(_a9e>last){_a9e=last;}map._scrollZoomHandler({value:(_a9e-_a9c),mapPoint:_a8b},true);}else{map._scrollZoomHandler({value:(1/Math.pow(2,_a9d))*2,mapPoint:_a8b},true);}}}},_updateUI:function(){var _a9f="&nbsp;",ptr=this.selectedIndex,_aa0=this.features,_aa1=this.deferreds,prev=this._prevFeatureButton,next=this._nextFeatureButton,_aa2=this._spinner,_aa3=this._actionList,nls=this._nls;if(_aa0&&_aa0.length>1){if(nls.NLS_pagingInfo){_a9f=esri.substitute({index:(ptr+1),total:_aa0.length},nls.NLS_pagingInfo);}if(ptr===0){dojo.addClass(prev,"hidden");}else{dojo.removeClass(prev,"hidden");}if(ptr===_aa0.length-1){dojo.addClass(next,"hidden");}else{dojo.removeClass(next,"hidden");}}else{dojo.addClass(prev,"hidden");dojo.addClass(next,"hidden");}this.setTitle(_a9f);if(_aa1&&_aa1.length){if(_aa0){dojo.removeClass(_aa2,"hidden");}else{this.setContent("<div style='text-align: center;'>"+nls.NLS_searching+"...</div>");}}else{dojo.addClass(_aa2,"hidden");if(!_aa0||!_aa0.length){this.setContent("<div style='text-align: center;'>"+nls.NLS_noInfo+".</div>");}}if(_aa0&&_aa0.length){dojo.removeClass(_aa3,"hidden");}else{dojo.addClass(_aa3,"hidden");}}});dojo.declare("esri.dijit.PopupTemplate",[esri.PopupInfoTemplate],{chartTheme:"dojox.charting.themes.PlotKit.popup",constructor:function(json,_aa4){dojo.mixin(this,_aa4);this.initialize(json);this._nls=dojo.mixin({},esri.bundle.widgets.popup);},getTitle:function(_aa5){return this.info?this.getComponents(_aa5).title:"";},getContent:function(_aa6){return this.info?new esri.dijit._PopupRenderer({template:this,graphic:_aa6,chartTheme:this.chartTheme,_nls:this._nls},dojo.create("div")).domNode:"";}});dojo.declare("esri.dijit._PopupRenderer",[_a52._Widget,_a52._Templated],{templateString:"<div class='esriViewPopup'>"+"<div class='mainSection'>"+"<div class='header' dojoAttachPoint='_title'></div>"+"<div class='hzLine'></div>"+"<div dojoAttachPoint='_description'></div>"+"<div class='break'></div>"+"</div>"+"<div class='attachmentsSection hidden'>"+"<div>${_nls.NLS_attach}:</div>"+"<ul dojoAttachPoint='_attachmentsList'>"+"</ul>"+"<div class='break'></div>"+"</div>"+"<div class='mediaSection hidden'>"+"<div class='header' dojoAttachPoint='_mediaTitle'></div>"+"<div class='hzLine'></div>"+"<div class='caption' dojoAttachPoint='_mediaCaption'></div>"+"<div class='gallery' dojoAttachPoint='_gallery'>"+"<div class='mediaHandle prev' dojoAttachPoint='_prevMedia' dojoAttachEvent='onclick: _goToPrevMedia'></div>"+"<div class='mediaHandle next' dojoAttachPoint='_nextMedia' dojoAttachEvent='onclick: _goToNextMedia'></div>"+"<ul class='summary'>"+"<li class='image mediaCount hidden' dojoAttachPoint='_imageCount'>0</li>"+"<li class='image mediaIcon hidden'></li>"+"<li class='chart mediaCount hidden' dojoAttachPoint='_chartCount'>0</li>"+"<li class='chart mediaIcon hidden'></li>"+"</ul>"+"<div class='frame' dojoAttachPoint='_mediaFrame'></div>"+"</div>"+"</div>"+"<div class='editSummarySection hidden' dojoAttachPoint='_editSummarySection'>"+"<div class='break'></div>"+"<div class='break hidden' dojoAttachPoint='_mediaBreak'></div>"+"<div class='editSummary' dojoAttachPoint='_editSummary'></div>"+"</div>"+"</div>",startup:function(){this.inherited(arguments);var _aa7=this.template,_aa8=this.graphic,_aa9=_aa7.getComponents(_aa8),_aaa=_aa9.title,_aab=_aa9.description,_aac=_aa9.fields,_aad=_aa9.mediaInfos,_aae=this.domNode,nls=this._nls;this._prevMedia.title=nls.NLS_prevMedia;this._nextMedia.title=nls.NLS_nextMedia;dojo.attr(this._title,"innerHTML",_aaa);if(!_aaa){dojo.addClass(this._title,"hidden");}if(!_aab&&_aac){_aab="";dojo.forEach(_aac,function(row){_aab+=("<tr valign='top'>");_aab+=("<td class='attrName'>"+row[0]+"</td>");_aab+=("<td class='attrValue'>"+row[1].replace(/^\s*(https?:\/\/[^\s]+)\s*$/i,"<a target='_blank' href='$1' title='$1'>"+nls.NLS_moreInfo+"</a>")+"</td>");_aab+=("</tr>");});if(_aab){_aab="<table class='attrTable' cellpadding='0px' cellspacing='0px'>"+_aab+"</table>";}}dojo.attr(this._description,"innerHTML",_aab);if(!_aab){dojo.addClass(this._description,"hidden");}dojo.query("a",this._description).forEach(function(node){dojo.attr(node,"target","_blank");});if(_aaa&&_aab){dojo.query(".mainSection .hzLine",_aae).removeClass("hidden");}else{if(_aaa||_aab){dojo.query(".mainSection .hzLine",_aae).addClass("hidden");}else{dojo.query(".mainSection",_aae).addClass("hidden");}}var dfd=(this._dfd=_aa7.getAttachments(_aa8));if(dfd){dfd.addBoth(dojo.hitch(this,this._attListHandler,dfd));dojo.attr(this._attachmentsList,"innerHTML","<li>"+nls.NLS_searching+"...</li>");dojo.query(".attachmentsSection",_aae).removeClass("hidden");}if(_aad&&_aad.length){dojo.query(".mediaSection",_aae).removeClass("hidden");dojo.setSelectable(this._mediaFrame,false);this._mediaInfos=_aad;this._mediaPtr=0;this._updateUI();this._displayMedia();}if(_aa9.editSummary){dojo.attr(this._editSummary,"innerHTML",_aa9.editSummary);if(_aad&&_aad.length){dojo.removeClass(this._mediaBreak,"hidden");}dojo.removeClass(this._editSummarySection,"hidden");}},destroy:function(){if(this._dfd){this._dfd.cancel();}this._destroyFrame();this.template=this.graphic=this._nls=this._mediaInfos=this._mediaPtr=this._dfd=null;this.inherited(arguments);},_goToPrevMedia:function(){var ptr=this._mediaPtr-1;if(ptr<0){return;}this._mediaPtr--;this._updateUI();this._displayMedia();},_goToNextMedia:function(){var ptr=this._mediaPtr+1;if(ptr===this._mediaInfos.length){return;}this._mediaPtr++;this._updateUI();this._displayMedia();},_updateUI:function(){var _aaf=this._mediaInfos,_ab0=_aaf.length,_ab1=this.domNode,_ab2=this._prevMedia,_ab3=this._nextMedia;if(_ab0>1){var _ab4=0,_ab5=0;dojo.forEach(_aaf,function(info){if(info.type==="image"){_ab4++;}else{if(info.type.indexOf("chart")!==-1){_ab5++;}}});if(_ab4){dojo.attr(this._imageCount,"innerHTML",_ab4);dojo.query(".summary .image",_ab1).removeClass("hidden");}if(_ab5){dojo.attr(this._chartCount,"innerHTML",_ab5);dojo.query(".summary .chart",_ab1).removeClass("hidden");}}else{dojo.query(".summary",_ab1).addClass("hidden");dojo.addClass(_ab2,"hidden");dojo.addClass(_ab3,"hidden");}var ptr=this._mediaPtr;if(ptr===0){dojo.addClass(_ab2,"hidden");}else{dojo.removeClass(_ab2,"hidden");}if(ptr===_ab0-1){dojo.addClass(_ab3,"hidden");}else{dojo.removeClass(_ab3,"hidden");}this._destroyFrame();},_displayMedia:function(){var info=this._mediaInfos[this._mediaPtr],_ab6=info.title,_ab7=info.caption,_ab8=dojo.query(".mediaSection .hzLine",this.domNode)[0];dojo.attr(this._mediaTitle,"innerHTML",_ab6);dojo[_ab6?"removeClass":"addClass"](this._mediaTitle,"hidden");dojo.attr(this._mediaCaption,"innerHTML",_ab7);dojo[_ab7?"removeClass":"addClass"](this._mediaCaption,"hidden");dojo[(_ab6&&_ab7)?"removeClass":"addClass"](_ab8,"hidden");if(info.type==="image"){this._showImage(info.value);}else{this._showChart(info.type,info.value);}},_showImage:function(_ab9){dojo.addClass(this._mediaFrame,"image");var _aba=dojo.style(this._gallery,"height"),html="<img src='"+_ab9.sourceURL+"' onload='esri.dijit._PopupRenderer.prototype._imageLoaded(this,"+_aba+");' />";if(_ab9.linkURL){html="<a target='_blank' href='"+_ab9.linkURL+"'>"+html+"</a>";}dojo.attr(this._mediaFrame,"innerHTML",html);},_showChart:function(type,_abb){dojo.removeClass(this._mediaFrame,"image");var _abc=this._chart=new _a53.charting.Chart2D(dojo.create("div",{"class":"chart"},this._mediaFrame),{margins:{l:4,t:4,r:4,b:4}});var _abd=_abb.theme||this.chartTheme||"PlotKit.popup";_abc.setTheme(dojo.getObject(_abd)||dojo.getObject("dojox.charting.themes."+_abd));switch(type){case "piechart":_abc.addPlot("default",{type:"Pie",labels:false});_abc.addSeries("Series A",_abb.fields);break;case "linechart":_abc.addPlot("default",{type:"Markers"});_abc.addAxis("x",{min:0,majorTicks:false,minorTicks:false,majorLabels:false,minorLabels:false});_abc.addAxis("y",{includeZero:true,vertical:true,fixUpper:"minor"});dojo.forEach(_abb.fields,function(info,idx){info.x=idx+1;});_abc.addSeries("Series A",_abb.fields);break;case "columnchart":_abc.addPlot("default",{type:"Columns",gap:3});_abc.addAxis("y",{includeZero:true,vertical:true,fixUpper:"minor"});_abc.addSeries("Series A",_abb.fields);break;case "barchart":_abc.addPlot("default",{type:"Bars",gap:3});_abc.addAxis("x",{includeZero:true,fixUpper:"minor",minorLabels:false});_abc.addAxis("y",{vertical:true,majorTicks:false,minorTicks:false,majorLabels:false,minorLabels:false});_abc.addSeries("Series A",_abb.fields);break;}this._action=new _a53.charting.action2d.Tooltip(_abc);_abc.render();},_destroyFrame:function(){if(this._chart){this._chart.destroy();this._chart=null;}if(this._action){this._action.destroy();this._action=null;}dojo.attr(this._mediaFrame,"innerHTML","");},_imageLoaded:function(img,_abe){var _abf=img.height;if(_abf<_abe){var diff=Math.round((_abe-_abf)/2);dojo.style(img,"marginTop",diff+"px");}},_attListHandler:function(dfd,_ac0){if(dfd===this._dfd){this._dfd=null;var html="";if(!(_ac0 instanceof Error)&&_ac0&&_ac0.length){dojo.forEach(_ac0,function(info){html+=("<li>");html+=("<a href='"+info.url+"' target='_blank'>"+(info.name||"[No name]")+"</a>");html+=("</li>");});}dojo.attr(this._attachmentsList,"innerHTML",html||"<li>"+this._nls.NLS_noAttach+"</li>");}}});});},"dojox/charting/scaler/common":function(){define("dojox/charting/scaler/common",["dojo/_base/lang"],function(lang){var eq=function(a,b){return Math.abs(a-b)<=0.000001*(Math.abs(a)+Math.abs(b));};var _ac1=lang.getObject("dojox.charting.scaler.common",true);var _ac2={};return lang.mixin(_ac1,{doIfLoaded:function(_ac3,_ac4,_ac5){if(_ac2[_ac3]==undefined){try{_ac2[_ac3]=require(_ac3);}catch(e){_ac2[_ac3]=null;}}if(_ac2[_ac3]){return _ac4(_ac2[_ac3]);}else{return _ac5();}},findString:function(val,text){val=val.toLowerCase();for(var i=0;i<text.length;++i){if(val==text[i]){return true;}}return false;},getNumericLabel:function(_ac6,_ac7,_ac8){var def="";_ac1.doIfLoaded("dojo/number",function(_ac9){def=(_ac8.fixed?_ac9.format(_ac6,{places:_ac7<0?-_ac7:0}):_ac9.format(_ac6))||"";},function(){def=_ac8.fixed?_ac6.toFixed(_ac7<0?-_ac7:0):_ac6.toString();});if(_ac8.labelFunc){var r=_ac8.labelFunc(def,_ac6,_ac7);if(r){return r;}}if(_ac8.labels){var l=_ac8.labels,lo=0,hi=l.length;while(lo<hi){var mid=Math.floor((lo+hi)/2),val=l[mid].value;if(val<_ac6){lo=mid+1;}else{hi=mid;}}if(lo<l.length&&eq(l[lo].value,_ac6)){return l[lo].text;}--lo;if(lo>=0&&lo<l.length&&eq(l[lo].value,_ac6)){return l[lo].text;}lo+=2;if(lo<l.length&&eq(l[lo].value,_ac6)){return l[lo].text;}}return def;}});});},"esri/layers/FeatureLayer":function(){define(["dijit","dojo","dojox","dojo/require!esri/layers/graphics,esri/tasks/query,dojo/io/iframe,esri/layers/agscommon,dojo/date/locale"],function(_aca,dojo,_acb){dojo.provide("esri.layers.FeatureLayer");dojo.require("esri.layers.graphics");dojo.require("esri.tasks.query");dojo.require("dojo.io.iframe");dojo.require("esri.layers.agscommon");dojo.require("dojo.date.locale");dojo.declare("esri.layers.FeatureLayer",esri.layers.GraphicsLayer,{constructor:function(url,_acc){this._outFields=_acc&&_acc.outFields;this._loadCallback=_acc&&_acc.loadCallback;var _acd=_acc&&_acc._usePatch;this._usePatch=(_acd===null||_acd===undefined)?true:_acd;this._trackIdField=_acc&&_acc.trackIdField;this.objectIdField=_acc&&_acc.objectIdField;this._maxOffset=_acc&&_acc.maxAllowableOffset;this._optEditable=_acc&&_acc.editable;this._optAutoGen=_acc&&_acc.autoGeneralize;this.editSummaryCallback=_acc&&_acc.editSummaryCallback;this.userId=_acc&&_acc.userId;this.userIsAdmin=_acc&&_acc.userIsAdmin;this.useMapTime=(_acc&&_acc.hasOwnProperty("useMapTime"))?(!!_acc.useMapTime):true;this.source=_acc&&_acc.source;this.gdbVersion=_acc&&_acc.gdbVersion;this._selectedFeatures={};this._selectedFeaturesArr=[];this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();var ctor=this.constructor,mode=this.mode=(esri._isDefined(_acc&&_acc.mode)?_acc.mode:ctor.MODE_ONDEMAND);switch(mode){case ctor.MODE_SNAPSHOT:this._mode=new esri.layers._SnapshotMode(this);this._isSnapshot=true;break;case ctor.MODE_ONDEMAND:this._tileWidth=(_acc&&_acc.tileWidth)||512;this._tileHeight=(_acc&&_acc.tileHeight)||512;this._mode=new esri.layers._OnDemandMode(this);var _ace=_acc&&_acc.latticeTiling;this.latticeTiling=_ace;break;case ctor.MODE_SELECTION:this._mode=new esri.layers._SelectionMode(this);this._isSelOnly=true;break;}this._initLayer=dojo.hitch(this,this._initLayer);this._selectHandler=dojo.hitch(this,this._selectHandler);this._editable=false;if(dojo.isObject(url)&&url.layerDefinition){var json=url;this._collection=true;this.mode=ctor.MODE_SNAPSHOT;this._initLayer(json);return this;}this._task=new esri.tasks.QueryTask(this.url,{source:this.source,gdbVersion:this.gdbVersion});var _acf=this._url.path;this._fserver=false;if(_acf.search(/\/FeatureServer\//i)!==-1){this._fserver=true;}var _ad0=_acc&&_acc.resourceInfo;if(_ad0){this._initLayer(_ad0);}else{if(this.source){var _ad1={source:this.source.toJson()};this._url.query=dojo.mixin(this._url.query,{layer:dojo.toJson(_ad1)});}if(this.gdbVersion){this._url.query=dojo.mixin(this._url.query,{gdbVersion:this.gdbVersion});}esri.request({url:_acf,content:dojo.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});}},_initLayer:function(_ad2,io){if(_ad2||io){this._json=_ad2;this._findCredential();var ssl=(this.credential&&this.credential.ssl)||(_ad2&&_ad2._ssl);if(ssl){this._useSSL();this._task._useSSL();}if(this._collection){this._mode=new esri.layers._SnapshotMode(this);this._isSnapshot=true;this._featureSet=_ad2.featureSet;this._nextId=_ad2.nextObjectId;_ad2=_ad2.layerDefinition;}if(_ad2.hasOwnProperty("capabilities")){var _ad3=(this.capabilities=_ad2.capabilities);if(_ad3&&_ad3.toLowerCase().indexOf("editing")!==-1){this._editable=true;}else{this._editable=false;}}else{if(!this._collection){this._editable=this._fserver;}}if(esri._isDefined(this._optEditable)){this._editable=this._optEditable;delete this._optEditable;}this._json=dojo.toJson(this._json);if(this.isEditable()){delete this._maxOffset;}else{if(this.mode!==this.constructor.MODE_SNAPSHOT&&((_ad2.geometryType==="esriGeometryPolyline")||(_ad2.geometryType==="esriGeometryPolygon"))){this._autoGeneralize=esri._isDefined(this._optAutoGen)?this._optAutoGen:(this.mode===this.constructor.MODE_ONDEMAND);delete this._optAutoGen;}}var _ad4=_ad2.effectiveMinScale||_ad2.minScale,_ad5=_ad2.effectiveMaxScale||_ad2.maxScale;if(!this._hasMin&&_ad4){this.setMinScale(_ad4);}if(!this._hasMax&&_ad5){this.setMaxScale(_ad5);}this.layerId=_ad2.id;this.name=_ad2.name;this.description=_ad2.description;this.copyright=_ad2.copyrightText;this.type=_ad2.type;this.geometryType=_ad2.geometryType;this.displayField=_ad2.displayField;this.defaultDefinitionExpression=_ad2.definitionExpression;this.fullExtent=new esri.geometry.Extent(_ad2.extent);this.defaultVisibility=_ad2.defaultVisibility;if((this.geometryType==="esriGeometryPoint")||(this.geometryType==="esriGeometryMultipoint")){this.latticeTiling=false;}this.indexedFields=_ad2.indexedFields;this.maxRecordCount=_ad2.maxRecordCount;this.canModifyLayer=_ad2.canModifyLayer;this.supportsStatistics=_ad2.supportsStatistics;this.supportsAdvancedQueries=_ad2.supportsAdvancedQueries;this.hasLabels=_ad2.hasLabels;this.canScaleSymbols=_ad2.canScaleSymbols;this.supportsRollbackOnFailure=_ad2.supportsRollbackOnFailure;this.syncCanReturnChanges=_ad2.syncCanReturnChanges;this.isDataVersioned=_ad2.isDataVersioned;this.editFieldsInfo=_ad2.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=_ad2.ownershipBasedAccessControlForFeatures;if(this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures){this.creatorField=this.editFieldsInfo.creatorField;}this.relationships=_ad2.relationships;this.allowGeometryUpdates=esri._isDefined(_ad2.allowGeometryUpdates)?_ad2.allowGeometryUpdates:true;this._isTable=(this.type==="Table");var _ad6=(this.fields=[]),_ad7=_ad2.fields,i;for(i=0;i<_ad7.length;i++){_ad6.push(new esri.layers.Field(_ad7[i]));}if(!this.objectIdField){this.objectIdField=_ad2.objectIdField;if(!this.objectIdField){_ad7=_ad2.fields;for(i=0;i<_ad7.length;i++){var _ad8=_ad7[i];if(_ad8.type==="esriFieldTypeOID"){this.objectIdField=_ad8.name;break;}}}if(!this.objectIdField){console.debug("esri.layers.FeatureLayer: "+esri.substitute({url:this.url},esri.bundle.layers.FeatureLayer.noOIDField));}}if(!esri._isDefined(this._nextId)){var _ad9=this.objectIdField,_ada=-1;if(this._collection&&_ad9){var fset=this._featureSet,_adb=fset&&fset.features,il=_adb?_adb.length:0,oid,attr;for(i=0;i<il;i++){attr=_adb[i].attributes;oid=attr&&attr[_ad9];if(oid>_ada){_ada=oid;}}}this._nextId=(_ada+1);}this.globalIdField=_ad2.globalIdField;var _adc=(this.typeIdField=_ad2.typeIdField),_add;if(_adc){_add=!this._getField(_adc)&&this._getField(_adc,true);if(_add){this.typeIdField=_add.name;}}this.visibilityField=_ad2.visibilityField;var _ade=_ad2.defaultSymbol;if(_ade){this.defaultSymbol=esri.symbol.fromJson(_ade);}var _adf=this.types=[],_ae0=_ad2.types,_ae1,_ae2,_ae3,_ae4=this.editFieldsInfo,_ae5=_ae4&&_ae4.creatorField,_ae6=_ae4&&_ae4.editorField,fix=(_ae5||_ae6),_ae7=[];if(_ae0){for(i=0;i<_ae0.length;i++){_ae1=new esri.layers.FeatureType(_ae0[i]);_ae2=_ae1.templates;if(fix&&_ae2&&_ae2.length){_ae7=_ae7.concat(_ae2);}_adf.push(_ae1);}}var _ae8=_ad2.templates,_ae9,_aea=this.templates=[];if(_ae8){for(i=0;i<_ae8.length;i++){_ae9=new esri.layers.FeatureTemplate(_ae8[i]);if(fix){_ae7.push(_ae9);}_aea.push(_ae9);}}for(i=0;i<_ae7.length;i++){_ae3=dojo.getObject("prototype.attributes",false,_ae7[i]);if(_ae3){if(_ae5){delete _ae3[_ae5];}if(_ae6){delete _ae3[_ae6];}}}var _aeb=_ad2.timeInfo;if(_aeb){this.timeInfo=new esri.layers.TimeInfo(_aeb);this._startTimeField=_aeb.startTimeField;this._endTimeField=_aeb.endTimeField;if(this._startTimeField&&this._endTimeField){this._twoTimeFields=true;}if(this._trackIdField){_aeb.trackIdField=this._trackIdField;}else{this._trackIdField=_aeb.trackIdField;}}this.hasAttachments=(!this._collection&&_ad2.hasAttachments)?true:false;this.htmlPopupType=_ad2.htmlPopupType;var _aec=_ad2.drawingInfo,_aed;if(!this.renderer){if(_aec&&_aec.renderer){_aed=_aec.renderer;this.setRenderer(esri.renderer.fromJson(_aed));if(_aed.type==="classBreaks"){this.renderer._setMaxInclusiveness(true);}if(!this._collection){var _aee=_aed.type,_aef=[];_aed=this.renderer;switch(_aee){case "simple":_aef.push(_aed.symbol);break;case "uniqueValue":case "classBreaks":_aef.push(_aed.defaultSymbol);_aef=_aef.concat(dojo.map(_aed.infos,function(info){return info.symbol;}));break;}_aef=dojo.filter(_aef,esri._isDefined);var _af0=this._url.path+"/images/",_af1=this._getToken();dojo.forEach(_aef,function(sym){var url=sym.url;if(url){if((url.search(/https?\:/)===-1)&&(url.indexOf("data:")===-1)){sym.url=_af0+url;}if(_af1&&sym.url.search(/https?\:/)!==-1){sym.url+=("?token="+_af1);}}});}}else{if(_ade){_ae0=this.types;if(_ae0.length>0){_aed=new esri.renderer.UniqueValueRenderer(this.defaultSymbol,this.typeIdField);dojo.forEach(_ae0,function(type){_aed.addValue(type.id,type.symbol);});}else{_aed=new esri.renderer.SimpleRenderer(this.defaultSymbol);}this.setRenderer(_aed);}else{if(!this._isTable){var _af2;switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":_af2=new esri.symbol.SimpleMarkerSymbol();break;case "esriGeometryPolyline":_af2=new esri.symbol.SimpleLineSymbol();break;case "esriGeometryPolygon":_af2=new esri.symbol.SimpleFillSymbol();break;}this.setRenderer(_af2?new esri.renderer.SimpleRenderer(_af2):null);}}}}var _af3=(_aec&&_aec.transparency)||0;if(!esri._isDefined(this.opacity)&&_af3>0){this.opacity=1-(_af3/100);}this.version=_ad2.currentVersion;if(!this.version){var ver;if("capabilities" in _ad2||"drawingInfo" in _ad2||"hasAttachments" in _ad2||"htmlPopupType" in _ad2||"relationships" in _ad2||"timeInfo" in _ad2||"typeIdField" in _ad2||"types" in _ad2){ver=10;}else{ver=9.3;}this.version=ver;}if((dojo.isIE||dojo.isSafari)&&this.isEditable()&&this.version<10.02){this._ts=true;}this.loaded=true;this._fixRendererFields();this._checkFields();this._updateCaps();if(this._collection){this._fireUpdateStart();var _af4=this._featureSet;delete this._featureSet;this._mode._drawFeatures(new esri.tasks.FeatureSet(_af4));this._fcAdded=true;}this.onLoad(this);var _af5=this._loadCallback;if(_af5){delete this._loadCallback;_af5(this);}}},setRenderer:function(ren){this.inherited("setRenderer",arguments);var _af6=this.renderer;if(_af6){this._ager=(_af6.declaredClass.indexOf("TemporalRenderer")!==-1&&_af6.observationAger&&_af6.observationRenderer);var _af7=dojo.filter([_af6,_af6.observationRenderer,_af6.latestObservationRenderer,_af6.trackRenderer],esri._isDefined);var _af8=[];dojo.forEach(_af7,function(rnd){_af8.push(rnd.attributeField);_af8.push(rnd.attributeField2);_af8.push(rnd.attributeField3);},this);this._rendererFields=dojo.filter(_af8,esri._isDefined);}else{this._ager=false;this._rendererFields=[];}if(this.loaded&&this._rendererFields.length>0){this._fixRendererFields();this._checkFields(this._rendererFields);}if(this.loaded&&this._collection){this._typesDirty=true;}},_setMap:function(map,_af9){this._map=map;this._toggleTime(true);var div=this.inherited("_setMap",arguments);this.clearSelection();var _afa=this.renderer;if(this.timeInfo){if(this._trackIdField||(_afa&&(_afa.latestObservationRenderer||_afa.trackRenderer))){this._trackManager=new esri.layers._TrackManager(this);this._trackManager.initialize(map);}}this._zoomConnect=dojo.connect(map,"onZoomEnd",this,this._updateMaxOffset);this._updateMaxOffset();var mode=this._mode;if(mode){mode.initialize(map);}return div;},_unsetMap:function(map,_afb){var mode=this._mode;if(mode){mode.destroy();this._mode=null;}if(this._trackManager){this._trackManager.destroy();this._trackManager=null;}dojo.disconnect(this._zoomConnect);this._zoomConnect=null;this._toggleTime(false);this.inherited("_unsetMap",arguments);},refresh:function(){var mode=this._mode;if(mode){mode.refresh();}},setEditable:function(_afc){if(!this._collection){console.log("FeatureLayer:setEditable - this functionality is not yet supported for layer in a feature service");return this;}if(!this.loaded){this._optEditable=_afc;return this;}var _afd=this._editable;this._editable=_afc;this._updateCaps();if(_afd!==_afc){this.onCapabilitiesChange();}return this;},getEditCapabilities:function(_afe){var _aff={"canCreate":false,"canUpdate":false,"canDelete":false};if(!this.loaded||!this.isEditable()){return _aff;}var _b00=_afe&&_afe.feature,_b01=_afe&&_afe.userId,caps=dojo.map((this.capabilities?this.capabilities.toLowerCase().split(","):[]),dojo.trim),_b02=dojo.indexOf(caps,"editing")>-1,_b03=_b02&&(dojo.indexOf(caps,"create")>-1),_b04=_b02&&(dojo.indexOf(caps,"update")>-1),_b05=_b02&&(dojo.indexOf(caps,"delete")>-1),_b06=this.ownershipBasedAccessControlForFeatures,_b07=this.editFieldsInfo,_b08=_b07&&_b07.creatorField,_b09=_b07&&_b07.realm,_b0a=_b00&&_b00.attributes,_b0b=(_b0a&&_b08)?_b0a[_b08]:undefined,_b0c,_b0d=!!this.userIsAdmin,_b0e=!_b06||_b0d||!!(_b06.allowOthersToUpdate||_b06.allowUpdateToOthers),_b0f=!_b06||_b0d||!!(_b06.allowOthersToDelete||_b06.allowDeleteToOthers);if(_b0d||(_b02&&!(_b03||_b04||_b05))){_b03=_b04=_b05=true;}_b0c={"canCreate":_b03,"canUpdate":_b04,"canDelete":_b05};if(_b0b===null){_b0c.canUpdate=_b04&&_b0e;_b0c.canDelete=_b05&&_b0f;}else{if(_b0b===""){return _b0c;}else{if(_b0b){_b01=_b01||this.getUserId();if(_b01&&_b09){_b01=_b01+"@"+_b09;}if(_b01.toLowerCase()===_b0b.toLowerCase()){return _b0c;}else{_b0c.canUpdate=_b04&&_b0e;_b0c.canDelete=_b05&&_b0f;}}}}return _b0c;},getUserId:function(){var _b10;if(this.loaded){_b10=(this.credential&&this.credential.userId)||this.userId||"";}return _b10;},setUserIsAdmin:function(_b11){this.userIsAdmin=_b11;},setEditSummaryCallback:function(_b12){this.editSummaryCallback=_b12;},getEditSummary:function(_b13,_b14,_b15){_b15=esri._isDefined(_b15)?_b15:(new Date()).getTime();var _b16="",info=this.getEditInfo(_b13,_b14,_b15),_b17=(_b14&&_b14.callback)||this.editSummaryCallback;if(_b17){info=_b17(_b13,info)||"";}if(dojo.isString(info)){_b16=info;}else{if(info){var _b18=info.action,_b19=info.userId,_b1a=info.timeValue,_b1b=0;if(_b18){_b1b++;}if(_b19){_b1b++;}if(esri._isDefined(_b1a)){_b1b++;}if(_b1b>1){_b16=(_b18==="edit"?"edit":"create")+(_b19?"User":"")+(esri._isDefined(_b1a)?info.displayPattern:"");}}_b16=_b16&&esri.substitute(info,esri.bundle.layers.FeatureLayer[_b16]);}return _b16;},getEditInfo:function(_b1c,_b1d,_b1e){if(!this.loaded){return;}_b1e=esri._isDefined(_b1e)?_b1e:(new Date()).getTime();var _b1f=(_b1d&&_b1d.action)||"last",_b20=this.editFieldsInfo,_b21=_b20&&_b20.creatorField,_b22=_b20&&_b20.creationDateField,_b23=_b20&&_b20.editorField,_b24=_b20&&_b20.editDateField,_b25=_b20&&_b20.realm,_b26=_b1c&&_b1c.attributes,_b27=(_b26&&_b21)?_b26[_b21]:undefined,_b28=(_b26&&_b22)?_b26[_b22]:null,_b29=(_b26&&_b23)?_b26[_b23]:undefined,_b2a=(_b26&&_b24)?_b26[_b24]:null,_b2b=this._getEditData(_b27,_b28,_b1e),_b2c=this._getEditData(_b29,_b2a,_b1e),_b2d;switch(_b1f){case "creation":_b2d=_b2b;break;case "edit":_b2d=_b2c;break;case "last":_b2d=_b2c||_b2b;break;}if(_b2d){_b2d.action=(_b2d===_b2c)?"edit":"creation";}return _b2d;},_getEditData:function(_b2e,_b2f,_b30){var data,_b31,_b32,_b33=60000,_b34=3600000,_b35=2*_b34,_b36=24*_b34,_b37=7*_b36;if(esri._isDefined(_b2f)){_b31=_b30-_b2f;if(_b31<0){_b32="Full";}else{if(_b31<_b33){_b32="Seconds";}else{if(_b31<(2*_b33)){_b32="Minute";}else{if(_b31<_b34){_b32="Minutes";}else{if(_b31<_b35){_b32="Hour";}else{if(_b31<_b36){_b32="Hours";}else{if(_b31<_b37){_b32="WeekDay";}else{_b32="Full";}}}}}}}}if((_b2e!==undefined)||_b32){data=data||{};data.userId=_b2e;if(_b32){var _b38=dojo.date.locale.format,_b39=new Date(_b2f);data.minutes=Math.floor(_b31/_b33);data.hours=Math.floor(_b31/_b34);data.weekDay=_b38(_b39,{datePattern:"EEEE",selector:"date"});data.formattedDate=_b38(_b39,{selector:"date"});data.formattedTime=_b38(_b39,{selector:"time"});data.displayPattern=_b32;data.timeValue=_b2f;}}return data;},isEditable:function(){return !!(this._editable||this.userIsAdmin);},setMaxAllowableOffset:function(_b3a){if(!this.isEditable()){this._maxOffset=_b3a;}return this;},getMaxAllowableOffset:function(){return this._maxOffset;},setAutoGeneralize:function(_b3b){if(!this.loaded){this._optAutoGen=_b3b;}else{if(!this.isEditable()&&(this.mode!==this.constructor.MODE_SNAPSHOT)&&((this.geometryType==="esriGeometryPolyline")||(this.geometryType==="esriGeometryPolygon"))){this._autoGeneralize=_b3b;if(_b3b){var map=this._map;if(map&&map.loaded){this._maxOffset=Math.floor(map.extent.getWidth()/map.width);}}else{delete this._maxOffset;}}}return this;},setGDBVersion:function(_b3c){if(!this._collection&&(_b3c!==this.gdbVersion)&&(_b3c||this.gdbVersion)){this.gdbVersion=_b3c;this._task.gdbVersion=_b3c;this._url.query=dojo.mixin(this._url.query,{gdbVersion:_b3c});if(this.loaded){this.clearSelection();if(this._map){this.refresh();}}this.onGDBVersionChange();}return this;},setDefinitionExpression:function(expr){this._defnExpr=expr;var mode=this._mode;if(mode){mode.propertyChangeHandler(1);}return this;},getDefinitionExpression:function(){return this._defnExpr;},setTimeDefinition:function(_b3d){if(this._isSnapshot){this._timeDefn=_b3d;var mode=this._mode;if(mode){mode.propertyChangeHandler(2);}}return this;},getTimeDefinition:function(){return this._timeDefn;},setTimeOffset:function(_b3e,_b3f){this._timeOffset=_b3e;this._timeOffsetUnits=_b3f;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}return this;},setUseMapTime:function(use){this.useMapTime=use;this._toggleTime(!this.suspended);var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},selectFeatures:function(_b40,_b41,_b42,_b43){_b41=_b41||this.constructor.SELECTION_NEW;var _b44=this._getShallowClone(_b40),map=this._map,_b45,dfd=esri._fixDfd(new dojo.Deferred(esri._dfdCanceller));_b44.outFields=this._getOutFields();_b44.returnGeometry=true;if(map){_b44.outSpatialReference=new esri.SpatialReference(map.spatialReference.toJson());}if(!this._applyQueryFilters(_b44)){_b45={features:[]};this._selectHandler(_b45,_b41,_b42,_b43,dfd);return dfd;}var _b46=this._canDoClientSideQuery(_b44);if(_b46){_b45={features:this._doQuery(_b44,_b46)};this._selectHandler(_b45,_b41,_b42,_b43,dfd);return dfd;}else{if(this._collection){var err=new Error("FeatureLayer::selectFeatures - "+esri.bundle.layers.FeatureLayer.invalidParams);this._resolve([err],null,_b43,dfd,true);return dfd;}var self=this;if(this._ts){_b44._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task.execute(_b44);temp.addCallbacks(function(_b47){self._selectHandler(_b47,_b41,_b42,_b43,dfd);},function(err){self._resolve([err],null,_b43,dfd,true);});return dfd;}},getSelectedFeatures:function(){var _b48=this._selectedFeatures,_b49=[],item;for(item in _b48){if(_b48.hasOwnProperty(item)){_b49.push(_b48[item]);}}return _b49;},clearSelection:function(_b4a){var _b4b=this._selectedFeatures,mode=this._mode,item;for(item in _b4b){if(_b4b.hasOwnProperty(item)){this._unSelectFeatureIIf(item,mode);mode._removeFeatureIIf(item);}}this._selectedFeatures={};if(this._isSelOnly){mode._applyTimeFilter(true);}if(!_b4a){this.onSelectionClear();}return this;},setSelectionSymbol:function(_b4c){this._selectionSymbol=_b4c;if(_b4c){var _b4d=this._selectedFeatures,item;for(item in _b4d){if(_b4d.hasOwnProperty(item)){_b4d[item].setSymbol(_b4c);}}}return this;},getSelectionSymbol:function(){return this._selectionSymbol;},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(adds,_b4e,_b4f,_b50,_b51,_b52){var _b53=_b52.assembly,dfd=_b52.dfd;this._applyNormalized(adds,_b53&&_b53[0]);this._applyNormalized(_b4e,_b53&&_b53[1]);this.onBeforeApplyEdits(adds,_b4e,_b4f);var i,_b54={},_b55=this.objectIdField,_b56={f:"json"},_b57=false;if(this._collection){var _b58={};_b58.addResults=adds?dojo.map(adds,function(){_b57=true;return {objectId:this._nextId++,success:true};},this):null;_b58.updateResults=_b4e?dojo.map(_b4e,function(_b59){_b57=true;var oid=_b59.attributes[_b55];_b54[oid]=_b59;return {objectId:oid,success:true};},this):null;_b58.deleteResults=_b4f?dojo.map(_b4f,function(_b5a){_b57=true;return {objectId:_b5a.attributes[_b55],success:true};},this):null;if(_b57){this._editHandler(_b58,adds,_b54,_b50,_b51,dfd);}return;}if(adds&&adds.length>0){_b56.adds=this._convertFeaturesToJson(adds,0,1);_b57=true;}if(_b4e&&_b4e.length>0){for(i=0;i<_b4e.length;i++){var _b5b=_b4e[i];_b54[_b5b.attributes[_b55]]=_b5b;}_b56.updates=this._convertFeaturesToJson(_b4e,0,0,1);_b57=true;}if(_b4f&&_b4f.length>0){var ids=[];for(i=0;i<_b4f.length;i++){ids.push(_b4f[i].attributes[_b55]);}_b56.deletes=ids.join(",");_b57=true;}if(_b57){var self=this;return esri.request({url:this._url.path+"/applyEdits",content:dojo.mixin(_b56,this._url.query),callbackParamName:"callback",load:function(_b5c){self._editHandler(_b5c,adds,_b54,_b50,_b51,dfd);},error:function(err){self._resolve([err],null,_b51,dfd,true);}},{usePost:true});}},queryFeatures:function(_b5d,_b5e,_b5f){return this._query("execute","onQueryFeaturesComplete",_b5d,_b5e,_b5f);},queryRelatedFeatures:function(_b60,_b61,_b62){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",_b60,_b61,_b62);},queryIds:function(_b63,_b64,_b65){return this._query("executeForIds","onQueryIdsComplete",_b63,_b64,_b65);},queryCount:function(_b66,_b67,_b68){return this._query("executeForCount","onQueryCountComplete",_b66,_b67,_b68);},queryAttachmentInfos:function(_b69,_b6a,_b6b){var url=this._url.path+"/"+_b69+"/attachments",dfd=new dojo.Deferred(esri._dfdCanceller),self=this;dfd._pendingDfd=esri.request({url:url,content:dojo.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(_b6c){var _b6d=_b6c.attachmentInfos,_b6e;dojo.forEach(_b6d,function(info){_b6e=dojo.objectToQuery({gdbVersion:self._url.query&&self._url.query.gdbVersion,layer:self._url.query&&self._url.query.layer,token:self._getToken()});info.url=url+"/"+info.id+(_b6e?("?"+_b6e):"");info.objectId=_b69;});self._resolve([_b6d],"onQueryAttachmentInfosComplete",_b6a,dfd);},error:function(err){self._resolve([err],null,_b6b,dfd,true);}});return dfd;},addAttachment:function(_b6f,_b70,_b71,_b72){return this._sendAttachment("add",_b6f,_b70,_b71,_b72);},updateAttachment:function(_b73,_b74,_b75,_b76,_b77){_b75.appendChild(dojo.create("input",{type:"hidden",name:"attachmentId",value:_b74}));return this._sendAttachment("update",_b73,_b75,_b76,_b77);},deleteAttachments:function(_b78,_b79,_b7a,_b7b){var url=this._url.path+"/"+_b78+"/deleteAttachments",dfd=new dojo.Deferred(esri._dfdCanceller),self=this,_b7c={f:"json",attachmentIds:_b79.join(",")};dfd._pendingDfd=esri.request({url:url,content:dojo.mixin(_b7c,this._url.query),callbackParamName:"callback",load:dojo.hitch(this,function(_b7d){var _b7e=_b7d.deleteAttachmentResults;_b7e=dojo.map(_b7e,function(_b7f){var res=new esri.layers.FeatureEditResult(_b7f);res.attachmentId=res.objectId;res.objectId=_b78;return res;});self._resolve([_b7e],"onDeleteAttachmentsComplete",_b7a,dfd);}),error:function(err){self._resolve([err],null,_b7b,dfd,true);}},{usePost:true});return dfd;},addType:function(_b80){var _b81=this.types;if(_b81){var _b82=dojo.some(_b81,function(type){if(type.id==_b80.id){return true;}return false;});if(_b82){return false;}else{_b81.push(_b80);}}else{this.types=[_b80];}this._typesDirty=true;return true;},deleteType:function(_b83){if(!this._collection){return;}var _b84=this.types;if(_b84){var _b85=-1;dojo.some(_b84,function(type,_b86){if(type.id==_b83){_b85=_b86;return true;}return false;});if(_b85>-1){this._typesDirty=true;return _b84.splice(_b85,1)[0];}}},toJson:function(){var _b87=this._json,json=dojo.isString(_b87)?dojo.fromJson(_b87):dojo.clone(_b87);if(!json){return;}json=json.layerDefinition?json:{layerDefinition:json};var _b88=json.layerDefinition,_b89=this._collection;if(_b89&&this._typesDirty){_b88.types=dojo.map(this.types||[],function(type){return type.toJson();});var _b8a=this.renderer,_b8b=_b88.drawingInfo;if(_b8b&&_b8a&&_b8a.declaredClass.indexOf("TemporalRenderer")===-1){_b8b.renderer=_b8a.toJson();}}var _b8c=null;if(!(_b89&&!this._fcAdded)){_b8c={geometryType:_b88.geometryType,features:this._convertFeaturesToJson(this.graphics,true)};}json.featureSet=dojo.mixin({},json.featureSet||{},_b8c);if(_b89){json.nextObjectId=this._nextId;_b88.capabilities=this.capabilities;}return json;},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},_updateCaps:function(){var _b8d=this._editable,_b8e=dojo.trim(this.capabilities||""),_b8f=dojo.map((_b8e?_b8e.split(","):[]),dojo.trim),caps=dojo.map((_b8e?_b8e.toLowerCase().split(","):[]),dojo.trim),_b90=dojo.indexOf(caps,"editing"),cap,i,_b91,_b92={"Create":dojo.indexOf(caps,"create"),"Update":dojo.indexOf(caps,"update"),"Delete":dojo.indexOf(caps,"delete")};if(_b8d&&_b90===-1){_b8f.push("Editing");}else{if(!_b8d&&_b90>-1){_b91=[_b90];for(cap in _b92){if(_b92[cap]>-1){_b91.push(_b92[cap]);}}_b91.sort();for(i=_b91.length-1;i>=0;i--){_b8f.splice(_b91[i],1);}}}this.capabilities=_b8f.join(",");},_counter:{value:0},_getUniqueId:function(){return this._counter.value++;},onSuspend:function(){this.inherited(arguments);this._toggleTime(false);var mode=this._mode;if(mode){mode.suspend();}},onResume:function(){this.inherited(arguments);this._toggleTime(true);this._updateMaxOffset();var mode=this._mode;if(mode){mode.resume();}},_updateMaxOffset:function(){var map=this._map;if(map&&map.loaded){if(this._autoGeneralize){this._maxOffset=Math.floor(map.extent.getWidth()/map.width);}}},_toggleTime:function(_b93){var map=this._map;if(_b93&&this.timeInfo&&this.useMapTime&&map){this._mapTimeExtent=map.timeExtent;if(!this._timeConnect){this._timeConnect=dojo.connect(map,"onTimeExtentChange",this,this._timeChangeHandler);}}else{this._mapTimeExtent=null;dojo.disconnect(this._timeConnect);this._timeConnect=null;}},_timeChangeHandler:function(_b94){this._mapTimeExtent=_b94;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},_getOffsettedTE:function(_b95){var _b96=this._timeOffset,_b97=this._timeOffsetUnits;return (_b95&&_b96&&_b97)?_b95.offset(-1*_b96,_b97):_b95;},_getTimeOverlap:function(_b98,_b99){if(_b98&&_b99){return _b98.intersection(_b99);}else{return _b98||_b99;}},_getTimeFilter:function(_b9a){var _b9b=this.getTimeDefinition(),_b9c=null,_b9d;if(_b9b||_b9c){_b9d=this._getTimeOverlap(_b9b,_b9c);if(!_b9d){return [false];}}if(_b9a){_b9a=_b9d?this._getTimeOverlap(_b9a,_b9d):_b9a;if(!_b9a){return [false];}}else{_b9a=_b9d;}return [true,_b9a];},_getAttributeFilter:function(_b9e){var _b9f=this.getDefinitionExpression();if(_b9e){_b9e=_b9f?"("+_b9f+") AND ("+_b9e+")":_b9e;}else{_b9e=_b9f;}return _b9e;},_applyQueryFilters:function(_ba0){_ba0.where=this._getAttributeFilter(_ba0.where);_ba0.maxAllowableOffset=this._maxOffset;if(this.timeInfo){var _ba1=this._getTimeFilter(_ba0.timeExtent);if(!_ba1[0]){return false;}else{_ba0.timeExtent=_ba1[1];}}return true;},_add:function(_ba2){var _ba3=this._selectionSymbol,attr=_ba2.attributes,_ba4=this.visibilityField;if(_ba3&&this._isSelOnly){_ba2.setSymbol(_ba3);}if(_ba4&&attr&&attr.hasOwnProperty(_ba4)){_ba2[attr[_ba4]?"show":"hide"]();}return this.add.apply(this,arguments);},_remove:function(){return this.remove.apply(this,arguments);},_canDoClientSideQuery:function(_ba5){var _ba6=[],map=this._map;if(this._isTable||!map){return;}if(_ba5.text||(_ba5.where&&_ba5.where!==this.getDefinitionExpression())){return;}var _ba7=this._isSnapshot,_ba8=this._isSelOnly;var _ba9=_ba5.geometry;if(_ba9){if(!_ba8&&_ba5.spatialRelationship===esri.tasks.Query.SPATIAL_REL_INTERSECTS&&(_ba9.type==="extent"&&(_ba7||map.extent.contains(_ba9)))){_ba6.push(1);}else{return;}}var ids=_ba5.objectIds;if(ids){if(_ba7){_ba6.push(2);}else{var len=ids.length,mode=this._mode,_baa=0,i;for(i=0;i<len;i++){if(mode._getFeature(ids[i])){_baa++;}}if(_baa===len){_ba6.push(2);}else{return;}}}if(this.timeInfo){var _bab=_ba5.timeExtent,_bac=this._mapTimeExtent;if(_ba7){if(_bab){_ba6.push(3);}}else{if(_ba8){if(_bab){return;}}else{if(_bac){if(dojo.indexOf(_ba6,2)!==-1){if(_bab){_ba6.push(3);}}else{return;}}else{if(_ba6.length>0){if(_bab){_ba6.push(3);}}else{if(_bab){return;}}}}}}return _ba6.length>0?_ba6:null;},_doQuery:function(_bad,_bae,_baf){var _bb0=[],mode=this._mode,_bb1=this.objectIdField,i,len,_bb2;if(dojo.indexOf(_bae,2)!==-1){_bb0=[];var ids=_bad.objectIds;len=ids.length;for(i=0;i<len;i++){var obj=mode._getFeature(ids[i]);if(obj){_bb0.push(obj);}}if(_bb0.length===0){return [];}}if(dojo.indexOf(_bae,1)!==-1){_bb2=_bb0.length>0?_bb0:this.graphics;len=_bb2.length;var _bb3=_bad.geometry._normalize(null,true);_bb0=[];for(i=0;i<len;i++){var _bb4=_bb2[i],_bb5=_bb4.geometry;if(_bb5){if(this.normalization&&_bb3.length){if(_bb3[0].intersects(_bb5)||_bb3[1].intersects(_bb5)){_bb0.push(_bb4);}}else{if(_bb3.intersects(_bb5)){_bb0.push(_bb4);}}}}if(_bb0.length===0){return [];}}if(dojo.indexOf(_bae,3)!==-1){if(this.timeInfo){_bb2=_bb0.length>0?_bb0:this.graphics;var time=_bad.timeExtent,_bb6=this._filterByTime(_bb2,time.startTime,time.endTime);_bb0=_bb6.match;}}if(_baf){return dojo.map(_bb0,function(obj){return obj.attributes[_bb1];},this);}else{return _bb0;}},_filterByTime:function(_bb7,_bb8,_bb9){var _bba=this._startTimeField,_bbb=this._endTimeField,_bbc;if(!this._twoTimeFields){_bbc=_bba||_bbb;}var _bbd=esri._isDefined,yea=[],nay=[],i,len=_bb7.length,_bbe,_bbf;_bb8=_bb8?_bb8.getTime():-Infinity;_bb9=_bb9?_bb9.getTime():Infinity;if(_bbc){for(i=0;i<len;i++){_bbe=_bb7[i];_bbf=_bbe.attributes;var time=_bbf[_bbc];if(time>=_bb8&&time<=_bb9){yea.push(_bbe);}else{nay.push(_bbe);}}}else{for(i=0;i<len;i++){_bbe=_bb7[i];_bbf=_bbe.attributes;var _bc0=_bbf[_bba],end=_bbf[_bbb];_bc0=_bbd(_bc0)?_bc0:-Infinity;end=_bbd(end)?end:Infinity;if((_bc0>=_bb8&&_bc0<=_bb9)||(end>=_bb8&&end<=_bb9)||(_bb8>=_bc0&&_bb9<=end)){yea.push(_bbe);}else{nay.push(_bbe);}}}return {match:yea,noMatch:nay};},_resolve:function(args,_bc1,_bc2,dfd,_bc3){if(_bc1){this[_bc1].apply(this,args);}if(_bc2){_bc2.apply(null,args);}if(dfd){esri._resDfd(dfd,args,_bc3);}},_getShallowClone:function(_bc4){var _bc5=new esri.tasks.Query(),prop;for(prop in _bc4){if(_bc4.hasOwnProperty(prop)){_bc5[prop]=_bc4[prop];}}return _bc5;},_query:function(type,_bc6,_bc7,_bc8,_bc9){var that=this,dfd=new dojo.Deferred(esri._dfdCanceller);var _bca=function(_bcb,_bcc){if(!_bcc&&type==="execute"&&!that._isTable){var _bcd=_bcb.features,mode=that._mode,_bce=that.objectIdField,il=_bcd.length,i;for(i=il-1;i>=0;i--){var oid=_bcd[i].attributes[_bce];var _bcf=mode._getFeature(oid);if(_bcf){_bcd.splice(i,1,_bcf);}}}that._resolve([_bcb],_bc6,_bc8,dfd);};if(type!=="executeRelationshipQuery"){_bc7=this._getShallowClone(_bc7);_bc7.outFields=this._getOutFields();_bc7.returnGeometry=true;var map=this._map,_bd0;if(map){_bc7.outSpatialReference=new esri.SpatialReference(map.spatialReference.toJson());}if(!this._applyQueryFilters(_bc7)){switch(type){case "execute":_bd0=new esri.tasks.FeatureSet({features:[]});break;case "executeForIds":_bd0=[];break;case "executeForCount":_bd0=0;break;}_bca(_bd0,true);return dfd;}var _bd1=this._canDoClientSideQuery(_bc7);if(_bd1){var _bd2=this._doQuery(_bc7,_bd1,(type==="executeForIds"||type==="executeForCount"));switch(type){case "execute":_bd0=new esri.tasks.FeatureSet();_bd0.features=_bd2;break;case "executeForIds":_bd0=_bd2;break;case "executeForCount":_bd0=_bd2.length;break;}_bca(_bd0,true);return dfd;}}if(this._collection){var err=new Error("FeatureLayer::_query - "+esri.bundle.layers.FeatureLayer.invalidParams);this._resolve([err],null,_bc9,dfd,true);return dfd;}if(this._ts){_bc7._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task[type](_bc7);temp.addCallbacks(_bca,function(err){that._resolve([err],null,_bc9,dfd,true);});return dfd;},_convertFeaturesToJson:function(_bd3,_bd4,_bd5,_bd6){var json=[],_bd7=this._selectionSymbol,_bd8=this.visibilityField,i,_bd9,_bda=this.objectIdField;if(this.loaded&&(_bd5||_bd6)){_bd9=dojo.filter(this.fields,function(_bdb){return (_bdb.editable===false)&&(!_bd6||(_bdb.name!==_bda));});}for(i=0;i<_bd3.length;i++){var _bdc=_bd3[i],_bdd={},_bde=_bdc.geometry,attr=_bdc.attributes,_bdf=_bdc.symbol;if(_bde&&(!_bd6||!this.loaded||this.allowGeometryUpdates)){_bdd.geometry=_bde.toJson();}if(_bd8){_bdd.attributes=attr=dojo.mixin({},attr);attr[_bd8]=_bdc.visible?1:0;}else{if(attr){_bdd.attributes=dojo.mixin({},attr);}}if(_bdd.attributes&&_bd9&&_bd9.length){dojo.forEach(_bd9,function(_be0){delete _bdd.attributes[_be0.name];});}if(_bdf&&(_bdf!==_bd7)){_bdd.symbol=_bdf.toJson();}json.push(_bdd);}return _bd4?json:dojo.toJson(json);},_selectHandler:function(_be1,_be2,_be3,_be4,dfd){var _be5,ctor=this.constructor;switch(_be2){case ctor.SELECTION_NEW:this.clearSelection(true);_be5=true;break;case ctor.SELECTION_ADD:_be5=true;break;case ctor.SELECTION_SUBTRACT:_be5=false;break;}var i,_be6=_be1.features,mode=this._mode,_be7=[],_be8=this.objectIdField,_be9,oid;if(_be5){for(i=0;i<_be6.length;i++){_be9=_be6[i];oid=_be9.attributes[_be8];var _bea=mode._addFeatureIIf(oid,_be9);_be7.push(_bea);this._selectFeatureIIf(oid,_bea,mode);}}else{for(i=0;i<_be6.length;i++){_be9=_be6[i];oid=_be9.attributes[_be8];this._unSelectFeatureIIf(oid,mode);var _beb=mode._removeFeatureIIf(oid);_be7.push(_beb||_be9);}}if(this._isSelOnly){mode._applyTimeFilter(true);}this._resolve([_be7,_be2,_be1.exceededTransferLimit?{queryLimitExceeded:true}:null],"onSelectionComplete",_be3,dfd);if(_be1.exceededTransferLimit){this.onQueryLimitExceeded();}},_selectFeatureIIf:function(oid,_bec,mode){var _bed=this._selectedFeatures,_bee=_bed[oid];if(!_bee){mode._incRefCount(oid);_bed[oid]=_bec;if(!this._isTable){this._setSelectSymbol(_bec);}}return _bee||_bec;},_unSelectFeatureIIf:function(oid,mode){var _bef=this._selectedFeatures[oid];if(_bef){mode._decRefCount(oid);delete this._selectedFeatures[oid];if(!this._isTable){this._setUnSelectSymbol(_bef);}}return _bef;},_isSelected:function(_bf0){},_setSelectSymbol:function(_bf1){var _bf2=this._selectionSymbol;if(_bf2&&!this._isSelOnly){_bf1.setSymbol(_bf2);}},_setUnSelectSymbol:function(_bf3){var _bf4=this._selectionSymbol;if(_bf4&&!this._isSelOnly){if(_bf4===_bf3.symbol){_bf3.setSymbol(null,true);}}},_getOutFields:function(){var _bf5=dojo.filter([this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._rendererFields),function(_bf6,_bf7,arr){return !!_bf6&&(dojo.indexOf(arr,_bf6)===_bf7);});var _bf8=dojo.clone(this._outFields);if(_bf8){if(dojo.indexOf(_bf8,"*")!==-1){return _bf8;}dojo.forEach(_bf5,function(_bf9){if(dojo.indexOf(_bf8,_bf9)===-1){_bf8.push(_bf9);}});return _bf8;}else{return _bf5;}},_checkFields:function(_bfa){var _bfb=_bfa||this._getOutFields();dojo.forEach(_bfb,function(_bfc){if(_bfc==="*"){return;}if(!this._getField(_bfc)){console.debug("esri.layers.FeatureLayer: "+esri.substitute({url:this.url,field:_bfc},esri.bundle.layers.FeatureLayer.fieldNotFound));}},this);if(!_bfa&&!this._isTable&&!this._fserver&&!this._collection){var _bfd=dojo.some(this.fields,function(_bfe){return (_bfe&&_bfe.type==="esriFieldTypeGeometry")?true:false;});if(!_bfd){console.debug("esri.layers.FeatureLayer: "+esri.substitute({url:this.url},esri.bundle.layers.FeatureLayer.noGeometryField));}}},_fixRendererFields:function(){var _bff=this.renderer;if(_bff&&this.fields.length>0){var _c00=dojo.filter([_bff,_bff.observationRenderer,_bff.latestObservationRenderer,_bff.trackRenderer],esri._isDefined);var _c01=[];dojo.forEach(_c00,function(rnd){var _c02,_c03;_c03=rnd.attributeField;if(_c03){_c02=!this._getField(_c03)&&this._getField(_c03,true);if(_c02){rnd.attributeField=_c02.name;}}_c03=rnd.attributeField2;if(_c03){_c02=!this._getField(_c03)&&this._getField(_c03,true);if(_c02){rnd.attributeField2=_c02.name;}}_c03=rnd.attributeField3;if(_c03){_c02=!this._getField(_c03)&&this._getField(_c03,true);if(_c02){rnd.attributeField3=_c02.name;}}_c01.push(rnd.attributeField);_c01.push(rnd.attributeField2);_c01.push(rnd.attributeField3);},this);this._rendererFields=dojo.filter(_c01,esri._isDefined);}},_getField:function(_c04,_c05){var _c06=this.fields;if(_c06.length===0){return null;}var _c07;if(_c05){_c04=_c04.toLowerCase();}dojo.some(_c06,function(_c08){var _c09=false;if(_c05){_c09=(_c08&&_c08.name.toLowerCase()===_c04)?true:false;}else{_c09=(_c08&&_c08.name===_c04)?true:false;}if(_c09){_c07=_c08;}return _c09;});return _c07;},_getDateOpts:function(){if(!this._dtOpts){var _c0a=dojo.map(dojo.filter(this.fields,function(_c0b){return !!(_c0b&&_c0b.type==="esriFieldTypeDate");}),function(_c0c){return _c0c.name;});this._dtOpts={properties:_c0a};}return this._dtOpts;},_applyNormalized:function(_c0d,_c0e){if(_c0d&&_c0e){dojo.forEach(_c0d,function(_c0f,_c10){if(_c0f&&_c0e[_c10]){_c0f.setGeometry(_c0e[_c10]);}});}},_editHandler:function(_c11,adds,_c12,_c13,_c14,dfd){var _c15=_c11.addResults,_c16=_c11.updateResults,_c17=_c11.deleteResults,i,_c18,oid,_c19,attr,_c1a=this.objectIdField,mode=this._mode,_c1b=this._isTable;var _c1c=this.editFieldsInfo,_c1d=this._getOutFields()||[],_c1e=_c1c&&_c1c.creatorField,_c1f=_c1c&&_c1c.creationDateField,_c20=_c1c&&_c1c.editorField,_c21=_c1c&&_c1c.editDateField,_c22=_c1c&&_c1c.realm;if(dojo.indexOf(_c1d,"*")===-1){if(_c1e&&dojo.indexOf(_c1d,_c1e)===-1){_c1e=null;}if(_c1f&&dojo.indexOf(_c1d,_c1f)===-1){_c1f=null;}if(_c20&&dojo.indexOf(_c1d,_c20)===-1){_c20=null;}if(_c21&&dojo.indexOf(_c1d,_c21)===-1){_c21=null;}}var _c23=(_c1f||_c21)?(new Date()).getTime():null,_c24=(_c1e||_c20)?this.getUserId():undefined;if(_c24&&_c22){_c24=_c24+"@"+_c22;}if(_c15){for(i=0;i<_c15.length;i++){_c15[i]=new esri.layers.FeatureEditResult(_c15[i]);if(_c1b){continue;}_c18=_c15[i];if(_c18.success){oid=_c18.objectId;_c19=adds[i];var gl=_c19._graphicsLayer;if(gl&&gl!==this){gl.remove(_c19);}attr=_c19.attributes||{};attr[_c1a]=oid;if(_c1e){attr[_c1e]=_c24;}if(_c20){attr[_c20]=_c24;}if(_c1f){attr[_c1f]=_c23;}if(_c21){attr[_c21]=_c23;}_c19.setAttributes(attr);if(mode._init){mode.drawFeature(_c19);}}}}if(_c16){for(i=0;i<_c16.length;i++){_c16[i]=new esri.layers.FeatureEditResult(_c16[i]);if(_c1b){continue;}_c18=_c16[i];if(_c18.success){oid=_c18.objectId;_c19=_c12[oid];var _c25=mode._getFeature(oid);if(_c25){if(_c25.geometry!==_c19.geometry){_c25.setGeometry(esri.geometry.fromJson(_c19.geometry.toJson()));}this._repaint(_c25,oid);}_c19=_c25||_c19;attr=_c19.attributes||{};if(_c20){attr[_c20]=_c24;}if(_c21){attr[_c21]=_c23;}_c19.setAttributes(attr);}}}if(_c17){var _c26=[];for(i=0;i<_c17.length;i++){_c17[i]=new esri.layers.FeatureEditResult(_c17[i]);if(_c1b){continue;}_c18=_c17[i];if(_c18.success){oid=_c18.objectId;_c19=mode._getFeature(oid);if(_c19){if(this._unSelectFeatureIIf(oid,mode)){_c26.push(_c19);}_c19._count=0;mode._removeFeatureIIf(oid);}}}if(_c26.length>0){this.onSelectionComplete(_c26,this.constructor.SELECTION_SUBTRACT);}}this._resolve([_c15,_c16,_c17],"onEditsComplete",_c13,dfd);},_sendAttachment:function(type,_c27,_c28,_c29,_c2a){var _c2b=(type==="add")?"addAttachment":"updateAttachment",url=this._url.path+"/"+_c27+"/"+_c2b,self=this;var dfd=esri.request({url:url,form:_c28,content:dojo.mixin(this._url.query,{f:"json",token:this._getToken()||undefined}),callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(_c2c){var _c2d=(type==="add")?"addAttachmentResult":"updateAttachmentResult",_c2e=(type==="add")?"onAddAttachmentComplete":"onUpdateAttachmentComplete",_c2f=new esri.layers.FeatureEditResult(_c2c[_c2d]);_c2f.attachmentId=_c2f.objectId;_c2f.objectId=_c27;self._resolve([_c2f],_c2e,_c29);return _c2f;}).addErrback(function(_c30){self._resolve([_c30],null,_c2a,null,true);});return dfd;},_repaint:function(_c31,oid,_c32){oid=esri._isDefined(oid)?oid:_c31.attributes[this.objectIdField];if(!(oid in this._selectedFeatures)||!this._selectionSymbol){_c31.setSymbol(_c31.symbol,_c32);}},_getKind:function(_c33){var _c34=this._trackManager;if(_c34){return _c34.isLatestObservation(_c33)?1:0;}return 0;}});dojo.mixin(esri.layers.FeatureLayer,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});esri._createWrappers("esri.layers.FeatureLayer");dojo.declare("esri.layers.FeatureType",null,{constructor:function(json){if(json&&dojo.isObject(json)){this.id=json.id;this.name=json.name;var _c35=json.symbol;if(_c35){this.symbol=esri.symbol.fromJson(_c35);}var _c36=json.domains,_c37,i;var _c38=this.domains={};for(_c37 in _c36){if(_c36.hasOwnProperty(_c37)){var _c39=_c36[_c37];switch(_c39.type){case "range":_c38[_c37]=new esri.layers.RangeDomain(_c39);break;case "codedValue":_c38[_c37]=new esri.layers.CodedValueDomain(_c39);break;case "inherited":_c38[_c37]=new esri.layers.InheritedDomain(_c39);break;}}}var _c3a=json.templates;if(_c3a){var _c3b=this.templates=[];for(i=0;i<_c3a.length;i++){_c3b.push(new esri.layers.FeatureTemplate(_c3a[i]));}}}},toJson:function(){var json={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()};var _c3c,_c3d=this.domains,_c3e=this.templates,_c3f=esri._sanitize;if(_c3d){var _c40=json.domains={};for(_c3c in _c3d){if(_c3d.hasOwnProperty(_c3c)){_c40[_c3c]=_c3d[_c3c]&&_c3d[_c3c].toJson();}}_c3f(_c40);}if(_c3e){json.templates=dojo.map(_c3e,function(_c41){return _c41.toJson();});}return _c3f(json);}});dojo.declare("esri.layers.FeatureTemplate",null,{constructor:function(json){if(json&&dojo.isObject(json)){this.name=json.name;this.description=json.description;this.drawingTool=json.drawingTool;var _c42=json.prototype;this.prototype=new esri.Graphic(_c42.geometry,null,_c42.attributes);}},toJson:function(){return esri._sanitize({name:this.name,description:this.description,drawingTool:this.drawingTool,prototype:this.prototype&&this.prototype.toJson()});}});dojo.mixin(esri.layers.FeatureTemplate,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});dojo.declare("esri.layers.FeatureEditResult",null,{constructor:function(json){if(json&&dojo.isObject(json)){this.objectId=json.objectId;this.success=json.success;if(!json.success){var err=json.error;this.error=new Error();this.error.code=err.code;this.error.message=err.description;}}}});dojo.declare("esri.layers._RenderMode",null,{constructor:function(){this._prefix="jsonp_"+(dojo._scopeName||"dojo")+"IoScript";},initialize:function(map){},propertyChangeHandler:function(type){},destroy:function(){},drawFeature:function(_c43){},suspend:function(){},resume:function(){},refresh:function(){},_incRefCount:function(oid){var _c44=this._featureMap[oid];if(_c44){_c44._count++;}},_decRefCount:function(oid){var _c45=this._featureMap[oid];if(_c45){_c45._count--;}},_getFeature:function(oid){return this._featureMap[oid];},_addFeatureIIf:function(oid,_c46){var fmap=this._featureMap,_c47=fmap[oid],_c48=this.featureLayer;if(!_c47){fmap[oid]=_c46;_c48._add(_c46);_c46._count=0;}return _c47||_c46;},_removeFeatureIIf:function(oid){var _c49=this._featureMap[oid],_c4a=this.featureLayer;if(_c49){if(_c49._count){return;}delete this._featureMap[oid];_c4a._remove(_c49);}return _c49;},_clearIIf:function(){var i,_c4b=this.featureLayer,_c4c=_c4b.graphics,_c4d=_c4b._selectedFeatures,_c4e=_c4b.objectIdField;for(i=_c4c.length-1;i>=0;i--){var _c4f=_c4c[i];var oid=_c4f.attributes[_c4e];if(oid in _c4d){_c4f._count=1;continue;}_c4f._count=0;this._removeFeatureIIf(oid);}},_isPending:function(id){var dfd=dojo.io.script[this._prefix+id];return dfd?true:false;},_cancelPendingRequest:function(dfd,id){dfd=dfd||dojo.io.script[this._prefix+id];if(dfd){try{dfd.cancel();dojo.io.script._validCheck(dfd);}catch(e){}}},_purgeRequests:function(){dojo.io.script._validCheck(null);},_toggleVisibility:function(show){var _c50=this.featureLayer,_c51=_c50.graphics,_c52=show?"show":"hide",i,len=_c51.length;show=show&&_c50._ager;for(i=0;i<len;i++){var _c53=_c51[i];_c53[_c52]();if(show){_c50._repaint(_c53);}}},_applyTimeFilter:function(_c54){var _c55=this.featureLayer;if(!_c55.timeInfo||_c55.suspended){return;}if(!_c54){_c55._fireUpdateStart();}var _c56=_c55._trackManager;if(_c56){_c56.clearTracks();}var defn=_c55.getTimeDefinition(),_c57=_c55._getOffsettedTE(_c55._mapTimeExtent);if(_c57){_c57=_c55._getTimeOverlap(defn,_c57);if(_c57){var _c58=_c55._filterByTime(_c55.graphics,_c57.startTime,_c57.endTime);if(_c56){_c56.addFeatures(_c58.match);}dojo.forEach(_c58.match,function(_c59){var _c5a=_c59._shape;if(!_c59.visible){_c59.show();_c5a=_c59._shape;_c5a&&_c5a._moveToFront();}if(_c55._ager&&_c5a){_c55._repaint(_c59);}});dojo.forEach(_c58.noMatch,function(_c5b){if(_c5b.visible){_c5b.hide();}});}else{this._toggleVisibility(false);}}else{if(_c56){_c56.addFeatures(_c55.graphics);}this._toggleVisibility(true);}if(_c56){_c56.moveLatestToFront();_c56.drawTracks();}if(!_c54){_c55._fireUpdateEnd();}}});dojo.declare("esri.layers._SelectionMode",[esri.layers._RenderMode],{constructor:function(_c5c){this.featureLayer=_c5c;this._featureMap={};},initialize:function(map){this.map=map;this._init=true;},propertyChangeHandler:function(type){if(this._init&&type===0){this._applyTimeFilter();}},destroy:function(){this._init=false;},resume:function(){this.propertyChangeHandler(0);}});dojo.declare("esri.layers._SnapshotMode",[esri.layers._RenderMode],{constructor:function(_c5d){this.featureLayer=_c5d;this._featureMap={};this._drawFeatures=dojo.hitch(this,this._drawFeatures);this._queryErrorHandler=dojo.hitch(this,this._queryErrorHandler);},initialize:function(map){this.map=map;var _c5e=this.featureLayer;if(_c5e._collection){this._applyTimeFilter();}else{this._fetchAll();}this._init=true;},propertyChangeHandler:function(type){if(this._init){if(type){this._fetchAll();}else{this._applyTimeFilter();}}},destroy:function(){this._init=false;},drawFeature:function(_c5f){var _c60=this.featureLayer,_c61=_c60.objectIdField,oid=_c5f.attributes[_c61];this._addFeatureIIf(oid,_c5f);this._incRefCount(oid);},resume:function(){this.propertyChangeHandler(0);},refresh:function(){var _c62=this.featureLayer;if(_c62._collection){_c62._fireUpdateStart();_c62._refresh(true);_c62._fireUpdateEnd();}else{this._fetchAll();}},_getRequestId:function(_c63){var id="_"+_c63.name+_c63.layerId+_c63._ulid;return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_fetchAll:function(){var _c64=this.featureLayer;if(_c64._collection){return;}_c64._fireUpdateStart();this._clearIIf();this._sendRequest();},_sendRequest:function(){var map=this.map,_c65=this.featureLayer,_c66=_c65.getDefinitionExpression();var _c67=new esri.tasks.Query();_c67.outFields=_c65._getOutFields();_c67.where=_c66||"1=1";_c67.returnGeometry=true;_c67.outSpatialReference=new esri.SpatialReference(map.spatialReference.toJson());_c67.timeExtent=_c65.getTimeDefinition();_c67.maxAllowableOffset=_c65._maxOffset;if(_c65._ts){_c67._ts=(new Date()).getTime();}var _c68;if(_c65._usePatch){_c68=this._getRequestId(_c65);this._cancelPendingRequest(null,_c68);}_c65._task.execute(_c67,this._drawFeatures,this._queryErrorHandler,_c68);},_drawFeatures:function(_c69){this._purgeRequests();var _c6a=_c69.features,_c6b=this.featureLayer,_c6c=_c6b.objectIdField,i,len=_c6a.length,_c6d,oid;for(i=0;i<len;i++){_c6d=_c6a[i];oid=_c6d.attributes[_c6c];this._addFeatureIIf(oid,_c6d);this._incRefCount(oid);}this._applyTimeFilter(true);_c6b._fireUpdateEnd(null,_c69.exceededTransferLimit?{queryLimitExceeded:true}:null);if(_c69.exceededTransferLimit){_c6b.onQueryLimitExceeded();}},_queryErrorHandler:function(err){this._purgeRequests();var _c6e=this.featureLayer;_c6e._errorHandler(err);_c6e._fireUpdateEnd(err);}});dojo.declare("esri.layers._OnDemandMode",[esri.layers._RenderMode],{constructor:function(_c6f){this.featureLayer=_c6f;this._featureMap={};this._queryErrorHandler=dojo.hitch(this,this._queryErrorHandler);},initialize:function(map){this.map=map;this._initialize();this._init=true;},propertyChangeHandler:function(type){if(this._init){if(type<2){this._zoomHandler();}}},destroy:function(){this._disableConnectors();this._init=false;},drawFeature:function(_c70){var _c71=this._gridLayer,geom=_c70.geometry,_c72=[];if(!geom){return;}_c72=_c71.getCellsInExtent((geom.type==="point")?{xmin:geom.x,ymin:geom.y,xmax:geom.x,ymax:geom.y}:geom.getExtent(),false).cells;var _c73=this._cellMap,i,cell,oid=_c70.attributes[this.featureLayer.objectIdField],_c74,row,col;for(i=0;i<_c72.length;i++){cell=_c72[i];_c74=cell.latticeID;row=cell.row;col=cell.col;if(_c74){cell=(_c73[_c74]=(_c73[_c74]||cell));}else{_c73[row]=_c73[row]||{};cell=(_c73[row][col]=(_c73[row][col]||cell));}cell.features=cell.features||[];cell.features.push(_c70);this._addFeatureIIf(oid,_c70);this._incRefCount(oid);}},suspend:function(){if(!this._init){return;}this._disableConnectors();},resume:function(){if(!this._init){return;}this._enableConnectors();this._zoomHandler();},refresh:function(){this._zoomHandler();},_initialize:function(){var map=this.map,_c75=this.featureLayer;var _c76=_c75._srInfo;this._gridLayer=new esri.layers._GridLayout(new esri.geometry.Point(_c76?_c76.valid[0]:map.extent.xmin,map.extent.ymax,map.spatialReference),{width:_c75._tileWidth,height:_c75._tileHeight},{width:map.width,height:map.height},_c76);this._ioQueue=[];if(!_c75.suspended){this._zoomHandler();this._enableConnectors();}},_enableConnectors:function(){var map=this.map;this._zoomConnect=dojo.connect(map,"onZoomEnd",this,this._zoomHandler);this._panConnect=dojo.connect(map,"onPanEnd",this,this._panHandler);this._resizeConnect=dojo.connect(map,"onResize",this,this._panHandler);},_disableConnectors:function(){dojo.disconnect(this._zoomConnect);dojo.disconnect(this._panConnect);dojo.disconnect(this._resizeConnect);},_zoomHandler:function(){this._processIOQueue(true);var _c77=this.featureLayer,map=this.map;if(_c77.suspended){return;}_c77._fireUpdateStart();this._clearIIf();var _c78=_c77._trackManager;if(_c78){_c78.clearTracks();}this._cellMap={};this._gridLayer.setResolution(map.extent);this._sendRequest();},_panHandler:function(){this.featureLayer._fireUpdateStart();this._sendRequest(this.featureLayer._resized&&arguments[0]);},_getRequestId:function(_c79,cell){var id="_"+_c79.name+_c79.layerId+_c79._ulid+"_"+cell.resolution+"_"+(cell.latticeID||(cell.row+"_"+cell.col));return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_sendRequest:function(_c7a){this._exceeds=false;var _c7b=this.featureLayer,map=this.map,_c7c=_c7a||map.extent,_c7d=this._gridLayer.getCellsInExtent(_c7c,_c7b.latticeTiling),_c7e=_c7d.cells;if(!_c7b.isEditable()){var _c7f=this._cellMap;_c7e=dojo.filter(_c7e,function(cell){if(cell.lattice){if(_c7f[cell.latticeID]){return false;}}else{if(_c7f[cell.row]&&_c7f[cell.row][cell.col]){return false;}}return true;});}var _c80=_c7b._getOutFields(),_c81=_c7b.getDefinitionExpression(),time=_c7b._getOffsettedTE(_c7b._mapTimeExtent),_c82=_c7b._usePatch,_c83=this._ioQueue,i,self=this,func=this._drawFeatures,cell,_c84,_c85;this._pending=this._pending||0;for(i=0;i<_c7e.length;i++){cell=_c7e[i];_c84=new esri.tasks.Query();_c84.geometry=cell.extent||cell.lattice;_c84.outFields=_c80;_c84.where=_c81;if(_c7b.latticeTiling&&cell.extent){_c84.spatialRelationship=esri.tasks.Query.SPATIAL_REL_CONTAINS;}_c84.returnGeometry=true;_c84.timeExtent=time;_c84.maxAllowableOffset=_c7b._maxOffset;if(_c7b._ts){_c84._ts=(new Date()).getTime();}_c85=null;if(_c82){_c85=this._getRequestId(_c7b,cell);if(this._isPending(_c85)){continue;}}this._pending++;_c83.push(_c7b._task.execute(_c84,function(){var _c86=cell;return function(_c87){func.apply(self,[_c87,_c86]);};}.call(this),this._queryErrorHandler,_c85));}this._removeOldCells(_c7c);this._endCheck();},_drawFeatures:function(_c88,cell){this._exceeds=this._exceeds||_c88.exceededTransferLimit;this._finalizeIO();var _c89=this.featureLayer,map=this.map,_c8a=map.extent,_c8b=cell.extent,row=cell.row,col=cell.col,_c8c=_c89.objectIdField,_c8d=_c88.features,_c8e=this._gridLayer,_c8f=this._cellMap,i,len,_c90=cell.latticeID,_c91=_c90?_c8f[_c90]:(_c8f[row]&&_c8f[row][col]);if((cell.resolution!=_c8e._resolution)||(_c90?(_c90!==_c8e.getLatticeID(_c8a)):(!_c8e.intersects(_c8b,_c8a)))){if(_c91){this._removeCell(row,col,_c90);}}else{if(_c91){this._updateCell(_c91,_c8d);}else{cell.features=_c8d;if(_c90){_c8f[_c90]=cell;}else{_c8f[row]=_c8f[row]||{};_c8f[row][col]=cell;}len=_c8d.length;for(i=0;i<len;i++){var _c92=_c8d[i];var oid=_c92.attributes[_c8c];this._addFeatureIIf(oid,_c92);this._incRefCount(oid);}}}this._endCheck();},_queryErrorHandler:function(err){this._finalizeIO();this.featureLayer._errorHandler(err);this._endCheck(true);},_finalizeIO:function(){this._purgeRequests();this._pending--;},_endCheck:function(_c93){if(this._pending===0){this._processIOQueue();var _c94=this.featureLayer,_c95=_c94._trackManager;if(_c95){_c95.clearTracks();_c95.addFeatures(_c94.graphics);if(_c94._ager){dojo.forEach(_c94.graphics,function(_c96){if(_c96._shape){_c94._repaint(_c96);}});}_c95.moveLatestToFront();_c95.drawTracks();}this.featureLayer._fireUpdateEnd(_c93&&new Error("FeatureLayer: "+esri.bundle.layers.FeatureLayer.updateError),this._exceeds?{queryLimitExceeded:true}:null);if(this._exceeds){_c94.onQueryLimitExceeded();}}},_processIOQueue:function(_c97){this._ioQueue=dojo.filter(this._ioQueue,function(dfd){var keep=dfd.fired>-1?false:true;return keep;});if(_c97){dojo.forEach(this._ioQueue,this._cancelPendingRequest);}},_removeOldCells:function(_c98){var _c99=this._cellMap,_c9a=this._gridLayer,_c9b,_c9c;for(_c9b in _c99){if(_c99[_c9b]){var row=_c99[_c9b],_c9d=row.latticeID,_c9e=0,_c9f=0;if(_c9d){_c9e++;if(_c9d!==_c9a.getLatticeID(_c98)){this._removeCell(null,null,_c9d);_c9f++;}}else{for(_c9c in row){if(row[_c9c]){_c9e++;var _ca0=row[_c9c].extent;if(!_c9a.intersects(_ca0,_c98)){this._removeCell(_c9b,_c9c);_c9f++;}}}}if(_c9f===_c9e){delete _c99[_c9b];}}}},_updateCell:function(cell,_ca1){var _ca2=this.featureLayer,_ca3=_ca2.objectIdField,_ca4=_ca2._selectedFeatures,i,len=_ca1.length;cell.features=cell.features||[];for(i=0;i<len;i++){var _ca5=_ca1[i];var oid=_ca5.attributes[_ca3];var _ca6=this._addFeatureIIf(oid,_ca5);if(_ca6===_ca5){this._incRefCount(oid);cell.features.push(_ca6);}else{if(!(oid in _ca4)){_ca6.setGeometry(_ca5.geometry);_ca6.setAttributes(_ca5.attributes);}}}},_removeCell:function(row,col,_ca7){var _ca8=this._cellMap,_ca9=this.featureLayer,_caa=_ca9.objectIdField;var cell=_ca7?_ca8[_ca7]:(_ca8[row]&&_ca8[row][col]);if(cell){if(_ca7){delete _ca8[_ca7];}else{delete _ca8[row][col];}var _cab=cell.features,i;for(i=0;i<_cab.length;i++){var _cac=_cab[i];var oid=_cac.attributes[_caa];this._decRefCount(oid);if(oid in _ca9._selectedFeatures){continue;}this._removeFeatureIIf(oid);}}}});dojo.declare("esri.layers._GridLayout",null,{constructor:function(_cad,_cae,_caf,_cb0){this.origin=_cad;this.cellWidth=_cae.width;this.cellHeight=_cae.height;this.mapWidth=_caf.width;this.mapHeight=_caf.height;this.srInfo=_cb0;},setResolution:function(_cb1){this._resolution=(_cb1.xmax-_cb1.xmin)/this.mapWidth;if(this.srInfo){var _cb2=Math.round((2*this.srInfo.valid[1])/this._resolution),_cb3=Math.round(_cb2/this.cellWidth);this._frameStats=[_cb3,0,_cb3-1];}},getCellCoordinates:function(_cb4){var res=this._resolution,_cb5=this.origin;return {row:Math.floor((_cb5.y-_cb4.y)/(this.cellHeight*res)),col:Math.floor((_cb4.x-_cb5.x)/(this.cellWidth*res))};},normalize:function(col){var _cb6=this._frameStats;if(_cb6){var _cb7=_cb6[0],m180=_cb6[1],p180=_cb6[2];if(col<m180){col=col%_cb7;col=col<m180?col+_cb7:col;}else{if(col>p180){col=col%_cb7;}}}return col;},intersects:function(_cb8,_cb9){var _cba=this.srInfo;if(_cba){return dojo.some(_cb9._getParts(_cba),function(_cbb){return _cb8.intersects(_cbb.extent);});}else{return _cb8.intersects(_cb9);}},getCellExtent:function(row,col){var res=this._resolution,_cbc=this.origin,_cbd=this.cellWidth,_cbe=this.cellHeight;return new esri.geometry.Extent((col*_cbd*res)+_cbc.x,_cbc.y-((row+1)*_cbe*res),((col+1)*_cbd*res)+_cbc.x,_cbc.y-(row*_cbe*res),new esri.SpatialReference(_cbc.spatialReference.toJson()));},getLatticeID:function(_cbf){var _cc0=this.getCellCoordinates({x:_cbf.xmin,y:_cbf.ymax}),_cc1=this.getCellCoordinates({x:_cbf.xmax,y:_cbf.ymin}),_cc2=_cc0.row,_cc3=_cc1.row,_cc4=this.normalize(_cc0.col),_cc5=this.normalize(_cc1.col);return _cc2+"_"+_cc3+"_"+_cc4+"_"+_cc5;},sorter:function(a,b){return (a<b)?-1:1;},getCellsInExtent:function(_cc6,_cc7){var _cc8=this.getCellCoordinates({x:_cc6.xmin,y:_cc6.ymax}),_cc9=this.getCellCoordinates({x:_cc6.xmax,y:_cc6.ymin}),_cca=_cc8.row,_ccb=_cc9.row,_ccc=_cc8.col,_ccd=_cc9.col,_cce=[],i,j,nj,_ccf=[],_cd0=[],len,xmin,xmax,ymin,ymax,_cd1=[],_cd2,_cd3;for(i=_cca;i<=_ccb;i++){for(j=_ccc;j<=_ccd;j++){nj=this.normalize(j);_cc6=this.getCellExtent(i,nj);_cce.push({row:i,col:nj,extent:_cc6,resolution:this._resolution});if(_cc7){_ccf.push(_cc6.xmin,_cc6.xmax);_cd0.push(_cc6.ymin,_cc6.ymax);}}}_ccc=this.normalize(_ccc);_ccd=this.normalize(_ccd);_ccf.sort(this.sorter);_cd0.sort(this.sorter);len=_ccf.length;for(i=len-1;i>=0;i--){if(i<(len-1)){if(_ccf[i]===_ccf[i+1]){_ccf.splice(i,1);}}}len=_cd0.length;for(i=len-1;i>=0;i--){if(i<(len-1)){if(_cd0[i]===_cd0[i+1]){_cd0.splice(i,1);}}}if(_ccf.length&&_cd0.length){xmin=_ccf[0];xmax=_ccf[_ccf.length-1];ymin=_cd0[0];ymax=_cd0[_cd0.length-1];len=_ccf.length;for(i=0;i<len;i++){_cd1.push([[_ccf[i],ymax],[_ccf[i],ymin]]);}len=_cd0.length;for(i=0;i<len;i++){_cd1.push([[xmin,_cd0[i]],[xmax,_cd0[i]]]);}_cd2=new esri.geometry.Polyline({paths:_cd1,spatialReference:this.origin.spatialReference.toJson()});_cd3=_cca+"_"+_ccb+"_"+_ccc+"_"+_ccd;_cce.push({latticeID:_cd3,lattice:_cd2,resolution:this._resolution});}return {minRow:_cca,maxRow:_ccb,minCol:_ccc,maxCol:_ccd,cells:_cce};}});dojo.declare("esri.layers._TrackManager",null,{constructor:function(_cd4){this.layer=_cd4;this.trackMap={};},initialize:function(map){this.map=map;var _cd5=this.layer,_cd6=_cd5.renderer.trackRenderer;if(_cd6&&(_cd5.geometryType==="esriGeometryPoint")){var _cd7=(this.container=new esri.layers._GraphicsLayer({id:_cd5.id+"_tracks",_child:true}));_cd7._setMap(map,_cd5._div);_cd7.setRenderer(_cd6);}},addFeatures:function(_cd8){var tkid,_cd9=this.trackMap,_cda=this.layer,_cdb=_cda._trackIdField;dojo.forEach(_cd8,function(_cdc){var _cdd=_cdc.attributes;tkid=_cdd[_cdb];var ary=(_cd9[tkid]=(_cd9[tkid]||[]));ary.push(_cdc);});var _cde=_cda._startTimeField,_cdf=_cda.objectIdField;var _ce0=function(a,b){var _ce1=a.attributes[_cde],_ce2=b.attributes[_cde];if(_ce1===_ce2){return (a.attributes[_cdf]<b.attributes[_cdf])?-1:1;}else{return (_ce1<_ce2)?-1:1;}};for(tkid in _cd9){_cd9[tkid].sort(_ce0);}},drawTracks:function(){var _ce3=this.container;if(!_ce3){return;}var _ce4=this.trackMap,sr=this.map.spatialReference,tkid,ary,path,i,_ce5,_ce6=this.layer._trackIdField,_ce7;for(tkid in _ce4){ary=_ce4[tkid];path=[];for(i=ary.length-1;i>=0;i--){_ce5=ary[i].geometry;if(_ce5){path.push([_ce5.x,_ce5.y]);}}_ce7={};_ce7[_ce6]=tkid;if(path.length>0){_ce3.add(new esri.Graphic(new esri.geometry.Polyline({paths:[path],spatialReference:sr}),null,_ce7));}}},moveLatestToFront:function(){dojo.forEach(this.getLatestObservations(),function(_ce8){var _ce9=_ce8._shape;_ce9&&_ce9._moveToFront();this._repaint(_ce8,null,true);},this.layer);},getLatestObservations:function(){var _cea=[];if(!this.layer.renderer.latestObservationRenderer){return _cea;}var _ceb=this.trackMap,tkid;for(tkid in _ceb){var ary=_ceb[tkid];_cea.push(ary[ary.length-1]);}return _cea;},clearTracks:function(){var _cec=this.getLatestObservations();this.trackMap={};var _ced=this.container;if(_ced){_ced.clear();}dojo.forEach(_cec,function(_cee){this._repaint(_cee,null,true);},this.layer);},isLatestObservation:function(_cef){var _cf0=this.layer._trackIdField;var _cf1=this.trackMap[_cef.attributes[_cf0]];if(_cf1){return (_cf1[_cf1.length-1]===_cef);}return false;},destroy:function(){var _cf2=this.container;if(_cf2){_cf2.clear();_cf2._unsetMap(this.map,this.layer._div);this.container=null;}this.map=null;this.layer=null;this.trackMap=null;}});});},"esri/virtualearth/VETiledLayer":function(){define(["dijit","dojo","dojox","dojo/require!esri/utils,esri/layers/tiled,esri/geometry,dojo/string"],function(_cf3,dojo,_cf4){dojo.provide("esri.virtualearth.VETiledLayer");dojo.require("esri.utils");dojo.require("esri.layers.tiled");dojo.require("esri.geometry");dojo.require("dojo.string");dojo.declare("esri.virtualearth.VETiledLayer",esri.layers.TiledMapServiceLayer,{constructor:function(_cf5){try{_cf5=dojo.mixin({bingMapsKey:null,culture:"en-US"},_cf5||{});var _cf6=window.location.protocol;if(_cf6==="file:"){_cf6="http:";}this.url=_cf6+"//dev.virtualearth.net/REST/v1";this._url=esri.urlToObject(this.url);this.spatialReference=new esri.SpatialReference({wkid:102100});this.tileInfo=new esri.layers.TileInfo({rows:256,cols:256,dpi:96,origin:{x:-20037508.342787,y:20037508.342787},spatialReference:{wkid:102100},lods:[{level:1,resolution:78271.5169639999,scale:295828763.795777},{level:2,resolution:39135.7584820001,scale:147914381.897889},{level:3,resolution:19567.8792409999,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:0.597164283559817,scale:2256.994353},{level:19,resolution:0.298582141647617,scale:1128.497176}]});this.initialExtent=(this.fullExtent=new esri.geometry.Extent(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,new esri.SpatialReference({wkid:102100})));dojo.mixin(this,_cf5);this.hasAttributionData=this.showAttribution;this._initLayer=dojo.hitch(this,this._initLayer);this._errorHandler=dojo.hitch(this,this._errorHandler);this._getTileInfo=dojo.hitch(this,this._getTileInfo);if(this.bingMapsKey){this._getTileInfo();}else{throw new Error(esri.bundle.virtualearth.vetiledlayer.bingMapsKeyNotSpecified);}}catch(e){this.onError(e);throw e;}},_unsetMap:function(map,_cf7){this.inherited("_unsetMap",arguments);},_getTileInfo:function(){if(!this.mapStyle){return;}var url=this._url.path+"/Imagery/Metadata/"+this.mapStyle;if(this.bingMapsKey){var info=this.resourceInfo;if(!this.loaded&&info){this._initLayer(info);}else{esri.request({url:url,content:dojo.mixin({},{key:this.bingMapsKey,ss:true,c:this.culture,include:this.hasAttributionData?"imageryProviders":null}),callbackParamName:"jsonp",load:this._initLayer,error:this._errorHandler});}}},_initLayer:function(_cf8,io){try{this.resourceInfo=dojo.toJson(_cf8);var _cf9=_cf8.resourceSets[0].resources[0];var _cfa=_cf9.imageUrl.replace("{","${");this.tileServers=dojo.map(_cf9.imageUrlSubdomains,function(_cfb){var _cfc=window.location.protocol;if(_cfc==="file:"){_cfc="http:";}return dojo.string.substitute(_cfa,{subdomain:_cfb}).replace("http:",_cfc);});this._tsLength=this.tileServers.length;if(!this.loaded){this.copyright=this.copyright||"&copy; 2012 Microsoft Corporation and its data suppliers";this.loaded=true;this.onLoad(this);var _cfd=this.loadCallback;if(_cfd){delete this.loadCallback;_cfd(this);}}else{this.refresh();this.onMapStyleChange();}}catch(e){this.onError(e);}},getAttributionData:function(){var dfd=new dojo.Deferred(),_cfe=dojo.fromJson(this.resourceInfo),_cff;if(this.hasAttributionData&&_cfe){_cff=dojo.getObject("resourceSets.0.resources.0.imageryProviders",false,_cfe);}if(_cff){dfd.callback({contributors:_cff});}else{var err=new Error("Layer does not have attribution data");err.log=dojo.config.isDebug;dfd.errback(err);}return dfd;},getTileUrl:function(_d00,row,col){var _d01=this.tileServers[row%this._tsLength],_d02=_d01.replace(/\{/g,"${");return dojo.string.substitute(_d02,{quadkey:this._getQuadKey(_d00,row,col),culture:this.culture,token:this.bingMapsKey});},_getQuadKey:function(_d03,row,col){var _d04="",_d05,mask,i;for(i=_d03;i>0;i--){_d05="0";mask=1<<(i-1);if((col&mask)!=0){_d05++;}if((row&mask)!=0){_d05++;_d05++;}_d04=_d04+_d05;}return _d04;},setMapStyle:function(_d06){this.mapStyle=_d06;this._getTileInfo();},setCulture:function(_d07){this.culture=_d07;this._getTileInfo();},setBingMapsKey:function(_d08){this.bingMapsKey=_d08;},onMapStyleChange:function(){}});dojo.mixin(esri.virtualearth.VETiledLayer,{MAP_STYLE_AERIAL:"aerial",MAP_STYLE_AERIAL_WITH_LABELS:"aerialWithLabels",MAP_STYLE_ROAD:"road"});});},"dojox/charting/plot2d/Bubble":function(){define("dojox/charting/plot2d/Bubble",["dojo/_base/lang","dojo/_base/declare","dojo/_base/array","./Base","./common","dojox/lang/functional","dojox/lang/functional/reversed","dojox/lang/utils","dojox/gfx/fx"],function(lang,_d09,arr,Base,dc,df,dfr,du,fx){var _d0a=dfr.lambda("item.purgeGroup()");return _d09("dojox.charting.plot2d.Bubble",Base,{defaultParams:{hAxis:"x",vAxis:"y",animate:null},optionalParams:{stroke:{},outline:{},shadow:{},fill:{},font:"",fontColor:""},constructor:function(_d0b,_d0c){this.opt=lang.clone(this.defaultParams);du.updateWithObject(this.opt,_d0c);du.updateWithPattern(this.opt,_d0c,this.optionalParams);this.series=[];this.hAxis=this.opt.hAxis;this.vAxis=this.opt.vAxis;this.animate=this.opt.animate;},render:function(dim,_d0d){if(this.zoom&&!this.isDataDirty()){return this.performZoom(dim,_d0d);}this.resetEvents();this.dirty=this.isDirty();if(this.dirty){arr.forEach(this.series,_d0a);this._eventSeries={};this.cleanGroup();var s=this.group;df.forEachRev(this.series,function(item){item.cleanGroup(s);});}var t=this.chart.theme,ht=this._hScaler.scaler.getTransformerFromModel(this._hScaler),vt=this._vScaler.scaler.getTransformerFromModel(this._vScaler),_d0e=this.events();for(var i=this.series.length-1;i>=0;--i){var run=this.series[i];if(!this.dirty&&!run.dirty){t.skip();this._reconnectEvents(run.name);continue;}run.cleanGroup();if(!run.data.length){run.dirty=false;t.skip();continue;}if(typeof run.data[0]=="number"){console.warn("dojox.charting.plot2d.Bubble: the data in the following series cannot be rendered as a bubble chart; ",run);continue;}var _d0f=t.next("circle",[this.opt,run]),s=run.group,_d10=arr.map(run.data,function(v,i){return v?{x:ht(v.x)+_d0d.l,y:dim.height-_d0d.b-vt(v.y),radius:this._vScaler.bounds.scale*(v.size/2)}:null;},this);var _d11=null,_d12=null,_d13=null;if(_d0f.series.shadow){_d13=arr.map(_d10,function(item){if(item!==null){var _d14=t.addMixin(_d0f,"circle",item,true),_d15=_d14.series.shadow;var _d16=s.createCircle({cx:item.x+_d15.dx,cy:item.y+_d15.dy,r:item.radius}).setStroke(_d15).setFill(_d15.color);if(this.animate){this._animateBubble(_d16,dim.height-_d0d.b,item.radius);}return _d16;}return null;},this);if(_d13.length){run.dyn.shadow=_d13[_d13.length-1].getStroke();}}if(_d0f.series.outline){_d12=arr.map(_d10,function(item){if(item!==null){var _d17=t.addMixin(_d0f,"circle",item,true),_d18=dc.makeStroke(_d17.series.outline);_d18.width=2*_d18.width+_d0f.series.stroke.width;var _d19=s.createCircle({cx:item.x,cy:item.y,r:item.radius}).setStroke(_d18);if(this.animate){this._animateBubble(_d19,dim.height-_d0d.b,item.radius);}return _d19;}return null;},this);if(_d12.length){run.dyn.outline=_d12[_d12.length-1].getStroke();}}_d11=arr.map(_d10,function(item){if(item!==null){var _d1a=t.addMixin(_d0f,"circle",item,true),rect={x:item.x-item.radius,y:item.y-item.radius,width:2*item.radius,height:2*item.radius};var _d1b=this._plotFill(_d1a.series.fill,dim,_d0d);_d1b=this._shapeFill(_d1b,rect);var _d1c=s.createCircle({cx:item.x,cy:item.y,r:item.radius}).setFill(_d1b).setStroke(_d1a.series.stroke);if(this.animate){this._animateBubble(_d1c,dim.height-_d0d.b,item.radius);}return _d1c;}return null;},this);if(_d11.length){run.dyn.fill=_d11[_d11.length-1].getFill();run.dyn.stroke=_d11[_d11.length-1].getStroke();}if(_d0e){var _d1d=new Array(_d11.length);arr.forEach(_d11,function(s,i){if(s!==null){var o={element:"circle",index:i,run:run,shape:s,outline:_d12&&_d12[i]||null,shadow:_d13&&_d13[i]||null,x:run.data[i].x,y:run.data[i].y,r:run.data[i].size/2,cx:_d10[i].x,cy:_d10[i].y,cr:_d10[i].radius};this._connectEvents(o);_d1d[i]=o;}},this);this._eventSeries[run.name]=_d1d;}else{delete this._eventSeries[run.name];}run.dirty=false;}this.dirty=false;return this;},_animateBubble:function(_d1e,_d1f,size){fx.animateTransform(lang.delegate({shape:_d1e,duration:1200,transform:[{name:"translate",start:[0,_d1f],end:[0,0]},{name:"scale",start:[0,1/size],end:[1,1]},{name:"original"}]},this.animate)).play();}});});},"*noref":1}});require(["dojo/i18n"],function(i18n){i18n._preloadLocalizations("esri/arcgis/nls/utils",["nl-nl","en-us","da","fi-fi","pt-pt","hu","sk","sl","pl","ca","sv","zh-tw","ar","en-gb","he-il","de-de","ko-kr","ja-jp","ro","az","nb","ru","es-es","th","cs","it-it","pt-br","fr-fr","el","tr","zh-cn"]);});define("esri/arcgis/utils",["dijit","dojo","dojox","dojo/require!esri/map,esri/layers/agsimageservice,esri/layers/osm,esri/layers/FeatureLayer,esri/layers/KMLLayer,esri/layers/wms,esri/virtualearth/VETiledLayer,esri/tasks/geometry,dojo/DeferredList,esri/dijit/Popup,esri/arcgis/csv"],function(_d20,dojo,_d21){dojo.provide("esri.arcgis.utils");dojo.require("esri.map");dojo.require("esri.layers.agsimageservice");dojo.require("esri.layers.osm");dojo.require("esri.layers.FeatureLayer");dojo.require("esri.layers.KMLLayer");dojo.require("esri.layers.wms");dojo.require("esri.virtualearth.VETiledLayer");dojo.require("esri.tasks.geometry");dojo.require("dojo.DeferredList");dojo.require("esri.dijit.Popup");dojo.require("esri.arcgis.csv");(function(){var EAU=esri.arcgis.utils;EAU.arcgisUrl=location.protocol+"//www.arcgis.com/sharing/rest/content/items";String.prototype.endsWith=function(str){return (this.match(str+"$")==str);};EAU.getItem=function(_d22){if(EAU._arcgisUrl&&EAU._arcgisUrl.length>0){EAU.arcgisUrl=EAU._arcgisUrl;}var url=EAU.arcgisUrl+"/"+_d22;var _d23={},_d24=new dojo.Deferred();esri.request({url:url,content:{f:"json"},callbackParamName:"callback",load:function(_d25){_d23.item=_d25;esri.request({url:url+"/data",content:{f:"json"},callbackParamName:"callback",load:function(_d26){_d23.itemData=_d26;_d24.callback(_d23);},error:function(_d27){_d24.errback(_d27);}});},error:function(_d28){_d24.errback(_d28);}});return _d24;};EAU.createMap=function(arg1,_d29,_d2a){var _d2b=new dojo.Deferred();_d2a=_d2a||{};var _d2c=_d2a.infoTemplateClass;_d2a._clazz=(_d2c&&dojo.getObject(_d2c))||esri.dijit.PopupTemplate;if(dojo.isString(arg1)){EAU.getItem(arg1).addCallback(function(_d2d){EAU._getItemProps(_d2d,_d2a).addCallback(function(_d2e){EAU._getLayers(_d2e.itemData,_d2a).addCallback(dojo.hitch(null,EAU._preCreateMap,_d2e,_d29,_d2a,_d2b));});}).addErrback(dojo.hitch(_d2b,_d2b.errback));}else{EAU._getItemProps(arg1,_d2a).addCallback(function(_d2f){EAU._getLayers(_d2f.itemData,_d2a).addCallback(dojo.hitch(null,EAU._preCreateMap,_d2f,_d29,_d2a,_d2b));});}return _d2b;};EAU._arcgisUrl=null;EAU._getItemProps=function(_d30,_d31){var _d32=new dojo.Deferred();var _d33=_d30.itemData;var _d34=[];var _d35=[];dojo.forEach(_d33.operationalLayers,function(_d36){if(_d36.itemId&&!_d36.type){if(_d36.url.indexOf("/FeatureServer")>-1){_d35.push(_d36);_d34.push(EAU._getItemData(_d36));}else{if(!_d36.layers&&_d36.url.indexOf("/MapServer")>-1&&_d36.url.indexOf("/MapServer/")===-1){_d35.push(_d36);_d34.push(EAU._getItemData(_d36));}}}});if(_d34.length>0){var _d37=new dojo.DeferredList(_d34);_d37.addCallback(function(_d38){dojo.forEach(_d35,function(_d39,i){var _d3a=_d38[i][1];if(_d3a&&_d3a.layers){if(_d39.url.indexOf("/FeatureServer")>-1){dojo.forEach(_d3a.layers,function(_d3b){if(_d39.url.endsWith("/FeatureServer/"+_d3b.id)){_d39.itemProperties=_d3b;EAU._processFSItemProperties(_d39);}});}else{_d39.layers=_d3a.layers;}}});_d32.callback(_d30);});}else{_d32.callback(_d30);}return _d32;};EAU._getItemData=function(_d3c){var url=EAU.arcgisUrl+"/"+_d3c.itemId+"/data";var _d3d=esri.request({url:url,content:{f:"json"},callbackParamName:"callback"});return _d3d;};EAU._processFSItemProperties=function(_d3e){if(_d3e.itemProperties.layerDefinition){if(_d3e.layerDefinition){if(!_d3e.layerDefinition.drawingInfo){_d3e.layerDefinition.drawingInfo=_d3e.itemProperties.layerDefinition.drawingInfo;}if(!_d3e.layerDefinition.definitionExpression){_d3e.layerDefinition.definitionExpression=_d3e.itemProperties.layerDefinition.definitionExpression;}if(_d3e.layerDefinition.minScale===null){_d3e.layerDefinition.minScale=_d3e.itemProperties.layerDefinition.minScale;}if(_d3e.layerDefinition.maxScale===null){_d3e.layerDefinition.maxScale=_d3e.itemProperties.layerDefinition.maxScale;}}else{_d3e.layerDefinition=_d3e.itemProperties.layerDefinition;}}if(_d3e.itemProperties.popupInfo&&!_d3e.popupInfo&&!_d3e.disablePopup){_d3e.popupInfo=_d3e.itemProperties.popupInfo;}};EAU._getLayers=function(_d3f,_d40){var _d41=[];var _d42=[];var _d43=[];var _d44=new dojo.Deferred();dojo.forEach(_d3f.operationalLayers,function(_d45,_d46){if(_d45.featureCollection){dojo.forEach(_d45.featureCollection.layers,function(_d47,idx){var _d48=true;if(_d45.visibleLayers){if(dojo.indexOf(_d45.visibleLayers,idx)==-1){_d48=false;}}_d47.visibility=(_d45.visibility&&_d48);_d47.opacity=_d45.opacity;_d47.id=(_d45.id||("operational"+_d46))+"_"+idx;_d43.push(_d47);},this);}else{_d43.push(_d45);}});dojo.forEach(_d3f.baseMap.baseMapLayers,function(_d49,_d4a){_d49.baseMapLayer=true;_d49.id=_d49.id||("base"+_d4a);_d41.push(_d49);});dojo.forEach(_d43,function(_d4b,_d4c){_d4b.id=_d4b.id||("operational"+_d4c);_d41.push(_d4b);});dojo.forEach(_d41,function(_d4d){if(_d4d.url&&!_d4d.type){_d4d.deferredsPos=_d42.length;_d4d.errors=[];_d42.push(EAU._getServiceInfo(_d4d.url,_d4d.errors));}else{if(_d4d.url&&_d4d.type=="CSV"){_d4d.deferredsPos=_d42.length;_d42.push(esri.arcgis.csv.buildCSVFeatureCollection(_d4d));}}});if(_d42.length==0){var _d4e=EAU._getMapSR(_d41);_d41=EAU._buildLayerObjects(_d41,_d40,_d4e);_d44.callback(_d41);}else{var _d4f=new dojo.DeferredList(_d42);_d4f.addCallback(function(_d50){EAU._preBuildLayerObjects(_d50,_d41,_d40,_d42,_d44);});}return _d44;};EAU._preBuildLayerObjects=function(_d51,_d52,_d53,_d54,_d55){dojo.forEach(_d52,function(_d56,_d57){if(_d56.url&&!_d56.type){_d56.resourceInfo=_d51[_d56.deferredsPos][1];delete _d56.deferredsPos;}else{if(_d56.url&&_d56.type=="CSV"){_d56.featureCollection=_d54[_d56.deferredsPos].results[0];delete _d56.deferredsPos;}}});var _d58=EAU._getMapSR(_d52);var _d59=[];var _d5a=new dojo.Deferred();dojo.forEach(_d52,function(_d5b){if(_d5b.url&&_d5b.type=="CSV"){_d5b.deferredsPos=_d59.length;_d59.push(esri.arcgis.csv.projectFeatureCollection(_d5b.featureCollection,_d58));}});if(_d59.length==0){_d52=EAU._buildLayerObjects(_d52,_d53,_d58);_d55.callback(_d52);}else{var _d5c=new dojo.DeferredList(_d59);_d5c.addCallback(function(){dojo.forEach(_d52,function(_d5d){if(_d5d.url&&_d5d.type=="CSV"){_d5d.featureCollection=_d59[_d5d.deferredsPos].results[0];delete _d5d.deferredsPos;}});_d52=EAU._buildLayerObjects(_d52,_d53,_d58);_d55.callback(_d52);});}};EAU._buildLayerObjects=function(_d5e,_d5f,_d60){dojo.forEach(_d5e,function(_d61,_d62){if(_d61.url&&!_d61.type){if(_d62===0||_d5e[0].layerObject){_d61.layerObject=EAU._initLayer(_d61,_d5e,_d5f,_d60);}}else{if(_d61.url&&_d61.type=="CSV"){_d61.layerObject=EAU._initLayer(_d61,_d5e,_d5f,_d60);}else{_d61.layerObject=EAU._initLayer(_d61,_d5e,_d5f,_d60);}}});var _d63=dojo.filter(_d5e,function(lyr){return !lyr.isReference;});var _d64=dojo.filter(_d5e,function(lyr){return !!lyr.isReference;});_d5e=_d63.concat(_d64);return _d5e;};EAU._preCreateMap=function(_d65,_d66,_d67,_d68,_d69){try{var _d6a=_d67.mapOptions||{};_d67.mapOptions=_d6a;var card=_d65.item;var _d6b=[];dojo.forEach(_d69,function(_d6c){if(dojo.isArray(_d6c.layerObject)){dojo.forEach(_d6c.layerObject,function(l){_d6b.push(l);});}else{_d6b.push(_d6c.layerObject);}});if(!_d6b[0]){_d68.errback(new Error(esri.bundle.arcgis.utils.baseLayerError));return;}_d6b=dojo.filter(_d6b,esri._isDefined);if(card){if(card.extent){if(!_d6a.extent){var _d6d=new esri.geometry.Extent(card.extent[0][0],card.extent[0][1],card.extent[1][0],card.extent[1][1],new esri.SpatialReference({wkid:4326}));var _d6e=_d6b[0].spatialReference;if(_d6e.wkid===4326){_d6a.extent=_d6d;EAU._createMap(_d6b,_d69,_d65,_d66,_d67,_d68);}else{if(_d6e.wkid===102100||_d6e.wkid===102113||_d6e.wkid===3857){_d6d.xmin=Math.max(_d6d.xmin,-180);_d6d.xmax=Math.min(_d6d.xmax,180);_d6d.ymin=Math.max(_d6d.ymin,-89.99);_d6d.ymax=Math.min(_d6d.ymax,89.99);_d6a.extent=esri.geometry.geographicToWebMercator(_d6d);EAU._createMap(_d6b,_d69,_d65,_d66,_d67,_d68);}else{if(_d67.geometryServiceURL||esri.config.defaults.geometryService){var gs;if(_d67.geometryServiceURL){gs=new esri.tasks.GeometryService(_d67.geometryServiceURL);}else{gs=esri.config.defaults.geometryService;}gs.project([_d6d],_d6e,function(_d6f){var _d70=_d6f[0];_d6a.extent=_d6a.extent||_d70;EAU._createMap(_d6b,_d69,_d65,_d66,_d67,_d68);});}else{_d68.errback(new Error(esri.bundle.arcgis.utils.geometryServiceError));}}}}else{EAU._createMap(_d6b,_d69,_d65,_d66,_d67,_d68);}}else{EAU._createMap(_d6b,_d69,_d65,_d66,_d67,_d68);}}else{EAU._createMap(_d6b,_d69,_d65,_d66,_d67,_d68);}}catch(err){_d68.errback(err);}};EAU._getMapSR=function(_d71){var _d72=null;var _d73=_d71[0];if(_d73.url&&!_d73.type){if(_d73.resourceInfo.spatialReference){_d72=new esri.SpatialReference();if(_d73.resourceInfo.spatialReference.wkid){_d72.wkid=_d73.resourceInfo.spatialReference.wkid;}if(_d73.resourceInfo.spatialReference.wkt){_d72.wkt=_d73.resourceInfo.spatialReference.wkt;}}}else{if(_d73.type.indexOf("BingMaps")>-1||_d73.type=="OpenStreetMap"){_d72=new esri.SpatialReference({wkid:102100});}else{if(_d73.type=="WMS"){_d72=new esri.SpatialReference({wkid:_d73.spatialReferences[0]});}}}return _d72;};EAU._createMap=function(_d74,_d75,_d76,_d77,_d78,_d79){var _d7a=(_d78.mapOptions||{}),_d7b,_d7c;if(!_d7a.infoWindow){_d7b=new esri.dijit.Popup(null,dojo.create("div"));_d7a.infoWindow=_d7b;}if(!esri._isDefined(_d7a.showInfoWindowOnClick)){_d7a.showInfoWindowOnClick=false;}var map=new esri.Map(_d77,_d7a);if(_d78.ignorePopups){dojo.forEach(_d74,function(_d7d){delete _d7d.infoTemplate;});}if(!(_d78.ignorePopups||_d78.disableClickBehavior)){_d7c=dojo.connect(map,"onClick",EAU._showPopup);}dojo.connect(map,"onLayersAddResult",EAU._onLayersAddResult);map.addLayers(_d74);if(!_d78.ignorePopups){EAU._addSelectionLayers(_d74,map,_d78._clazz);}var _d7e=[];dojo.forEach(_d75,function(_d7f){_d7e=_d7e.concat(_d7f.errors);},this);_d79.callback({map:map,itemInfo:_d76,errors:_d7e,clickEventHandle:_d7c,clickEventListener:EAU._showPopup});};EAU._addSelectionLayers=function(_d80,map,_d81){var _d82=[];dojo.forEach(_d80,function(_d83){var _d84=_d83.__popups;if(_d84&&_d84.length>1&&_d83.version>=10){_d83.__deferredsPos=_d82.length;_d82.push(EAU._getLayersInfo(_d83));}});var _d85=[];if(_d82.length>0){var _d86=new dojo.DeferredList(_d82);_d86.addCallback(function(_d87){dojo.forEach(_d80,function(_d88){if(_d88.__popups&&_d88.__popups.length>0){if(_d88.__deferredsPos||_d88.__deferredsPos===0){var _d89=_d87[_d88.__deferredsPos][1];_d85=_d85.concat(EAU._createSelectionFeatureLayers(_d88,_d89.layers,_d81,map));delete _d88.__deferredsPos;}else{_d85=_d85.concat(EAU._createSelectionFeatureLayers(_d88,null,_d81,map));}}});map.addLayers(_d85);});}else{dojo.forEach(_d80,function(_d8a){if(_d8a.__popups&&_d8a.__popups.length>0){_d85=_d85.concat(EAU._createSelectionFeatureLayers(_d8a,null,_d81,map));}});map.addLayers(_d85);}};EAU._createSelectionFeatureLayers=function(_d8b,_d8c,_d8d,map){var url=_d8b.url;var _d8e=_d8b.__popups;var ids=_d8b.__popupIds;var urls=_d8b.__popupUrls;var _d8f=_d8b.__resourceInfo;var _d90=[];dojo.forEach(_d8e,function(_d91,_d92){var i,_d93=null;if(_d8c){for(i=0;i<_d8c.length;i++){if(_d8c[i].id===ids[_d92]){_d93=_d8c[i];break;}}}var _d94=url+"/"+ids[_d92];if(urls[_d92].length){_d94=urls[_d92];}var _d95=new esri.layers.FeatureLayer(EAU._checkUrl(_d94),{id:_d8b.id+"_"+ids[_d92],outFields:["*"],mode:esri.layers.FeatureLayer.MODE_SELECTION,infoTemplate:_d91&&new _d8d(_d91),drawMode:false,visible:_d8b.visible,resourceInfo:_d93,autoGeneralize:true});if(_d95.loaded){EAU._updateLayerScaleInfo(_d8f.layers,_d95);}else{dojo.connect(_d95,"onLoad",function(_d96){EAU._updateLayerScaleInfo(_d8f.layers,_d96);});}_d90.push(_d95);});if(_d90.length>0){var _d97=function(_d98,_d99){dojo.forEach(_d98,function(_d9a){if(_d99){_d9a.show();}else{_d9a.hide();}});};dojo.connect(_d8b,"onVisibilityChange",dojo.hitch(this,_d97,_d90));var _d9b=function(_d9c,_d9d,_d9e){if(_d9c.id===_d9e.id){dojo.forEach(_d9d,function(_d9f){map.removeLayer(_d9f);});}};dojo.connect(map,"onLayerRemove",dojo.hitch(this,_d9b,_d8b,_d90));}delete _d8b.__popups;delete _d8b.__popupIds;delete _d8b.__popupUrls;delete _d8b.__resourceInfo;return _d90;};EAU._getServiceInfo=function(url,_da0){var url2=EAU._checkUrl(url);return esri.request({url:url2,content:{f:"json"},callbackParamName:"callback",error:function(_da1,io){if(_da1.message){_da1.message+=" [url:"+url2+"]";}else{_da1.message="[url:"+url2+"]";}_da0.push(_da1);esri.config.defaults.io.errorHandler(_da1,io);}});};EAU._getLayersInfo=function(_da2){return esri.request({url:EAU._checkUrl(_da2.url+"/layers"),content:{f:"json"},callbackParamName:"callback",error:function(){}});};EAU._initLayer=function(_da3,_da4,_da5,_da6){var _da7,_da8=_da5._clazz;if(_da3.type==="OpenStreetMap"){_da7=new esri.layers.OpenStreetMapLayer({id:_da3.id});}else{if(_da3.type==="WMS"){var _da9=[];var _daa=[];dojo.forEach(_da3.layers,function(_dab){_daa.push(new esri.layers.WMSLayerInfo({name:_dab.name,title:_dab.title,legendURL:_dab.legendURL}));_da9.push(_dab.name);},this);if(_da3.visibleLayers){_da9=_da3.visibleLayers;}var _dac=new esri.geometry.Extent(_da3.extent[0][0],_da3.extent[0][1],_da3.extent[1][0],_da3.extent[1][1],new esri.SpatialReference({wkid:4326}));var _dad={extent:_dac,layerInfos:_daa,version:_da3.version,maxWidth:_da3.maxWidth,maxHeight:_da3.maxHeight,getMapUrl:_da3.mapUrl,spatialReferences:_da3.spatialReferences,title:_da3.title,copyright:_da3.copyright};_da7=new esri.layers.WMSLayer(_da3.url,{id:_da3.id,visibleLayers:_da9,format:"png",transparent:_da3.baseMapLayer?false:true,opacity:_da3.opacity,visible:(_da3.visibility!==null)?_da3.visibility:true,resourceInfo:_dad});_da7.spatialReference.wkid=_dad.spatialReferences[0];}else{if(_da3.type==="KML"){_da7=new esri.layers.KMLLayer(_da3.url,{id:_da3.id,visible:(_da3.visibility!==null)?_da3.visibility:true,outSR:_da6});dojo.connect(_da7,"onLoad",function(){var _dae=function(_daf){dojo.forEach(_daf,function(_db0){if(_db0.declaredClass==="esri.layers.FeatureLayer"||_db0.declaredClass==="esri.layers.MapImageLayer"){_db0.setOpacity(_da3.opacity);}else{if(_db0.declaredClass==="esri.layers.KMLLayer"){if(_db0.loaded){_dae(_db0.getLayers());}else{dojo.connect(_db0,"onLoad",dojo.hitch(this,function(lyr){_dae(lyr.getLayers());}));}}}});};if(_da3.opacity!==null){_dae(_da7.getLayers());}if(_da3.visibleFolders){dojo.forEach(_da7.folders,function(_db1){if(dojo.indexOf(_da3.visibleFolders,_db1.id)>-1){_da7.setFolderVisibility(_db1,true);}else{_da7.setFolderVisibility(_db1,false);}},this);}});}else{if(_da3.type=="CSV"&&_da3.url){_da7=new esri.layers.FeatureLayer(_da3.featureCollection,{infoTemplate:new esri.dijit.PopupTemplate(_da3.popupInfo?_da3.popupInfo:esri.arcgis.csv.generateDefaultPopupInfo(_da3.featureCollection)),id:_da3.id?_da3.id:null,outFields:["*"],visible:(_da3.visibility!==null)?_da3.visibility:true,opacity:_da3.opacity?_da3.opacity:1,autoGeneralize:true});}else{if(_da3.layerDefinition&&!_da3.url){var _db2=dojo.fromJson(dojo.toJson(_da3));delete _db2.id;delete _db2.opacity;delete _db2.visibility;_da7=new esri.layers.FeatureLayer(_db2,{id:_da3.id,opacity:_da3.opacity,visible:_da3.visibility,outFields:["*"],infoTemplate:_db2.popupInfo&&new _da8(_db2.popupInfo),autoGeneralize:true});}else{if(_da3.type==="BingMapsAerial"||_da3.type==="BingMapsRoad"||_da3.type==="BingMapsHybrid"){var _db3=esri.virtualearth.VETiledLayer.MAP_STYLE_AERIAL_WITH_LABELS;if(_da3.type==="BingMapsAerial"){_db3=esri.virtualearth.VETiledLayer.MAP_STYLE_AERIAL;}else{if(_da3.type==="BingMapsRoad"){_db3=esri.virtualearth.VETiledLayer.MAP_STYLE_ROAD;}}_da7=new esri.virtualearth.VETiledLayer({bingMapsKey:_da5.bingMapsKey,mapStyle:_db3,id:_da3.id});}else{if(_da3.resourceInfo&&_da3.resourceInfo.mapName){if(_da3.resourceInfo.singleFusedMapCache===true){if(!_da3.baseMapLayer){if(EAU._sameSpatialReferenceAsBasemap(_da3,_da4)){if(EAU._sameTilingSchemeAsBasemap(_da3,_da4)){_da7=EAU._loadAsCached(_da3);}else{_da7=EAU._loadAsDynamic(_da3);}}else{_da7=EAU._loadAsDynamic(_da3);}}else{_da7=EAU._loadAsCached(_da3);}}else{_da7=EAU._loadAsDynamic(_da3);}}else{if(_da3.resourceInfo&&_da3.resourceInfo.pixelSizeX){var _db4=new esri.layers.ImageServiceParameters();_db4.bandIds=_da3.bandIds;if(!_da3.bandIds&&_da3.resourceInfo.bandCount&&parseInt(_da3.resourceInfo.bandCount,10)>3){_db4.bandIds=[0,1,2];}_da7=new esri.layers.ArcGISImageServiceLayer(EAU._checkUrl(_da3.url),{resourceInfo:_da3.resourceInfo,opacity:_da3.opacity,visible:_da3.visibility,id:_da3.id,imageServiceParameters:_db4});}else{if(_da3.resourceInfo&&_da3.resourceInfo.type==="Feature Layer"){_da7=new esri.layers.FeatureLayer(EAU._checkUrl(_da3.url),{resourceInfo:_da3.resourceInfo,opacity:_da3.opacity,visible:_da3.visibility,id:_da3.id,mode:esri._isDefined(_da3.mode)?_da3.mode:esri.layers.FeatureLayer.MODE_ONDEMAND,outFields:["*"],infoTemplate:_da3.popupInfo&&new _da8(_da3.popupInfo),autoGeneralize:true});if(_da3.layerDefinition){if(_da3.layerDefinition.drawingInfo&&_da3.layerDefinition.drawingInfo.renderer){var _db5=esri.renderer.fromJson(_da3.layerDefinition.drawingInfo.renderer);_da7.setRenderer(_db5);}if(_da3.layerDefinition.definitionExpression){_da7.setDefinitionExpression(_da3.layerDefinition.definitionExpression);}if(esri._isDefined(_da3.layerDefinition.minScale)){_da7.minScale=_da3.layerDefinition.minScale;}if(esri._isDefined(_da3.layerDefinition.maxScale)){_da7.maxScale=_da3.layerDefinition.maxScale;}}}}}}}}}}}if(_da7){_da7.arcgisProps={title:_da3.title};}return _da7;};EAU._loadAsCached=function(_db6){var _db7=[];if(!_db6.displayLevels){_db7=dojo.map(_db6.resourceInfo.tileInfo.lods,function(lod){return lod.level;});}var _db8=new esri.layers.ArcGISTiledMapServiceLayer(EAU._checkUrl(_db6.url),{resourceInfo:_db6.resourceInfo,opacity:_db6.opacity,visible:_db6.visibility,displayLevels:_db6.displayLevels||_db7,id:_db6.id});EAU._processPopups(_db8,_db6);return _db8;};EAU._loadAsDynamic=function(_db9){var _dba=new esri.layers.ImageParameters();_dba.format="png24";if(_db9.resourceInfo&&_db9.resourceInfo.supportedImageFormatTypes&&_db9.resourceInfo.supportedImageFormatTypes.indexOf("PNG32")>-1){_dba.format="png32";}var _dbb=new esri.layers.ArcGISDynamicMapServiceLayer(EAU._checkUrl(_db9.url),{resourceInfo:_db9.resourceInfo,opacity:_db9.opacity,visible:_db9.visibility,id:_db9.id,imageParameters:_dba});if(!_db9.visibleLayers){var _dbc="";var _dbd=_dbb.layerInfos;dojo.forEach(_dbd,function(_dbe){if(_dbe.defaultVisibility){_dbc+=(_dbc.length>0?",":"")+_dbe.id;}});_db9.visibleLayers=_dbc;}var _dbf=EAU._getVisibleFeatureLayers(_dbb.layerInfos,_db9.visibleLayers);_dbb.setVisibleLayers(_dbf);if(_db9.layers&&_db9.layers.length>0){var _dc0=[];dojo.forEach(_db9.layers,function(_dc1){if(_dc1.layerDefinition&&_dc1.layerDefinition.definitionExpression){_dc0[_dc1.id]=_dc1.layerDefinition.definitionExpression;}},this);if(_dc0.length>0){_dbb.setLayerDefinitions(_dc0);}}EAU._processPopups(_dbb,_db9);return _dbb;};EAU._processPopups=function(_dc2,_dc3){var _dc4=_dc2.layerInfos;var _dc5=_dc3.layers;if(_dc5&&_dc4){var _dc6=[],ids=[],urls=[];dojo.forEach(_dc4,function(_dc7){var id=_dc7.id,i;if(!_dc7.subLayerIds&&dojo.indexOf(_dc2.visibleLayers,id)!==-1){for(i=0;i<_dc5.length;i++){var _dc8=_dc5[i];if(_dc8.id===id){ids.push(id);_dc6.push(_dc8.popupInfo);urls.push(_dc8.layerUrl||"");break;}}}});if(_dc6.length){_dc2.__popups=_dc6;_dc2.__popupIds=ids;_dc2.__popupUrls=urls;_dc2.__resourceInfo=_dc3.resourceInfo;}}};EAU._onLayersAddResult=function(_dc9){dojo.forEach(_dc9,function(_dca){var _dcb=_dca.layer;if(_dcb.toJson){var json=_dcb.toJson();if(json.featureSet&&_dcb.name.indexOf("Text")>-1){dojo.forEach(json.featureSet.features,function(_dcc,idx){if(_dcc.attributes.TEXT){var _dcd=_dcb.graphics[idx];_dcd.symbol.setText(_dcc.attributes.TEXT);if(_dcc.symbol.horizontalAlignment){_dcd.symbol.align=_dcc.symbol.horizontalAlignment;}_dcd.setSymbol(_dcd.symbol);_dcd.setAttributes(_dcc.attributes);}},this);}}});};EAU._sameSpatialReferenceAsBasemap=function(_dce,_dcf){var _dd0=[102113,102100,3857];var sp1=_dcf[0].layerObject.fullExtent.spatialReference;var sp2=new esri.SpatialReference(_dce.resourceInfo.fullExtent.spatialReference);if(dojo.toJson(sp1.toJson())===dojo.toJson(sp2.toJson())){return true;}else{if(dojo.some(_dd0,function(wkid){return wkid===sp2.wkid;})&&dojo.some(_dd0,function(wkid){return wkid===sp1.wkid;})){return true;}}return false;};EAU._sameTilingSchemeAsBasemap=function(_dd1,_dd2){if(!_dd2[0].layerObject.tileInfo){return false;}var _dd3=[];dojo.forEach(_dd2,function(_dd4){if(_dd4.baseMapLayer){if(_dd4.layerObject.tileInfo){_dd3=_dd3.concat(dojo.map(_dd4.layerObject.tileInfo.lods,function(lod){return lod.scale;}));}}});var _dd5=dojo.some(_dd1.resourceInfo.tileInfo.lods,function(lod){return dojo.some(_dd3,function(_dd6){return _dd6===lod.scale;});});return _dd5;};EAU._showPopup=function(evt){var map=this,_dd7=map.infoWindow,_dd8=evt.graphic;if(!map.loaded){return;}_dd7.hide();_dd7.clearFeatures();var _dd9=[];dojo.forEach(map.graphicsLayerIds,function(_dda){var _ddb=map.getLayer(_dda);if(_ddb&&_ddb.declaredClass.indexOf("FeatureLayer")!==-1&&_ddb.loaded&&_ddb.visible){_ddb.clearSelection();if(_ddb.infoTemplate&&!_ddb.suspended){_dd9.push(_ddb);}}});_dd8=(_dd8&&_dd8._getEffInfoTemplate())?_dd8:null;if(!_dd9.length&&!_dd8){return;}var _ddc=EAU._calculateClickTolerance(_dd9);var _ddd=evt.screenPoint,_dde=map.toMap(new esri.geometry.Point(_ddd.x-_ddc,_ddd.y+_ddc)),_ddf=map.toMap(new esri.geometry.Point(_ddd.x+_ddc,_ddd.y-_ddc)),_de0=new esri.geometry.Extent(_dde.x,_dde.y,_ddf.x,_ddf.y,map.spatialReference);var _de1=new esri.tasks.Query();_de1.geometry=_de0;_de1.timeExtent=map.timeExtent;var _de2=dojo.map(_dd9,function(_de3){var dfd=_de3.selectFeatures(_de1);dfd.addCallback(function(){var _de4=_de3.getSelectedFeatures();return _de4;});return dfd;});if(_dd8){var dfd=new dojo.Deferred();dfd.callback([_dd8]);_de2.splice(0,0,dfd);}var _de5=dojo.some(_de2,function(dfd){return dfd.fired===-1;});if(!_de5){var _de6=_dd8?1:0;dojo.forEach(_dd9,function(_de7){_de6=_de6+_de7.getSelectedFeatures().length;});if(!_de6){return;}}_dd7.setFeatures(_de2);_dd7.show(evt.mapPoint,{closestFirst:true});};EAU._calculateClickTolerance=function(_de8){var _de9=6;dojo.forEach(_de8,function(_dea){var _deb=_dea.renderer;if(_deb.declaredClass==="esri.renderer.SimpleRenderer"){var _dec=_deb.symbol;if(_dec&&_dec.xoffset){_de9=Math.max(_de9,Math.abs(_dec.xoffset));}if(_dec&&_dec.yoffset){_de9=Math.max(_de9,Math.abs(_dec.yoffset));}}else{if(_deb.declaredClass==="esri.renderer.UniqueValueRenderer"||_deb.declaredClass==="esri.renderer.ClassBreaksRenderer"){dojo.forEach(_deb.infos,function(info){var _ded=info.symbol;if(_ded&&_ded.xoffset){_de9=Math.max(_de9,Math.abs(_ded.xoffset));}if(_ded&&_ded.yoffset){_de9=Math.max(_de9,Math.abs(_ded.yoffset));}});}}});return _de9;};EAU._getVisibleFeatureLayers=function(_dee,_def){if(!_dee||!_def||_def.length===0){return [];}var _df0=","+_def+",";var _df1=[];var _df2="";var k,_df3=",";for(k=0;k<_dee.length;k++){if(_dee[k].subLayerIds!==null){if(_df0.indexOf(","+_dee[k].id+",")===-1||_df3.indexOf(","+_dee[k].id+",")>-1){_df3+=_dee[k].subLayerIds.toString()+",";}}else{if(_df0.indexOf(","+_dee[k].id+",")>-1&&_df3.indexOf(","+_dee[k].id+",")===-1){_df1.push(_dee[k].id);_df2=",";}}}return _df1;};EAU._updateLayerScaleInfo=function(_df4,_df5){if(_df5.version<=10.1&&_df4){var i,id=parseInt(_df5.url.substring(_df5.url.lastIndexOf("/")+1,_df5.url.length));for(i=_df4.length-1;i>=0;i--){if(_df4[i].id==id){if(_df5.minScale==0&&_df4[i].minScale>0){_df5.minScale=_df4[i].minScale;}else{if(_df5.minScale>0&&_df4[i].minScale==0){_df5.minScale=_df5.minScale;}else{if(_df5.minScale>0&&_df4[i].minScale>0){_df5.minScale=Math.min(_df5.minScale,_df4[i].minScale);}}}_df5.maxScale=Math.max(_df5.maxScale||0,_df4[i].maxScale||0);if(_df4[i].parentLayerId>-1){id=_df4[i].parentLayerId;}else{break;}}}}};EAU._checkUrl=function(url){if(location.protocol==="https:"&&(EAU._isHostedService(url)||EAU._isAgolService(url))){url=url.replace("http:","https:");}return url;};EAU._isHostedService=function(url){if(!url){return false;}var _df6=".arcgis.com/";var _df7=(new dojo._Url(EAU.arcgisUrl)).authority;return (url.indexOf(_df6)!==-1||url.indexOf(_df7)!==-1);};EAU._isAgolService=function(url){if(!url){return false;}return (url.indexOf("/services.arcgisonline.com/")!==-1||url.indexOf("/server.arcgisonline.com/")!==-1);};}());});