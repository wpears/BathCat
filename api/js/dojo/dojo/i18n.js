/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

//>>built
define("dojo/i18n",["./_base/kernel","require","./has","./_base/array","./_base/config","./_base/lang","./_base/xhr"],function(_1,_2,_3,_4,_5,_6,_7){var _8=_1.i18n={},_9=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,_a=function(_b,_c,_d,_e){for(var _f=[_d+_e],_10=_c.split("-"),_11="",i=0;i<_10.length;i++){_11+=(_11?"-":"")+_10[i];if(!_b||_b[_11]){_f.push(_d+_11+"/"+_e);}}return _f;},_12={},_13=_1.getL10nName=function(_14,_15,_16){_16=_16?_16.toLowerCase():_1.locale;_14="dojo/i18n!"+_14.replace(/\./g,"/");_15=_15.replace(/\./g,"/");return (/root/i.test(_16))?(_14+"/nls/"+_15):(_14+"/nls/"+_16+"/"+_15);},_17=function(_18,_19,_1a,_1b,_1c,_1d){_18([_19],function(_1e){var _1f=_12[_19+"/"]=_6.clone(_1e.root),_20=_a(!_1e._v1x&&_1e,_1c,_1a,_1b);_18(_20,function(){for(var i=1;i<_20.length;i++){_12[_20[i]]=_1f=_6.mixin(_6.clone(_1f),arguments[i]);}var _21=_19+"/"+_1c;_12[_21]=_1f;_1d&&_1d(_6.delegate(_1f));});});},_22=function(id,_23){var _24=_9.exec(id),_25=_24[1];return /^\./.test(_25)?_23(_25)+"/"+id.substring(_25.length):id;},_26=function(){},_27=function(id,_28,_29){var _2a=_9.exec(id),_2b=_2a[1]+"/",_2c=_2a[5]||_2a[4],_2d=_2b+_2c,_2e=(_2a[5]&&_2a[4]),_2f=_2e||_1.locale,_30=_2d+"/"+_2f;if(_2e){_26(_30);if(_12[_30]){_29(_12[_30]);}else{_17(_28,_2d,_2b,_2c,_2f,_29);}return;}var _31=_5.extraLocale||[];_31=_6.isArray(_31)?_31:[_31];_31.push(_2f);var _32=_31.length,_33;_4.forEach(_31,function(_34){_17(_28,_2d,_2b,_2c,_34,function(_35){if(_34==_2f){_33=_35;}if(!--_32){_29(_33);}});});};if(_3("dojo-unit-tests")){var _36=_8.unitTests=[];}true||_3.add("dojo-v1x-i18n-Api",1);if(1){var _37={},_38=new Function("bundle","__evalError","__checkForLegacyModules","__mid","var __amdResult, define = function(x){__amdResult= x;};"+"ret = [(function(){"+"try{eval(arguments[0]);}catch(e){}"+"if(__amdResult)return 0;"+"if((__checkForLegacyModules = __checkForLegacyModules(__mid)))return __checkForLegacyModules;"+"try{return eval('('+arguments[0]+')');}"+"catch(e){__evalError.e = e; return __evalError;}"+"})(bundle),__amdResult]; define = this.define; return ret;"),_39=function(url,_3a,_3b){if(_3a===_37){console.error("failed to evaluate i18n bundle; url="+url,_37.e);return {};}return _3a?(/nls\/[^\/]+\/[^\/]+$/.test(url)?_3a:{root:_3a,_v1x:1}):_3b;},_3c=function(_3d,_3e){var _3f=[];_4.forEach(_3d,function(mid){var url=_2.toUrl(mid+".js");if(_12[url]){_3f.push(_12[url]);}else{var _40=_2.syncLoadNls(mid);if(_40){_3f.push(_40);}else{_7.get({url:url,sync:true,load:function(_41){var _42=_38(_41,_37,_26,mid);_3f.push(_12[url]=_39(url,_42[0],_42[1]));},error:function(){_3f.push(_12[url]={});}});}}});_3e&&_3e.apply(null,_3f);},_43=_8.normalizeLocale=function(_44){var _45=_44?_44.toLowerCase():_1.locale;if(_45=="root"){_45="ROOT";}return _45;},_46=function(_47,_48){var _49=_47.split("-");while(_49.length){if(_48(_49.join("-"))){return true;}_49.pop();}return _48("ROOT");},_4a=function(mid){return _2.isXdUrl(_2.toUrl(mid+".js"));},_4b=0,_4c=[],_4d=function(){var _4e;while((_4e=_4c.pop())){_17.apply(null,_4e);if(_4b){break;}}},_4f=_17;_17=function(){if(_4b){_4c.push(arguments);return;}_4f.apply(this,arguments);};_26=function(_50){for(var _51,_52=_50.split("/"),_53=_1.global[_52[0]],i=1;_53&&i<_52.length-1;_53=_53[_52[i++]]){}if(_53){_51=_53[_52[i]];if(!_51){_51=_53[_52[i].replace(/-/g,"_")];}if(_51){_12[_50]=_51;}}return _51;};_8.getLocalization=function(_54,_55,_56){var _57,_58=_13(_54,_55,_56).substring(10);_27(_58,(1&&!_4a(_58)?_3c:_2),function(_59){_57=_59;});return _57;};_8._preloadLocalizations=function(_5a,_5b){function _5c(_5d){_5d=_43(_5d);_46(_5d,function(loc){for(var mid,i=0;i<_5b.length;i++){if(_5b[i]==loc){mid=_5a.replace(/\./g,"/")+"_"+loc;_4b++;(_4a(mid)?_2:_3c)([mid],function(){!--_4b&&_4d();});return true;}}return false;});};_5c();var _5e=_1.config.extraLocale||[];for(var i=0;i<_5e.length;i++){_5c(_5e[i]);}};if(_3("dojo-unit-tests")){_36.push(function(doh){doh.register("tests.i18n.unit",function(t){var _5f;_5f=_38("{prop:1}",_37);t.is({prop:1},_5f[0]);t.is(undefined,_5f[1]);_5f=_38("({prop:1})",_37);t.is({prop:1},_5f[0]);t.is(undefined,_5f[1]);_5f=_38("{'prop-x':1}",_37);t.is({"prop-x":1},_5f[0]);t.is(undefined,_5f[1]);_5f=_38("({'prop-x':1})",_37);t.is({"prop-x":1},_5f[0]);t.is(undefined,_5f[1]);_5f=_38("define({'prop-x':1})",_37);t.is(0,_5f[0]);t.is({"prop-x":1},_5f[1]);_5f=_38("define({'prop-x':1});",_37);t.is(0,_5f[0]);t.is({"prop-x":1},_5f[1]);_5f=_38("this is total nonsense and should throw an error",_37);t.is(_37,_5f[0]);t.is(undefined,_5f[1]);t.is({},_39("some/url",_5f[0],_5f[1]));});});}}return _6.mixin(_8,{dynamic:true,normalize:_22,load:_27,cache:function(mid,_60){_12[mid]=_60;}});});