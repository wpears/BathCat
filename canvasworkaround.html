<html>
<head>
</head>
<body>
<img id="im"></img>
<canvas id="can"></canvas>
<script>
var im=document.getElementById("im")
  , can=document.getElementById("can")
  , ctx=can.getContext('2d')
  , width
  , height
  ;

im.onload=function(){
  if(width!==im.width){
    width=im.width;
    height=im.height;
    can.width=width;
    can.height=height;
  }
  ctx.clearRect(0,0,width,height);
  ctx.drawImage(im,0,0);
}  
window.addEventListener("message",function(mess){
  if(mess.data[0]!=='{')
  im.src=mess.data;
});
</script>
</body>
</html>