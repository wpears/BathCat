var request = require('request');
var async = require('async');
var fs = require('fs');

var serverPath = 'http://js.arcgis.com/3.8amd/js/';
var localPath = '../../../api/js/';

function copyFile(path,cb){
  request(serverPath+path).pipe(fs.createWriteStream(localPath+path));
  cb();
}

var paths = [
  "dojo/dijit/layout/BorderContainer.js",
  "dojo/dijit/layout/ContentPane.js",
  "dgrid/Grid.js",
  "dgrid/editor.js",
  "dgrid/extensions/ColumnResizer.js",
  "dojo/dojo/_base/declare.js",
  "dojo/dojo/parser.js",
  "dojo/dojo/dom-construct.js",
  "dojo/dojo/dom.js",
  "dojo/dojo/query.js",
  "dojo/dojo/dom-class.js",
  "dojo/dojo/on.js",
  "dojo/dojo/ready.js",
  "dojo/dojo/aspect.js",
  "dojo/dojo/_base/Color.js",
  "dojo/dojo/has.js",
  "esri/map.js",
  "esri/SpatialReference.js",
  "esri/geometry/Extent.js",
  "esri/layers/FeatureLayer.js",
  "esri/layers/ArcGISDynamicMapServiceLayer.js",
  "esri/layers/ArcGISTiledMapServiceLayer.js",
  "esri/tasks/geometry.js",
  "esri/dijit/TimeSlider.js",
  "esri/TimeExtent.js",
  "esri/dijit/Scalebar.js",
  "esri/renderers/SimpleRenderer.js",
  "esri/symbols/SimpleLineSymbol.js",
  "esri/symbols/SimpleFillSymbol.js",
  "esri/symbols/SimpleMarkerSymbol.js",
  "esri/geometry/Point.js",
  "dojo/dojo/_base/kernel.js",
  "dojo/dojo/_base/lang.js",
  "dojo/dojo/_base/array.js",
  "dojo/dojo/_base/Deferred.js",
  "put-selector/put.js",
  "dojo/dojo/_base/sniff.js",
  "dojo/dijit/_Widget.js",
  "dojo/dijit/_Container.js",
  "dojo/dijit/layout/_ContentPaneResizeMixin.js",
  "dojo/dojo/string.js",
  "dojo/dojo/html.js",
  "dojo/dojo/i18n.js",
  "dojo/dojo/dom-attr.js",
  "dojo/dojo/_base/xhr.js",
  "dojo/dojo/when.js",
  "dgrid/List.js",
  "dgrid/util/misc.js",
  "dojo/dojo/sniff.js",
  "dojo/dojo/_base/window.js",
  "dojo/dojo/cookie.js",
  "dojo/dojo/dom-geometry.js",
  "dojo/dojo/dom-style.js",
  "dojo/dojo/keys.js",
  "dojo/dojo/touch.js",
  "dojo/dijit/_WidgetBase.js",
  "dojo/dijit/_TemplatedMixin.js",
  "dojo/dijit/layout/LayoutContainer.js",
  "dojo/dijit/layout/utils.js",
  "dojo/dojo/selector/_loader.js",
  "dojo/dojo/_base/config.js",
  "dojo/dojo/_base/html.js",
  "xstyle/css.js",
  "dojo/dojo/_base/url.js",
  "dojo/dojo/promise/all.js",
  "dojo/dojo/date/stamp.js",
  "dojo/dojo/Deferred.js",
  "dojo/dojo/_base/connect.js",
  "dojo/dojo/_base/json.js",
  "dojo/dojo/date/locale.js",
  "dojo/dojo/io-query.js",
  "esri/kernel.js",
  "esri/lang.js",
  "esri/request.js",
  "esri/deferredUtils.js",
  "esri/symbols/jsonUtils.js",
  "esri/renderers/UniqueValueRenderer.js",
  "esri/renderers/jsonUtils.js",
  "esri/tasks/QueryTask.js",
  "esri/tasks/query.js",
  "esri/tasks/FeatureSet.js",
  "esri/geometry/jsonUtils.js",
  "esri/geometry/normalizeUtils.js",
  "esri/layers/GraphicsLayer.js",
  "esri/layers/Field.js",
  "esri/layers/TimeInfo.js",
  "esri/layers/FeatureType.js",
  "esri/layers/FeatureTemplate.js",
  "esri/layers/FeatureEditResult.js",
  "esri/layers/LabelClass.js",
  "esri/layers/SnapshotMode.js",
  "esri/layers/OnDemandMode.js",
  "esri/layers/SelectionMode.js",
  "esri/layers/TrackManager.js",
  "esri/geometry/Geometry.js",
  "esri/geometry/webMercatorUtils.js",
  "esri/geometry/mathUtils.js",
  "esri/tasks/GeometryService.js",
  "esri/tasks/TrimExtendParameters.js",
  "esri/tasks/BufferParameters.js",
  "esri/tasks/AreasAndLengthsParameters.js",
  "esri/tasks/LengthsParameters.js",
  "esri/tasks/RelationParameters.js",
  "esri/tasks/DensifyParameters.js",
  "esri/tasks/GeneralizeParameters.js",
  "esri/tasks/OffsetParameters.js",
  "esri/tasks/DistanceParameters.js",
  "esri/tasks/ProjectParameters.js",
  "dojo/dojo/_base/event.js",
  "dojo/dijit/registry.js",
  "esri/config.js",
  "esri/sniff.js",
  "esri/_coremap.js",
  "esri/MapNavigationManager.js",
  "esri/urlUtils.js",
  "esri/layerUtils.js",
  "esri/geometry/scaleUtils.js",
  "esri/layers/DynamicMapServiceLayer.js",
  "esri/layers/ArcGISMapServiceLayer.js",
  "esri/layers/LayerTimeOptions.js",
  "esri/layers/ImageParameters.js",
  "esri/layers/DynamicLayerInfo.js",
  "esri/layers/LayerMapSource.js",
  "esri/layers/TiledMapServiceLayer.js",
  "esri/layers/TileInfo.js",
  "esri/renderers/Renderer.js",
  "dojo/dojox/gfx/_base.js",
  "esri/symbols/LineSymbol.js",
  "esri/symbols/FillSymbol.js",
  "esri/symbols/MarkerSymbol.js",
  "dojo/dojox/charting/Chart.js",
  "dojo/dojox/charting/themes/PurpleRain.js",
  "dojo/dojox/charting/axis2d/Default.js",
  "dojo/dojox/charting/plot2d/MarkersOnly.js",
  "dojo/dojox/charting/action2d/Tooltip.js",
  "dojo/dojox/charting/action2d/Magnify.js",
  "dojo/dojox/charting/widget/SelectableLegend.js",
  "esri/geometry/Polyline.js",
  "esri/dijit/Measurement.js",
  "esri/domUtils.js",
  "esri/units.js",
  "esri/WKIDUnitConversion.js",
  "esri/geometry/ScreenPoint.js",
  "esri/geometry/geodesicUtils.js",
  "esri/geometry/screenUtils.js",
  "dojo/dijit/_Templated.js",
  "dojo/dijit/form/HorizontalSlider.js",
  "dojo/dijit/form/HorizontalRule.js",
  "dojo/dijit/form/HorizontalRuleLabels.js",
  "dojo/dojox/timing/_base.js",
  "dojo/dojox/form/RangeSlider.js",
  "dojo/dojo/text.js",
  "esri/dijit/_EventedWidget.js",
  "dojo/dojo/promise/Promise.js",
  "dojo/dojo/errors/CancelError.js",
  "dojo/dijit/_OnDijitClickMixin.js",
  "dojo/dijit/_FocusMixin.js",
  "dojo/dojo/uacss.js",
  "dojo/dijit/hccss.js",
  "dojo/dijit/Viewport.js",
  "dojo/dojo/dom-prop.js",
  "dojo/dojo/json.js",
  "dojo/dojo/regexp.js",
  "dojo/dojo/dom-form.js",
  "dojo/dojo/request/watch.js",
  "dojo/dojo/request/xhr.js",
  "dojo/dojo/request/util.js",
  "dojo/dojo/cache.js",
  "dojo/dijit/_AttachMixin.js",
  "dojo/dijit/layout/_LayoutWidget.js",
  "dojo/dojo/selector/acme.js",
  "dojo/dojo/mouse.js",
  "xstyle/load-css.js",
  "dojo/dojo/topic.js",
  "xstyle/has-class.js",
  "dojo/dojo/promise/instrumentation.js",
  "dojo/dojo/date.js",
  "dojo/dojo/number.js",
  "esri/symbols/PictureMarkerSymbol.js",
  "esri/symbols/CartographicLineSymbol.js",
  "esri/symbols/PictureFillSymbol.js",
  "esri/symbols/TextSymbol.js",
  "esri/renderers/ClassBreaksRenderer.js",
  "esri/tasks/SpatialRelationship.js",
  "dojo/dojo/cldr/supplemental.js",
  "dojo/dojo/Stateful.js",
  "dojo/dijit/Destroyable.js",
  "esri/geometry/Polygon.js",
  "esri/geometry/Multipoint.js",
  "esri/graphic.js",
  "esri/graphicsUtils.js",
  "esri/layers/TimeReference.js",
  "dojo/dojo/io/script.js",
  "dojo/dojo/io/iframe.js",
  "esri/layers/RangeDomain.js",
  "esri/layers/CodedValueDomain.js",
  "esri/tasks/Task.js",
  "esri/layers/InheritedDomain.js",
  "esri/layers/RenderMode.js",
  "esri/layers/GridLayout.js",
  "dojo/dojox/gfx.js",
  "dojo/dojox/gfx/matrix.js",
  "esri/layers/layer.js",
  "dojo/dijit/main.js",
  "esri/layers/LayerInfo.js",
  "dojo/dojox/xml/parser.js",
  "esri/layers/MapImage.js",
  "esri/layers/LayerSource.js",
  "esri/layers/LayerDataSource.js",
  "dojo/dojo/_base/unload.js",
  "esri/Evented.js",
  "esri/fx.js",
  "esri/tileUtils.js",
  "esri/geometry/Rect.js",
  "esri/layers/LOD.js",
  "esri/layers/OpenStreetMapLayer.js",
  "esri/dijit/Popup.js",
  "esri/symbols/Symbol.js",
  "esri/symbols/Font.js",
  "esri/tasks/identify.js",
  "esri/tasks/IdentifyTask.js",
  "esri/tasks/IdentifyParameters.js",
  "dojo/dojox/collections/ArrayList.js",
  "dojo/dojox/charting/SimpleTheme.js",
  "dojo/dojox/charting/themes/common.js",
  "dojo/dojox/charting/plot2d/Default.js",
  "dojo/dijit/Tooltip.js",
  "dojo/dojox/charting/action2d/PlotAction.js",
  "dojo/dojox/lang/functional.js",
  "dojo/dojox/lang/functional/scan.js",
  "dojo/dojox/lang/functional/fold.js",
  "dojo/dojox/gfx/fx.js",
  "dojo/dojo/fx.js",
  "dojo/dojo/fx/easing.js",
  "esri/MouseEvents.js",
  "esri/TouchEvents.js",
  "esri/PointerEvents.js",
  "dojo/dojox/main.js",
  "dojo/dojox/charting/Element.js",
  "dojo/dojox/charting/Series.js",
  "dojo/dojox/charting/axis2d/common.js",
  "dojo/dojox/gfx/shape.js",
  "dojo/dojox/lang/functional/reversed.js",
  "dojo/dojox/charting/axis2d/Invisible.js",
  "dojo/dojox/charting/scaler/linear.js",
  "dojo/dojox/lang/utils.js",
  "dojo/dojox/charting/widget/Legend.js",
  "dojo/dijit/form/CheckBox.js",
  "dojo/dojox/charting/action2d/Highlight.js",
  "dojo/dijit/_WidgetsInTemplateMixin.js",
  "dojo/dojo/dnd/move.js",
  "dojo/dojo/_base/fx.js",
  "dojo/dojo/dnd/Moveable.js",
  "dojo/dojo/dnd/Mover.js",
  "dojo/dijit/_base/manager.js",
  "dojo/dijit/focus.js",
  "dojo/dijit/typematic.js",
  "dojo/dijit/form/Button.js",
  "dojo/dijit/form/_FormValueWidget.js",
  "dojo/dojo/request.js",
  "dojo/dojo/errors/create.js",
  "dojo/dijit/a11yclick.js",
  "dojo/dojo/hccss.js",
  "dojo/dojo/Evented.js",
  "dojo/dojo/window.js",
  "dojo/dojo/errors/RequestTimeoutError.js",
  "dojo/dojo/errors/RequestError.js",
  "dojo/dojo/request/handlers.js",
  "dojo/dijit/_Contained.js",
  "dojo/dijit/Menu.js",
  "dojo/dijit/MenuItem.js",
  "dojo/dijit/form/ToggleButton.js",
  "dojo/dijit/form/DropDownButton.js",
  "dojo/dijit/form/VerticalSlider.js",
  "dojo/dojox/fx.js",
  "dojo/dojo/promise/tracer.js",
  "dojo/dojo/request/script.js",
  "dojo/dojo/request/iframe.js",
  "esri/layers/Domain.js",
  "dojo/dojox/gfx/renderer.js",
  "esri/InfoTemplate.js",
  "esri/layers/TableDataSource.js",
  "esri/layers/QueryDataSource.js",
  "esri/layers/JoinDataSource.js",
  "esri/layers/RasterDataSource.js",
  "esri/InfoWindowBase.js",
  "esri/PopupBase.js",
  "dojo/dojo/NodeList-dom.js",
  "esri/tasks/IdentifyResult.js",
  "dojo/dojox/collections/_base.js",
  "dojo/dojox/gfx/gradutils.js",
  "dojo/dijit/place.js",
  "dojo/dijit/BackgroundIframe.js",
  "dojo/dojox/lang/functional/lambda.js",
  "dojo/dojox/lang/functional/array.js",
  "dojo/dojox/lang/functional/object.js",
  "dojo/dojox/charting/action2d/Base.js",
  "dojo/dojox/charting/axis2d/Base.js",
  "dojo/dijit/form/_CheckBoxMixin.js",
  "dojo/dojox/color/_base.js",
  "dojo/dojox/charting/scaler/common.js",
  "dojo/dojox/charting/plot2d/CartesianBase.js",
  "dojo/dojox/charting/plot2d/_PlotEvents.js",
  "dojo/dojox/charting/plot2d/common.js",
  "dojo/dijit/a11y.js",
  "dojo/dojo/dnd/common.js",
  "dojo/dojo/dnd/autoscroll.js",
  "dojo/dijit/form/_FormWidget.js",
  "dojo/dijit/form/_ButtonMixin.js",
  "dojo/dijit/form/_FormValueMixin.js",
  "dojo/dojo/request/default.js",
  "dojo/dijit/popup.js",
  "dojo/dijit/DropDownMenu.js",
  "dojo/dijit/_CssStateMixin.js",
  "dojo/dijit/form/_ToggleButtonMixin.js",
  "dojo/dijit/_HasDropDown.js",
  "dojo/dojox/fx/_base.js",
  "dojo/dojox/gfx/svg.js",
  "esri/layers/DataSource.js",
  "dojo/dojo/colors.js",
  "dojo/dojox/charting/plot2d/Base.js",
  "dojo/dojox/charting/scaler/primitive.js",
  "dojo/dijit/_MenuBase.js",
  "dojo/dijit/form/_FormWidgetMixin.js",
  "dojo/dijit/_KeyNavContainer.js",
  "dojo/dojox/gfx/path.js",
  "dojo/dijit/_KeyNavMixin.js"
]

async.each(paths,copyFile,function(err){if(err)throw new Error("ASYNC ERROR")})